var Vg=Object.defineProperty;var pf=n=>{throw TypeError(n)};var Wg=(n,e,t)=>e in n?Vg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var mf=(n,e,t)=>Wg(n,typeof e!="symbol"?e+"":e,t),Pu=(n,e,t)=>e.has(n)||pf("Cannot "+t);var $=(n,e,t)=>(Pu(n,e,"read from private field"),t?t.call(n):e.get(n)),Me=(n,e,t)=>e.has(n)?pf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ae=(n,e,t,r)=>(Pu(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Oe=(n,e,t)=>(Pu(n,e,"access private method"),t);var xo=(n,e,t,r)=>({set _(i){Ae(n,e,i,t)},get _(){return $(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,b={};function S(G,ie,re){this.props=G,this.context=ie,this.refs=b,this.updater=re||v}S.prototype.isReactComponent={},S.prototype.setState=function(G,ie){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ie,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=S.prototype;function T(G,ie,re){this.props=G,this.context=ie,this.refs=b,this.updater=re||v}var P=T.prototype=new x;P.constructor=T,C(P,S.prototype),P.isPureReactComponent=!0;var L=Array.isArray,k={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function U(G,ie,re,ye,me,ve){return re=ve.ref,{$$typeof:n,type:G,key:ie,ref:re!==void 0?re:null,props:ve}}function z(G,ie){return U(G.type,ie,void 0,void 0,void 0,G.props)}function N(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function K(G){var ie={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(re){return ie[re]})}var q=/\/+/g;function j(G,ie){return typeof G=="object"&&G!==null&&G.key!=null?K(""+G.key):ie.toString(36)}function J(){}function X(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(J,J):(G.status="pending",G.then(function(ie){G.status==="pending"&&(G.status="fulfilled",G.value=ie)},function(ie){G.status==="pending"&&(G.status="rejected",G.reason=ie)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function te(G,ie,re,ye,me){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var _e=!1;if(G===null)_e=!0;else switch(ve){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(G.$$typeof){case n:case e:_e=!0;break;case f:return _e=G._init,te(_e(G._payload),ie,re,ye,me)}}if(_e)return me=me(G),_e=ye===""?"."+j(G,0):ye,L(me)?(re="",_e!=null&&(re=_e.replace(q,"$&/")+"/"),te(me,ie,re,"",function(ke){return ke})):me!=null&&(N(me)&&(me=z(me,re+(me.key==null||G&&G.key===me.key?"":(""+me.key).replace(q,"$&/")+"/")+_e)),ie.push(me)),1;_e=0;var De=ye===""?".":ye+":";if(L(G))for(var Ie=0;Ie<G.length;Ie++)ye=G[Ie],ve=De+j(ye,Ie),_e+=te(ye,ie,re,ve,me);else if(Ie=m(G),typeof Ie=="function")for(G=Ie.call(G),Ie=0;!(ye=G.next()).done;)ye=ye.value,ve=De+j(ye,Ie++),_e+=te(ye,ie,re,ve,me);else if(ve==="object"){if(typeof G.then=="function")return te(X(G),ie,re,ye,me);throw ie=String(G),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return _e}function H(G,ie,re){if(G==null)return G;var ye=[],me=0;return te(G,ye,"","",function(ve){return ie.call(re,ve,me++)}),ye}function oe(G){if(G._status===-1){var ie=G._result;ie=ie(),ie.then(function(re){(G._status===0||G._status===-1)&&(G._status=1,G._result=re)},function(re){(G._status===0||G._status===-1)&&(G._status=2,G._result=re)}),G._status===-1&&(G._status=0,G._result=ie)}if(G._status===1)return G._result.default;throw G._result}var he=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function Ee(){}return react_production.Children={map:H,forEach:function(G,ie,re){H(G,function(){ie.apply(this,arguments)},re)},count:function(G){var ie=0;return H(G,function(){ie++}),ie},toArray:function(G){return H(G,function(ie){return ie})||[]},only:function(G){if(!N(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},react_production.Component=S,react_production.Fragment=t,react_production.Profiler=i,react_production.PureComponent=T,react_production.StrictMode=r,react_production.Suspense=c,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production.cache=function(G){return function(){return G.apply(null,arguments)}},react_production.cloneElement=function(G,ie,re){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ye=C({},G.props),me=G.key,ve=void 0;if(ie!=null)for(_e in ie.ref!==void 0&&(ve=void 0),ie.key!==void 0&&(me=""+ie.key),ie)!F.call(ie,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&ie.ref===void 0||(ye[_e]=ie[_e]);var _e=arguments.length-2;if(_e===1)ye.children=re;else if(1<_e){for(var De=Array(_e),Ie=0;Ie<_e;Ie++)De[Ie]=arguments[Ie+2];ye.children=De}return U(G.type,me,void 0,void 0,ve,ye)},react_production.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},react_production.createElement=function(G,ie,re){var ye,me={},ve=null;if(ie!=null)for(ye in ie.key!==void 0&&(ve=""+ie.key),ie)F.call(ie,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(me[ye]=ie[ye]);var _e=arguments.length-2;if(_e===1)me.children=re;else if(1<_e){for(var De=Array(_e),Ie=0;Ie<_e;Ie++)De[Ie]=arguments[Ie+2];me.children=De}if(G&&G.defaultProps)for(ye in _e=G.defaultProps,_e)me[ye]===void 0&&(me[ye]=_e[ye]);return U(G,ve,void 0,void 0,null,me)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(G){return{$$typeof:l,render:G}},react_production.isValidElement=N,react_production.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:oe}},react_production.memo=function(G,ie){return{$$typeof:h,type:G,compare:ie===void 0?null:ie}},react_production.startTransition=function(G){var ie=k.T,re={};k.T=re;try{var ye=G(),me=k.S;me!==null&&me(re,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(Ee,he)}catch(ve){he(ve)}finally{k.T=ie}},react_production.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},react_production.use=function(G){return k.H.use(G)},react_production.useActionState=function(G,ie,re){return k.H.useActionState(G,ie,re)},react_production.useCallback=function(G,ie){return k.H.useCallback(G,ie)},react_production.useContext=function(G){return k.H.useContext(G)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(G,ie){return k.H.useDeferredValue(G,ie)},react_production.useEffect=function(G,ie){return k.H.useEffect(G,ie)},react_production.useId=function(){return k.H.useId()},react_production.useImperativeHandle=function(G,ie,re){return k.H.useImperativeHandle(G,ie,re)},react_production.useInsertionEffect=function(G,ie){return k.H.useInsertionEffect(G,ie)},react_production.useLayoutEffect=function(G,ie){return k.H.useLayoutEffect(G,ie)},react_production.useMemo=function(G,ie){return k.H.useMemo(G,ie)},react_production.useOptimistic=function(G,ie){return k.H.useOptimistic(G,ie)},react_production.useReducer=function(G,ie,re){return k.H.useReducer(G,ie,re)},react_production.useRef=function(G){return k.H.useRef(G)},react_production.useState=function(G){return k.H.useState(G)},react_production.useSyncExternalStore=function(G,ie,re){return k.H.useSyncExternalStore(G,ie,re)},react_production.useTransition=function(){return k.H.useTransition()},react_production.version="19.0.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(n){function e(H,oe){var he=H.length;H.push(oe);e:for(;0<he;){var Ee=he-1>>>1,G=H[Ee];if(0<i(G,oe))H[Ee]=oe,H[he]=G,he=Ee;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var oe=H[0],he=H.pop();if(he!==oe){H[0]=he;e:for(var Ee=0,G=H.length,ie=G>>>1;Ee<ie;){var re=2*(Ee+1)-1,ye=H[re],me=re+1,ve=H[me];if(0>i(ye,he))me<G&&0>i(ve,ye)?(H[Ee]=ve,H[me]=he,Ee=me):(H[Ee]=ye,H[re]=he,Ee=re);else if(me<G&&0>i(ve,he))H[Ee]=ve,H[me]=he,Ee=me;else break e}}return oe}function i(H,oe){var he=H.sortIndex-oe.sortIndex;return he!==0?he:H.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],h=[],f=1,p=null,m=3,v=!1,C=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var oe=t(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=H)r(h),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=t(h)}}function L(H){if(b=!1,P(H),!C)if(t(c)!==null)C=!0,X();else{var oe=t(h);oe!==null&&te(L,oe.startTime-H)}}var k=!1,F=-1,U=5,z=-1;function N(){return!(n.unstable_now()-z<U)}function K(){if(k){var H=n.unstable_now();z=H;var oe=!0;try{e:{C=!1,b&&(b=!1,x(F),F=-1),v=!0;var he=m;try{t:{for(P(H),p=t(c);p!==null&&!(p.expirationTime>H&&N());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,m=p.priorityLevel;var G=Ee(p.expirationTime<=H);if(H=n.unstable_now(),typeof G=="function"){p.callback=G,P(H),oe=!0;break t}p===t(c)&&r(c),P(H)}else r(c);p=t(c)}if(p!==null)oe=!0;else{var ie=t(h);ie!==null&&te(L,ie.startTime-H),oe=!1}}break e}finally{p=null,m=he,v=!1}oe=void 0}}finally{oe?q():k=!1}}}var q;if(typeof T=="function")q=function(){T(K)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,J=j.port2;j.port1.onmessage=K,q=function(){J.postMessage(null)}}else q=function(){S(K,0)};function X(){k||(k=!0,q())}function te(H,oe){F=S(function(){H(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){C||v||(C=!0,X())},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(H){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var he=m;m=oe;try{return H()}finally{m=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var he=m;m=H;try{return oe()}finally{m=he}},n.unstable_scheduleCallback=function(H,oe,he){var Ee=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ee+he:Ee):he=Ee,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=he+G,H={id:f++,callback:oe,priorityLevel:H,startTime:he,expirationTime:G,sortIndex:-1},he>Ee?(H.sortIndex=he,e(h,H),t(c)===null&&H===t(h)&&(b?(x(F),F=-1):b=!0,te(L,he-Ee))):(H.sortIndex=G,e(c,H),C||v||(C=!0,X())),H},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(H){var oe=m;return function(){var he=m;m=oe;try{return H.apply(this,arguments)}finally{m=he}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(c,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(c,h,null,f)},reactDom_production.flushSync=function(c){var h=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=h,r.p=f,r.d.f()}},reactDom_production.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},reactDom_production.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},reactDom_production.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var f=h.as,p=l(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},reactDom_production.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},reactDom_production.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=l(f,h.crossOrigin);r.d.L(c,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},reactDom_production.preloadModule=function(c,h){if(typeof c=="string")if(h){var f=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},reactDom_production.requestFormReset=function(c){r.d.r(c)},reactDom_production.unstable_batchedUpdates=function(c,h){return c(h)},reactDom_production.useFormState=function(c,h,f){return o.H.useFormState(c,h,f)},reactDom_production.useFormStatus=function(){return o.H.useHostTransitionStatus()},reactDom_production.version="19.0.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var n=requireScheduler(),e=requireReact(),t=requireReactDom();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var a=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),v=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case c:return"Fragment";case l:return"Portal";case f:return"Profiler";case h:return"StrictMode";case b:return"Suspense";case S:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case v:return(s.displayName||"Context")+".Provider";case m:return(s._context.displayName||"Context")+".Consumer";case C:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case x:return u=s.displayName||null,u!==null?u:z(s.type)||"Memo";case T:u=s._payload,s=s._init;try{return z(s(u))}catch{}}return null}var N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=Object.assign,q,j;function J(s){if(q===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);q=u&&u[1]||"",j=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+q+s+j}var X=!1;function te(s,u){if(!s||X)return"";X=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(le){var ne=le}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(le){ne=le}s.call(ge.prototype)}}else{try{throw Error()}catch(le){ne=le}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),w=_[0],D=_[1];if(w&&D){var B=w.split(`
`),Y=D.split(`
`);for(y=g=0;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(g===B.length||y===Y.length)for(g=B.length-1,y=Y.length-1;1<=g&&0<=y&&B[g]!==Y[y];)y--;for(;1<=g&&0<=y;g--,y--)if(B[g]!==Y[y]){if(g!==1||y!==1)do if(g--,y--,0>y||B[g]!==Y[y]){var ue=`
`+B[g].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=g&&0<=y);break}}}finally{X=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?J(d):""}function H(s){switch(s.tag){case 26:case 27:case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return s=te(s.type,!1),s;case 11:return s=te(s.type.render,!1),s;case 1:return s=te(s.type,!0),s;default:return""}}function oe(s){try{var u="";do u+=H(s),s=s.return;while(s);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function he(s){var u=s,d=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(d=u.return),s=u.return;while(s)}return u.tag===3?d:null}function Ee(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function G(s){if(he(s)!==s)throw Error(r(188))}function ie(s){var u=s.alternate;if(!u){if(u=he(s),u===null)throw Error(r(188));return u!==s?null:s}for(var d=s,g=u;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(g=y.return,g!==null){d=g;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return G(y),s;if(_===g)return G(y),u;_=_.sibling}throw Error(r(188))}if(d.return!==g.return)d=y,g=_;else{for(var w=!1,D=y.child;D;){if(D===d){w=!0,d=y,g=_;break}if(D===g){w=!0,g=y,d=_;break}D=D.sibling}if(!w){for(D=_.child;D;){if(D===d){w=!0,d=_,g=y;break}if(D===g){w=!0,g=_,d=y;break}D=D.sibling}if(!w)throw Error(r(189))}}if(d.alternate!==g)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:u}function re(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=re(s),u!==null)return u;s=s.sibling}return null}var ye=Array.isArray,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},_e=[],De=-1;function Ie(s){return{current:s}}function ke(s){0>De||(s.current=_e[De],_e[De]=null,De--)}function ce(s,u){De++,_e[De]=s.current,s.current=u}var it=Ie(null),Ft=Ie(null),Pe=Ie(null),Mt=Ie(null);function Pt(s,u){switch(ce(Pe,u),ce(Ft,s),ce(it,null),s=u.nodeType,s){case 9:case 11:u=(u=u.documentElement)&&(u=u.namespaceURI)?qh(u):0;break;default:if(s=s===8?u.parentNode:u,u=s.tagName,s=s.namespaceURI)s=qh(s),u=Hh(s,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ke(it),ce(it,u)}function Ue(){ke(it),ke(Ft),ke(Pe)}function yt(s){s.memoizedState!==null&&ce(Mt,s);var u=it.current,d=Hh(u,s.type);u!==d&&(ce(Ft,s),ce(it,d))}function Ye(s){Ft.current===s&&(ke(it),ke(Ft)),Mt.current===s&&(ke(Mt),ss._currentValue=ve)}var St=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,Ve=n.unstable_cancelCallback,It=n.unstable_shouldYield,ae=n.unstable_requestPaint,se=n.unstable_now,fe=n.unstable_getCurrentPriorityLevel,pe=n.unstable_ImmediatePriority,be=n.unstable_UserBlockingPriority,Ce=n.unstable_NormalPriority,Te=n.unstable_LowPriority,qe=n.unstable_IdlePriority,Ke=n.log,vt=n.unstable_setDisableYieldValue,at=null,We=null;function xt(s){if(We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}}function je(s){if(typeof Ke=="function"&&vt(s),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(at,s)}catch{}}var Ze=Math.clz32?Math.clz32:st,Bt=Math.log,wt=Math.LN2;function st(s){return s>>>=0,s===0?32:31-(Bt(s)/wt|0)|0}var qt=128,fn=4194304;function en(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wn(s,u){var d=s.pendingLanes;if(d===0)return 0;var g=0,y=s.suspendedLanes,_=s.pingedLanes,w=s.warmLanes;s=s.finishedLanes!==0;var D=d&134217727;return D!==0?(d=D&~y,d!==0?g=en(d):(_&=D,_!==0?g=en(_):s||(w=D&~w,w!==0&&(g=en(w))))):(D=d&~y,D!==0?g=en(D):_!==0?g=en(_):s||(w=d&~w,w!==0&&(g=en(w)))),g===0?0:u!==0&&u!==g&&(u&y)===0&&(y=g&-g,w=u&-u,y>=w||y===32&&(w&4194176)!==0)?u:g}function _t(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function $n(s,u){switch(s){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xt(){var s=qt;return qt<<=1,(qt&4194176)===0&&(qt=128),s}function sn(){var s=fn;return fn<<=1,(fn&62914560)===0&&(fn=4194304),s}function Ht(s){for(var u=[],d=0;31>d;d++)u.push(s);return u}function Yt(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Mn(s,u,d,g,y,_){var w=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var D=s.entanglements,B=s.expirationTimes,Y=s.hiddenUpdates;for(d=w&~d;0<d;){var ue=31-Ze(d),ge=1<<ue;D[ue]=0,B[ue]=-1;var ne=Y[ue];if(ne!==null)for(Y[ue]=null,ue=0;ue<ne.length;ue++){var le=ne[ue];le!==null&&(le.lane&=-536870913)}d&=~ge}g!==0&&ot(s,g,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(w&~u))}function ot(s,u,d){s.pendingLanes|=u,s.suspendedLanes&=~u;var g=31-Ze(u);s.entangledLanes|=u,s.entanglements[g]=s.entanglements[g]|1073741824|d&4194218}function Ot(s,u){var d=s.entangledLanes|=u;for(s=s.entanglements;d;){var g=31-Ze(d),y=1<<g;y&u|s[g]&u&&(s[g]|=u),d&=~y}}function gn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ys(){var s=me.p;return s!==0?s:(s=window.event,s===void 0?32:uf(s.type))}function Of(s,u){var d=me.p;try{return me.p=s,u()}finally{me.p=d}}var yr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+yr,tn="__reactProps$"+yr,bi="__reactContainer$"+yr,wo="__reactEvents$"+yr,kf="__reactListeners$"+yr,Df="__reactHandles$"+yr,ju="__reactResources$"+yr,ya="__reactMarker$"+yr;function To(s){delete s[Vt],delete s[tn],delete s[wo],delete s[kf],delete s[Df]}function $r(s){var u=s[Vt];if(u)return u;for(var d=s.parentNode;d;){if(u=d[bi]||d[Vt]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(s=$h(s);s!==null;){if(d=s[Vt])return d;s=$h(s)}return u}s=d,d=s.parentNode}return null}function Ai(s){if(s=s[Vt]||s[bi]){var u=s.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return s}return null}function va(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function Si(s){var u=s[ju];return u||(u=s[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function kt(s){s[ya]=!0}var zu=new Set,Bu={};function Xr(s,u){Ii(s,u),Ii(s+"Capture",u)}function Ii(s,u){for(Bu[s]=u,s=0;s<u.length;s++)zu.add(u[s])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Hu={};function Nf(s){return St.call(Hu,s)?!0:St.call(qu,s)?!1:Gf.test(s)?Hu[s]=!0:(qu[s]=!0,!1)}function vs(s,u,d){if(Nf(u))if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+d)}}function _s(s,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+d)}}function Qn(s,u,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(u,d,""+g)}}function pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Vu(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ff(s){var u=Vu(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),g=""+s[u];if(!s.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return y.call(this)},set:function(w){g=""+w,_.call(this,w)}}),Object.defineProperty(s,u,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(w){g=""+w},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Cs(s){s._valueTracker||(s._valueTracker=Ff(s))}function Wu(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var d=u.getValue(),g="";return s&&(g=Vu(s)?s.checked?"true":"false":s.value),s=g,s!==d?(u.setValue(s),!0):!1}function Es(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Uf=/[\n"\\]/g;function mn(s){return s.replace(Uf,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ro(s,u,d,g,y,_,w,D){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),u!=null?w==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+pn(u)):s.value!==""+pn(u)&&(s.value=""+pn(u)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),u!=null?Mo(s,w,pn(u)):d!=null?Mo(s,w,pn(d)):g!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+pn(D):s.removeAttribute("name")}function $u(s,u,d,g,y,_,w,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),u!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||u!=null))return;d=d!=null?""+pn(d):"",u=u!=null?""+pn(u):d,D||u===s.value||(s.value=u),s.defaultValue=u}g=g??y,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=D?s.checked:!!g,s.defaultChecked=!!g,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Mo(s,u,d){u==="number"&&Es(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function xi(s,u,d,g){if(s=s.options,u){u={};for(var y=0;y<d.length;y++)u["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=u.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&g&&(s[d].defaultSelected=!0)}else{for(d=""+pn(d),u=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,g&&(s[y].defaultSelected=!0);return}u!==null||s[y].disabled||(u=s[y])}u!==null&&(u.selected=!0)}}function Xu(s,u,d){if(u!=null&&(u=""+pn(u),u!==s.value&&(s.value=u),d==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=d!=null?""+pn(d):""}function Yu(s,u,d,g){if(u==null){if(g!=null){if(d!=null)throw Error(r(92));if(ye(g)){if(1<g.length)throw Error(r(93));g=g[0]}d=g}d==null&&(d=""),u=d}d=pn(u),s.defaultValue=d,g=s.textContent,g===d&&g!==""&&g!==null&&(s.value=g)}function wi(s,u){if(u){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=u;return}}s.textContent=u}var jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zu(s,u,d){var g=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":g?s.setProperty(u,d):typeof d!="number"||d===0||jf.has(u)?u==="float"?s.cssFloat=d:s[u]=(""+d).trim():s[u]=d+"px"}function Ku(s,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var y in u)g=u[y],u.hasOwnProperty(y)&&d[y]!==g&&Zu(s,y,g)}else for(var _ in u)u.hasOwnProperty(_)&&Zu(s,_,u[_])}function Po(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bs(s){return Bf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Lo=null;function Oo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ti=null,Ri=null;function Qu(s){var u=Ai(s);if(u&&(s=u.stateNode)){var d=s[tn]||null;e:switch(s=u.stateNode,u.type){case"input":if(Ro(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+mn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var g=d[u];if(g!==s&&g.form===s.form){var y=g[tn]||null;if(!y)throw Error(r(90));Ro(g,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(u=0;u<d.length;u++)g=d[u],g.form===s.form&&Wu(g)}break e;case"textarea":Xu(s,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&xi(s,!!d.multiple,u,!1)}}}var ko=!1;function Ju(s,u,d){if(ko)return s(u,d);ko=!0;try{var g=s(u);return g}finally{if(ko=!1,(Ti!==null||Ri!==null)&&(ao(),Ti&&(u=Ti,s=Ri,Ri=Ti=null,Qu(u),s)))for(u=0;u<s.length;u++)Qu(s[u])}}function _a(s,u){var d=s.stateNode;if(d===null)return null;var g=d[tn]||null;if(g===null)return null;d=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var Do=!1;if(Kn)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){Do=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{Do=!1}var vr=null,Go=null,As=null;function ec(){if(As)return As;var s,u=Go,d=u.length,g,y="value"in vr?vr.value:vr.textContent,_=y.length;for(s=0;s<d&&u[s]===y[s];s++);var w=d-s;for(g=1;g<=w&&u[d-g]===y[_-g];g++);return As=y.slice(s,1<g?1-g:void 0)}function Ss(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Is(){return!0}function tc(){return!1}function nn(s){function u(d,g,y,_,w){this._reactName=d,this._targetInst=y,this.type=g,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(d=s[D],this[D]=d?d(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Is:tc,this.isPropagationStopped=tc,this}return K(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),u}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=nn(Yr),Ea=K({},Yr,{view:0,detail:0}),qf=nn(Ea),No,Fo,ba,ws=K({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ba&&(ba&&s.type==="mousemove"?(No=s.screenX-ba.screenX,Fo=s.screenY-ba.screenY):Fo=No=0,ba=s),No)},movementY:function(s){return"movementY"in s?s.movementY:Fo}}),nc=nn(ws),Hf=K({},ws,{dataTransfer:0}),Vf=nn(Hf),Wf=K({},Ea,{relatedTarget:0}),Uo=nn(Wf),$f=K({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xf=nn($f),Yf=K({},Yr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zf=nn(Yf),Kf=K({},Yr,{data:0}),rc=nn(Kf),Qf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n0(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=e0[s])?!!u[s]:!1}function jo(){return n0}var r0=K({},Ea,{key:function(s){if(s.key){var u=Qf[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Ss(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Jf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(s){return s.type==="keypress"?Ss(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ss(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),i0=nn(r0),a0=K({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=nn(a0),s0=K({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),o0=nn(s0),l0=K({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),u0=nn(l0),c0=K({},ws,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),d0=nn(c0),h0=K({},Yr,{newState:0,oldState:0}),f0=nn(h0),g0=[9,13,27,32],zo=Kn&&"CompositionEvent"in window,Aa=null;Kn&&"documentMode"in document&&(Aa=document.documentMode);var p0=Kn&&"TextEvent"in window&&!Aa,ac=Kn&&(!zo||Aa&&8<Aa&&11>=Aa),sc=" ",oc=!1;function lc(s,u){switch(s){case"keyup":return g0.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Mi=!1;function m0(s,u){switch(s){case"compositionend":return uc(u);case"keypress":return u.which!==32?null:(oc=!0,sc);case"textInput":return s=u.data,s===sc&&oc?null:s;default:return null}}function y0(s,u){if(Mi)return s==="compositionend"||!zo&&lc(s,u)?(s=ec(),As=Go=vr=null,Mi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ac&&u.locale!=="ko"?null:u.data;default:return null}}var v0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!v0[s.type]:u==="textarea"}function dc(s,u,d,g){Ti?Ri?Ri.push(g):Ri=[g]:Ti=g,u=co(u,"onChange"),0<u.length&&(d=new xs("onChange","change",null,d,g),s.push({event:d,listeners:u}))}var Sa=null,Ia=null;function _0(s){Fh(s,0)}function Ts(s){var u=va(s);if(Wu(u))return s}function hc(s,u){if(s==="change")return u}var fc=!1;if(Kn){var Bo;if(Kn){var qo="oninput"in document;if(!qo){var gc=document.createElement("div");gc.setAttribute("oninput","return;"),qo=typeof gc.oninput=="function"}Bo=qo}else Bo=!1;fc=Bo&&(!document.documentMode||9<document.documentMode)}function pc(){Sa&&(Sa.detachEvent("onpropertychange",mc),Ia=Sa=null)}function mc(s){if(s.propertyName==="value"&&Ts(Ia)){var u=[];dc(u,Ia,s,Oo(s)),Ju(_0,u)}}function C0(s,u,d){s==="focusin"?(pc(),Sa=u,Ia=d,Sa.attachEvent("onpropertychange",mc)):s==="focusout"&&pc()}function E0(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ts(Ia)}function b0(s,u){if(s==="click")return Ts(u)}function A0(s,u){if(s==="input"||s==="change")return Ts(u)}function S0(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var ln=typeof Object.is=="function"?Object.is:S0;function xa(s,u){if(ln(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var d=Object.keys(s),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var y=d[g];if(!St.call(u,y)||!ln(s[y],u[y]))return!1}return!0}function yc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function vc(s,u){var d=yc(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=u&&g>=u)return{node:d,offset:u-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=yc(d)}}function _c(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?_c(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function Cc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=Es(s.document);u instanceof s.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)s=u.contentWindow;else break;u=Es(s.document)}return u}function Ho(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}function I0(s,u){var d=Cc(u);u=s.focusedElem;var g=s.selectionRange;if(d!==u&&u&&u.ownerDocument&&_c(u.ownerDocument.documentElement,u)){if(g!==null&&Ho(u)){if(s=g.start,d=g.end,d===void 0&&(d=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(d,u.value.length);else if(d=(s=u.ownerDocument||document)&&s.defaultView||window,d.getSelection){d=d.getSelection();var y=u.textContent.length,_=Math.min(g.start,y);g=g.end===void 0?_:Math.min(g.end,y),!d.extend&&_>g&&(y=g,g=_,_=y),y=vc(u,_);var w=vc(u,g);y&&w&&(d.rangeCount!==1||d.anchorNode!==y.node||d.anchorOffset!==y.offset||d.focusNode!==w.node||d.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(y.node,y.offset),d.removeAllRanges(),_>g?(d.addRange(s),d.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),d.addRange(s)))}}for(s=[],d=u;d=d.parentNode;)d.nodeType===1&&s.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)d=s[u],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var x0=Kn&&"documentMode"in document&&11>=document.documentMode,Pi=null,Vo=null,wa=null,Wo=!1;function Ec(s,u,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Wo||Pi==null||Pi!==Es(g)||(g=Pi,"selectionStart"in g&&Ho(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),wa&&xa(wa,g)||(wa=g,g=co(Vo,"onSelect"),0<g.length&&(u=new xs("onSelect","select",null,u,d),s.push({event:u,listeners:g}),u.target=Pi)))}function Zr(s,u){var d={};return d[s.toLowerCase()]=u.toLowerCase(),d["Webkit"+s]="webkit"+u,d["Moz"+s]="moz"+u,d}var Li={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},$o={},bc={};Kn&&(bc=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function Kr(s){if($o[s])return $o[s];if(!Li[s])return s;var u=Li[s],d;for(d in u)if(u.hasOwnProperty(d)&&d in bc)return $o[s]=u[d];return s}var Ac=Kr("animationend"),Sc=Kr("animationiteration"),Ic=Kr("animationstart"),w0=Kr("transitionrun"),T0=Kr("transitionstart"),R0=Kr("transitioncancel"),xc=Kr("transitionend"),wc=new Map,Tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Pn(s,u){wc.set(s,u),Xr(u,[s])}var yn=[],Oi=0,Xo=0;function Rs(){for(var s=Oi,u=Xo=Oi=0;u<s;){var d=yn[u];yn[u++]=null;var g=yn[u];yn[u++]=null;var y=yn[u];yn[u++]=null;var _=yn[u];if(yn[u++]=null,g!==null&&y!==null){var w=g.pending;w===null?y.next=y:(y.next=w.next,w.next=y),g.pending=y}_!==0&&Rc(d,y,_)}}function Ms(s,u,d,g){yn[Oi++]=s,yn[Oi++]=u,yn[Oi++]=d,yn[Oi++]=g,Xo|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Yo(s,u,d,g){return Ms(s,u,d,g),Ps(s)}function _r(s,u){return Ms(s,null,null,u),Ps(s)}function Rc(s,u,d){s.lanes|=d;var g=s.alternate;g!==null&&(g.lanes|=d);for(var y=!1,_=s.return;_!==null;)_.childLanes|=d,g=_.alternate,g!==null&&(g.childLanes|=d),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;y&&u!==null&&s.tag===3&&(_=s.stateNode,y=31-Ze(d),_=_.hiddenUpdates,s=_[y],s===null?_[y]=[u]:s.push(u),u.lane=d|536870912)}function Ps(s){if(50<Qa)throw Qa=0,tu=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var ki={},Mc=new WeakMap;function vn(s,u){if(typeof s=="object"&&s!==null){var d=Mc.get(s);return d!==void 0?d:(u={value:s,source:u,stack:oe(u)},Mc.set(s,u),u)}return{value:s,source:u,stack:oe(u)}}var Di=[],Gi=0,Ls=null,Os=0,_n=[],Cn=0,Qr=null,Jn=1,er="";function Jr(s,u){Di[Gi++]=Os,Di[Gi++]=Ls,Ls=s,Os=u}function Pc(s,u,d){_n[Cn++]=Jn,_n[Cn++]=er,_n[Cn++]=Qr,Qr=s;var g=Jn;s=er;var y=32-Ze(g)-1;g&=~(1<<y),d+=1;var _=32-Ze(u)+y;if(30<_){var w=y-y%5;_=(g&(1<<w)-1).toString(32),g>>=w,y-=w,Jn=1<<32-Ze(u)+y|d<<y|g,er=_+s}else Jn=1<<_|d<<y|g,er=s}function Zo(s){s.return!==null&&(Jr(s,1),Pc(s,1,0))}function Ko(s){for(;s===Ls;)Ls=Di[--Gi],Di[Gi]=null,Os=Di[--Gi],Di[Gi]=null;for(;s===Qr;)Qr=_n[--Cn],_n[Cn]=null,er=_n[--Cn],_n[Cn]=null,Jn=_n[--Cn],_n[Cn]=null}var Zt=null,Ut=null,$e=!1,Ln=null,Nn=!1,Qo=Error(r(519));function ei(s){var u=Error(r(418,""));throw Ma(vn(u,s)),Qo}function Lc(s){var u=s.stateNode,d=s.type,g=s.memoizedProps;switch(u[Vt]=s,u[tn]=g,d){case"dialog":ze("cancel",u),ze("close",u);break;case"iframe":case"object":case"embed":ze("load",u);break;case"video":case"audio":for(d=0;d<es.length;d++)ze(es[d],u);break;case"source":ze("error",u);break;case"img":case"image":case"link":ze("error",u),ze("load",u);break;case"details":ze("toggle",u);break;case"input":ze("invalid",u),$u(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Cs(u);break;case"select":ze("invalid",u);break;case"textarea":ze("invalid",u),Yu(u,g.value,g.defaultValue,g.children),Cs(u)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||g.suppressHydrationWarning===!0||Bh(u.textContent,d)?(g.popover!=null&&(ze("beforetoggle",u),ze("toggle",u)),g.onScroll!=null&&ze("scroll",u),g.onScrollEnd!=null&&ze("scrollend",u),g.onClick!=null&&(u.onclick=ho),u=!0):u=!1,u||ei(s)}function Oc(s){for(Zt=s.return;Zt;)switch(Zt.tag){case 3:case 27:Nn=!0;return;case 5:case 13:Nn=!1;return;default:Zt=Zt.return}}function Ta(s){if(s!==Zt)return!1;if(!$e)return Oc(s),$e=!0,!1;var u=!1,d;if((d=s.tag!==3&&s.tag!==27)&&((d=s.tag===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||vu(s.type,s.memoizedProps)),d=!d),d&&(u=!0),u&&Ut&&ei(s),Oc(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(u===0){Ut=kn(s.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;s=s.nextSibling}Ut=null}}else Ut=Zt?kn(s.stateNode.nextSibling):null;return!0}function Ra(){Ut=Zt=null,$e=!1}function Ma(s){Ln===null?Ln=[s]:Ln.push(s)}var Pa=Error(r(460)),kc=Error(r(474)),Jo={then:function(){}};function Dc(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ks(){}function Gc(s,u,d){switch(d=s[d],d===void 0?s.push(u):d!==u&&(u.then(ks,ks),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,s===Pa?Error(r(483)):s;default:if(typeof u.status=="string")u.then(ks,ks);else{if(s=nt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(g){if(u.status==="pending"){var y=u;y.status="fulfilled",y.value=g}},function(g){if(u.status==="pending"){var y=u;y.status="rejected",y.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,s===Pa?Error(r(483)):s}throw La=u,Pa}}var La=null;function Nc(){if(La===null)throw Error(r(459));var s=La;return La=null,s}var Ni=null,Oa=0;function Ds(s){var u=Oa;return Oa+=1,Ni===null&&(Ni=[]),Gc(Ni,s,u)}function ka(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function Gs(s,u){throw u.$$typeof===a?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function Fc(s){var u=s._init;return u(s._payload)}function Uc(s){function u(Q,W){if(s){var ee=Q.deletions;ee===null?(Q.deletions=[W],Q.flags|=16):ee.push(W)}}function d(Q,W){if(!s)return null;for(;W!==null;)u(Q,W),W=W.sibling;return null}function g(Q){for(var W=new Map;Q!==null;)Q.key!==null?W.set(Q.key,Q):W.set(Q.index,Q),Q=Q.sibling;return W}function y(Q,W){return Q=Pr(Q,W),Q.index=0,Q.sibling=null,Q}function _(Q,W,ee){return Q.index=ee,s?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<W?(Q.flags|=33554434,W):ee):(Q.flags|=33554434,W)):(Q.flags|=1048576,W)}function w(Q){return s&&Q.alternate===null&&(Q.flags|=33554434),Q}function D(Q,W,ee,de){return W===null||W.tag!==6?(W=$l(ee,Q.mode,de),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function B(Q,W,ee,de){var Se=ee.type;return Se===c?ue(Q,W,ee.props.children,de,ee.key):W!==null&&(W.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===T&&Fc(Se)===W.type)?(W=y(W,ee.props),ka(W,ee),W.return=Q,W):(W=eo(ee.type,ee.key,ee.props,null,Q.mode,de),ka(W,ee),W.return=Q,W)}function Y(Q,W,ee,de){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=Xl(ee,Q.mode,de),W.return=Q,W):(W=y(W,ee.children||[]),W.return=Q,W)}function ue(Q,W,ee,de,Se){return W===null||W.tag!==7?(W=ci(ee,Q.mode,de,Se),W.return=Q,W):(W=y(W,ee),W.return=Q,W)}function ge(Q,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=$l(""+W,Q.mode,ee),W.return=Q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case o:return ee=eo(W.type,W.key,W.props,null,Q.mode,ee),ka(ee,W),ee.return=Q,ee;case l:return W=Xl(W,Q.mode,ee),W.return=Q,W;case T:var de=W._init;return W=de(W._payload),ge(Q,W,ee)}if(ye(W)||F(W))return W=ci(W,Q.mode,ee,null),W.return=Q,W;if(typeof W.then=="function")return ge(Q,Ds(W),ee);if(W.$$typeof===v)return ge(Q,Ks(Q,W),ee);Gs(Q,W)}return null}function ne(Q,W,ee,de){var Se=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Se!==null?null:D(Q,W,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case o:return ee.key===Se?B(Q,W,ee,de):null;case l:return ee.key===Se?Y(Q,W,ee,de):null;case T:return Se=ee._init,ee=Se(ee._payload),ne(Q,W,ee,de)}if(ye(ee)||F(ee))return Se!==null?null:ue(Q,W,ee,de,null);if(typeof ee.then=="function")return ne(Q,W,Ds(ee),de);if(ee.$$typeof===v)return ne(Q,W,Ks(Q,ee),de);Gs(Q,ee)}return null}function le(Q,W,ee,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(ee)||null,D(W,Q,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case o:return Q=Q.get(de.key===null?ee:de.key)||null,B(W,Q,de,Se);case l:return Q=Q.get(de.key===null?ee:de.key)||null,Y(W,Q,de,Se);case T:var Ne=de._init;return de=Ne(de._payload),le(Q,W,ee,de,Se)}if(ye(de)||F(de))return Q=Q.get(ee)||null,ue(W,Q,de,Se,null);if(typeof de.then=="function")return le(Q,W,ee,Ds(de),Se);if(de.$$typeof===v)return le(Q,W,ee,Ks(W,de),Se);Gs(W,de)}return null}function xe(Q,W,ee,de){for(var Se=null,Ne=null,we=W,Re=W=0,Nt=null;we!==null&&Re<ee.length;Re++){we.index>Re?(Nt=we,we=null):Nt=we.sibling;var Xe=ne(Q,we,ee[Re],de);if(Xe===null){we===null&&(we=Nt);break}s&&we&&Xe.alternate===null&&u(Q,we),W=_(Xe,W,Re),Ne===null?Se=Xe:Ne.sibling=Xe,Ne=Xe,we=Nt}if(Re===ee.length)return d(Q,we),$e&&Jr(Q,Re),Se;if(we===null){for(;Re<ee.length;Re++)we=ge(Q,ee[Re],de),we!==null&&(W=_(we,W,Re),Ne===null?Se=we:Ne.sibling=we,Ne=we);return $e&&Jr(Q,Re),Se}for(we=g(we);Re<ee.length;Re++)Nt=le(we,Q,Re,ee[Re],de),Nt!==null&&(s&&Nt.alternate!==null&&we.delete(Nt.key===null?Re:Nt.key),W=_(Nt,W,Re),Ne===null?Se=Nt:Ne.sibling=Nt,Ne=Nt);return s&&we.forEach(function(Fr){return u(Q,Fr)}),$e&&Jr(Q,Re),Se}function Le(Q,W,ee,de){if(ee==null)throw Error(r(151));for(var Se=null,Ne=null,we=W,Re=W=0,Nt=null,Xe=ee.next();we!==null&&!Xe.done;Re++,Xe=ee.next()){we.index>Re?(Nt=we,we=null):Nt=we.sibling;var Fr=ne(Q,we,Xe.value,de);if(Fr===null){we===null&&(we=Nt);break}s&&we&&Fr.alternate===null&&u(Q,we),W=_(Fr,W,Re),Ne===null?Se=Fr:Ne.sibling=Fr,Ne=Fr,we=Nt}if(Xe.done)return d(Q,we),$e&&Jr(Q,Re),Se;if(we===null){for(;!Xe.done;Re++,Xe=ee.next())Xe=ge(Q,Xe.value,de),Xe!==null&&(W=_(Xe,W,Re),Ne===null?Se=Xe:Ne.sibling=Xe,Ne=Xe);return $e&&Jr(Q,Re),Se}for(we=g(we);!Xe.done;Re++,Xe=ee.next())Xe=le(we,Q,Re,Xe.value,de),Xe!==null&&(s&&Xe.alternate!==null&&we.delete(Xe.key===null?Re:Xe.key),W=_(Xe,W,Re),Ne===null?Se=Xe:Ne.sibling=Xe,Ne=Xe);return s&&we.forEach(function(Hg){return u(Q,Hg)}),$e&&Jr(Q,Re),Se}function ft(Q,W,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===c&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case o:e:{for(var Se=ee.key;W!==null;){if(W.key===Se){if(Se=ee.type,Se===c){if(W.tag===7){d(Q,W.sibling),de=y(W,ee.props.children),de.return=Q,Q=de;break e}}else if(W.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===T&&Fc(Se)===W.type){d(Q,W.sibling),de=y(W,ee.props),ka(de,ee),de.return=Q,Q=de;break e}d(Q,W);break}else u(Q,W);W=W.sibling}ee.type===c?(de=ci(ee.props.children,Q.mode,de,ee.key),de.return=Q,Q=de):(de=eo(ee.type,ee.key,ee.props,null,Q.mode,de),ka(de,ee),de.return=Q,Q=de)}return w(Q);case l:e:{for(Se=ee.key;W!==null;){if(W.key===Se)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){d(Q,W.sibling),de=y(W,ee.children||[]),de.return=Q,Q=de;break e}else{d(Q,W);break}else u(Q,W);W=W.sibling}de=Xl(ee,Q.mode,de),de.return=Q,Q=de}return w(Q);case T:return Se=ee._init,ee=Se(ee._payload),ft(Q,W,ee,de)}if(ye(ee))return xe(Q,W,ee,de);if(F(ee)){if(Se=F(ee),typeof Se!="function")throw Error(r(150));return ee=Se.call(ee),Le(Q,W,ee,de)}if(typeof ee.then=="function")return ft(Q,W,Ds(ee),de);if(ee.$$typeof===v)return ft(Q,W,Ks(Q,ee),de);Gs(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(d(Q,W.sibling),de=y(W,ee),de.return=Q,Q=de):(d(Q,W),de=$l(ee,Q.mode,de),de.return=Q,Q=de),w(Q)):d(Q,W)}return function(Q,W,ee,de){try{Oa=0;var Se=ft(Q,W,ee,de);return Ni=null,Se}catch(we){if(we===Pa)throw we;var Ne=Sn(29,we,null,Q.mode);return Ne.lanes=de,Ne.return=Q,Ne}finally{}}}var ti=Uc(!0),jc=Uc(!1),Fi=Ie(null),Ns=Ie(0);function zc(s,u){s=dr,ce(Ns,s),ce(Fi,u),dr=s|u.baseLanes}function el(){ce(Ns,dr),ce(Fi,Fi.current)}function tl(){dr=Ns.current,ke(Fi),ke(Ns)}var En=Ie(null),Fn=null;function Cr(s){var u=s.alternate;ce(Tt,Tt.current&1),ce(En,s),Fn===null&&(u===null||Fi.current!==null||u.memoizedState!==null)&&(Fn=s)}function Bc(s){if(s.tag===22){if(ce(Tt,Tt.current),ce(En,s),Fn===null){var u=s.alternate;u!==null&&u.memoizedState!==null&&(Fn=s)}}else Er()}function Er(){ce(Tt,Tt.current),ce(En,En.current)}function tr(s){ke(En),Fn===s&&(Fn=null),ke(Tt)}var Tt=Ie(0);function Fs(s){for(var u=s;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var M0=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(d,g){s.push(g)}};this.abort=function(){u.aborted=!0,s.forEach(function(d){return d()})}},P0=n.unstable_scheduleCallback,L0=n.unstable_NormalPriority,Rt={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nl(){return{controller:new M0,data:new Map,refCount:0}}function Da(s){s.refCount--,s.refCount===0&&P0(L0,function(){s.controller.abort()})}var Ga=null,rl=0,Ui=0,ji=null;function O0(s,u){if(Ga===null){var d=Ga=[];rl=0,Ui=uu(),ji={status:"pending",value:void 0,then:function(g){d.push(g)}}}return rl++,u.then(qc,qc),u}function qc(){if(--rl===0&&Ga!==null){ji!==null&&(ji.status="fulfilled");var s=Ga;Ga=null,Ui=0,ji=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function k0(s,u){var d=[],g={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return s.then(function(){g.status="fulfilled",g.value=u;for(var y=0;y<d.length;y++)(0,d[y])(u)},function(y){for(g.status="rejected",g.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),g}var Hc=N.S;N.S=function(s,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&O0(s,u),Hc!==null&&Hc(s,u)};var ni=Ie(null);function il(){var s=ni.current;return s!==null?s:nt.pooledCache}function Us(s,u){u===null?ce(ni,ni.current):ce(ni,u.pool)}function Vc(){var s=il();return s===null?null:{parent:Rt._currentValue,pool:s}}var br=0,Ge=null,Je=null,Ct=null,js=!1,zi=!1,ri=!1,zs=0,Na=0,Bi=null,D0=0;function mt(){throw Error(r(321))}function al(s,u){if(u===null)return!1;for(var d=0;d<u.length&&d<s.length;d++)if(!ln(s[d],u[d]))return!1;return!0}function sl(s,u,d,g,y,_){return br=_,Ge=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,N.H=s===null||s.memoizedState===null?ii:Ar,ri=!1,_=d(g,y),ri=!1,zi&&(_=$c(u,d,g,y)),Wc(s),_}function Wc(s){N.H=Un;var u=Je!==null&&Je.next!==null;if(br=0,Ct=Je=Ge=null,js=!1,Na=0,Bi=null,u)throw Error(r(300));s===null||Dt||(s=s.dependencies,s!==null&&Zs(s)&&(Dt=!0))}function $c(s,u,d,g){Ge=s;var y=0;do{if(zi&&(Bi=null),Na=0,zi=!1,25<=y)throw Error(r(301));if(y+=1,Ct=Je=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}N.H=ai,_=u(d,g)}while(zi);return _}function G0(){var s=N.H,u=s.useState()[0];return u=typeof u.then=="function"?Fa(u):u,s=s.useState()[0],(Je!==null?Je.memoizedState:null)!==s&&(Ge.flags|=1024),u}function ol(){var s=zs!==0;return zs=0,s}function ll(s,u,d){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~d}function ul(s){if(js){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}js=!1}br=0,Ct=Je=Ge=null,zi=!1,Na=zs=0,Bi=null}function rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ge.memoizedState=Ct=s:Ct=Ct.next=s,Ct}function Et(){if(Je===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=Je.next;var u=Ct===null?Ge.memoizedState:Ct.next;if(u!==null)Ct=u,Je=s;else{if(s===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));Je=s,s={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ct===null?Ge.memoizedState=Ct=s:Ct=Ct.next=s}return Ct}var Bs;Bs=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Fa(s){var u=Na;return Na+=1,Bi===null&&(Bi=[]),s=Gc(Bi,s,u),u=Ge,(Ct===null?u.memoizedState:Ct.next)===null&&(u=u.alternate,N.H=u===null||u.memoizedState===null?ii:Ar),s}function qs(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Fa(s);if(s.$$typeof===v)return Wt(s)}throw Error(r(438,String(s)))}function cl(s){var u=null,d=Ge.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var g=Ge.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(y){return y.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=Bs(),Ge.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(s),g=0;g<s;g++)d[g]=L;return u.index++,d}function nr(s,u){return typeof u=="function"?u(s):u}function Hs(s){var u=Et();return dl(u,Je,s)}function dl(s,u,d){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var y=s.baseQueue,_=g.pending;if(_!==null){if(y!==null){var w=y.next;y.next=_.next,_.next=w}u.baseQueue=y=_,g.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{u=y.next;var D=w=null,B=null,Y=u,ue=!1;do{var ge=Y.lane&-536870913;if(ge!==Y.lane?(He&ge)===ge:(br&ge)===ge){var ne=Y.revertLane;if(ne===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ge===Ui&&(ue=!0);else if((br&ne)===ne){Y=Y.next,ne===Ui&&(ue=!0);continue}else ge={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(D=B=ge,w=_):B=B.next=ge,Ge.lanes|=ne,Lr|=ne;ge=Y.action,ri&&d(_,ge),_=Y.hasEagerState?Y.eagerState:d(_,ge)}else ne={lane:ge,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(D=B=ne,w=_):B=B.next=ne,Ge.lanes|=ge,Lr|=ge;Y=Y.next}while(Y!==null&&Y!==u);if(B===null?w=_:B.next=D,!ln(_,s.memoizedState)&&(Dt=!0,ue&&(d=ji,d!==null)))throw d;s.memoizedState=_,s.baseState=w,s.baseQueue=B,g.lastRenderedState=_}return y===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function hl(s){var u=Et(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var g=d.dispatch,y=d.pending,_=u.memoizedState;if(y!==null){d.pending=null;var w=y=y.next;do _=s(_,w.action),w=w.next;while(w!==y);ln(_,u.memoizedState)||(Dt=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),d.lastRenderedState=_}return[_,g]}function Xc(s,u,d){var g=Ge,y=Et(),_=$e;if(_){if(d===void 0)throw Error(r(407));d=d()}else d=u();var w=!ln((Je||y).memoizedState,d);if(w&&(y.memoizedState=d,Dt=!0),y=y.queue,pl(Kc.bind(null,g,y,s),[s]),y.getSnapshot!==u||w||Ct!==null&&Ct.memoizedState.tag&1){if(g.flags|=2048,qi(9,Zc.bind(null,g,y,d,u),{destroy:void 0},null),nt===null)throw Error(r(349));_||(br&60)!==0||Yc(g,u,d)}return d}function Yc(s,u,d){s.flags|=16384,s={getSnapshot:u,value:d},u=Ge.updateQueue,u===null?(u=Bs(),Ge.updateQueue=u,u.stores=[s]):(d=u.stores,d===null?u.stores=[s]:d.push(s))}function Zc(s,u,d,g){u.value=d,u.getSnapshot=g,Qc(u)&&Jc(s)}function Kc(s,u,d){return d(function(){Qc(u)&&Jc(s)})}function Qc(s){var u=s.getSnapshot;s=s.value;try{var d=u();return!ln(s,d)}catch{return!0}}function Jc(s){var u=_r(s,2);u!==null&&Kt(u,s,2)}function fl(s){var u=rn();if(typeof s=="function"){var d=s;if(s=d(),ri){je(!0);try{d()}finally{je(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:s},u}function ed(s,u,d,g){return s.baseState=d,dl(s,Je,typeof g=="function"?g:nr)}function N0(s,u,d,g,y){if($s(s))throw Error(r(485));if(s=u.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};N.T!==null?d(!0):_.isTransition=!1,g(_),d=u.pending,d===null?(_.next=u.pending=_,td(u,_)):(_.next=d.next,u.pending=d.next=_)}}function td(s,u){var d=u.action,g=u.payload,y=s.state;if(u.isTransition){var _=N.T,w={};N.T=w;try{var D=d(y,g),B=N.S;B!==null&&B(w,D),nd(s,u,D)}catch(Y){gl(s,u,Y)}finally{N.T=_}}else try{_=d(y,g),nd(s,u,_)}catch(Y){gl(s,u,Y)}}function nd(s,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){rd(s,u,g)},function(g){return gl(s,u,g)}):rd(s,u,d)}function rd(s,u,d){u.status="fulfilled",u.value=d,ad(u),s.state=d,u=s.pending,u!==null&&(d=u.next,d===u?s.pending=null:(d=d.next,u.next=d,td(s,d)))}function gl(s,u,d){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=d,ad(u),u=u.next;while(u!==g)}s.action=null}function ad(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function sd(s,u){return u}function od(s,u){if($e){var d=nt.formState;if(d!==null){e:{var g=Ge;if($e){if(Ut){t:{for(var y=Ut,_=Nn;y.nodeType!==8;){if(!_){y=null;break t}if(y=kn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Ut=kn(y.nextSibling),g=y.data==="F!";break e}}ei(g)}g=!1}g&&(u=d[0])}}return d=rn(),d.memoizedState=d.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:u},d.queue=g,d=Id.bind(null,Ge,g),g.dispatch=d,g=fl(!1),_=Cl.bind(null,Ge,!1,g.queue),g=rn(),y={state:u,dispatch:null,action:s,pending:null},g.queue=y,d=N0.bind(null,Ge,y,_,d),y.dispatch=d,g.memoizedState=s,[u,d,!1]}function ld(s){var u=Et();return ud(u,Je,s)}function ud(s,u,d){u=dl(s,u,sd)[0],s=Hs(nr)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Fa(u):u;var g=Et(),y=g.queue,_=y.dispatch;return d!==g.memoizedState&&(Ge.flags|=2048,qi(9,F0.bind(null,y,d),{destroy:void 0},null)),[u,_,s]}function F0(s,u){s.action=u}function cd(s){var u=Et(),d=Je;if(d!==null)return ud(u,d,s);Et(),u=u.memoizedState,d=Et();var g=d.queue.dispatch;return d.memoizedState=s,[u,g,!1]}function qi(s,u,d,g){return s={tag:s,create:u,inst:d,deps:g,next:null},u=Ge.updateQueue,u===null&&(u=Bs(),Ge.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,u.lastEffect=s),s}function dd(){return Et().memoizedState}function Vs(s,u,d,g){var y=rn();Ge.flags|=s,y.memoizedState=qi(1|u,d,{destroy:void 0},g===void 0?null:g)}function Ws(s,u,d,g){var y=Et();g=g===void 0?null:g;var _=y.memoizedState.inst;Je!==null&&g!==null&&al(g,Je.memoizedState.deps)?y.memoizedState=qi(u,d,_,g):(Ge.flags|=s,y.memoizedState=qi(1|u,d,_,g))}function hd(s,u){Vs(8390656,8,s,u)}function pl(s,u){Ws(2048,8,s,u)}function fd(s,u){return Ws(4,2,s,u)}function gd(s,u){return Ws(4,4,s,u)}function pd(s,u){if(typeof u=="function"){s=s();var d=u(s);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function md(s,u,d){d=d!=null?d.concat([s]):null,Ws(4,4,pd.bind(null,u,s),d)}function ml(){}function yd(s,u){var d=Et();u=u===void 0?null:u;var g=d.memoizedState;return u!==null&&al(u,g[1])?g[0]:(d.memoizedState=[s,u],s)}function vd(s,u){var d=Et();u=u===void 0?null:u;var g=d.memoizedState;if(u!==null&&al(u,g[1]))return g[0];if(g=s(),ri){je(!0);try{s()}finally{je(!1)}}return d.memoizedState=[g,u],g}function yl(s,u,d){return d===void 0||(br&1073741824)!==0?s.memoizedState=u:(s.memoizedState=d,s=Ch(),Ge.lanes|=s,Lr|=s,d)}function _d(s,u,d,g){return ln(d,u)?d:Fi.current!==null?(s=yl(s,d,g),ln(s,u)||(Dt=!0),s):(br&42)===0?(Dt=!0,s.memoizedState=d):(s=Ch(),Ge.lanes|=s,Lr|=s,u)}function Cd(s,u,d,g,y){var _=me.p;me.p=_!==0&&8>_?_:8;var w=N.T,D={};N.T=D,Cl(s,!1,u,d);try{var B=y(),Y=N.S;if(Y!==null&&Y(D,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ue=k0(B,g);Ua(s,u,ue,hn(s))}else Ua(s,u,g,hn(s))}catch(ge){Ua(s,u,{then:function(){},status:"rejected",reason:ge},hn())}finally{me.p=_,N.T=w}}function U0(){}function vl(s,u,d,g){if(s.tag!==5)throw Error(r(476));var y=Ed(s).queue;Cd(s,y,u,ve,d===null?U0:function(){return bd(s),d(g)})}function Ed(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:ve},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:d},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function bd(s){var u=Ed(s).next.queue;Ua(s,u,{},hn())}function _l(){return Wt(ss)}function Ad(){return Et().memoizedState}function Sd(){return Et().memoizedState}function j0(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var d=hn();s=xr(d);var g=wr(u,s,d);g!==null&&(Kt(g,u,d),Ba(g,u,d)),u={cache:nl()},s.payload=u;return}u=u.return}}function z0(s,u,d){var g=hn();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},$s(s)?xd(u,d):(d=Yo(s,u,d,g),d!==null&&(Kt(d,s,g),wd(d,u,g)))}function Id(s,u,d){var g=hn();Ua(s,u,d,g)}function Ua(s,u,d,g){var y={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if($s(s))xd(u,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var w=u.lastRenderedState,D=_(w,d);if(y.hasEagerState=!0,y.eagerState=D,ln(D,w))return Ms(s,u,y,0),nt===null&&Rs(),!1}catch{}finally{}if(d=Yo(s,u,y,g),d!==null)return Kt(d,s,g),wd(d,u,g),!0}return!1}function Cl(s,u,d,g){if(g={lane:2,revertLane:uu(),action:g,hasEagerState:!1,eagerState:null,next:null},$s(s)){if(u)throw Error(r(479))}else u=Yo(s,d,g,2),u!==null&&Kt(u,s,2)}function $s(s){var u=s.alternate;return s===Ge||u!==null&&u===Ge}function xd(s,u){zi=js=!0;var d=s.pending;d===null?u.next=u:(u.next=d.next,d.next=u),s.pending=u}function wd(s,u,d){if((d&4194176)!==0){var g=u.lanes;g&=s.pendingLanes,d|=g,u.lanes=d,Ot(s,d)}}var Un={readContext:Wt,use:qs,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt};Un.useCacheRefresh=mt,Un.useMemoCache=mt,Un.useHostTransitionStatus=mt,Un.useFormState=mt,Un.useActionState=mt,Un.useOptimistic=mt;var ii={readContext:Wt,use:qs,useCallback:function(s,u){return rn().memoizedState=[s,u===void 0?null:u],s},useContext:Wt,useEffect:hd,useImperativeHandle:function(s,u,d){d=d!=null?d.concat([s]):null,Vs(4194308,4,pd.bind(null,u,s),d)},useLayoutEffect:function(s,u){return Vs(4194308,4,s,u)},useInsertionEffect:function(s,u){Vs(4,2,s,u)},useMemo:function(s,u){var d=rn();u=u===void 0?null:u;var g=s();if(ri){je(!0);try{s()}finally{je(!1)}}return d.memoizedState=[g,u],g},useReducer:function(s,u,d){var g=rn();if(d!==void 0){var y=d(u);if(ri){je(!0);try{d(u)}finally{je(!1)}}}else y=u;return g.memoizedState=g.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},g.queue=s,s=s.dispatch=z0.bind(null,Ge,s),[g.memoizedState,s]},useRef:function(s){var u=rn();return s={current:s},u.memoizedState=s},useState:function(s){s=fl(s);var u=s.queue,d=Id.bind(null,Ge,u);return u.dispatch=d,[s.memoizedState,d]},useDebugValue:ml,useDeferredValue:function(s,u){var d=rn();return yl(d,s,u)},useTransition:function(){var s=fl(!1);return s=Cd.bind(null,Ge,s.queue,!0,!1),rn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,d){var g=Ge,y=rn();if($e){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),nt===null)throw Error(r(349));(He&60)!==0||Yc(g,u,d)}y.memoizedState=d;var _={value:d,getSnapshot:u};return y.queue=_,hd(Kc.bind(null,g,_,s),[s]),g.flags|=2048,qi(9,Zc.bind(null,g,_,d,u),{destroy:void 0},null),d},useId:function(){var s=rn(),u=nt.identifierPrefix;if($e){var d=er,g=Jn;d=(g&~(1<<32-Ze(g)-1)).toString(32)+d,u=":"+u+"R"+d,d=zs++,0<d&&(u+="H"+d.toString(32)),u+=":"}else d=D0++,u=":"+u+"r"+d.toString(32)+":";return s.memoizedState=u},useCacheRefresh:function(){return rn().memoizedState=j0.bind(null,Ge)}};ii.useMemoCache=cl,ii.useHostTransitionStatus=_l,ii.useFormState=od,ii.useActionState=od,ii.useOptimistic=function(s){var u=rn();u.memoizedState=u.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=Cl.bind(null,Ge,!0,d),d.dispatch=u,[s,u]};var Ar={readContext:Wt,use:qs,useCallback:yd,useContext:Wt,useEffect:pl,useImperativeHandle:md,useInsertionEffect:fd,useLayoutEffect:gd,useMemo:vd,useReducer:Hs,useRef:dd,useState:function(){return Hs(nr)},useDebugValue:ml,useDeferredValue:function(s,u){var d=Et();return _d(d,Je.memoizedState,s,u)},useTransition:function(){var s=Hs(nr)[0],u=Et().memoizedState;return[typeof s=="boolean"?s:Fa(s),u]},useSyncExternalStore:Xc,useId:Ad};Ar.useCacheRefresh=Sd,Ar.useMemoCache=cl,Ar.useHostTransitionStatus=_l,Ar.useFormState=ld,Ar.useActionState=ld,Ar.useOptimistic=function(s,u){var d=Et();return ed(d,Je,s,u)};var ai={readContext:Wt,use:qs,useCallback:yd,useContext:Wt,useEffect:pl,useImperativeHandle:md,useInsertionEffect:fd,useLayoutEffect:gd,useMemo:vd,useReducer:hl,useRef:dd,useState:function(){return hl(nr)},useDebugValue:ml,useDeferredValue:function(s,u){var d=Et();return Je===null?yl(d,s,u):_d(d,Je.memoizedState,s,u)},useTransition:function(){var s=hl(nr)[0],u=Et().memoizedState;return[typeof s=="boolean"?s:Fa(s),u]},useSyncExternalStore:Xc,useId:Ad};ai.useCacheRefresh=Sd,ai.useMemoCache=cl,ai.useHostTransitionStatus=_l,ai.useFormState=cd,ai.useActionState=cd,ai.useOptimistic=function(s,u){var d=Et();return Je!==null?ed(d,Je,s,u):(d.baseState=s,[s,d.queue.dispatch])};function El(s,u,d,g){u=s.memoizedState,d=d(g,u),d=d==null?u:K({},u,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var bl={isMounted:function(s){return(s=s._reactInternals)?he(s)===s:!1},enqueueSetState:function(s,u,d){s=s._reactInternals;var g=hn(),y=xr(g);y.payload=u,d!=null&&(y.callback=d),u=wr(s,y,g),u!==null&&(Kt(u,s,g),Ba(u,s,g))},enqueueReplaceState:function(s,u,d){s=s._reactInternals;var g=hn(),y=xr(g);y.tag=1,y.payload=u,d!=null&&(y.callback=d),u=wr(s,y,g),u!==null&&(Kt(u,s,g),Ba(u,s,g))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var d=hn(),g=xr(d);g.tag=2,u!=null&&(g.callback=u),u=wr(s,g,d),u!==null&&(Kt(u,s,d),Ba(u,s,d))}};function Td(s,u,d,g,y,_,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,_,w):u.prototype&&u.prototype.isPureReactComponent?!xa(d,g)||!xa(y,_):!0}function Rd(s,u,d,g){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==s&&bl.enqueueReplaceState(u,u.state,null)}function si(s,u){var d=u;if("ref"in u){d={};for(var g in u)g!=="ref"&&(d[g]=u[g])}if(s=s.defaultProps){d===u&&(d=K({},d));for(var y in s)d[y]===void 0&&(d[y]=s[y])}return d}var Xs=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Md(s){Xs(s)}function Pd(s){console.error(s)}function Ld(s){Xs(s)}function Ys(s,u){try{var d=s.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function Od(s,u,d){try{var g=s.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Al(s,u,d){return d=xr(d),d.tag=3,d.payload={element:null},d.callback=function(){Ys(s,u)},d}function kd(s){return s=xr(s),s.tag=3,s}function Dd(s,u,d,g){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var _=g.value;s.payload=function(){return y(_)},s.callback=function(){Od(u,d,g)}}var w=d.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){Od(u,d,g),typeof y!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var D=g.stack;this.componentDidCatch(g.value,{componentStack:D!==null?D:""})})}function B0(s,u,d,g,y){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=d.alternate,u!==null&&za(u,d,y,!0),d=En.current,d!==null){switch(d.tag){case 13:return Fn===null?iu():d.alternate===null&&ht===0&&(ht=3),d.flags&=-257,d.flags|=65536,d.lanes=y,g===Jo?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([g]):u.add(g),su(s,g,y)),!1;case 22:return d.flags|=65536,g===Jo?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([g]):d.add(g)),su(s,g,y)),!1}throw Error(r(435,d.tag))}return su(s,g,y),iu(),!1}if($e)return u=En.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=y,g!==Qo&&(s=Error(r(422),{cause:g}),Ma(vn(s,d)))):(g!==Qo&&(u=Error(r(423),{cause:g}),Ma(vn(u,d))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,g=vn(g,d),y=Al(s.stateNode,g,y),Fl(s,y),ht!==4&&(ht=2)),!1;var _=Error(r(520),{cause:g});if(_=vn(_,d),Za===null?Za=[_]:Za.push(_),ht!==4&&(ht=2),u===null)return!0;g=vn(g,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,s=y&-y,d.lanes|=s,s=Al(d.stateNode,g,s),Fl(d,s),!1;case 1:if(u=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Or===null||!Or.has(_))))return d.flags|=65536,y&=-y,d.lanes|=y,y=kd(y),Dd(y,s,d,g),Fl(d,y),!1}d=d.return}while(d!==null);return!1}var Gd=Error(r(461)),Dt=!1;function jt(s,u,d,g){u.child=s===null?jc(u,null,d,g):ti(u,s.child,d,g)}function Nd(s,u,d,g,y){d=d.render;var _=u.ref;if("ref"in g){var w={};for(var D in g)D!=="ref"&&(w[D]=g[D])}else w=g;return li(u),g=sl(s,u,d,w,_,y),D=ol(),s!==null&&!Dt?(ll(s,u,y),rr(s,u,y)):($e&&D&&Zo(u),u.flags|=1,jt(s,u,g,y),u.child)}function Fd(s,u,d,g,y){if(s===null){var _=d.type;return typeof _=="function"&&!Wl(_)&&_.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=_,Ud(s,u,_,g,y)):(s=eo(d.type,null,g,u,u.mode,y),s.ref=u.ref,s.return=u,u.child=s)}if(_=s.child,!Ll(s,y)){var w=_.memoizedProps;if(d=d.compare,d=d!==null?d:xa,d(w,g)&&s.ref===u.ref)return rr(s,u,y)}return u.flags|=1,s=Pr(_,g),s.ref=u.ref,s.return=u,u.child=s}function Ud(s,u,d,g,y){if(s!==null){var _=s.memoizedProps;if(xa(_,g)&&s.ref===u.ref)if(Dt=!1,u.pendingProps=g=_,Ll(s,y))(s.flags&131072)!==0&&(Dt=!0);else return u.lanes=s.lanes,rr(s,u,y)}return Sl(s,u,d,g,y)}function jd(s,u,d){var g=u.pendingProps,y=g.children,_=(u.stateNode._pendingVisibility&2)!==0,w=s!==null?s.memoizedState:null;if(ja(s,u),g.mode==="hidden"||_){if((u.flags&128)!==0){if(g=w!==null?w.baseLanes|d:d,s!==null){for(y=u.child=s.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;u.childLanes=_&~g}else u.childLanes=0,u.child=null;return zd(s,u,g,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&Us(u,w!==null?w.cachePool:null),w!==null?zc(u,w):el(),Bc(u);else return u.lanes=u.childLanes=536870912,zd(s,u,w!==null?w.baseLanes|d:d,d)}else w!==null?(Us(u,w.cachePool),zc(u,w),Er(),u.memoizedState=null):(s!==null&&Us(u,null),el(),Er());return jt(s,u,y,d),u.child}function zd(s,u,d,g){var y=il();return y=y===null?null:{parent:Rt._currentValue,pool:y},u.memoizedState={baseLanes:d,cachePool:y},s!==null&&Us(u,null),el(),Bc(u),s!==null&&za(s,u,g,!0),null}function ja(s,u){var d=u.ref;if(d===null)s!==null&&s.ref!==null&&(u.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(u.flags|=2097664)}}function Sl(s,u,d,g,y){return li(u),d=sl(s,u,d,g,void 0,y),g=ol(),s!==null&&!Dt?(ll(s,u,y),rr(s,u,y)):($e&&g&&Zo(u),u.flags|=1,jt(s,u,d,y),u.child)}function Bd(s,u,d,g,y,_){return li(u),u.updateQueue=null,d=$c(u,g,d,y),Wc(s),g=ol(),s!==null&&!Dt?(ll(s,u,_),rr(s,u,_)):($e&&g&&Zo(u),u.flags|=1,jt(s,u,d,_),u.child)}function qd(s,u,d,g,y){if(li(u),u.stateNode===null){var _=ki,w=d.contextType;typeof w=="object"&&w!==null&&(_=Wt(w)),_=new d(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=bl,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},Gl(u),w=d.contextType,_.context=typeof w=="object"&&w!==null?Wt(w):ki,_.state=u.memoizedState,w=d.getDerivedStateFromProps,typeof w=="function"&&(El(u,d,w,g),_.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&bl.enqueueReplaceState(_,_.state,null),Ha(u,g,_,y),qa(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(s===null){_=u.stateNode;var D=u.memoizedProps,B=si(d,D);_.props=B;var Y=_.context,ue=d.contextType;w=ki,typeof ue=="object"&&ue!==null&&(w=Wt(ue));var ge=d.getDerivedStateFromProps;ue=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,ue||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||Y!==w)&&Rd(u,_,g,w),Ir=!1;var ne=u.memoizedState;_.state=ne,Ha(u,g,_,y),qa(),Y=u.memoizedState,D||ne!==Y||Ir?(typeof ge=="function"&&(El(u,d,ge,g),Y=u.memoizedState),(B=Ir||Td(u,d,B,g,ne,Y,w))?(ue||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Y),_.props=g,_.state=Y,_.context=w,g=B):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,Nl(s,u),w=u.memoizedProps,ue=si(d,w),_.props=ue,ge=u.pendingProps,ne=_.context,Y=d.contextType,B=ki,typeof Y=="object"&&Y!==null&&(B=Wt(Y)),D=d.getDerivedStateFromProps,(Y=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ge||ne!==B)&&Rd(u,_,g,B),Ir=!1,ne=u.memoizedState,_.state=ne,Ha(u,g,_,y),qa();var le=u.memoizedState;w!==ge||ne!==le||Ir||s!==null&&s.dependencies!==null&&Zs(s.dependencies)?(typeof D=="function"&&(El(u,d,D,g),le=u.memoizedState),(ue=Ir||Td(u,d,ue,g,ne,le,B)||s!==null&&s.dependencies!==null&&Zs(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,le,B),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,le,B)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&ne===s.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&ne===s.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=le),_.props=g,_.state=le,_.context=B,g=ue):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&ne===s.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&ne===s.memoizedState||(u.flags|=1024),g=!1)}return _=g,ja(s,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,s!==null&&g?(u.child=ti(u,s.child,null,y),u.child=ti(u,null,d,y)):jt(s,u,d,y),u.memoizedState=_.state,s=u.child):s=rr(s,u,y),s}function Hd(s,u,d,g){return Ra(),u.flags|=256,jt(s,u,d,g),u.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function xl(s){return{baseLanes:s,cachePool:Vc()}}function wl(s,u,d){return s=s!==null?s.childLanes&~d:0,u&&(s|=xn),s}function Vd(s,u,d){var g=u.pendingProps,y=!1,_=(u.flags&128)!==0,w;if((w=_)||(w=s!==null&&s.memoizedState===null?!1:(Tt.current&2)!==0),w&&(y=!0,u.flags&=-129),w=(u.flags&32)!==0,u.flags&=-33,s===null){if($e){if(y?Cr(u):Er(),$e){var D=Ut,B;if(B=D){e:{for(B=D,D=Nn;B.nodeType!==8;){if(!D){D=null;break e}if(B=kn(B.nextSibling),B===null){D=null;break e}}D=B}D!==null?(u.memoizedState={dehydrated:D,treeContext:Qr!==null?{id:Jn,overflow:er}:null,retryLane:536870912},B=Sn(18,null,null,0),B.stateNode=D,B.return=u,u.child=B,Zt=u,Ut=null,B=!0):B=!1}B||ei(u)}if(D=u.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return D.data==="$!"?u.lanes=16:u.lanes=536870912,null;tr(u)}return D=g.children,g=g.fallback,y?(Er(),y=u.mode,D=Rl({mode:"hidden",children:D},y),g=ci(g,y,d,null),D.return=u,g.return=u,D.sibling=g,u.child=D,y=u.child,y.memoizedState=xl(d),y.childLanes=wl(s,w,d),u.memoizedState=Il,g):(Cr(u),Tl(u,D))}if(B=s.memoizedState,B!==null&&(D=B.dehydrated,D!==null)){if(_)u.flags&256?(Cr(u),u.flags&=-257,u=Ml(s,u,d)):u.memoizedState!==null?(Er(),u.child=s.child,u.flags|=128,u=null):(Er(),y=g.fallback,D=u.mode,g=Rl({mode:"visible",children:g.children},D),y=ci(y,D,d,null),y.flags|=2,g.return=u,y.return=u,g.sibling=y,u.child=g,ti(u,s.child,null,d),g=u.child,g.memoizedState=xl(d),g.childLanes=wl(s,w,d),u.memoizedState=Il,u=y);else if(Cr(u),D.data==="$!"){if(w=D.nextSibling&&D.nextSibling.dataset,w)var Y=w.dgst;w=Y,g=Error(r(419)),g.stack="",g.digest=w,Ma({value:g,source:null,stack:null}),u=Ml(s,u,d)}else if(Dt||za(s,u,d,!1),w=(d&s.childLanes)!==0,Dt||w){if(w=nt,w!==null){if(g=d&-d,(g&42)!==0)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=(g&(w.suspendedLanes|d))!==0?0:g,g!==0&&g!==B.retryLane)throw B.retryLane=g,_r(s,g),Kt(w,s,g),Gd}D.data==="$?"||iu(),u=Ml(s,u,d)}else D.data==="$?"?(u.flags|=128,u.child=s.child,u=ig.bind(null,s),D._reactRetry=u,u=null):(s=B.treeContext,Ut=kn(D.nextSibling),Zt=u,$e=!0,Ln=null,Nn=!1,s!==null&&(_n[Cn++]=Jn,_n[Cn++]=er,_n[Cn++]=Qr,Jn=s.id,er=s.overflow,Qr=u),u=Tl(u,g.children),u.flags|=4096);return u}return y?(Er(),y=g.fallback,D=u.mode,B=s.child,Y=B.sibling,g=Pr(B,{mode:"hidden",children:g.children}),g.subtreeFlags=B.subtreeFlags&31457280,Y!==null?y=Pr(Y,y):(y=ci(y,D,d,null),y.flags|=2),y.return=u,g.return=u,g.sibling=y,u.child=g,g=y,y=u.child,D=s.child.memoizedState,D===null?D=xl(d):(B=D.cachePool,B!==null?(Y=Rt._currentValue,B=B.parent!==Y?{parent:Y,pool:Y}:B):B=Vc(),D={baseLanes:D.baseLanes|d,cachePool:B}),y.memoizedState=D,y.childLanes=wl(s,w,d),u.memoizedState=Il,g):(Cr(u),d=s.child,s=d.sibling,d=Pr(d,{mode:"visible",children:g.children}),d.return=u,d.sibling=null,s!==null&&(w=u.deletions,w===null?(u.deletions=[s],u.flags|=16):w.push(s)),u.child=d,u.memoizedState=null,d)}function Tl(s,u){return u=Rl({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function Rl(s,u){return yh(s,u,0,null)}function Ml(s,u,d){return ti(u,s.child,null,d),s=Tl(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function Wd(s,u,d){s.lanes|=u;var g=s.alternate;g!==null&&(g.lanes|=u),kl(s.return,u,d)}function Pl(s,u,d,g,y){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:y}:(_.isBackwards=u,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=d,_.tailMode=y)}function $d(s,u,d){var g=u.pendingProps,y=g.revealOrder,_=g.tail;if(jt(s,u,g.children,d),g=Tt.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Wd(s,d,u);else if(s.tag===19)Wd(s,d,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}switch(ce(Tt,g),y){case"forwards":for(d=u.child,y=null;d!==null;)s=d.alternate,s!==null&&Fs(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=u.child,u.child=null):(y=d.sibling,d.sibling=null),Pl(u,!1,y,d,_);break;case"backwards":for(d=null,y=u.child,u.child=null;y!==null;){if(s=y.alternate,s!==null&&Fs(s)===null){u.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}Pl(u,!0,d,null,_);break;case"together":Pl(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function rr(s,u,d){if(s!==null&&(u.dependencies=s.dependencies),Lr|=u.lanes,(d&u.childLanes)===0)if(s!==null){if(za(s,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,d=Pr(s,s.pendingProps),u.child=d,d.return=u;s.sibling!==null;)s=s.sibling,d=d.sibling=Pr(s,s.pendingProps),d.return=u;d.sibling=null}return u.child}function Ll(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&Zs(s)))}function q0(s,u,d){switch(u.tag){case 3:Pt(u,u.stateNode.containerInfo),Sr(u,Rt,s.memoizedState.cache),Ra();break;case 27:case 5:yt(u);break;case 4:Pt(u,u.stateNode.containerInfo);break;case 10:Sr(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Cr(u),u.flags|=128,null):(d&u.child.childLanes)!==0?Vd(s,u,d):(Cr(u),s=rr(s,u,d),s!==null?s.sibling:null);Cr(u);break;case 19:var y=(s.flags&128)!==0;if(g=(d&u.childLanes)!==0,g||(za(s,u,d,!1),g=(d&u.childLanes)!==0),y){if(g)return $d(s,u,d);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Tt,Tt.current),g)break;return null;case 22:case 23:return u.lanes=0,jd(s,u,d);case 24:Sr(u,Rt,s.memoizedState.cache)}return rr(s,u,d)}function Xd(s,u,d){if(s!==null)if(s.memoizedProps!==u.pendingProps)Dt=!0;else{if(!Ll(s,d)&&(u.flags&128)===0)return Dt=!1,q0(s,u,d);Dt=(s.flags&131072)!==0}else Dt=!1,$e&&(u.flags&1048576)!==0&&Pc(u,Os,u.index);switch(u.lanes=0,u.tag){case 16:e:{s=u.pendingProps;var g=u.elementType,y=g._init;if(g=y(g._payload),u.type=g,typeof g=="function")Wl(g)?(s=si(g,s),u.tag=1,u=qd(null,u,g,s,d)):(u.tag=0,u=Sl(null,u,g,s,d));else{if(g!=null){if(y=g.$$typeof,y===C){u.tag=11,u=Nd(null,u,g,s,d);break e}else if(y===x){u.tag=14,u=Fd(null,u,g,s,d);break e}}throw u=z(g)||g,Error(r(306,u,""))}}return u;case 0:return Sl(s,u,u.type,u.pendingProps,d);case 1:return g=u.type,y=si(g,u.pendingProps),qd(s,u,g,y,d);case 3:e:{if(Pt(u,u.stateNode.containerInfo),s===null)throw Error(r(387));var _=u.pendingProps;y=u.memoizedState,g=y.element,Nl(s,u),Ha(u,_,null,d);var w=u.memoizedState;if(_=w.cache,Sr(u,Rt,_),_!==y.cache&&Dl(u,[Rt],d,!0),qa(),_=w.element,y.isDehydrated)if(y={element:_,isDehydrated:!1,cache:w.cache},u.updateQueue.baseState=y,u.memoizedState=y,u.flags&256){u=Hd(s,u,_,d);break e}else if(_!==g){g=vn(Error(r(424)),u),Ma(g),u=Hd(s,u,_,d);break e}else for(Ut=kn(u.stateNode.containerInfo.firstChild),Zt=u,$e=!0,Ln=null,Nn=!0,d=jc(u,null,_,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ra(),_===g){u=rr(s,u,d);break e}jt(s,u,_,d)}u=u.child}return u;case 26:return ja(s,u),s===null?(d=Kh(u.type,null,u.pendingProps,null))?u.memoizedState=d:$e||(d=u.type,s=u.pendingProps,g=fo(Pe.current).createElement(d),g[Vt]=u,g[tn]=s,zt(g,d,s),kt(g),u.stateNode=g):u.memoizedState=Kh(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return yt(u),s===null&&$e&&(g=u.stateNode=Xh(u.type,u.pendingProps,Pe.current),Zt=u,Nn=!0,Ut=kn(g.firstChild)),g=u.pendingProps.children,s!==null||$e?jt(s,u,g,d):u.child=ti(u,null,g,d),ja(s,u),u.child;case 5:return s===null&&$e&&((y=g=Ut)&&(g=Cg(g,u.type,u.pendingProps,Nn),g!==null?(u.stateNode=g,Zt=u,Ut=kn(g.firstChild),Nn=!1,y=!0):y=!1),y||ei(u)),yt(u),y=u.type,_=u.pendingProps,w=s!==null?s.memoizedProps:null,g=_.children,vu(y,_)?g=null:w!==null&&vu(y,w)&&(u.flags|=32),u.memoizedState!==null&&(y=sl(s,u,G0,null,null,d),ss._currentValue=y),ja(s,u),jt(s,u,g,d),u.child;case 6:return s===null&&$e&&((s=d=Ut)&&(d=Eg(d,u.pendingProps,Nn),d!==null?(u.stateNode=d,Zt=u,Ut=null,s=!0):s=!1),s||ei(u)),null;case 13:return Vd(s,u,d);case 4:return Pt(u,u.stateNode.containerInfo),g=u.pendingProps,s===null?u.child=ti(u,null,g,d):jt(s,u,g,d),u.child;case 11:return Nd(s,u,u.type,u.pendingProps,d);case 7:return jt(s,u,u.pendingProps,d),u.child;case 8:return jt(s,u,u.pendingProps.children,d),u.child;case 12:return jt(s,u,u.pendingProps.children,d),u.child;case 10:return g=u.pendingProps,Sr(u,u.type,g.value),jt(s,u,g.children,d),u.child;case 9:return y=u.type._context,g=u.pendingProps.children,li(u),y=Wt(y),g=g(y),u.flags|=1,jt(s,u,g,d),u.child;case 14:return Fd(s,u,u.type,u.pendingProps,d);case 15:return Ud(s,u,u.type,u.pendingProps,d);case 19:return $d(s,u,d);case 22:return jd(s,u,d);case 24:return li(u),g=Wt(Rt),s===null?(y=il(),y===null&&(y=nt,_=nl(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=d),y=_),u.memoizedState={parent:g,cache:y},Gl(u),Sr(u,Rt,y)):((s.lanes&d)!==0&&(Nl(s,u),Ha(u,null,null,d),qa()),y=s.memoizedState,_=u.memoizedState,y.parent!==g?(y={parent:g,cache:g},u.memoizedState=y,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=y),Sr(u,Rt,g)):(g=_.cache,Sr(u,Rt,g),g!==y.cache&&Dl(u,[Rt],d,!0))),jt(s,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}var Ol=Ie(null),oi=null,ir=null;function Sr(s,u,d){ce(Ol,u._currentValue),u._currentValue=d}function ar(s){s._currentValue=Ol.current,ke(Ol)}function kl(s,u,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),s===d)break;s=s.return}}function Dl(s,u,d,g){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var w=y.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=y;for(var B=0;B<u.length;B++)if(D.context===u[B]){_.lanes|=d,D=_.alternate,D!==null&&(D.lanes|=d),kl(_.return,d,s),g||(w=null);break e}_=D.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=d,_=w.alternate,_!==null&&(_.lanes|=d),kl(w,d,s),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function za(s,u,d,g){s=null;for(var y=u,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var D=y.type;ln(y.pendingProps.value,w.value)||(s!==null?s.push(D):s=[D])}}else if(y===Mt.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(ss):s=[ss])}y=y.return}s!==null&&Dl(u,s,d,g),u.flags|=262144}function Zs(s){for(s=s.firstContext;s!==null;){if(!ln(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function li(s){oi=s,ir=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return Yd(oi,s)}function Ks(s,u){return oi===null&&li(s),Yd(s,u)}function Yd(s,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},ir===null){if(s===null)throw Error(r(308));ir=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else ir=ir.next=u;return d}var Ir=!1;function Gl(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nl(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function xr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function wr(s,u,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(ct&2)!==0){var y=g.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),g.pending=u,u=Ps(s),Rc(s,null,d),u}return Ms(s,g,u,d),Ps(s)}function Ba(s,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194176)!==0)){var g=u.lanes;g&=s.pendingLanes,d|=g,u.lanes=d,Ot(s,d)}}function Fl(s,u){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var w={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?y=_=w:_=_.next=w,d=d.next}while(d!==null);_===null?y=_=u:_=_.next=u}else y=_=u;d={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=u}var Ul=!1;function qa(){if(Ul){var s=ji;if(s!==null)throw s}}function Ha(s,u,d,g){Ul=!1;var y=s.updateQueue;Ir=!1;var _=y.firstBaseUpdate,w=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var B=D,Y=B.next;B.next=null,w===null?_=Y:w.next=Y,w=B;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==w&&(D===null?ue.firstBaseUpdate=Y:D.next=Y,ue.lastBaseUpdate=B))}if(_!==null){var ge=y.baseState;w=0,ue=Y=B=null,D=_;do{var ne=D.lane&-536870913,le=ne!==D.lane;if(le?(He&ne)===ne:(g&ne)===ne){ne!==0&&ne===Ui&&(Ul=!0),ue!==null&&(ue=ue.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var xe=s,Le=D;ne=u;var ft=d;switch(Le.tag){case 1:if(xe=Le.payload,typeof xe=="function"){ge=xe.call(ft,ge,ne);break e}ge=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Le.payload,ne=typeof xe=="function"?xe.call(ft,ge,ne):xe,ne==null)break e;ge=K({},ge,ne);break e;case 2:Ir=!0}}ne=D.callback,ne!==null&&(s.flags|=64,le&&(s.flags|=8192),le=y.callbacks,le===null?y.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(Y=ue=le,B=ge):ue=ue.next=le,w|=ne;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;le=D,D=le.next,le.next=null,y.lastBaseUpdate=le,y.shared.pending=null}}while(!0);ue===null&&(B=ge),y.baseState=B,y.firstBaseUpdate=Y,y.lastBaseUpdate=ue,_===null&&(y.shared.lanes=0),Lr|=w,s.lanes=w,s.memoizedState=ge}}function Zd(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function Kd(s,u){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)Zd(d[s],u)}function Va(s,u){try{var d=u.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&s)===s){g=void 0;var _=d.create,w=d.inst;g=_(),w.destroy=g}d=d.next}while(d!==y)}}catch(D){tt(u,u.return,D)}}function Tr(s,u,d){try{var g=u.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var _=y.next;g=_;do{if((g.tag&s)===s){var w=g.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,y=u;var B=d;try{D()}catch(Y){tt(y,B,Y)}}}g=g.next}while(g!==_)}}catch(Y){tt(u,u.return,Y)}}function Qd(s){var u=s.updateQueue;if(u!==null){var d=s.stateNode;try{Kd(u,d)}catch(g){tt(s,s.return,g)}}}function Jd(s,u,d){d.props=si(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(g){tt(s,u,g)}}function ui(s,u){try{var d=s.ref;if(d!==null){var g=s.stateNode;switch(s.tag){case 26:case 27:case 5:var y=g;break;default:y=g}typeof d=="function"?s.refCleanup=d(y):d.current=y}}catch(_){tt(s,u,_)}}function un(s,u){var d=s.ref,g=s.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(y){tt(s,u,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){tt(s,u,y)}else d.current=null}function eh(s){var u=s.type,d=s.memoizedProps,g=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(y){tt(s,s.return,y)}}function th(s,u,d){try{var g=s.stateNode;pg(g,s.type,d,u),g[tn]=u}catch(y){tt(s,s.return,y)}}function nh(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function jl(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||nh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zl(s,u,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,u?d.nodeType===8?d.parentNode.insertBefore(s,u):d.insertBefore(s,u):(d.nodeType===8?(u=d.parentNode,u.insertBefore(s,d)):(u=d,u.appendChild(s)),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=ho));else if(g!==4&&g!==27&&(s=s.child,s!==null))for(zl(s,u,d),s=s.sibling;s!==null;)zl(s,u,d),s=s.sibling}function Qs(s,u,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,u?d.insertBefore(s,u):d.appendChild(s);else if(g!==4&&g!==27&&(s=s.child,s!==null))for(Qs(s,u,d),s=s.sibling;s!==null;)Qs(s,u,d),s=s.sibling}var sr=!1,dt=!1,Bl=!1,rh=typeof WeakSet=="function"?WeakSet:Set,Gt=null,ih=!1;function H0(s,u){if(s=s.containerInfo,mu=_o,s=Cc(s),Ho(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var y=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var w=0,D=-1,B=-1,Y=0,ue=0,ge=s,ne=null;t:for(;;){for(var le;ge!==d||y!==0&&ge.nodeType!==3||(D=w+y),ge!==_||g!==0&&ge.nodeType!==3||(B=w+g),ge.nodeType===3&&(w+=ge.nodeValue.length),(le=ge.firstChild)!==null;)ne=ge,ge=le;for(;;){if(ge===s)break t;if(ne===d&&++Y===y&&(D=w),ne===_&&++ue===g&&(B=w),(le=ge.nextSibling)!==null)break;ge=ne,ne=ge.parentNode}ge=le}d=D===-1||B===-1?null:{start:D,end:B}}else d=null}d=d||{start:0,end:0}}else d=null;for(yu={focusedElem:s,selectionRange:d},_o=!1,Gt=u;Gt!==null;)if(u=Gt,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,Gt=s;else for(;Gt!==null;){switch(u=Gt,_=u.alternate,s=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,d=u,y=_.memoizedProps,_=_.memoizedState,g=d.stateNode;try{var xe=si(d.type,y,d.elementType===d.type);s=g.getSnapshotBeforeUpdate(xe,_),g.__reactInternalSnapshotBeforeUpdate=s}catch(Le){tt(d,d.return,Le)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,d=s.nodeType,d===9)Eu(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Eu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,Gt=s;break}Gt=u.return}return xe=ih,ih=!1,xe}function ah(s,u,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:lr(s,d),g&4&&Va(5,d);break;case 1:if(lr(s,d),g&4)if(s=d.stateNode,u===null)try{s.componentDidMount()}catch(D){tt(d,d.return,D)}else{var y=si(d.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(y,u,s.__reactInternalSnapshotBeforeUpdate)}catch(D){tt(d,d.return,D)}}g&64&&Qd(d),g&512&&ui(d,d.return);break;case 3:if(lr(s,d),g&64&&(g=d.updateQueue,g!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=d.child.stateNode;break;case 1:s=d.child.stateNode}try{Kd(g,s)}catch(D){tt(d,d.return,D)}}break;case 26:lr(s,d),g&512&&ui(d,d.return);break;case 27:case 5:lr(s,d),u===null&&g&4&&eh(d),g&512&&ui(d,d.return);break;case 12:lr(s,d);break;case 13:lr(s,d),g&4&&lh(s,d);break;case 22:if(y=d.memoizedState!==null||sr,!y){u=u!==null&&u.memoizedState!==null||dt;var _=sr,w=dt;sr=y,(dt=u)&&!w?Rr(s,d,(d.subtreeFlags&8772)!==0):lr(s,d),sr=_,dt=w}g&512&&(d.memoizedProps.mode==="manual"?ui(d,d.return):un(d,d.return));break;default:lr(s,d)}}function sh(s){var u=s.alternate;u!==null&&(s.alternate=null,sh(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&To(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var bt=null,cn=!1;function or(s,u,d){for(d=d.child;d!==null;)oh(s,u,d),d=d.sibling}function oh(s,u,d){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(at,d)}catch{}switch(d.tag){case 26:dt||un(d,u),or(s,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:dt||un(d,u);var g=bt,y=cn;for(bt=d.stateNode,or(s,u,d),d=d.stateNode,u=d.attributes;u.length;)d.removeAttributeNode(u[0]);To(d),bt=g,cn=y;break;case 5:dt||un(d,u);case 6:y=bt;var _=cn;if(bt=null,or(s,u,d),bt=y,cn=_,bt!==null)if(cn)try{s=bt,g=d.stateNode,s.nodeType===8?s.parentNode.removeChild(g):s.removeChild(g)}catch(w){tt(d,u,w)}else try{bt.removeChild(d.stateNode)}catch(w){tt(d,u,w)}break;case 18:bt!==null&&(cn?(u=bt,d=d.stateNode,u.nodeType===8?Cu(u.parentNode,d):u.nodeType===1&&Cu(u,d),cs(u)):Cu(bt,d.stateNode));break;case 4:g=bt,y=cn,bt=d.stateNode.containerInfo,cn=!0,or(s,u,d),bt=g,cn=y;break;case 0:case 11:case 14:case 15:dt||Tr(2,d,u),dt||Tr(4,d,u),or(s,u,d);break;case 1:dt||(un(d,u),g=d.stateNode,typeof g.componentWillUnmount=="function"&&Jd(d,u,g)),or(s,u,d);break;case 21:or(s,u,d);break;case 22:dt||un(d,u),dt=(g=dt)||d.memoizedState!==null,or(s,u,d),dt=g;break;default:or(s,u,d)}}function lh(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cs(s)}catch(d){tt(u,u.return,d)}}function V0(s){switch(s.tag){case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new rh),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new rh),u;default:throw Error(r(435,s.tag))}}function ql(s,u){var d=V0(s);u.forEach(function(g){var y=ag.bind(null,s,g);d.has(g)||(d.add(g),g.then(y,y))})}function bn(s,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var y=d[g],_=s,w=u,D=w;e:for(;D!==null;){switch(D.tag){case 27:case 5:bt=D.stateNode,cn=!1;break e;case 3:bt=D.stateNode.containerInfo,cn=!0;break e;case 4:bt=D.stateNode.containerInfo,cn=!0;break e}D=D.return}if(bt===null)throw Error(r(160));oh(_,w,y),bt=null,cn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)uh(u,s),u=u.sibling}var On=null;function uh(s,u){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(u,s),An(s),g&4&&(Tr(3,s,s.return),Va(3,s),Tr(5,s,s.return));break;case 1:bn(u,s),An(s),g&512&&(dt||d===null||un(d,d.return)),g&64&&sr&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var y=On;if(bn(u,s),An(s),g&512&&(dt||d===null||un(d,d.return)),g&4){var _=d!==null?d.memoizedState:null;if(g=s.memoizedState,d===null)if(g===null)if(s.stateNode===null){e:{g=s.type,d=s.memoizedProps,y=y.ownerDocument||y;t:switch(g){case"title":_=y.getElementsByTagName("title")[0],(!_||_[ya]||_[Vt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(g),y.head.insertBefore(_,y.querySelector("head > title"))),zt(_,g,d),_[Vt]=s,kt(_),g=_;break e;case"link":var w=ef("link","href",y).get(g+(d.href||""));if(w){for(var D=0;D<w.length;D++)if(_=w[D],_.getAttribute("href")===(d.href==null?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){w.splice(D,1);break t}}_=y.createElement(g),zt(_,g,d),y.head.appendChild(_);break;case"meta":if(w=ef("meta","content",y).get(g+(d.content||""))){for(D=0;D<w.length;D++)if(_=w[D],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){w.splice(D,1);break t}}_=y.createElement(g),zt(_,g,d),y.head.appendChild(_);break;default:throw Error(r(468,g))}_[Vt]=s,kt(_),g=_}s.stateNode=g}else tf(y,s.type,s.stateNode);else s.stateNode=Jh(y,g,s.memoizedProps);else _!==g?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,g===null?tf(y,s.type,s.stateNode):Jh(y,g,s.memoizedProps)):g===null&&s.stateNode!==null&&th(s,s.memoizedProps,d.memoizedProps)}break;case 27:if(g&4&&s.alternate===null){y=s.stateNode,_=s.memoizedProps;try{for(var B=y.firstChild;B;){var Y=B.nextSibling,ue=B.nodeName;B[ya]||ue==="HEAD"||ue==="BODY"||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&B.rel.toLowerCase()==="stylesheet"||y.removeChild(B),B=Y}for(var ge=s.type,ne=y.attributes;ne.length;)y.removeAttributeNode(ne[0]);zt(y,ge,_),y[Vt]=s,y[tn]=_}catch(xe){tt(s,s.return,xe)}}case 5:if(bn(u,s),An(s),g&512&&(dt||d===null||un(d,d.return)),s.flags&32){y=s.stateNode;try{wi(y,"")}catch(xe){tt(s,s.return,xe)}}g&4&&s.stateNode!=null&&(y=s.memoizedProps,th(s,y,d!==null?d.memoizedProps:y)),g&1024&&(Bl=!0);break;case 6:if(bn(u,s),An(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,d=s.stateNode;try{d.nodeValue=g}catch(xe){tt(s,s.return,xe)}}break;case 3:if(mo=null,y=On,On=go(u.containerInfo),bn(u,s),On=y,An(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{cs(u.containerInfo)}catch(xe){tt(s,s.return,xe)}Bl&&(Bl=!1,ch(s));break;case 4:g=On,On=go(s.stateNode.containerInfo),bn(u,s),An(s),On=g;break;case 12:bn(u,s),An(s);break;case 13:bn(u,s),An(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Ql=se()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,ql(s,g)));break;case 22:if(g&512&&(dt||d===null||un(d,d.return)),B=s.memoizedState!==null,Y=d!==null&&d.memoizedState!==null,ue=sr,ge=dt,sr=ue||B,dt=ge||Y,bn(u,s),dt=ge,sr=ue,An(s),u=s.stateNode,u._current=s,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,g&8192&&(u._visibility=B?u._visibility&-2:u._visibility|1,B&&(u=sr||dt,d===null||Y||u||Hi(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(d=null,u=s;;){if(u.tag===5||u.tag===26||u.tag===27){if(d===null){Y=d=u;try{if(y=Y.stateNode,B)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=Y.stateNode,D=Y.memoizedProps.style;var le=D!=null&&D.hasOwnProperty("display")?D.display:null;w.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(xe){tt(Y,Y.return,xe)}}}else if(u.tag===6){if(d===null){Y=u;try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(xe){tt(Y,Y.return,xe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=s.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,ql(s,d))));break;case 19:bn(u,s),An(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,ql(s,g)));break;case 21:break;default:bn(u,s),An(s)}}function An(s){var u=s.flags;if(u&2){try{if(s.tag!==27){e:{for(var d=s.return;d!==null;){if(nh(d)){var g=d;break e}d=d.return}throw Error(r(160))}switch(g.tag){case 27:var y=g.stateNode,_=jl(s);Qs(s,_,y);break;case 5:var w=g.stateNode;g.flags&32&&(wi(w,""),g.flags&=-33);var D=jl(s);Qs(s,D,w);break;case 3:case 4:var B=g.stateNode.containerInfo,Y=jl(s);zl(s,Y,B);break;default:throw Error(r(161))}}}catch(ue){tt(s,s.return,ue)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function ch(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;ch(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function lr(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)ah(s,u.alternate,u),u=u.sibling}function Hi(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:Tr(4,u,u.return),Hi(u);break;case 1:un(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&Jd(u,u.return,d),Hi(u);break;case 26:case 27:case 5:un(u,u.return),Hi(u);break;case 22:un(u,u.return),u.memoizedState===null&&Hi(u);break;default:Hi(u)}s=s.sibling}}function Rr(s,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,y=s,_=u,w=_.flags;switch(_.tag){case 0:case 11:case 15:Rr(y,_,d),Va(4,_);break;case 1:if(Rr(y,_,d),g=_,y=g.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){tt(g,g.return,Y)}if(g=_,y=g.updateQueue,y!==null){var D=g.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)Zd(B[y],D)}catch(Y){tt(g,g.return,Y)}}d&&w&64&&Qd(_),ui(_,_.return);break;case 26:case 27:case 5:Rr(y,_,d),d&&g===null&&w&4&&eh(_),ui(_,_.return);break;case 12:Rr(y,_,d);break;case 13:Rr(y,_,d),d&&w&4&&lh(y,_);break;case 22:_.memoizedState===null&&Rr(y,_,d),ui(_,_.return);break;default:Rr(y,_,d)}u=u.sibling}}function Hl(s,u){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Da(d))}function Vl(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Da(s))}function Mr(s,u,d,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)dh(s,u,d,g),u=u.sibling}function dh(s,u,d,g){var y=u.flags;switch(u.tag){case 0:case 11:case 15:Mr(s,u,d,g),y&2048&&Va(9,u);break;case 3:Mr(s,u,d,g),y&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Da(s)));break;case 12:if(y&2048){Mr(s,u,d,g),s=u.stateNode;try{var _=u.memoizedProps,w=_.id,D=_.onPostCommit;typeof D=="function"&&D(w,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){tt(u,u.return,B)}}else Mr(s,u,d,g);break;case 23:break;case 22:_=u.stateNode,u.memoizedState!==null?_._visibility&4?Mr(s,u,d,g):Wa(s,u):_._visibility&4?Mr(s,u,d,g):(_._visibility|=4,Vi(s,u,d,g,(u.subtreeFlags&10256)!==0)),y&2048&&Hl(u.alternate,u);break;case 24:Mr(s,u,d,g),y&2048&&Vl(u.alternate,u);break;default:Mr(s,u,d,g)}}function Vi(s,u,d,g,y){for(y=y&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var _=s,w=u,D=d,B=g,Y=w.flags;switch(w.tag){case 0:case 11:case 15:Vi(_,w,D,B,y),Va(8,w);break;case 23:break;case 22:var ue=w.stateNode;w.memoizedState!==null?ue._visibility&4?Vi(_,w,D,B,y):Wa(_,w):(ue._visibility|=4,Vi(_,w,D,B,y)),y&&Y&2048&&Hl(w.alternate,w);break;case 24:Vi(_,w,D,B,y),y&&Y&2048&&Vl(w.alternate,w);break;default:Vi(_,w,D,B,y)}u=u.sibling}}function Wa(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=s,g=u,y=g.flags;switch(g.tag){case 22:Wa(d,g),y&2048&&Hl(g.alternate,g);break;case 24:Wa(d,g),y&2048&&Vl(g.alternate,g);break;default:Wa(d,g)}u=u.sibling}}var $a=8192;function Wi(s){if(s.subtreeFlags&$a)for(s=s.child;s!==null;)hh(s),s=s.sibling}function hh(s){switch(s.tag){case 26:Wi(s),s.flags&$a&&s.memoizedState!==null&&kg(On,s.memoizedState,s.memoizedProps);break;case 5:Wi(s);break;case 3:case 4:var u=On;On=go(s.stateNode.containerInfo),Wi(s),On=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=$a,$a=16777216,Wi(s),$a=u):Wi(s));break;default:Wi(s)}}function fh(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function Xa(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];Gt=g,ph(g,s)}fh(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gh(s),s=s.sibling}function gh(s){switch(s.tag){case 0:case 11:case 15:Xa(s),s.flags&2048&&Tr(9,s,s.return);break;case 3:Xa(s);break;case 12:Xa(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&4&&(s.return===null||s.return.tag!==13)?(u._visibility&=-5,Js(s)):Xa(s);break;default:Xa(s)}}function Js(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];Gt=g,ph(g,s)}fh(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:Tr(8,u,u.return),Js(u);break;case 22:d=u.stateNode,d._visibility&4&&(d._visibility&=-5,Js(u));break;default:Js(u)}s=s.sibling}}function ph(s,u){for(;Gt!==null;){var d=Gt;switch(d.tag){case 0:case 11:case 15:Tr(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Da(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Gt=g;else e:for(d=s;Gt!==null;){g=Gt;var y=g.sibling,_=g.return;if(sh(g),g===d){Gt=null;break e}if(y!==null){y.return=_,Gt=y;break e}Gt=_}}}function W0(s,u,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(s,u,d,g){return new W0(s,u,d,g)}function Wl(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Pr(s,u){var d=s.alternate;return d===null?(d=Sn(s.tag,u,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=u,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&31457280,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,u=s.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function mh(s,u){s.flags&=31457282;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,u=d.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function eo(s,u,d,g,y,_){var w=0;if(g=s,typeof s=="function")Wl(s)&&(w=1);else if(typeof s=="string")w=Lg(s,d,it.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case c:return ci(d.children,y,_,u);case h:w=8,y|=24;break;case f:return s=Sn(12,d,u,y|2),s.elementType=f,s.lanes=_,s;case b:return s=Sn(13,d,u,y),s.elementType=b,s.lanes=_,s;case S:return s=Sn(19,d,u,y),s.elementType=S,s.lanes=_,s;case P:return yh(d,y,_,u);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case p:case v:w=10;break e;case m:w=9;break e;case C:w=11;break e;case x:w=14;break e;case T:w=16,g=null;break e}w=29,d=Error(r(130,s===null?"null":typeof s,"")),g=null}return u=Sn(w,d,u,y),u.elementType=s,u.type=g,u.lanes=_,u}function ci(s,u,d,g){return s=Sn(7,s,g,u),s.lanes=d,s}function yh(s,u,d,g){s=Sn(22,s,g,u),s.elementType=P,s.lanes=d;var y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=y._current;if(_===null)throw Error(r(456));if((y._pendingVisibility&2)===0){var w=_r(_,2);w!==null&&(y._pendingVisibility|=2,Kt(w,_,2))}},attach:function(){var _=y._current;if(_===null)throw Error(r(456));if((y._pendingVisibility&2)!==0){var w=_r(_,2);w!==null&&(y._pendingVisibility&=-3,Kt(w,_,2))}}};return s.stateNode=y,s}function $l(s,u,d){return s=Sn(6,s,null,u),s.lanes=d,s}function Xl(s,u,d){return u=Sn(4,s.children!==null?s.children:[],s.key,u),u.lanes=d,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function ur(s){s.flags|=4}function vh(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!nf(u)){if(u=En.current,u!==null&&((He&4194176)===He?Fn!==null:(He&62914560)!==He&&(He&536870912)===0||u!==Fn))throw La=Jo,kc;s.flags|=8192}}function to(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?sn():536870912,s.lanes|=u,Xi|=u)}function Ya(s,u){if(!$e)switch(s.tailMode){case"hidden":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function ut(s){var u=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(u)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags&31457280,g|=y.flags&31457280,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=g,s.childLanes=d,u}function $0(s,u,d){var g=u.pendingProps;switch(Ko(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(u),null;case 1:return ut(u),null;case 3:return d=u.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),ar(Rt),Ue(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Ta(u)?ur(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ln!==null&&(nu(Ln),Ln=null))),ut(u),null;case 26:return d=u.memoizedState,s===null?(ur(u),d!==null?(ut(u),vh(u,d)):(ut(u),u.flags&=-16777217)):d?d!==s.memoizedState?(ur(u),ut(u),vh(u,d)):(ut(u),u.flags&=-16777217):(s.memoizedProps!==g&&ur(u),ut(u),u.flags&=-16777217),null;case 27:Ye(u),d=Pe.current;var y=u.type;if(s!==null&&u.stateNode!=null)s.memoizedProps!==g&&ur(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return ut(u),null}s=it.current,Ta(u)?Lc(u):(s=Xh(y,g,d),u.stateNode=s,ur(u))}return ut(u),null;case 5:if(Ye(u),d=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==g&&ur(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return ut(u),null}if(s=it.current,Ta(u))Lc(u);else{switch(y=fo(Pe.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof g.is=="string"?y.createElement("select",{is:g.is}):y.createElement("select"),g.multiple?s.multiple=!0:g.size&&(s.size=g.size);break;default:s=typeof g.is=="string"?y.createElement(d,{is:g.is}):y.createElement(d)}}s[Vt]=u,s[tn]=g;e:for(y=u.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break e;for(;y.sibling===null;){if(y.return===null||y.return===u)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}u.stateNode=s;e:switch(zt(s,d,g),d){case"button":case"input":case"select":case"textarea":s=!!g.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ur(u)}}return ut(u),u.flags&=-16777217,null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==g&&ur(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(s=Pe.current,Ta(u)){if(s=u.stateNode,d=u.memoizedProps,g=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:g=y.memoizedProps}s[Vt]=u,s=!!(s.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||Bh(s.nodeValue,d)),s||ei(u)}else s=fo(s).createTextNode(g),s[Vt]=u,u.stateNode=s}return ut(u),null;case 13:if(g=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ta(u),g!==null&&g.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=u.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Vt]=u}else Ra(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ut(u),y=!1}else Ln!==null&&(nu(Ln),Ln=null),y=!0;if(!y)return u.flags&256?(tr(u),u):(tr(u),null)}if(tr(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=g!==null,s=s!==null&&s.memoizedState!==null,d){g=u.child,y=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(y=g.alternate.memoizedState.cachePool.pool);var _=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==y&&(g.flags|=2048)}return d!==s&&d&&(u.child.flags|=8192),to(u,u.updateQueue),ut(u),null;case 4:return Ue(),s===null&&fu(u.stateNode.containerInfo),ut(u),null;case 10:return ar(u.type),ut(u),null;case 19:if(ke(Tt),y=u.memoizedState,y===null)return ut(u),null;if(g=(u.flags&128)!==0,_=y.rendering,_===null)if(g)Ya(y,!1);else{if(ht!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(_=Fs(s),_!==null){for(u.flags|=128,Ya(y,!1),s=_.updateQueue,u.updateQueue=s,to(u,s),u.subtreeFlags=0,s=d,d=u.child;d!==null;)mh(d,s),d=d.sibling;return ce(Tt,Tt.current&1|2),u.child}s=s.sibling}y.tail!==null&&se()>no&&(u.flags|=128,g=!0,Ya(y,!1),u.lanes=4194304)}else{if(!g)if(s=Fs(_),s!==null){if(u.flags|=128,g=!0,s=s.updateQueue,u.updateQueue=s,to(u,s),Ya(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!$e)return ut(u),null}else 2*se()-y.renderingStartTime>no&&d!==536870912&&(u.flags|=128,g=!0,Ya(y,!1),u.lanes=4194304);y.isBackwards?(_.sibling=u.child,u.child=_):(s=y.last,s!==null?s.sibling=_:u.child=_,y.last=_)}return y.tail!==null?(u=y.tail,y.rendering=u,y.tail=u.sibling,y.renderingStartTime=se(),u.sibling=null,s=Tt.current,ce(Tt,g?s&1|2:s&1),u):(ut(u),null);case 22:case 23:return tr(u),tl(),g=u.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(d&536870912)!==0&&(u.flags&128)===0&&(ut(u),u.subtreeFlags&6&&(u.flags|=8192)):ut(u),d=u.updateQueue,d!==null&&to(u,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048),s!==null&&ke(ni),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),ar(Rt),ut(u),null;case 25:return null}throw Error(r(156,u.tag))}function X0(s,u){switch(Ko(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return ar(Rt),Ue(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return Ye(u),null;case 13:if(tr(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ra()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return ke(Tt),null;case 4:return Ue(),null;case 10:return ar(u.type),null;case 22:case 23:return tr(u),tl(),s!==null&&ke(ni),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return ar(Rt),null;case 25:return null;default:return null}}function _h(s,u){switch(Ko(u),u.tag){case 3:ar(Rt),Ue();break;case 26:case 27:case 5:Ye(u);break;case 4:Ue();break;case 13:tr(u);break;case 19:ke(Tt);break;case 10:ar(u.type);break;case 22:case 23:tr(u),tl(),s!==null&&ke(ni);break;case 24:ar(Rt)}}var Y0={getCacheForType:function(s){var u=Wt(Rt),d=u.data.get(s);return d===void 0&&(d=s(),u.data.set(s,d)),d}},Z0=typeof WeakMap=="function"?WeakMap:Map,ct=0,nt=null,Fe=null,He=0,rt=0,dn=null,cr=!1,$i=!1,Yl=!1,dr=0,ht=0,Lr=0,di=0,Zl=0,xn=0,Xi=0,Za=null,jn=null,Kl=!1,Ql=0,no=1/0,ro=null,Or=null,io=!1,hi=null,Ka=0,Jl=0,eu=null,Qa=0,tu=null;function hn(){if((ct&2)!==0&&He!==0)return He&-He;if(N.T!==null){var s=Ui;return s!==0?s:uu()}return ys()}function Ch(){xn===0&&(xn=(He&536870912)===0||$e?Xt():536870912);var s=En.current;return s!==null&&(s.flags|=32),xn}function Kt(s,u,d){(s===nt&&rt===2||s.cancelPendingCommit!==null)&&(Yi(s,0),hr(s,He,xn,!1)),Yt(s,d),((ct&2)===0||s!==nt)&&(s===nt&&((ct&2)===0&&(di|=d),ht===4&&hr(s,He,xn,!1)),zn(s))}function Eh(s,u,d){if((ct&6)!==0)throw Error(r(327));var g=!d&&(u&60)===0&&(u&s.expiredLanes)===0||_t(s,u),y=g?eg(s,u):au(s,u,!0),_=g;do{if(y===0){$i&&!g&&hr(s,u,0,!1);break}else if(y===6)hr(s,u,0,!cr);else{if(d=s.current.alternate,_&&!Q0(d)){y=au(s,u,!1),_=!1;continue}if(y===2){if(_=u,s.errorRecoveryDisabledLanes&_)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){u=w;e:{var D=s;y=Za;var B=D.current.memoizedState.isDehydrated;if(B&&(Yi(D,w).flags|=256),w=au(D,w,!1),w!==2){if(Yl&&!B){D.errorRecoveryDisabledLanes|=_,di|=_,y=4;break e}_=jn,jn=y,_!==null&&nu(_)}y=w}if(_=!1,y!==2)continue}}if(y===1){Yi(s,0),hr(s,u,0,!0);break}e:{switch(g=s,y){case 0:case 1:throw Error(r(345));case 4:if((u&4194176)===u){hr(g,u,xn,!cr);break e}break;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if(g.finishedWork=d,g.finishedLanes=u,(u&62914560)===u&&(_=Ql+300-se(),10<_)){if(hr(g,u,xn,!cr),Wn(g,0)!==0)break e;g.timeoutHandle=Vh(bh.bind(null,g,d,jn,ro,Kl,u,xn,di,Xi,cr,2,-0,0),_);break e}bh(g,d,jn,ro,Kl,u,xn,di,Xi,cr,0,-0,0)}}break}while(!0);zn(s)}function nu(s){jn===null?jn=s:jn.push.apply(jn,s)}function bh(s,u,d,g,y,_,w,D,B,Y,ue,ge,ne){var le=u.subtreeFlags;if((le&8192||(le&16785408)===16785408)&&(as={stylesheets:null,count:0,unsuspend:Og},hh(u),u=Dg(),u!==null)){s.cancelPendingCommit=u(Rh.bind(null,s,d,g,y,w,D,B,1,ge,ne)),hr(s,_,w,!Y);return}Rh(s,d,g,y,w,D,B,ue,ge,ne)}function Q0(s){for(var u=s;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var y=d[g],_=y.getSnapshot;y=y.value;try{if(!ln(_(),y))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function hr(s,u,d,g){u&=~Zl,u&=~di,s.suspendedLanes|=u,s.pingedLanes&=~u,g&&(s.warmLanes|=u),g=s.expirationTimes;for(var y=u;0<y;){var _=31-Ze(y),w=1<<_;g[_]=-1,y&=~w}d!==0&&ot(s,d,u)}function ao(){return(ct&6)===0?(Ja(0),!1):!0}function ru(){if(Fe!==null){if(rt===0)var s=Fe.return;else s=Fe,ir=oi=null,ul(s),Ni=null,Oa=0,s=Fe;for(;s!==null;)_h(s.alternate,s),s=s.return;Fe=null}}function Yi(s,u){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,yg(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),ru(),nt=s,Fe=d=Pr(s.current,null),He=u,rt=0,dn=null,cr=!1,$i=_t(s,u),Yl=!1,Xi=xn=Zl=di=Lr=ht=0,jn=Za=null,Kl=!1,(u&8)!==0&&(u|=u&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=u;0<g;){var y=31-Ze(g),_=1<<y;u|=s[y],g&=~_}return dr=u,Rs(),d}function Ah(s,u){Ge=null,N.H=Un,u===Pa?(u=Nc(),rt=3):u===kc?(u=Nc(),rt=4):rt=u===Gd?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,dn=u,Fe===null&&(ht=1,Ys(s,vn(u,s.current)))}function Sh(){var s=N.H;return N.H=Un,s===null?Un:s}function Ih(){var s=N.A;return N.A=Y0,s}function iu(){ht=4,cr||(He&4194176)!==He&&En.current!==null||($i=!0),(Lr&134217727)===0&&(di&134217727)===0||nt===null||hr(nt,He,xn,!1)}function au(s,u,d){var g=ct;ct|=2;var y=Sh(),_=Ih();(nt!==s||He!==u)&&(ro=null,Yi(s,u)),u=!1;var w=ht;e:do try{if(rt!==0&&Fe!==null){var D=Fe,B=dn;switch(rt){case 8:ru(),w=6;break e;case 3:case 2:case 6:En.current===null&&(u=!0);var Y=rt;if(rt=0,dn=null,Zi(s,D,B,Y),d&&$i){w=0;break e}break;default:Y=rt,rt=0,dn=null,Zi(s,D,B,Y)}}J0(),w=ht;break}catch(ue){Ah(s,ue)}while(!0);return u&&s.shellSuspendCounter++,ir=oi=null,ct=g,N.H=y,N.A=_,Fe===null&&(nt=null,He=0,Rs()),w}function J0(){for(;Fe!==null;)xh(Fe)}function eg(s,u){var d=ct;ct|=2;var g=Sh(),y=Ih();nt!==s||He!==u?(ro=null,no=se()+500,Yi(s,u)):$i=_t(s,u);e:do try{if(rt!==0&&Fe!==null){u=Fe;var _=dn;t:switch(rt){case 1:rt=0,dn=null,Zi(s,u,_,1);break;case 2:if(Dc(_)){rt=0,dn=null,wh(u);break}u=function(){rt===2&&nt===s&&(rt=7),zn(s)},_.then(u,u);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Dc(_)?(rt=0,dn=null,wh(u)):(rt=0,dn=null,Zi(s,u,_,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var D=Fe;if(!w||nf(w)){rt=0,dn=null;var B=D.sibling;if(B!==null)Fe=B;else{var Y=D.return;Y!==null?(Fe=Y,so(Y)):Fe=null}break t}}rt=0,dn=null,Zi(s,u,_,5);break;case 6:rt=0,dn=null,Zi(s,u,_,6);break;case 8:ru(),ht=6;break e;default:throw Error(r(462))}}tg();break}catch(ue){Ah(s,ue)}while(!0);return ir=oi=null,N.H=g,N.A=y,ct=d,Fe!==null?0:(nt=null,He=0,Rs(),ht)}function tg(){for(;Fe!==null&&!It();)xh(Fe)}function xh(s){var u=Xd(s.alternate,s,dr);s.memoizedProps=s.pendingProps,u===null?so(s):Fe=u}function wh(s){var u=s,d=u.alternate;switch(u.tag){case 15:case 0:u=Bd(d,u,u.pendingProps,u.type,void 0,He);break;case 11:u=Bd(d,u,u.pendingProps,u.type.render,u.ref,He);break;case 5:ul(u);default:_h(d,u),u=Fe=mh(u,dr),u=Xd(d,u,dr)}s.memoizedProps=s.pendingProps,u===null?so(s):Fe=u}function Zi(s,u,d,g){ir=oi=null,ul(u),Ni=null,Oa=0;var y=u.return;try{if(B0(s,y,u,d,He)){ht=1,Ys(s,vn(d,s.current)),Fe=null;return}}catch(_){if(y!==null)throw Fe=y,_;ht=1,Ys(s,vn(d,s.current)),Fe=null;return}u.flags&32768?($e||g===1?s=!0:$i||(He&536870912)!==0?s=!1:(cr=s=!0,(g===2||g===3||g===6)&&(g=En.current,g!==null&&g.tag===13&&(g.flags|=16384))),Th(u,s)):so(u)}function so(s){var u=s;do{if((u.flags&32768)!==0){Th(u,cr);return}s=u.return;var d=$0(u.alternate,u,dr);if(d!==null){Fe=d;return}if(u=u.sibling,u!==null){Fe=u;return}Fe=u=s}while(u!==null);ht===0&&(ht=5)}function Th(s,u){do{var d=X0(s.alternate,s);if(d!==null){d.flags&=32767,Fe=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=d}while(s!==null);ht=6,Fe=null}function Rh(s,u,d,g,y,_,w,D,B,Y){var ue=N.T,ge=me.p;try{me.p=2,N.T=null,ng(s,u,d,g,ge,y,_,w,D,B,Y)}finally{N.T=ue,me.p=ge}}function ng(s,u,d,g,y,_,w,D){do Ki();while(hi!==null);if((ct&6)!==0)throw Error(r(327));var B=s.finishedWork;if(g=s.finishedLanes,B===null)return null;if(s.finishedWork=null,s.finishedLanes=0,B===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Y=B.lanes|B.childLanes;if(Y|=Xo,Mn(s,g,Y,_,w,D),s===nt&&(Fe=nt=null,He=0),(B.subtreeFlags&10256)===0&&(B.flags&10256)===0||io||(io=!0,Jl=Y,eu=d,sg(Ce,function(){return Ki(),null})),d=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||d?(d=N.T,N.T=null,_=me.p,me.p=2,w=ct,ct|=4,H0(s,B),uh(B,s),I0(yu,s.containerInfo),_o=!!mu,yu=mu=null,s.current=B,ah(s,B.alternate,B),ae(),ct=w,me.p=_,N.T=d):s.current=B,io?(io=!1,hi=s,Ka=g):Mh(s,Y),Y=s.pendingLanes,Y===0&&(Or=null),xt(B.stateNode),zn(s),u!==null)for(y=s.onRecoverableError,B=0;B<u.length;B++)Y=u[B],y(Y.value,{componentStack:Y.stack});return(Ka&3)!==0&&Ki(),Y=s.pendingLanes,(g&4194218)!==0&&(Y&42)!==0?s===tu?Qa++:(Qa=0,tu=s):Qa=0,Ja(0),null}function Mh(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,Da(u)))}function Ki(){if(hi!==null){var s=hi,u=Jl;Jl=0;var d=gn(Ka),g=N.T,y=me.p;try{if(me.p=32>d?32:d,N.T=null,hi===null)var _=!1;else{d=eu,eu=null;var w=hi,D=Ka;if(hi=null,Ka=0,(ct&6)!==0)throw Error(r(331));var B=ct;if(ct|=4,gh(w.current),dh(w,w.current,D,d),ct=B,Ja(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(at,w)}catch{}_=!0}return _}finally{me.p=y,N.T=g,Mh(s,u)}}return!1}function Ph(s,u,d){u=vn(d,u),u=Al(s.stateNode,u,2),s=wr(s,u,2),s!==null&&(Yt(s,2),zn(s))}function tt(s,u,d){if(s.tag===3)Ph(s,s,d);else for(;u!==null;){if(u.tag===3){Ph(u,s,d);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Or===null||!Or.has(g))){s=vn(d,s),d=kd(2),g=wr(u,d,2),g!==null&&(Dd(d,g,u,s),Yt(g,2),zn(g));break}}u=u.return}}function su(s,u,d){var g=s.pingCache;if(g===null){g=s.pingCache=new Z0;var y=new Set;g.set(u,y)}else y=g.get(u),y===void 0&&(y=new Set,g.set(u,y));y.has(d)||(Yl=!0,y.add(d),s=rg.bind(null,s,u,d),u.then(s,s))}function rg(s,u,d){var g=s.pingCache;g!==null&&g.delete(u),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,nt===s&&(He&d)===d&&(ht===4||ht===3&&(He&62914560)===He&&300>se()-Ql?(ct&2)===0&&Yi(s,0):Zl|=d,Xi===He&&(Xi=0)),zn(s)}function Lh(s,u){u===0&&(u=sn()),s=_r(s,u),s!==null&&(Yt(s,u),zn(s))}function ig(s){var u=s.memoizedState,d=0;u!==null&&(d=u.retryLane),Lh(s,d)}function ag(s,u){var d=0;switch(s.tag){case 13:var g=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),Lh(s,d)}function sg(s,u){return Lt(s,u)}var oo=null,Qi=null,ou=!1,lo=!1,lu=!1,fi=0;function zn(s){s!==Qi&&s.next===null&&(Qi===null?oo=Qi=s:Qi=Qi.next=s),lo=!0,ou||(ou=!0,lg(og))}function Ja(s,u){if(!lu&&lo){lu=!0;do for(var d=!1,g=oo;g!==null;){if(s!==0){var y=g.pendingLanes;if(y===0)var _=0;else{var w=g.suspendedLanes,D=g.pingedLanes;_=(1<<31-Ze(42|s)+1)-1,_&=y&~(w&~D),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(d=!0,Dh(g,_))}else _=He,_=Wn(g,g===nt?_:0),(_&3)===0||_t(g,_)||(d=!0,Dh(g,_));g=g.next}while(d);lu=!1}}function og(){lo=ou=!1;var s=0;fi!==0&&(mg()&&(s=fi),fi=0);for(var u=se(),d=null,g=oo;g!==null;){var y=g.next,_=Oh(g,u);_===0?(g.next=null,d===null?oo=y:d.next=y,y===null&&(Qi=d)):(d=g,(s!==0||(_&3)!==0)&&(lo=!0)),g=y}Ja(s)}function Oh(s,u){for(var d=s.suspendedLanes,g=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var w=31-Ze(_),D=1<<w,B=y[w];B===-1?((D&d)===0||(D&g)!==0)&&(y[w]=$n(D,u)):B<=u&&(s.expiredLanes|=D),_&=~D}if(u=nt,d=He,d=Wn(s,s===u?d:0),g=s.callbackNode,d===0||s===u&&rt===2||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Ve(g),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||_t(s,d)){if(u=d&-d,u===s.callbackPriority)return u;switch(g!==null&&Ve(g),gn(d)){case 2:case 8:d=be;break;case 32:d=Ce;break;case 268435456:d=qe;break;default:d=Ce}return g=kh.bind(null,s),d=Lt(d,g),s.callbackPriority=u,s.callbackNode=d,u}return g!==null&&g!==null&&Ve(g),s.callbackPriority=2,s.callbackNode=null,2}function kh(s,u){var d=s.callbackNode;if(Ki()&&s.callbackNode!==d)return null;var g=He;return g=Wn(s,s===nt?g:0),g===0?null:(Eh(s,g,u),Oh(s,se()),s.callbackNode!=null&&s.callbackNode===d?kh.bind(null,s):null)}function Dh(s,u){if(Ki())return null;Eh(s,u,!0)}function lg(s){vg(function(){(ct&6)!==0?Lt(pe,s):s()})}function uu(){return fi===0&&(fi=Xt()),fi}function Gh(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:bs(""+s)}function Nh(s,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,s.id&&d.setAttribute("form",s.id),u.parentNode.insertBefore(d,u),s=new FormData(s),d.parentNode.removeChild(d),s}function ug(s,u,d,g,y){if(u==="submit"&&d&&d.stateNode===y){var _=Gh((y[tn]||null).action),w=g.submitter;w&&(u=(u=w[tn]||null)?Gh(u.formAction):w.getAttribute("formAction"),u!==null&&(_=u,w=null));var D=new xs("action","action",null,g,y);s.push({event:D,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(fi!==0){var B=w?Nh(y,w):new FormData(y);vl(d,{pending:!0,data:B,method:y.method,action:_},null,B)}}else typeof _=="function"&&(D.preventDefault(),B=w?Nh(y,w):new FormData(y),vl(d,{pending:!0,data:B,method:y.method,action:_},_,B))},currentTarget:y}]})}}for(var cu=0;cu<Tc.length;cu++){var du=Tc[cu],cg=du.toLowerCase(),dg=du[0].toUpperCase()+du.slice(1);Pn(cg,"on"+dg)}Pn(Ac,"onAnimationEnd"),Pn(Sc,"onAnimationIteration"),Pn(Ic,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(w0,"onTransitionRun"),Pn(T0,"onTransitionStart"),Pn(R0,"onTransitionCancel"),Pn(xc,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(es));function Fh(s,u){u=(u&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],y=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var w=g.length-1;0<=w;w--){var D=g[w],B=D.instance,Y=D.currentTarget;if(D=D.listener,B!==_&&y.isPropagationStopped())break e;_=D,y.currentTarget=Y;try{_(y)}catch(ue){Xs(ue)}y.currentTarget=null,_=B}else for(w=0;w<g.length;w++){if(D=g[w],B=D.instance,Y=D.currentTarget,D=D.listener,B!==_&&y.isPropagationStopped())break e;_=D,y.currentTarget=Y;try{_(y)}catch(ue){Xs(ue)}y.currentTarget=null,_=B}}}}function ze(s,u){var d=u[wo];d===void 0&&(d=u[wo]=new Set);var g=s+"__bubble";d.has(g)||(Uh(u,s,2,!1),d.add(g))}function hu(s,u,d){var g=0;u&&(g|=4),Uh(d,s,g,u)}var uo="_reactListening"+Math.random().toString(36).slice(2);function fu(s){if(!s[uo]){s[uo]=!0,zu.forEach(function(d){d!=="selectionchange"&&(hg.has(d)||hu(d,!1,s),hu(d,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[uo]||(u[uo]=!0,hu("selectionchange",!1,u))}}function Uh(s,u,d,g){switch(uf(u)){case 2:var y=Fg;break;case 8:y=Ug;break;default:y=xu}d=y.bind(null,u,d,s),y=void 0,!Do||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),g?y!==void 0?s.addEventListener(u,d,{capture:!0,passive:y}):s.addEventListener(u,d,!0):y!==void 0?s.addEventListener(u,d,{passive:y}):s.addEventListener(u,d,!1)}function gu(s,u,d,g,y){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var w=g.tag;if(w===3||w===4){var D=g.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(w===4)for(w=g.return;w!==null;){var B=w.tag;if((B===3||B===4)&&(B=w.stateNode.containerInfo,B===y||B.nodeType===8&&B.parentNode===y))return;w=w.return}for(;D!==null;){if(w=$r(D),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){g=_=w;continue e}D=D.parentNode}}g=g.return}Ju(function(){var Y=_,ue=Oo(d),ge=[];e:{var ne=wc.get(s);if(ne!==void 0){var le=xs,xe=s;switch(s){case"keypress":if(Ss(d)===0)break e;case"keydown":case"keyup":le=i0;break;case"focusin":xe="focus",le=Uo;break;case"focusout":xe="blur",le=Uo;break;case"beforeblur":case"afterblur":le=Uo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=o0;break;case Ac:case Sc:case Ic:le=Xf;break;case xc:le=u0;break;case"scroll":case"scrollend":le=qf;break;case"wheel":le=d0;break;case"copy":case"cut":case"paste":le=Zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ic;break;case"toggle":case"beforetoggle":le=f0}var Le=(u&4)!==0,ft=!Le&&(s==="scroll"||s==="scrollend"),Q=Le?ne!==null?ne+"Capture":null:ne;Le=[];for(var W=Y,ee;W!==null;){var de=W;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Q===null||(de=_a(W,Q),de!=null&&Le.push(ts(W,de,ee))),ft)break;W=W.return}0<Le.length&&(ne=new le(ne,xe,null,d,ue),ge.push({event:ne,listeners:Le}))}}if((u&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ne&&d!==Lo&&(xe=d.relatedTarget||d.fromElement)&&($r(xe)||xe[bi]))break e;if((le||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(xe=d.relatedTarget||d.toElement,le=Y,xe=xe?$r(xe):null,xe!==null&&(ft=he(xe),Le=xe.tag,xe!==ft||Le!==5&&Le!==27&&Le!==6)&&(xe=null)):(le=null,xe=Y),le!==xe)){if(Le=nc,de="onMouseLeave",Q="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Le=ic,de="onPointerLeave",Q="onPointerEnter",W="pointer"),ft=le==null?ne:va(le),ee=xe==null?ne:va(xe),ne=new Le(de,W+"leave",le,d,ue),ne.target=ft,ne.relatedTarget=ee,de=null,$r(ue)===Y&&(Le=new Le(Q,W+"enter",xe,d,ue),Le.target=ee,Le.relatedTarget=ft,de=Le),ft=de,le&&xe)t:{for(Le=le,Q=xe,W=0,ee=Le;ee;ee=Ji(ee))W++;for(ee=0,de=Q;de;de=Ji(de))ee++;for(;0<W-ee;)Le=Ji(Le),W--;for(;0<ee-W;)Q=Ji(Q),ee--;for(;W--;){if(Le===Q||Q!==null&&Le===Q.alternate)break t;Le=Ji(Le),Q=Ji(Q)}Le=null}else Le=null;le!==null&&jh(ge,ne,le,Le,!1),xe!==null&&ft!==null&&jh(ge,ft,xe,Le,!0)}}e:{if(ne=Y?va(Y):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var Se=hc;else if(cc(ne))if(fc)Se=A0;else{Se=E0;var Ne=C0}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?Y&&Po(Y.elementType)&&(Se=hc):Se=b0;if(Se&&(Se=Se(s,Y))){dc(ge,Se,d,ue);break e}Ne&&Ne(s,ne,Y),s==="focusout"&&Y&&ne.type==="number"&&Y.memoizedProps.value!=null&&Mo(ne,"number",ne.value)}switch(Ne=Y?va(Y):window,s){case"focusin":(cc(Ne)||Ne.contentEditable==="true")&&(Pi=Ne,Vo=Y,wa=null);break;case"focusout":wa=Vo=Pi=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,Ec(ge,d,ue);break;case"selectionchange":if(x0)break;case"keydown":case"keyup":Ec(ge,d,ue)}var we;if(zo)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Mi?lc(s,d)&&(Re="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Re="onCompositionStart");Re&&(ac&&d.locale!=="ko"&&(Mi||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Mi&&(we=ec()):(vr=ue,Go="value"in vr?vr.value:vr.textContent,Mi=!0)),Ne=co(Y,Re),0<Ne.length&&(Re=new rc(Re,s,null,d,ue),ge.push({event:Re,listeners:Ne}),we?Re.data=we:(we=uc(d),we!==null&&(Re.data=we)))),(we=p0?m0(s,d):y0(s,d))&&(Re=co(Y,"onBeforeInput"),0<Re.length&&(Ne=new rc("onBeforeInput","beforeinput",null,d,ue),ge.push({event:Ne,listeners:Re}),Ne.data=we)),ug(ge,s,Y,d,ue)}Fh(ge,u)})}function ts(s,u,d){return{instance:s,listener:u,currentTarget:d}}function co(s,u){for(var d=u+"Capture",g=[];s!==null;){var y=s,_=y.stateNode;y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=_a(s,d),y!=null&&g.unshift(ts(s,y,_)),y=_a(s,u),y!=null&&g.push(ts(s,y,_))),s=s.return}return g}function Ji(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function jh(s,u,d,g,y){for(var _=u._reactName,w=[];d!==null&&d!==g;){var D=d,B=D.alternate,Y=D.stateNode;if(D=D.tag,B!==null&&B===g)break;D!==5&&D!==26&&D!==27||Y===null||(B=Y,y?(Y=_a(d,_),Y!=null&&w.unshift(ts(d,Y,B))):y||(Y=_a(d,_),Y!=null&&w.push(ts(d,Y,B)))),d=d.return}w.length!==0&&s.push({event:u,listeners:w})}var fg=/\r\n?/g,gg=/\u0000|\uFFFD/g;function zh(s){return(typeof s=="string"?s:""+s).replace(fg,`
`).replace(gg,"")}function Bh(s,u){return u=zh(u),zh(s)===u}function ho(){}function et(s,u,d,g,y,_){switch(d){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||wi(s,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&wi(s,""+g);break;case"className":_s(s,"class",g);break;case"tabIndex":_s(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(s,d,g);break;case"style":Ku(s,g,_);break;case"data":if(u!=="object"){_s(s,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||d!=="href")){s.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=bs(""+g),s.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(u!=="input"&&et(s,u,"name",y.name,y,null),et(s,u,"formEncType",y.formEncType,y,null),et(s,u,"formMethod",y.formMethod,y,null),et(s,u,"formTarget",y.formTarget,y,null)):(et(s,u,"encType",y.encType,y,null),et(s,u,"method",y.method,y,null),et(s,u,"target",y.target,y,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=bs(""+g),s.setAttribute(d,g);break;case"onClick":g!=null&&(s.onclick=ho);break;case"onScroll":g!=null&&ze("scroll",s);break;case"onScrollEnd":g!=null&&ze("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}d=bs(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""+g):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":g===!0?s.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,g):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(d,g):s.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(d):s.setAttribute(d,g);break;case"popover":ze("beforetoggle",s),ze("toggle",s),vs(s,"popover",g);break;case"xlinkActuate":Qn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Qn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Qn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Qn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Qn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Qn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":vs(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=zf.get(d)||d,vs(s,d,g))}}function pu(s,u,d,g,y,_){switch(d){case"style":Ku(s,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof g=="string"?wi(s,g):(typeof g=="number"||typeof g=="bigint")&&wi(s,""+g);break;case"onScroll":g!=null&&ze("scroll",s);break;case"onScrollEnd":g!=null&&ze("scrollend",s);break;case"onClick":g!=null&&(s.onclick=ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bu.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),u=d.slice(2,y?d.length-7:void 0),_=s[tn]||null,_=_!=null?_[d]:null,typeof _=="function"&&s.removeEventListener(u,_,y),typeof g=="function")){typeof _!="function"&&_!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(u,g,y);break e}d in s?s[d]=g:g===!0?s.setAttribute(d,""):vs(s,d,g)}}}function zt(s,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",s),ze("load",s);var g=!1,y=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var w=d[_];if(w!=null)switch(_){case"src":g=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:et(s,u,_,w,d,null)}}y&&et(s,u,"srcSet",d.srcSet,d,null),g&&et(s,u,"src",d.src,d,null);return;case"input":ze("invalid",s);var D=_=w=y=null,B=null,Y=null;for(g in d)if(d.hasOwnProperty(g)){var ue=d[g];if(ue!=null)switch(g){case"name":y=ue;break;case"type":w=ue;break;case"checked":B=ue;break;case"defaultChecked":Y=ue;break;case"value":_=ue;break;case"defaultValue":D=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:et(s,u,g,ue,d,null)}}$u(s,_,D,B,Y,w,y,!1),Cs(s);return;case"select":ze("invalid",s),g=w=_=null;for(y in d)if(d.hasOwnProperty(y)&&(D=d[y],D!=null))switch(y){case"value":_=D;break;case"defaultValue":w=D;break;case"multiple":g=D;default:et(s,u,y,D,d,null)}u=_,d=w,s.multiple=!!g,u!=null?xi(s,!!g,u,!1):d!=null&&xi(s,!!g,d,!0);return;case"textarea":ze("invalid",s),_=y=g=null;for(w in d)if(d.hasOwnProperty(w)&&(D=d[w],D!=null))switch(w){case"value":g=D;break;case"defaultValue":y=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:et(s,u,w,D,d,null)}Yu(s,g,y,_),Cs(s);return;case"option":for(B in d)if(d.hasOwnProperty(B)&&(g=d[B],g!=null))switch(B){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:et(s,u,B,g,d,null)}return;case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":ze("load",s);break;case"video":case"audio":for(g=0;g<es.length;g++)ze(es[g],s);break;case"image":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"embed":case"source":case"link":ze("error",s),ze("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in d)if(d.hasOwnProperty(Y)&&(g=d[Y],g!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:et(s,u,Y,g,d,null)}return;default:if(Po(u)){for(ue in d)d.hasOwnProperty(ue)&&(g=d[ue],g!==void 0&&pu(s,u,ue,g,d,void 0));return}}for(D in d)d.hasOwnProperty(D)&&(g=d[D],g!=null&&et(s,u,D,g,d,null))}function pg(s,u,d,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,w=null,D=null,B=null,Y=null,ue=null;for(le in d){var ge=d[le];if(d.hasOwnProperty(le)&&ge!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":B=ge;default:g.hasOwnProperty(le)||et(s,u,le,null,g,ge)}}for(var ne in g){var le=g[ne];if(ge=d[ne],g.hasOwnProperty(ne)&&(le!=null||ge!=null))switch(ne){case"type":_=le;break;case"name":y=le;break;case"checked":Y=le;break;case"defaultChecked":ue=le;break;case"value":w=le;break;case"defaultValue":D=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,u));break;default:le!==ge&&et(s,u,ne,le,g,ge)}}Ro(s,w,D,B,Y,ue,_,y);return;case"select":le=w=D=ne=null;for(_ in d)if(B=d[_],d.hasOwnProperty(_)&&B!=null)switch(_){case"value":break;case"multiple":le=B;default:g.hasOwnProperty(_)||et(s,u,_,null,g,B)}for(y in g)if(_=g[y],B=d[y],g.hasOwnProperty(y)&&(_!=null||B!=null))switch(y){case"value":ne=_;break;case"defaultValue":D=_;break;case"multiple":w=_;default:_!==B&&et(s,u,y,_,g,B)}u=D,d=w,g=le,ne!=null?xi(s,!!d,ne,!1):!!g!=!!d&&(u!=null?xi(s,!!d,u,!0):xi(s,!!d,d?[]:"",!1));return;case"textarea":le=ne=null;for(D in d)if(y=d[D],d.hasOwnProperty(D)&&y!=null&&!g.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:et(s,u,D,null,g,y)}for(w in g)if(y=g[w],_=d[w],g.hasOwnProperty(w)&&(y!=null||_!=null))switch(w){case"value":ne=y;break;case"defaultValue":le=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==_&&et(s,u,w,y,g,_)}Xu(s,ne,le);return;case"option":for(var xe in d)if(ne=d[xe],d.hasOwnProperty(xe)&&ne!=null&&!g.hasOwnProperty(xe))switch(xe){case"selected":s.selected=!1;break;default:et(s,u,xe,null,g,ne)}for(B in g)if(ne=g[B],le=d[B],g.hasOwnProperty(B)&&ne!==le&&(ne!=null||le!=null))switch(B){case"selected":s.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:et(s,u,B,ne,g,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in d)ne=d[Le],d.hasOwnProperty(Le)&&ne!=null&&!g.hasOwnProperty(Le)&&et(s,u,Le,null,g,ne);for(Y in g)if(ne=g[Y],le=d[Y],g.hasOwnProperty(Y)&&ne!==le&&(ne!=null||le!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:et(s,u,Y,ne,g,le)}return;default:if(Po(u)){for(var ft in d)ne=d[ft],d.hasOwnProperty(ft)&&ne!==void 0&&!g.hasOwnProperty(ft)&&pu(s,u,ft,void 0,g,ne);for(ue in g)ne=g[ue],le=d[ue],!g.hasOwnProperty(ue)||ne===le||ne===void 0&&le===void 0||pu(s,u,ue,ne,g,le);return}}for(var Q in d)ne=d[Q],d.hasOwnProperty(Q)&&ne!=null&&!g.hasOwnProperty(Q)&&et(s,u,Q,null,g,ne);for(ge in g)ne=g[ge],le=d[ge],!g.hasOwnProperty(ge)||ne===le||ne==null&&le==null||et(s,u,ge,ne,g,le)}var mu=null,yu=null;function fo(s){return s.nodeType===9?s:s.ownerDocument}function qh(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hh(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function vu(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _u=null;function mg(){var s=window.event;return s&&s.type==="popstate"?s===_u?!1:(_u=s,!0):(_u=null,!1)}var Vh=typeof setTimeout=="function"?setTimeout:void 0,yg=typeof clearTimeout=="function"?clearTimeout:void 0,Wh=typeof Promise=="function"?Promise:void 0,vg=typeof queueMicrotask=="function"?queueMicrotask:typeof Wh<"u"?function(s){return Wh.resolve(null).then(s).catch(_g)}:Vh;function _g(s){setTimeout(function(){throw s})}function Cu(s,u){var d=u,g=0;do{var y=d.nextSibling;if(s.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(g===0){s.removeChild(y),cs(u);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=y}while(d);cs(u)}function Eu(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Eu(d),To(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function Cg(s,u,d,g){for(;s.nodeType===1;){var y=d;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ya])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=kn(s.nextSibling),s===null)break}return null}function Eg(s,u,d){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=kn(s.nextSibling),s===null))return null;return s}function kn(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return s}function $h(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return s;u--}else d==="/$"&&u++}s=s.previousSibling}return null}function Xh(s,u,d){switch(u=fo(d),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var wn=new Map,Yh=new Set;function go(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var gr=me.d;me.d={f:bg,r:Ag,D:Sg,C:Ig,L:xg,m:wg,X:Rg,S:Tg,M:Mg};function bg(){var s=gr.f(),u=ao();return s||u}function Ag(s){var u=Ai(s);u!==null&&u.tag===5&&u.type==="form"?bd(u):gr.r(s)}var ea=typeof document>"u"?null:document;function Zh(s,u,d){var g=ea;if(g&&typeof u=="string"&&u){var y=mn(u);y='link[rel="'+s+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),Yh.has(y)||(Yh.add(y),s={rel:s,crossOrigin:d,href:u},g.querySelector(y)===null&&(u=g.createElement("link"),zt(u,"link",s),kt(u),g.head.appendChild(u)))}}function Sg(s){gr.D(s),Zh("dns-prefetch",s,null)}function Ig(s,u){gr.C(s,u),Zh("preconnect",s,u)}function xg(s,u,d){gr.L(s,u,d);var g=ea;if(g&&s&&u){var y='link[rel="preload"][as="'+mn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+mn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+mn(d.imageSizes)+'"]')):y+='[href="'+mn(s)+'"]';var _=y;switch(u){case"style":_=ta(s);break;case"script":_=na(s)}wn.has(_)||(s=K({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:s,as:u},d),wn.set(_,s),g.querySelector(y)!==null||u==="style"&&g.querySelector(ns(_))||u==="script"&&g.querySelector(rs(_))||(u=g.createElement("link"),zt(u,"link",s),kt(u),g.head.appendChild(u)))}}function wg(s,u){gr.m(s,u);var d=ea;if(d&&s){var g=u&&typeof u.as=="string"?u.as:"script",y='link[rel="modulepreload"][as="'+mn(g)+'"][href="'+mn(s)+'"]',_=y;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=na(s)}if(!wn.has(_)&&(s=K({rel:"modulepreload",href:s},u),wn.set(_,s),d.querySelector(y)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(rs(_)))return}g=d.createElement("link"),zt(g,"link",s),kt(g),d.head.appendChild(g)}}}function Tg(s,u,d){gr.S(s,u,d);var g=ea;if(g&&s){var y=Si(g).hoistableStyles,_=ta(s);u=u||"default";var w=y.get(_);if(!w){var D={loading:0,preload:null};if(w=g.querySelector(ns(_)))D.loading=5;else{s=K({rel:"stylesheet",href:s,"data-precedence":u},d),(d=wn.get(_))&&bu(s,d);var B=w=g.createElement("link");kt(B),zt(B,"link",s),B._p=new Promise(function(Y,ue){B.onload=Y,B.onerror=ue}),B.addEventListener("load",function(){D.loading|=1}),B.addEventListener("error",function(){D.loading|=2}),D.loading|=4,po(w,u,g)}w={type:"stylesheet",instance:w,count:1,state:D},y.set(_,w)}}}function Rg(s,u){gr.X(s,u);var d=ea;if(d&&s){var g=Si(d).hoistableScripts,y=na(s),_=g.get(y);_||(_=d.querySelector(rs(y)),_||(s=K({src:s,async:!0},u),(u=wn.get(y))&&Au(s,u),_=d.createElement("script"),kt(_),zt(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(y,_))}}function Mg(s,u){gr.M(s,u);var d=ea;if(d&&s){var g=Si(d).hoistableScripts,y=na(s),_=g.get(y);_||(_=d.querySelector(rs(y)),_||(s=K({src:s,async:!0,type:"module"},u),(u=wn.get(y))&&Au(s,u),_=d.createElement("script"),kt(_),zt(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(y,_))}}function Kh(s,u,d,g){var y=(y=Pe.current)?go(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=ta(d.href),d=Si(y).hoistableStyles,g=d.get(u),g||(g={type:"style",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=ta(d.href);var _=Si(y).hoistableStyles,w=_.get(s);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,w),(_=y.querySelector(ns(s)))&&!_._p&&(w.instance=_,w.state.loading=5),wn.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},wn.set(s,d),_||Pg(y,s,d,w.state))),u&&g===null)throw Error(r(528,""));return w}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=na(d),d=Si(y).hoistableScripts,g=d.get(u),g||(g={type:"script",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ta(s){return'href="'+mn(s)+'"'}function ns(s){return'link[rel="stylesheet"]['+s+"]"}function Qh(s){return K({},s,{"data-precedence":s.precedence,precedence:null})}function Pg(s,u,d,g){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=s.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),zt(u,"link",d),kt(u),s.head.appendChild(u))}function na(s){return'[src="'+mn(s)+'"]'}function rs(s){return"script[async]"+s}function Jh(s,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var g=s.querySelector('style[data-href~="'+mn(d.href)+'"]');if(g)return u.instance=g,kt(g),g;var y=K({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),kt(g),zt(g,"style",y),po(g,d.precedence,s),u.instance=g;case"stylesheet":y=ta(d.href);var _=s.querySelector(ns(y));if(_)return u.state.loading|=4,u.instance=_,kt(_),_;g=Qh(d),(y=wn.get(y))&&bu(g,y),_=(s.ownerDocument||s).createElement("link"),kt(_);var w=_;return w._p=new Promise(function(D,B){w.onload=D,w.onerror=B}),zt(_,"link",g),u.state.loading|=4,po(_,d.precedence,s),u.instance=_;case"script":return _=na(d.src),(y=s.querySelector(rs(_)))?(u.instance=y,kt(y),y):(g=d,(y=wn.get(_))&&(g=K({},d),Au(g,y)),s=s.ownerDocument||s,y=s.createElement("script"),kt(y),zt(y,"link",g),s.head.appendChild(y),u.instance=y);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,po(g,d.precedence,s));return u.instance}function po(s,u,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=g.length?g[g.length-1]:null,_=y,w=0;w<g.length;w++){var D=g[w];if(D.dataset.precedence===u)_=D;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(s,u.firstChild))}function bu(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function Au(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var mo=null;function ef(s,u,d){if(mo===null){var g=new Map,y=mo=new Map;y.set(d,g)}else y=mo,g=y.get(d),g||(g=new Map,y.set(d,g));if(g.has(s))return g;for(g.set(s,null),d=d.getElementsByTagName(s),y=0;y<d.length;y++){var _=d[y];if(!(_[ya]||_[Vt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(u)||"";w=s+w;var D=g.get(w);D?D.push(_):g.set(w,[_])}}return g}function tf(s,u,d){s=s.ownerDocument||s,s.head.insertBefore(d,u==="title"?s.querySelector("head > title"):null)}function Lg(s,u,d){if(d===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return s=u.disabled,typeof u.precedence=="string"&&s==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function nf(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var as=null;function Og(){}function kg(s,u,d){if(as===null)throw Error(r(475));var g=as;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=ta(d.href),_=s.querySelector(ns(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(g.count++,g=yo.bind(g),s.then(g,g)),u.state.loading|=4,u.instance=_,kt(_);return}_=s.ownerDocument||s,d=Qh(d),(y=wn.get(y))&&bu(d,y),_=_.createElement("link"),kt(_);var w=_;w._p=new Promise(function(D,B){w.onload=D,w.onerror=B}),zt(_,"link",d),u.instance=_}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=yo.bind(g),s.addEventListener("load",u),s.addEventListener("error",u))}}function Dg(){if(as===null)throw Error(r(475));var s=as;return s.stylesheets&&s.count===0&&Su(s,s.stylesheets),0<s.count?function(u){var d=setTimeout(function(){if(s.stylesheets&&Su(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d)}}:null}function yo(){if(this.count--,this.count===0){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var vo=null;function Su(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,vo=new Map,u.forEach(Gg,s),vo=null,yo.call(s))}function Gg(s,u){if(!(u.state.loading&4)){var d=vo.get(s);if(d)var g=d.get(null);else{d=new Map,vo.set(s,d);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var w=y[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(d.set(w.dataset.precedence,w),g=w)}g&&d.set(null,g)}y=u.instance,w=y.getAttribute("data-precedence"),_=d.get(w)||g,_===g&&d.set(null,y),d.set(w,y),this.count++,g=yo.bind(this),y.addEventListener("load",g),y.addEventListener("error",g),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),u.state.loading|=4}}var ss={$$typeof:v,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function Ng(s,u,d,g,y,_,w,D){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ht(0),this.hiddenUpdates=Ht(null),this.identifierPrefix=g,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function rf(s,u,d,g,y,_,w,D,B,Y,ue,ge){return s=new Ng(s,u,d,w,D,B,Y,ge),u=1,_===!0&&(u|=24),_=Sn(3,null,null,u),s.current=_,_.stateNode=s,u=nl(),u.refCount++,s.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:d,cache:u},Gl(_),s}function af(s){return s?(s=ki,s):ki}function sf(s,u,d,g,y,_){y=af(y),g.context===null?g.context=y:g.pendingContext=y,g=xr(u),g.payload={element:d},_=_===void 0?null:_,_!==null&&(g.callback=_),d=wr(s,g,u),d!==null&&(Kt(d,s,u),Ba(d,s,u))}function of(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<u?d:u}}function Iu(s,u){of(s,u),(s=s.alternate)&&of(s,u)}function lf(s){if(s.tag===13){var u=_r(s,67108864);u!==null&&Kt(u,s,67108864),Iu(s,67108864)}}var _o=!0;function Fg(s,u,d,g){var y=N.T;N.T=null;var _=me.p;try{me.p=2,xu(s,u,d,g)}finally{me.p=_,N.T=y}}function Ug(s,u,d,g){var y=N.T;N.T=null;var _=me.p;try{me.p=8,xu(s,u,d,g)}finally{me.p=_,N.T=y}}function xu(s,u,d,g){if(_o){var y=wu(g);if(y===null)gu(s,u,g,Co,d),cf(s,g);else if(zg(y,s,u,d,g))g.stopPropagation();else if(cf(s,g),u&4&&-1<jg.indexOf(s)){for(;y!==null;){var _=Ai(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=en(_.pendingLanes);if(w!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var B=1<<31-Ze(w);D.entanglements[1]|=B,w&=~B}zn(_),(ct&6)===0&&(no=se()+500,Ja(0))}}break;case 13:D=_r(_,2),D!==null&&Kt(D,_,2),ao(),Iu(_,2)}if(_=wu(g),_===null&&gu(s,u,g,Co,d),_===y)break;y=_}y!==null&&g.stopPropagation()}else gu(s,u,g,null,d)}}function wu(s){return s=Oo(s),Tu(s)}var Co=null;function Tu(s){if(Co=null,s=$r(s),s!==null){var u=he(s);if(u===null)s=null;else{var d=u.tag;if(d===13){if(s=Ee(u),s!==null)return s;s=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return Co=s,null}function uf(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case pe:return 2;case be:return 8;case Ce:case Te:return 32;case qe:return 268435456;default:return 32}default:return 32}}var Ru=!1,kr=null,Dr=null,Gr=null,os=new Map,ls=new Map,Nr=[],jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cf(s,u){switch(s){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":os.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(u.pointerId)}}function us(s,u,d,g,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:u,domEventName:d,eventSystemFlags:g,nativeEvent:_,targetContainers:[y]},u!==null&&(u=Ai(u),u!==null&&lf(u)),s):(s.eventSystemFlags|=g,u=s.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),s)}function zg(s,u,d,g,y){switch(u){case"focusin":return kr=us(kr,s,u,d,g,y),!0;case"dragenter":return Dr=us(Dr,s,u,d,g,y),!0;case"mouseover":return Gr=us(Gr,s,u,d,g,y),!0;case"pointerover":var _=y.pointerId;return os.set(_,us(os.get(_)||null,s,u,d,g,y)),!0;case"gotpointercapture":return _=y.pointerId,ls.set(_,us(ls.get(_)||null,s,u,d,g,y)),!0}return!1}function df(s){var u=$r(s.target);if(u!==null){var d=he(u);if(d!==null){if(u=d.tag,u===13){if(u=Ee(d),u!==null){s.blockedOn=u,Of(s.priority,function(){if(d.tag===13){var g=hn(),y=_r(d,g);y!==null&&Kt(y,d,g),Iu(d,g)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Eo(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var d=wu(s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);Lo=g,d.target.dispatchEvent(g),Lo=null}else return u=Ai(d),u!==null&&lf(u),s.blockedOn=d,!1;u.shift()}return!0}function hf(s,u,d){Eo(s)&&d.delete(u)}function Bg(){Ru=!1,kr!==null&&Eo(kr)&&(kr=null),Dr!==null&&Eo(Dr)&&(Dr=null),Gr!==null&&Eo(Gr)&&(Gr=null),os.forEach(hf),ls.forEach(hf)}function bo(s,u){s.blockedOn===u&&(s.blockedOn=null,Ru||(Ru=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bg)))}var Ao=null;function ff(s){Ao!==s&&(Ao=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ao===s&&(Ao=null);for(var u=0;u<s.length;u+=3){var d=s[u],g=s[u+1],y=s[u+2];if(typeof g!="function"){if(Tu(g||d)===null)continue;break}var _=Ai(d);_!==null&&(s.splice(u,3),u-=3,vl(_,{pending:!0,data:y,method:d.method,action:g},g,y))}}))}function cs(s){function u(B){return bo(B,s)}kr!==null&&bo(kr,s),Dr!==null&&bo(Dr,s),Gr!==null&&bo(Gr,s),os.forEach(u),ls.forEach(u);for(var d=0;d<Nr.length;d++){var g=Nr[d];g.blockedOn===s&&(g.blockedOn=null)}for(;0<Nr.length&&(d=Nr[0],d.blockedOn===null);)df(d),d.blockedOn===null&&Nr.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var y=d[g],_=d[g+1],w=y[tn]||null;if(typeof _=="function")w||ff(d);else if(w){var D=null;if(_&&_.hasAttribute("formAction")){if(y=_,w=_[tn]||null)D=w.formAction;else if(Tu(y)!==null)continue}else D=w.action;typeof D=="function"?d[g+1]=D:(d.splice(g,3),g-=3),ff(d)}}}function Mu(s){this._internalRoot=s}So.prototype.render=Mu.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,g=hn();sf(d,g,s,u,null,null)},So.prototype.unmount=Mu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;s.tag===0&&Ki(),sf(s.current,2,null,s,null,null),ao(),u[bi]=null}};function So(s){this._internalRoot=s}So.prototype.unstable_scheduleHydration=function(s){if(s){var u=ys();s={blockedOn:null,target:s,priority:u};for(var d=0;d<Nr.length&&u!==0&&u<Nr[d].priority;d++);Nr.splice(d,0,s),d===0&&df(s)}};var gf=e.version;if(gf!=="19.0.0")throw Error(r(527,gf,"19.0.0"));me.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=ie(u),s=s!==null?re(s):null,s=s===null?null:s.stateNode,s};var qg={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:$r,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{at=Io.inject(qg),We=Io}catch{}}return reactDomClient_production.createRoot=function(s,u){if(!i(s))throw Error(r(299));var d=!1,g="",y=Md,_=Pd,w=Ld,D=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(w=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(D=u.unstable_transitionCallbacks)),u=rf(s,1,!1,null,null,d,g,y,_,w,D,null),s[bi]=u.current,fu(s.nodeType===8?s.parentNode:s),new Mu(u)},reactDomClient_production.hydrateRoot=function(s,u,d){if(!i(s))throw Error(r(299));var g=!1,y="",_=Md,w=Pd,D=Ld,B=null,Y=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(w=d.onCaughtError),d.onRecoverableError!==void 0&&(D=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(B=d.unstable_transitionCallbacks),d.formState!==void 0&&(Y=d.formState)),u=rf(s,1,!0,u,d??null,g,y,_,w,D,B,Y),u.context=af(null),d=u.current,g=hn(),y=xr(g),y.callback=null,wr(d,y,g),u.current.lanes=g,Yt(u,g),zn(u),s[bi]=u.current,fu(s),new So(u)},reactDomClient_production.version="19.0.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function noop$2(){}function createSyncStoragePersister({storage:n,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:t=1e3,serialize:r=JSON.stringify,deserialize:i=JSON.parse,retry:a}){if(n){const o=l=>{try{n.setItem(e,r(l));return}catch(c){return c}};return{persistClient:throttle$1(l=>{let c=l,h=o(c),f=0;for(;h&&c;)f++,c=a==null?void 0:a({persistedClient:c,error:h,errorCount:f}),c&&(h=o(c))},t),restoreClient:()=>{const l=n.getItem(e);if(l)return i(l)},removeClient:()=>{n.removeItem(e)}}}return{persistClient:noop$2,restoreClient:noop$2,removeClient:noop$2}}function throttle$1(n,e=100){let t=null,r;return function(...i){r=i,t===null&&(t=setTimeout(()=>{n(...r),t=null},e))}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(n,e){return typeof n=="function"?n(e):n}function isValidTimeout(n){return typeof n=="number"&&n>=0&&n!==1/0}function timeUntilStale(n,e){return Math.max(n+(e||0)-Date.now(),0)}function resolveStaleTime(n,e){return typeof n=="function"?n(e):n}function resolveEnabled(n,e){return typeof n=="function"?n(e):n}function matchQuery(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=n;if(o){if(r){if(e.queryHash!==hashQueryKeyByOptions(o,e.options))return!1}else if(!partialMatchKey(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||a&&!a(e))}function matchMutation(n,e){const{exact:t,status:r,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(hashKey(e.options.mutationKey)!==hashKey(a))return!1}else if(!partialMatchKey(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function hashQueryKeyByOptions(n,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(n)}function hashKey(n){return JSON.stringify(n,(e,t)=>isPlainObject(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function partialMatchKey(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!partialMatchKey(n[t],e[t])):!1}function replaceEqualDeep(n,e){if(n===e)return n;const t=isPlainArray(n)&&isPlainArray(e);if(t||isPlainObject(n)&&isPlainObject(e)){const r=t?n:Object.keys(n),i=r.length,a=t?e:Object.keys(e),o=a.length,l=t?[]:{};let c=0;for(let h=0;h<o;h++){const f=t?h:a[h];(!t&&r.includes(f)||t)&&n[f]===void 0&&e[f]===void 0?(l[f]=void 0,c++):(l[f]=replaceEqualDeep(n[f],e[f]),l[f]===n[f]&&n[f]!==void 0&&c++)}return i===o&&c===i?n:l}return e}function shallowEqualObjects(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function isPlainArray(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function isPlainObject(n){if(!hasObjectPrototype(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!hasObjectPrototype(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function hasObjectPrototype(n){return Object.prototype.toString.call(n)==="[object Object]"}function sleep(n){return new Promise(e=>{setTimeout(e,n)})}function replaceData(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?replaceEqualDeep(n,e):e}function addToEnd(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function addToStart(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var skipToken=Symbol();function ensureQueryFn(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var gi,jr,ra,yf,FocusManager=(yf=class extends Subscribable{constructor(){super();Me(this,gi);Me(this,jr);Me(this,ra);Ae(this,ra,e=>{if(!isServer&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){$(this,jr)||this.setEventListener($(this,ra))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,jr))==null||e.call(this),Ae(this,jr,void 0))}setEventListener(e){var t;Ae(this,ra,e),(t=$(this,jr))==null||t.call(this),Ae(this,jr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){$(this,gi)!==e&&(Ae(this,gi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof $(this,gi)=="boolean"?$(this,gi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gi=new WeakMap,jr=new WeakMap,ra=new WeakMap,yf),focusManager=new FocusManager,ia,zr,aa,vf,OnlineManager=(vf=class extends Subscribable{constructor(){super();Me(this,ia,!0);Me(this,zr);Me(this,aa);Ae(this,aa,e=>{if(!isServer&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,zr)||this.setEventListener($(this,aa))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,zr))==null||e.call(this),Ae(this,zr,void 0))}setEventListener(e){var t;Ae(this,aa,e),(t=$(this,zr))==null||t.call(this),Ae(this,zr,e(this.setOnline.bind(this)))}setOnline(e){$(this,ia)!==e&&(Ae(this,ia,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return $(this,ia)}},ia=new WeakMap,zr=new WeakMap,aa=new WeakMap,vf),onlineManager=new OnlineManager;function pendingThenable(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function defaultRetryDelay(n){return Math.min(1e3*2**n,3e4)}function canFetch(n){return(n??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function isCancelledError(n){return n instanceof CancelledError}function createRetryer(n){let e=!1,t=0,r=!1,i;const a=pendingThenable(),o=b=>{var S;r||(m(new CancelledError(b)),(S=n.abort)==null||S.call(n))},l=()=>{e=!0},c=()=>{e=!1},h=()=>focusManager.isFocused()&&(n.networkMode==="always"||onlineManager.isOnline())&&n.canRun(),f=()=>canFetch(n.networkMode)&&n.canRun(),p=b=>{var S;r||(r=!0,(S=n.onSuccess)==null||S.call(n,b),i==null||i(),a.resolve(b))},m=b=>{var S;r||(r=!0,(S=n.onError)==null||S.call(n,b),i==null||i(),a.reject(b))},v=()=>new Promise(b=>{var S;i=x=>{(r||h())&&b(x)},(S=n.onPause)==null||S.call(n)}).then(()=>{var b;i=void 0,r||(b=n.onContinue)==null||b.call(n)}),C=()=>{if(r)return;let b;const S=t===0?n.initialPromise:void 0;try{b=S??n.fn()}catch(x){b=Promise.reject(x)}Promise.resolve(b).then(p).catch(x=>{var F;if(r)return;const T=n.retry??(isServer?0:3),P=n.retryDelay??defaultRetryDelay,L=typeof P=="function"?P(t,x):P,k=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,x);if(e||!k){m(x);return}t++,(F=n.onFail)==null||F.call(n,t,x),sleep(L).then(()=>h()?void 0:v()).then(()=>{e?m(x):C()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?C():v().then(C),a)}}function createNotifyManager(){let n=[],e=0,t=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{e?n.push(l):i(()=>{t(l)})},o=()=>{const l=n;n=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var notifyManager=createNotifyManager(),pi,_f,Removable=(_f=class{constructor(){Me(this,pi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Ae(this,pi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(isServer?1/0:5*60*1e3))}clearGcTimeout(){$(this,pi)&&(clearTimeout($(this,pi)),Ae(this,pi,void 0))}},pi=new WeakMap,_f),sa,oa,Tn,mi,$t,fs,yi,Dn,pr,Cf,Query=(Cf=class extends Removable{constructor(e){super();Me(this,Dn);Me(this,sa);Me(this,oa);Me(this,Tn);Me(this,mi);Me(this,$t);Me(this,fs);Me(this,yi);Ae(this,yi,!1),Ae(this,fs,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ae(this,mi,e.client),Ae(this,Tn,$(this,mi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ae(this,sa,getDefaultState$1(this.options)),this.state=e.state??$(this,sa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=$(this,$t))==null?void 0:e.promise}setOptions(e){this.options={...$(this,fs),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Tn).remove(this)}setData(e,t){const r=replaceData(this.state.data,e,this.options);return Oe(this,Dn,pr).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Oe(this,Dn,pr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=$(this,$t))==null?void 0:r.promise;return(i=$(this,$t))==null||i.cancel(e),t?t.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,sa))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=$(this,$t))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=$(this,$t))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),$(this,Tn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||($(this,$t)&&($(this,yi)?$(this,$t).cancel({revert:!0}):$(this,$t).cancelRetry()),this.scheduleGc()),$(this,Tn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Oe(this,Dn,pr).call(this,{type:"invalidate"})}fetch(e,t){var c,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if($(this,$t))return $(this,$t).continueRetry(),$(this,$t).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ae(this,yi,!0),r.signal)})},a=()=>{const p=ensureQueryFn(this.options,t),m={client:$(this,mi),queryKey:this.queryKey,meta:this.meta};return i(m),Ae(this,yi,!1),this.options.persister?this.options.persister(p,m,this):p(m)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:$(this,mi),state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),Ae(this,oa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Oe(this,Dn,pr).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=p=>{var m,v,C,b;isCancelledError(p)&&p.silent||Oe(this,Dn,pr).call(this,{type:"error",error:p}),isCancelledError(p)||((v=(m=$(this,Tn).config).onError)==null||v.call(m,p,this),(b=(C=$(this,Tn).config).onSettled)==null||b.call(C,this.state.data,p,this)),this.scheduleGc()};return Ae(this,$t,createRetryer({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,v,C,b;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(S){l(S);return}(v=(m=$(this,Tn).config).onSuccess)==null||v.call(m,p,this),(b=(C=$(this,Tn).config).onSettled)==null||b.call(C,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{Oe(this,Dn,pr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Oe(this,Dn,pr).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Dn,pr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),$(this,$t).start()}},sa=new WeakMap,oa=new WeakMap,Tn=new WeakMap,mi=new WeakMap,$t=new WeakMap,fs=new WeakMap,yi=new WeakMap,Dn=new WeakSet,pr=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fetchState(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return isCancelledError(i)&&i.revert&&$(this,oa)?{...$(this,oa),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),notifyManager.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),$(this,Tn).notify({query:this,type:"updated",action:e})})},Cf);function fetchState(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Bn,Ef,QueryCache=(Ef=class extends Subscribable{constructor(e={}){super();Me(this,Bn);this.config=e,Ae(this,Bn,new Map)}build(e,t,r){const i=t.queryKey,a=t.queryHash??hashQueryKeyByOptions(i,t);let o=this.get(a);return o||(o=new Query({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){$(this,Bn).has(e.queryHash)||($(this,Bn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=$(this,Bn).get(e.queryHash);t&&(e.destroy(),t===e&&$(this,Bn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,Bn).get(e)}getAll(){return[...$(this,Bn).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>matchQuery(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>matchQuery(e,r)):t}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Bn=new WeakMap,Ef),qn,Qt,vi,Hn,Ur,bf,Mutation=(bf=class extends Removable{constructor(e){super();Me(this,Hn);Me(this,qn);Me(this,Qt);Me(this,vi);this.mutationId=e.mutationId,Ae(this,Qt,e.mutationCache),Ae(this,qn,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){$(this,qn).includes(e)||($(this,qn).push(e),this.clearGcTimeout(),$(this,Qt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ae(this,qn,$(this,qn).filter(t=>t!==e)),this.scheduleGc(),$(this,Qt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){$(this,qn).length||(this.state.status==="pending"?this.scheduleGc():$(this,Qt).remove(this))}continue(){var e;return((e=$(this,vi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,l,c,h,f,p,m,v,C,b,S,x,T,P,L,k,F,U;Ae(this,vi,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(z,N)=>{Oe(this,Hn,Ur).call(this,{type:"failed",failureCount:z,error:N})},onPause:()=>{Oe(this,Hn,Ur).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Hn,Ur).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Qt).canRun(this)}));const t=this.state.status==="pending",r=!$(this,vi).canStart();try{if(!t){Oe(this,Hn,Ur).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(i=$(this,Qt).config).onMutate)==null?void 0:a.call(i,e,this));const N=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));N!==this.state.context&&Oe(this,Hn,Ur).call(this,{type:"pending",context:N,variables:e,isPaused:r})}const z=await $(this,vi).start();return await((h=(c=$(this,Qt).config).onSuccess)==null?void 0:h.call(c,z,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,z,e,this.state.context)),await((v=(m=$(this,Qt).config).onSettled)==null?void 0:v.call(m,z,null,this.state.variables,this.state.context,this)),await((b=(C=this.options).onSettled)==null?void 0:b.call(C,z,null,e,this.state.context)),Oe(this,Hn,Ur).call(this,{type:"success",data:z}),z}catch(z){try{throw await((x=(S=$(this,Qt).config).onError)==null?void 0:x.call(S,z,e,this.state.context,this)),await((P=(T=this.options).onError)==null?void 0:P.call(T,z,e,this.state.context)),await((k=(L=$(this,Qt).config).onSettled)==null?void 0:k.call(L,void 0,z,this.state.variables,this.state.context,this)),await((U=(F=this.options).onSettled)==null?void 0:U.call(F,void 0,z,e,this.state.context)),z}finally{Oe(this,Hn,Ur).call(this,{type:"error",error:z})}}finally{$(this,Qt).runNext(this)}}},qn=new WeakMap,Qt=new WeakMap,vi=new WeakMap,Hn=new WeakSet,Ur=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),notifyManager.batch(()=>{$(this,qn).forEach(r=>{r.onMutationUpdate(e)}),$(this,Qt).notify({mutation:this,type:"updated",action:e})})},bf);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mr,Gn,gs,Af,MutationCache=(Af=class extends Subscribable{constructor(e={}){super();Me(this,mr);Me(this,Gn);Me(this,gs);this.config=e,Ae(this,mr,new Set),Ae(this,Gn,new Map),Ae(this,gs,0)}build(e,t,r){const i=new Mutation({mutationCache:this,mutationId:++xo(this,gs)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){$(this,mr).add(e);const t=scopeFor(e);if(typeof t=="string"){const r=$(this,Gn).get(t);r?r.push(e):$(this,Gn).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,mr).delete(e)){const t=scopeFor(e);if(typeof t=="string"){const r=$(this,Gn).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&$(this,Gn).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=scopeFor(e);if(typeof t=="string"){const r=$(this,Gn).get(t),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=scopeFor(e);if(typeof t=="string"){const i=(r=$(this,Gn).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){notifyManager.batch(()=>{$(this,mr).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,mr).clear(),$(this,Gn).clear()})}getAll(){return Array.from($(this,mr))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>matchMutation(t,r))}findAll(e={}){return this.getAll().filter(t=>matchMutation(e,t))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(t=>t.continue().catch(noop$1))))}},mr=new WeakMap,Gn=new WeakMap,gs=new WeakMap,Af);function scopeFor(n){var e;return(e=n.options.scope)==null?void 0:e.id}function infiniteQueryBehavior(n){return{onFetch:(e,t)=>{var f,p,m,v,C;const r=e.options,i=(m=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,a=((v=e.state.data)==null?void 0:v.pages)||[],o=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const h=async()=>{let b=!1;const S=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},x=ensureQueryFn(e.options,e.fetchOptions),T=async(P,L,k)=>{if(b)return Promise.reject();if(L==null&&P.pages.length)return Promise.resolve(P);const F={client:e.client,queryKey:e.queryKey,pageParam:L,direction:k?"backward":"forward",meta:e.options.meta};S(F);const U=await x(F),{maxPages:z}=e.options,N=k?addToStart:addToEnd;return{pages:N(P.pages,U,z),pageParams:N(P.pageParams,L,z)}};if(i&&a.length){const P=i==="backward",L=P?getPreviousPageParam:getNextPageParam,k={pages:a,pageParams:o},F=L(r,k);l=await T(k,F,P)}else{const P=n??a.length;do{const L=c===0?o[0]??r.initialPageParam:getNextPageParam(r,l);if(c>0&&L==null)break;l=await T(l,L),c++}while(c<P)}return l};e.options.persister?e.fetchFn=()=>{var b,S;return(S=(b=e.options).persister)==null?void 0:S.call(b,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function getNextPageParam(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function getPreviousPageParam(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var pt,Br,qr,la,ca,Hr,da,ha,Sf,QueryClient=(Sf=class{constructor(n={}){Me(this,pt);Me(this,Br);Me(this,qr);Me(this,la);Me(this,ca);Me(this,Hr);Me(this,da);Me(this,ha);Ae(this,pt,n.queryCache||new QueryCache),Ae(this,Br,n.mutationCache||new MutationCache),Ae(this,qr,n.defaultOptions||{}),Ae(this,la,new Map),Ae(this,ca,new Map),Ae(this,Hr,0)}mount(){xo(this,Hr)._++,$(this,Hr)===1&&(Ae(this,da,focusManager.subscribe(async n=>{n&&(await this.resumePausedMutations(),$(this,pt).onFocus())})),Ae(this,ha,onlineManager.subscribe(async n=>{n&&(await this.resumePausedMutations(),$(this,pt).onOnline())})))}unmount(){var n,e;xo(this,Hr)._--,$(this,Hr)===0&&((n=$(this,da))==null||n.call(this),Ae(this,da,void 0),(e=$(this,ha))==null||e.call(this),Ae(this,ha,void 0))}isFetching(n){return $(this,pt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return $(this,Br).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=$(this,pt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=$(this,pt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(resolveStaleTime(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return $(this,pt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=$(this,pt).get(r.queryHash),a=i==null?void 0:i.state.data,o=functionalUpdate(e,a);if(o!==void 0)return $(this,pt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return notifyManager.batch(()=>$(this,pt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=$(this,pt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=$(this,pt);notifyManager.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=$(this,pt);return notifyManager.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=notifyManager.batch(()=>$(this,pt).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(noop$1).catch(noop$1)}invalidateQueries(n,e={}){return notifyManager.batch(()=>($(this,pt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=notifyManager.batch(()=>$(this,pt).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(noop$1)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(noop$1)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=$(this,pt).build(this,e);return t.isStaleByTime(resolveStaleTime(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(noop$1).catch(noop$1)}fetchInfiniteQuery(n){return n.behavior=infiniteQueryBehavior(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(n){return n.behavior=infiniteQueryBehavior(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return onlineManager.isOnline()?$(this,Br).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,pt)}getMutationCache(){return $(this,Br)}getDefaultOptions(){return $(this,qr)}setDefaultOptions(n){Ae(this,qr,n)}setQueryDefaults(n,e){$(this,la).set(hashKey(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...$(this,la).values()],t={};return e.forEach(r=>{partialMatchKey(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){$(this,ca).set(hashKey(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...$(this,ca).values()],t={};return e.forEach(r=>{partialMatchKey(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...$(this,qr).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...$(this,qr).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){$(this,pt).clear(),$(this,Br).clear()}},pt=new WeakMap,Br=new WeakMap,qr=new WeakMap,la=new WeakMap,ca=new WeakMap,Hr=new WeakMap,da=new WeakMap,ha=new WeakMap,Sf),an,Be,ps,Jt,_i,fa,Vr,Vn,ms,ga,pa,Ci,Ei,Wr,ma,Qe,ds,Lu,Ou,ku,Du,Gu,Nu,Fu,xf,If,QueryObserver=(If=class extends Subscribable{constructor(e,t){super();Me(this,Qe);Me(this,an);Me(this,Be);Me(this,ps);Me(this,Jt);Me(this,_i);Me(this,fa);Me(this,Vr);Me(this,Vn);Me(this,ms);Me(this,ga);Me(this,pa);Me(this,Ci);Me(this,Ei);Me(this,Wr);Me(this,ma,new Set);this.options=t,Ae(this,an,e),Ae(this,Vn,null),Ae(this,Vr,pendingThenable()),this.options.experimental_prefetchInRender||$(this,Vr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,Be).addObserver(this),shouldFetchOnMount($(this,Be),this.options)?Oe(this,Qe,ds).call(this):this.updateResult(),Oe(this,Qe,Du).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn($(this,Be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn($(this,Be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,Qe,Gu).call(this),Oe(this,Qe,Nu).call(this),$(this,Be).removeObserver(this)}setOptions(e,t){const r=this.options,i=$(this,Be);if(this.options=$(this,an).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,$(this,Be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Oe(this,Qe,Fu).call(this),$(this,Be).setOptions(this.options),r._defaulted&&!shallowEqualObjects(this.options,r)&&$(this,an).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,Be),observer:this});const a=this.hasListeners();a&&shouldFetchOptionally($(this,Be),i,this.options,r)&&Oe(this,Qe,ds).call(this),this.updateResult(t),a&&($(this,Be)!==i||resolveEnabled(this.options.enabled,$(this,Be))!==resolveEnabled(r.enabled,$(this,Be))||resolveStaleTime(this.options.staleTime,$(this,Be))!==resolveStaleTime(r.staleTime,$(this,Be)))&&Oe(this,Qe,Lu).call(this);const o=Oe(this,Qe,Ou).call(this);a&&($(this,Be)!==i||resolveEnabled(this.options.enabled,$(this,Be))!==resolveEnabled(r.enabled,$(this,Be))||o!==$(this,Wr))&&Oe(this,Qe,ku).call(this,o)}getOptimisticResult(e){const t=$(this,an).getQueryCache().build($(this,an),e),r=this.createResult(t,e);return shouldAssignObserverCurrentProperties(this,r)&&(Ae(this,Jt,r),Ae(this,fa,this.options),Ae(this,_i,$(this,Be).state)),r}getCurrentResult(){return $(this,Jt)}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),r}trackProp(e){$(this,ma).add(e)}getCurrentQuery(){return $(this,Be)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=$(this,an).defaultQueryOptions(e),r=$(this,an).getQueryCache().build($(this,an),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Oe(this,Qe,ds).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Jt)))}createResult(e,t){var z;const r=$(this,Be),i=this.options,a=$(this,Jt),o=$(this,_i),l=$(this,fa),h=e!==r?e.state:$(this,ps),{state:f}=e;let p={...f},m=!1,v;if(t._optimisticResults){const N=this.hasListeners(),K=!N&&shouldFetchOnMount(e,t),q=N&&shouldFetchOptionally(e,r,t,i);(K||q)&&(p={...p,...fetchState(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:C,errorUpdatedAt:b,status:S}=p;if(t.select&&p.data!==void 0)if(a&&p.data===(o==null?void 0:o.data)&&t.select===$(this,ms))v=$(this,ga);else try{Ae(this,ms,t.select),v=t.select(p.data),v=replaceData(a==null?void 0:a.data,v,t),Ae(this,ga,v),Ae(this,Vn,null)}catch(N){Ae(this,Vn,N)}else v=p.data;if(t.placeholderData!==void 0&&v===void 0&&S==="pending"){let N;if(a!=null&&a.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))N=a.data;else if(N=typeof t.placeholderData=="function"?t.placeholderData((z=$(this,pa))==null?void 0:z.state.data,$(this,pa)):t.placeholderData,t.select&&N!==void 0)try{N=t.select(N),Ae(this,Vn,null)}catch(K){Ae(this,Vn,K)}N!==void 0&&(S="success",v=replaceData(a==null?void 0:a.data,N,t),m=!0)}$(this,Vn)&&(C=$(this,Vn),v=$(this,ga),b=Date.now(),S="error");const x=p.fetchStatus==="fetching",T=S==="pending",P=S==="error",L=T&&x,k=v!==void 0,U={status:S,fetchStatus:p.fetchStatus,isPending:T,isSuccess:S==="success",isError:P,isInitialLoading:L,isLoading:L,data:v,dataUpdatedAt:p.dataUpdatedAt,error:C,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:x,isRefetching:x&&!T,isLoadingError:P&&!k,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:P&&k,isStale:isStale(e,t),refetch:this.refetch,promise:$(this,Vr)};if(this.options.experimental_prefetchInRender){const N=j=>{U.status==="error"?j.reject(U.error):U.data!==void 0&&j.resolve(U.data)},K=()=>{const j=Ae(this,Vr,U.promise=pendingThenable());N(j)},q=$(this,Vr);switch(q.status){case"pending":e.queryHash===r.queryHash&&N(q);break;case"fulfilled":(U.status==="error"||U.data!==q.value)&&K();break;case"rejected":(U.status!=="error"||U.error!==q.reason)&&K();break}}return U}updateResult(e){const t=$(this,Jt),r=this.createResult($(this,Be),this.options);if(Ae(this,_i,$(this,Be).state),Ae(this,fa,this.options),$(this,_i).data!==void 0&&Ae(this,pa,$(this,Be)),shallowEqualObjects(r,t))return;Ae(this,Jt,r);const i={},a=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!$(this,ma).size)return!0;const c=new Set(l??$(this,ma));return this.options.throwOnError&&c.add("error"),Object.keys($(this,Jt)).some(h=>{const f=h;return $(this,Jt)[f]!==t[f]&&c.has(f)})};(e==null?void 0:e.listeners)!==!1&&a()&&(i.listeners=!0),Oe(this,Qe,xf).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,Qe,Du).call(this)}},an=new WeakMap,Be=new WeakMap,ps=new WeakMap,Jt=new WeakMap,_i=new WeakMap,fa=new WeakMap,Vr=new WeakMap,Vn=new WeakMap,ms=new WeakMap,ga=new WeakMap,pa=new WeakMap,Ci=new WeakMap,Ei=new WeakMap,Wr=new WeakMap,ma=new WeakMap,Qe=new WeakSet,ds=function(e){Oe(this,Qe,Fu).call(this);let t=$(this,Be).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(noop$1)),t},Lu=function(){Oe(this,Qe,Gu).call(this);const e=resolveStaleTime(this.options.staleTime,$(this,Be));if(isServer||$(this,Jt).isStale||!isValidTimeout(e))return;const r=timeUntilStale($(this,Jt).dataUpdatedAt,e)+1;Ae(this,Ci,setTimeout(()=>{$(this,Jt).isStale||this.updateResult()},r))},Ou=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,Be)):this.options.refetchInterval)??!1},ku=function(e){Oe(this,Qe,Nu).call(this),Ae(this,Wr,e),!(isServer||resolveEnabled(this.options.enabled,$(this,Be))===!1||!isValidTimeout($(this,Wr))||$(this,Wr)===0)&&Ae(this,Ei,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&Oe(this,Qe,ds).call(this)},$(this,Wr)))},Du=function(){Oe(this,Qe,Lu).call(this),Oe(this,Qe,ku).call(this,Oe(this,Qe,Ou).call(this))},Gu=function(){$(this,Ci)&&(clearTimeout($(this,Ci)),Ae(this,Ci,void 0))},Nu=function(){$(this,Ei)&&(clearInterval($(this,Ei)),Ae(this,Ei,void 0))},Fu=function(){const e=$(this,an).getQueryCache().build($(this,an),this.options);if(e===$(this,Be))return;const t=$(this,Be);Ae(this,Be,e),Ae(this,ps,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},xf=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t($(this,Jt))}),$(this,an).getQueryCache().notify({query:$(this,Be),type:"observerResultsUpdated"})})},If);function shouldLoadOnMount(n,e){return resolveEnabled(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(n,e){return shouldLoadOnMount(n,e)||n.state.data!==void 0&&shouldFetchOn(n,e,e.refetchOnMount)}function shouldFetchOn(n,e,t){if(resolveEnabled(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&isStale(n,e)}return!1}function shouldFetchOptionally(n,e,t,r){return(n!==e||resolveEnabled(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&isStale(n,t)}function isStale(n,e){return resolveEnabled(e.enabled,n)!==!1&&n.isStaleByTime(resolveStaleTime(e.staleTime,n))}function shouldAssignObserverCurrentProperties(n,e){return!shallowEqualObjects(n.getCurrentResult(),e)}function defaultTransformerFn(n){return n}function dehydrateMutation(n){return{mutationKey:n.options.mutationKey,state:n.state,...n.options.scope&&{scope:n.options.scope},...n.meta&&{meta:n.meta}}}function dehydrateQuery(n,e,t){var r;return{state:{...n.state,...n.state.data!==void 0&&{data:e(n.state.data)}},queryKey:n.queryKey,queryHash:n.queryHash,...n.state.status==="pending"&&{promise:(r=n.promise)==null?void 0:r.then(e).catch(i=>t(i)?Promise.reject(new Error("redacted")):Promise.reject(i))},...n.meta&&{meta:n.meta}}}function defaultShouldDehydrateMutation(n){return n.state.isPaused}function defaultShouldDehydrateQuery(n){return n.state.status==="success"}function defaultshouldRedactErrors(n){return!0}function dehydrate(n,e={}){var c,h,f,p;const t=e.shouldDehydrateMutation??((c=n.getDefaultOptions().dehydrate)==null?void 0:c.shouldDehydrateMutation)??defaultShouldDehydrateMutation,r=n.getMutationCache().getAll().flatMap(m=>t(m)?[dehydrateMutation(m)]:[]),i=e.shouldDehydrateQuery??((h=n.getDefaultOptions().dehydrate)==null?void 0:h.shouldDehydrateQuery)??defaultShouldDehydrateQuery,a=e.shouldRedactErrors??((f=n.getDefaultOptions().dehydrate)==null?void 0:f.shouldRedactErrors)??defaultshouldRedactErrors,o=e.serializeData??((p=n.getDefaultOptions().dehydrate)==null?void 0:p.serializeData)??defaultTransformerFn,l=n.getQueryCache().getAll().flatMap(m=>i(m)?[dehydrateQuery(m,o,a)]:[]);return{mutations:r,queries:l}}function hydrate(n,e,t){var c,h;if(typeof e!="object"||e===null)return;const r=n.getMutationCache(),i=n.getQueryCache(),a=((c=t==null?void 0:t.defaultOptions)==null?void 0:c.deserializeData)??((h=n.getDefaultOptions().hydrate)==null?void 0:h.deserializeData)??defaultTransformerFn,o=e.mutations||[],l=e.queries||[];o.forEach(({state:f,...p})=>{var m,v;r.build(n,{...(m=n.getDefaultOptions().hydrate)==null?void 0:m.mutations,...(v=t==null?void 0:t.defaultOptions)==null?void 0:v.mutations,...p},f)}),l.forEach(({queryKey:f,state:p,queryHash:m,meta:v,promise:C})=>{var x,T;let b=i.get(m);const S=p.data===void 0?p.data:a(p.data);if(b){if(b.state.dataUpdatedAt<p.dataUpdatedAt){const{fetchStatus:P,...L}=p;b.setState({...L,data:S})}}else b=i.build(n,{...(x=n.getDefaultOptions().hydrate)==null?void 0:x.queries,...(T=t==null?void 0:t.defaultOptions)==null?void 0:T.queries,queryKey:f,queryHash:m,meta:v},{...p,data:S,fetchStatus:"idle"});if(C){const P=Promise.resolve(C).then(a);b.fetch(void 0,{initialPromise:P})}})}var QueryClientContext=reactExports.createContext(void 0),useQueryClient=n=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:n,children:e})=>(reactExports.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:n,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext),IsRestoringProvider=IsRestoringContext.Provider;function createValue(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(n,e){return typeof n=="function"?n(...e):!!n}function noop(){}var ensurePreventErrorBoundaryRetry=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},useClearResetErrorBoundary=n=>{reactExports.useEffect(()=>{n.clearReset()},[n])},getHasError=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||shouldThrowError(t,[n.error,r])),ensureSuspenseTimers=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},willFetch=(n,e)=>n.isLoading&&n.isFetching&&!e,shouldSuspend=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,fetchOptimistic=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function useBaseQuery(n,e,t){var p,m,v,C,b;const r=useQueryClient(),i=useIsRestoring(),a=useQueryErrorResetBoundary(),o=r.defaultQueryOptions(n);(m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||m.call(p,o),o._optimisticResults=i?"isRestoring":"optimistic",ensureSuspenseTimers(o),ensurePreventErrorBoundaryRetry(o,a),useClearResetErrorBoundary(a);const l=!r.getQueryCache().get(o.queryHash),[c]=reactExports.useState(()=>new e(r,o)),h=c.getOptimisticResult(o),f=!i&&n.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(S=>{const x=f?c.subscribe(notifyManager.batchCalls(S)):noop;return c.updateResult(),x},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),reactExports.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),shouldSuspend(o,h))throw fetchOptimistic(o,c,a);if(getHasError({result:h,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((C=(v=r.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||C.call(v,o,h),o.experimental_prefetchInRender&&!isServer&&willFetch(h,i)){const S=l?fetchOptimistic(o,c,a):(b=r.getQueryCache().get(o.queryHash))==null?void 0:b.promise;S==null||S.catch(noop).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?h:c.trackResult(h)}function useQuery(n,e){return useBaseQuery(n,QueryObserver)}const scriptRel="modulepreload",assetsURL=function(n){return"/cartes.gouv.fr-guichet-collaboratif/"+n},seen={},__vitePreload=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=assetsURL(c),c in seen)return;seen[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":scriptRel,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};var ReactQueryDevtools2=function(){return null},cacheEventTypes=["added","removed","updated"];function isCacheEventType(n){return cacheEventTypes.includes(n)}async function persistQueryClientRestore({queryClient:n,persister:e,maxAge:t=1e3*60*60*24,buster:r="",hydrateOptions:i}){try{const a=await e.restoreClient();if(a)if(a.timestamp){const o=Date.now()-a.timestamp>t,l=a.buster!==r;o||l?e.removeClient():hydrate(n,a.clientState,i)}else e.removeClient()}catch{e.removeClient()}}async function persistQueryClientSave({queryClient:n,persister:e,buster:t="",dehydrateOptions:r}){const i={buster:t,timestamp:Date.now(),clientState:dehydrate(n,r)};await e.persistClient(i)}function persistQueryClientSubscribe(n){const e=n.queryClient.getQueryCache().subscribe(r=>{isCacheEventType(r.type)&&persistQueryClientSave(n)}),t=n.queryClient.getMutationCache().subscribe(r=>{isCacheEventType(r.type)&&persistQueryClientSave(n)});return()=>{e(),t()}}var PersistQueryClientProvider=({client:n,children:e,persistOptions:t,onSuccess:r,...i})=>{const[a,o]=reactExports.useState(!0),l=reactExports.useRef({persistOptions:t,onSuccess:r}),c=reactExports.useRef(!1);return reactExports.useEffect(()=>{l.current={persistOptions:t,onSuccess:r}}),reactExports.useEffect(()=>{const h={...l.current.persistOptions,queryClient:n};return c.current||(c.current=!0,persistQueryClientRestore(h).then(async()=>{var f,p;try{await((p=(f=l.current).onSuccess)==null?void 0:p.call(f))}finally{o(!1)}})),a?void 0:persistQueryClientSubscribe(h)},[n,a]),jsxRuntimeExports.jsx(QueryClientProvider,{client:n,...i,children:jsxRuntimeExports.jsx(IsRestoringProvider,{value:a,children:e})})};const colorOptions={grey:{_1000_50:{default:"var(--grey-1000-50)",hover:"var(--grey-1000-50-hover)",active:"var(--grey-1000-50-active)"},_975_75:{default:"var(--grey-975-75)",hover:"var(--grey-975-75-hover)",active:"var(--grey-975-75-active)"},_950_100:{default:"var(--grey-950-100)",hover:"var(--grey-950-100-hover)",active:"var(--grey-950-100-active)"},_200_850:{default:"var(--grey-200-850)",hover:"var(--grey-200-850-hover)",active:"var(--grey-200-850-active)"},_925_125:{default:"var(--grey-925-125)"},_1000_75:{default:"var(--grey-1000-75)",hover:"var(--grey-1000-75-hover)",active:"var(--grey-1000-75-active)"},_1000_100:{default:"var(--grey-1000-100)",hover:"var(--grey-1000-100-hover)",active:"var(--grey-1000-100-active)"},_975_100:{default:"var(--grey-975-100)",hover:"var(--grey-975-100-hover)",active:"var(--grey-975-100-active)"},_975_125:{default:"var(--grey-975-125)",hover:"var(--grey-975-125-hover)",active:"var(--grey-975-125-active)"},_950_125:{default:"var(--grey-950-125)",hover:"var(--grey-950-125-hover)",active:"var(--grey-950-125-active)"},_950_150:{default:"var(--grey-950-150)",hover:"var(--grey-950-150-hover)",active:"var(--grey-950-150-active)"},_50_1000:{default:"var(--grey-50-1000)"},_425_625:{default:"var(--grey-425-625)"},_625_425:{default:"var(--grey-625-425)"},_0_1000:{default:"var(--grey-0-1000)"},_900_175:{default:"var(--grey-900-175)"}},blueFrance:{_975_75:{default:"var(--blue-france-975-75)",hover:"var(--blue-france-975-75-hover)",active:"var(--blue-france-975-75-active)"},_950_100:{default:"var(--blue-france-950-100)",hover:"var(--blue-france-950-100-hover)",active:"var(--blue-france-950-100-active)"},sun113_625:{default:"var(--blue-france-sun-113-625)",hover:"var(--blue-france-sun-113-625-hover)",active:"var(--blue-france-sun-113-625-active)"},_925_125:{default:"var(--blue-france-925-125)",hover:"var(--blue-france-925-125-hover)",active:"var(--blue-france-925-125-active)"},_975sun113:{default:"var(--blue-france-975-sun-113)"},main525:{default:"var(--blue-france-main-525)"},_850_200:{default:"var(--blue-france-850-200)"}},redMarianne:{_975_75:{default:"var(--red-marianne-975-75)",hover:"var(--red-marianne-975-75-hover)",active:"var(--red-marianne-975-75-active)"},_950_100:{default:"var(--red-marianne-950-100)",hover:"var(--red-marianne-950-100-hover)",active:"var(--red-marianne-950-100-active)"},_425_625:{default:"var(--red-marianne-425-625)",hover:"var(--red-marianne-425-625-hover)",active:"var(--red-marianne-425-625-active)"},_925_125:{default:"var(--red-marianne-925-125)",hover:"var(--red-marianne-925-125-hover)",active:"var(--red-marianne-925-125-active)"},main472:{default:"var(--red-marianne-main-472)"},_850_200:{default:"var(--red-marianne-850-200)"}},info:{_950_100:{default:"var(--info-950-100)",hover:"var(--info-950-100-hover)",active:"var(--info-950-100-active)"},_425_625:{default:"var(--info-425-625)",hover:"var(--info-425-625-hover)",active:"var(--info-425-625-active)"},_975_75:{default:"var(--info-975-75)"}},success:{_950_100:{default:"var(--success-950-100)",hover:"var(--success-950-100-hover)",active:"var(--success-950-100-active)"},_425_625:{default:"var(--success-425-625)",hover:"var(--success-425-625-hover)",active:"var(--success-425-625-active)"},_975_75:{default:"var(--success-975-75)"}},warning:{_950_100:{default:"var(--warning-950-100)",hover:"var(--warning-950-100-hover)",active:"var(--warning-950-100-active)"},_425_625:{default:"var(--warning-425-625)",hover:"var(--warning-425-625-hover)",active:"var(--warning-425-625-active)"},_975_75:{default:"var(--warning-975-75)"}},error:{_950_100:{default:"var(--error-950-100)",hover:"var(--error-950-100-hover)",active:"var(--error-950-100-active)"},_425_625:{default:"var(--error-425-625)",hover:"var(--error-425-625-hover)",active:"var(--error-425-625-active)"},_975_75:{default:"var(--error-975-75)"}},greenTilleulVerveine:{_975_75:{default:"var(--green-tilleul-verveine-975-75)",hover:"var(--green-tilleul-verveine-975-75-hover)",active:"var(--green-tilleul-verveine-975-75-active)"},_950_100:{default:"var(--green-tilleul-verveine-950-100)",hover:"var(--green-tilleul-verveine-950-100-hover)",active:"var(--green-tilleul-verveine-950-100-active)"},sun418moon817:{default:"var(--green-tilleul-verveine-sun-418-moon-817)",hover:"var(--green-tilleul-verveine-sun-418-moon-817-hover)",active:"var(--green-tilleul-verveine-sun-418-moon-817-active)"},_925_125:{default:"var(--green-tilleul-verveine-925-125)",hover:"var(--green-tilleul-verveine-925-125-hover)",active:"var(--green-tilleul-verveine-925-125-active)"},main707:{default:"var(--green-tilleul-verveine-main-707)"},_850_200:{default:"var(--green-tilleul-verveine-850-200)"}},greenBourgeon:{_975_75:{default:"var(--green-bourgeon-975-75)",hover:"var(--green-bourgeon-975-75-hover)",active:"var(--green-bourgeon-975-75-active)"},_950_100:{default:"var(--green-bourgeon-950-100)",hover:"var(--green-bourgeon-950-100-hover)",active:"var(--green-bourgeon-950-100-active)"},sun425moon759:{default:"var(--green-bourgeon-sun-425-moon-759)",hover:"var(--green-bourgeon-sun-425-moon-759-hover)",active:"var(--green-bourgeon-sun-425-moon-759-active)"},_925_125:{default:"var(--green-bourgeon-925-125)",hover:"var(--green-bourgeon-925-125-hover)",active:"var(--green-bourgeon-925-125-active)"},main640:{default:"var(--green-bourgeon-main-640)"},_850_200:{default:"var(--green-bourgeon-850-200)"}},greenEmeraude:{_975_75:{default:"var(--green-emeraude-975-75)",hover:"var(--green-emeraude-975-75-hover)",active:"var(--green-emeraude-975-75-active)"},_950_100:{default:"var(--green-emeraude-950-100)",hover:"var(--green-emeraude-950-100-hover)",active:"var(--green-emeraude-950-100-active)"},sun425moon753:{default:"var(--green-emeraude-sun-425-moon-753)",hover:"var(--green-emeraude-sun-425-moon-753-hover)",active:"var(--green-emeraude-sun-425-moon-753-active)"},_925_125:{default:"var(--green-emeraude-925-125)",hover:"var(--green-emeraude-925-125-hover)",active:"var(--green-emeraude-925-125-active)"},main632:{default:"var(--green-emeraude-main-632)"},_850_200:{default:"var(--green-emeraude-850-200)"}},greenMenthe:{_975_75:{default:"var(--green-menthe-975-75)",hover:"var(--green-menthe-975-75-hover)",active:"var(--green-menthe-975-75-active)"},_950_100:{default:"var(--green-menthe-950-100)",hover:"var(--green-menthe-950-100-hover)",active:"var(--green-menthe-950-100-active)"},sun373moon652:{default:"var(--green-menthe-sun-373-moon-652)",hover:"var(--green-menthe-sun-373-moon-652-hover)",active:"var(--green-menthe-sun-373-moon-652-active)"},_925_125:{default:"var(--green-menthe-925-125)",hover:"var(--green-menthe-925-125-hover)",active:"var(--green-menthe-925-125-active)"},main548:{default:"var(--green-menthe-main-548)"},_850_200:{default:"var(--green-menthe-850-200)"}},greenArchipel:{_975_75:{default:"var(--green-archipel-975-75)",hover:"var(--green-archipel-975-75-hover)",active:"var(--green-archipel-975-75-active)"},_950_100:{default:"var(--green-archipel-950-100)",hover:"var(--green-archipel-950-100-hover)",active:"var(--green-archipel-950-100-active)"},sun391moon716:{default:"var(--green-archipel-sun-391-moon-716)",hover:"var(--green-archipel-sun-391-moon-716-hover)",active:"var(--green-archipel-sun-391-moon-716-active)"},_925_125:{default:"var(--green-archipel-925-125)",hover:"var(--green-archipel-925-125-hover)",active:"var(--green-archipel-925-125-active)"},main557:{default:"var(--green-archipel-main-557)"},_850_200:{default:"var(--green-archipel-850-200)"}},blueEcume:{_975_75:{default:"var(--blue-ecume-975-75)",hover:"var(--blue-ecume-975-75-hover)",active:"var(--blue-ecume-975-75-active)"},_950_100:{default:"var(--blue-ecume-950-100)",hover:"var(--blue-ecume-950-100-hover)",active:"var(--blue-ecume-950-100-active)"},sun247moon675:{default:"var(--blue-ecume-sun-247-moon-675)",hover:"var(--blue-ecume-sun-247-moon-675-hover)",active:"var(--blue-ecume-sun-247-moon-675-active)"},_925_125:{default:"var(--blue-ecume-925-125)",hover:"var(--blue-ecume-925-125-hover)",active:"var(--blue-ecume-925-125-active)"},main400:{default:"var(--blue-ecume-main-400)"},_850_200:{default:"var(--blue-ecume-850-200)"}},blueCumulus:{_975_75:{default:"var(--blue-cumulus-975-75)",hover:"var(--blue-cumulus-975-75-hover)",active:"var(--blue-cumulus-975-75-active)"},_950_100:{default:"var(--blue-cumulus-950-100)",hover:"var(--blue-cumulus-950-100-hover)",active:"var(--blue-cumulus-950-100-active)"},sun368moon732:{default:"var(--blue-cumulus-sun-368-moon-732)",hover:"var(--blue-cumulus-sun-368-moon-732-hover)",active:"var(--blue-cumulus-sun-368-moon-732-active)"},_925_125:{default:"var(--blue-cumulus-925-125)",hover:"var(--blue-cumulus-925-125-hover)",active:"var(--blue-cumulus-925-125-active)"},main526:{default:"var(--blue-cumulus-main-526)"},_850_200:{default:"var(--blue-cumulus-850-200)"}},purpleGlycine:{_975_75:{default:"var(--purple-glycine-975-75)",hover:"var(--purple-glycine-975-75-hover)",active:"var(--purple-glycine-975-75-active)"},_950_100:{default:"var(--purple-glycine-950-100)",hover:"var(--purple-glycine-950-100-hover)",active:"var(--purple-glycine-950-100-active)"},sun319moon630:{default:"var(--purple-glycine-sun-319-moon-630)",hover:"var(--purple-glycine-sun-319-moon-630-hover)",active:"var(--purple-glycine-sun-319-moon-630-active)"},_925_125:{default:"var(--purple-glycine-925-125)",hover:"var(--purple-glycine-925-125-hover)",active:"var(--purple-glycine-925-125-active)"},main494:{default:"var(--purple-glycine-main-494)"},_850_200:{default:"var(--purple-glycine-850-200)"}},pinkMacaron:{_975_75:{default:"var(--pink-macaron-975-75)",hover:"var(--pink-macaron-975-75-hover)",active:"var(--pink-macaron-975-75-active)"},_950_100:{default:"var(--pink-macaron-950-100)",hover:"var(--pink-macaron-950-100-hover)",active:"var(--pink-macaron-950-100-active)"},sun406moon833:{default:"var(--pink-macaron-sun-406-moon-833)",hover:"var(--pink-macaron-sun-406-moon-833-hover)",active:"var(--pink-macaron-sun-406-moon-833-active)"},_925_125:{default:"var(--pink-macaron-925-125)",hover:"var(--pink-macaron-925-125-hover)",active:"var(--pink-macaron-925-125-active)"},main689:{default:"var(--pink-macaron-main-689)"},_850_200:{default:"var(--pink-macaron-850-200)"}},pinkTuile:{_975_75:{default:"var(--pink-tuile-975-75)",hover:"var(--pink-tuile-975-75-hover)",active:"var(--pink-tuile-975-75-active)"},_950_100:{default:"var(--pink-tuile-950-100)",hover:"var(--pink-tuile-950-100-hover)",active:"var(--pink-tuile-950-100-active)"},sun425moon750:{default:"var(--pink-tuile-sun-425-moon-750)",hover:"var(--pink-tuile-sun-425-moon-750-hover)",active:"var(--pink-tuile-sun-425-moon-750-active)"},_925_125:{default:"var(--pink-tuile-925-125)",hover:"var(--pink-tuile-925-125-hover)",active:"var(--pink-tuile-925-125-active)"},main556:{default:"var(--pink-tuile-main-556)"},_850_200:{default:"var(--pink-tuile-850-200)"}},yellowTournesol:{_975_75:{default:"var(--yellow-tournesol-975-75)",hover:"var(--yellow-tournesol-975-75-hover)",active:"var(--yellow-tournesol-975-75-active)"},_950_100:{default:"var(--yellow-tournesol-950-100)",hover:"var(--yellow-tournesol-950-100-hover)",active:"var(--yellow-tournesol-950-100-active)"},sun407moon922:{default:"var(--yellow-tournesol-sun-407-moon-922)",hover:"var(--yellow-tournesol-sun-407-moon-922-hover)",active:"var(--yellow-tournesol-sun-407-moon-922-active)"},_925_125:{default:"var(--yellow-tournesol-925-125)",hover:"var(--yellow-tournesol-925-125-hover)",active:"var(--yellow-tournesol-925-125-active)"},main731:{default:"var(--yellow-tournesol-main-731)"},_850_200:{default:"var(--yellow-tournesol-850-200)"}},yellowMoutarde:{_975_75:{default:"var(--yellow-moutarde-975-75)",hover:"var(--yellow-moutarde-975-75-hover)",active:"var(--yellow-moutarde-975-75-active)"},_950_100:{default:"var(--yellow-moutarde-950-100)",hover:"var(--yellow-moutarde-950-100-hover)",active:"var(--yellow-moutarde-950-100-active)"},sun348moon860:{default:"var(--yellow-moutarde-sun-348-moon-860)",hover:"var(--yellow-moutarde-sun-348-moon-860-hover)",active:"var(--yellow-moutarde-sun-348-moon-860-active)"},_925_125:{default:"var(--yellow-moutarde-925-125)",hover:"var(--yellow-moutarde-925-125-hover)",active:"var(--yellow-moutarde-925-125-active)"},main679:{default:"var(--yellow-moutarde-main-679)"},_850_200:{default:"var(--yellow-moutarde-850-200)"}},orangeTerreBattue:{_975_75:{default:"var(--orange-terre-battue-975-75)",hover:"var(--orange-terre-battue-975-75-hover)",active:"var(--orange-terre-battue-975-75-active)"},_950_100:{default:"var(--orange-terre-battue-950-100)",hover:"var(--orange-terre-battue-950-100-hover)",active:"var(--orange-terre-battue-950-100-active)"},sun370moon672:{default:"var(--orange-terre-battue-sun-370-moon-672)",hover:"var(--orange-terre-battue-sun-370-moon-672-hover)",active:"var(--orange-terre-battue-sun-370-moon-672-active)"},_925_125:{default:"var(--orange-terre-battue-925-125)",hover:"var(--orange-terre-battue-925-125-hover)",active:"var(--orange-terre-battue-925-125-active)"},main645:{default:"var(--orange-terre-battue-main-645)"},_850_200:{default:"var(--orange-terre-battue-850-200)"}},brownCafeCreme:{_975_75:{default:"var(--brown-cafe-creme-975-75)",hover:"var(--brown-cafe-creme-975-75-hover)",active:"var(--brown-cafe-creme-975-75-active)"},_950_100:{default:"var(--brown-cafe-creme-950-100)",hover:"var(--brown-cafe-creme-950-100-hover)",active:"var(--brown-cafe-creme-950-100-active)"},sun383moon885:{default:"var(--brown-cafe-creme-sun-383-moon-885)",hover:"var(--brown-cafe-creme-sun-383-moon-885-hover)",active:"var(--brown-cafe-creme-sun-383-moon-885-active)"},_925_125:{default:"var(--brown-cafe-creme-925-125)",hover:"var(--brown-cafe-creme-925-125-hover)",active:"var(--brown-cafe-creme-925-125-active)"},main782:{default:"var(--brown-cafe-creme-main-782)"},_850_200:{default:"var(--brown-cafe-creme-850-200)"}},brownCaramel:{_975_75:{default:"var(--brown-caramel-975-75)",hover:"var(--brown-caramel-975-75-hover)",active:"var(--brown-caramel-975-75-active)"},_950_100:{default:"var(--brown-caramel-950-100)",hover:"var(--brown-caramel-950-100-hover)",active:"var(--brown-caramel-950-100-active)"},sun425moon901:{default:"var(--brown-caramel-sun-425-moon-901)",hover:"var(--brown-caramel-sun-425-moon-901-hover)",active:"var(--brown-caramel-sun-425-moon-901-active)"},_925_125:{default:"var(--brown-caramel-925-125)",hover:"var(--brown-caramel-925-125-hover)",active:"var(--brown-caramel-925-125-active)"},main648:{default:"var(--brown-caramel-main-648)"},_850_200:{default:"var(--brown-caramel-850-200)"}},brownOpera:{_975_75:{default:"var(--brown-opera-975-75)",hover:"var(--brown-opera-975-75-hover)",active:"var(--brown-opera-975-75-active)"},_950_100:{default:"var(--brown-opera-950-100)",hover:"var(--brown-opera-950-100-hover)",active:"var(--brown-opera-950-100-active)"},sun395moon820:{default:"var(--brown-opera-sun-395-moon-820)",hover:"var(--brown-opera-sun-395-moon-820-hover)",active:"var(--brown-opera-sun-395-moon-820-active)"},_925_125:{default:"var(--brown-opera-925-125)",hover:"var(--brown-opera-925-125-hover)",active:"var(--brown-opera-925-125-active)"},main680:{default:"var(--brown-opera-main-680)"},_850_200:{default:"var(--brown-opera-850-200)"}},beigeGrisGalet:{_975_75:{default:"var(--beige-gris-galet-975-75)",hover:"var(--beige-gris-galet-975-75-hover)",active:"var(--beige-gris-galet-975-75-active)"},_950_100:{default:"var(--beige-gris-galet-950-100)",hover:"var(--beige-gris-galet-950-100-hover)",active:"var(--beige-gris-galet-950-100-active)"},sun407moon821:{default:"var(--beige-gris-galet-sun-407-moon-821)",hover:"var(--beige-gris-galet-sun-407-moon-821-hover)",active:"var(--beige-gris-galet-sun-407-moon-821-active)"},_925_125:{default:"var(--beige-gris-galet-925-125)",hover:"var(--beige-gris-galet-925-125-hover)",active:"var(--beige-gris-galet-925-125-active)"},main702:{default:"var(--beige-gris-galet-main-702)"},_850_200:{default:"var(--beige-gris-galet-850-200)"}}};function getColorOptionsHex(n){const{isDark:e}=n;return{grey:{_1000_50:{default:e?"#161616":"#ffffff",hover:e?"#343434":"#f6f6f6",active:e?"#474747":"#ededed"},_975_75:{default:e?"#1e1e1e":"#f6f6f6",hover:e?"#3f3f3f":"#dfdfdf",active:e?"#525252":"#cfcfcf"},_950_100:{default:e?"#242424":"#eeeeee",hover:e?"#474747":"#d2d2d2",active:e?"#5b5b5b":"#c1c1c1"},_200_850:{default:e?"#cecece":"#3a3a3a",hover:e?"#a8a8a8":"#616161",active:e?"#939393":"#777777"},_925_125:{default:e?"#2a2a2a":"#e5e5e5"},_1000_75:{default:e?"#1e1e1e":"#ffffff",hover:e?"#3f3f3f":"#f6f6f6",active:e?"#525252":"#ededed"},_1000_100:{default:e?"#242424":"#ffffff",hover:e?"#474747":"#f6f6f6",active:e?"#5b5b5b":"#ededed"},_975_100:{default:e?"#242424":"#f6f6f6",hover:e?"#474747":"#dfdfdf",active:e?"#5b5b5b":"#cfcfcf"},_975_125:{default:e?"#2a2a2a":"#f6f6f6",hover:e?"#4e4e4e":"#dfdfdf",active:e?"#636363":"#cfcfcf"},_950_125:{default:e?"#2a2a2a":"#eeeeee",hover:e?"#4e4e4e":"#d2d2d2",active:e?"#636363":"#c1c1c1"},_950_150:{default:e?"#2f2f2f":"#eeeeee",hover:e?"#545454":"#d2d2d2",active:e?"#696969":"#c1c1c1"},_50_1000:{default:e?"#ffffff":"#161616"},_425_625:{default:e?"#929292":"#666666"},_625_425:{default:e?"#666666":"#929292"},_0_1000:{default:e?"#ffffff":"#0"},_900_175:{default:e?"#353535":"#dddddd"}},blueFrance:{_975_75:{default:e?"#1b1b35":"#f5f5fe",hover:e?"#3a3a68":"#dcdcfc",active:e?"#4d4d83":"#cbcbfa"},_950_100:{default:e?"#21213f":"#ececfe",hover:e?"#424275":"#cecefc",active:e?"#56568c":"#bbbbfc"},sun113_625:{default:e?"#8585f6":"#000091",hover:e?"#b1b1f9":"#1212ff",active:e?"#c6c6fb":"#2323ff"},_925_125:{default:e?"#272747":"#e3e3fd",hover:e?"#4a4a7d":"#c1c1fb",active:e?"#5e5e90":"#adadf9"},_975sun113:{default:e?"#000091":"#f5f5fe"},main525:{default:"#6a6af4"},_850_200:{default:e?"#313178":"#cacafb"}},redMarianne:{_975_75:{default:e?"#2b1919":"#fef4f4",hover:e?"#573737":"#fcd7d7",active:e?"#704848":"#fac4c4"},_950_100:{default:e?"#331f1f":"#fee9e9",hover:e?"#613f3f":"#fdc5c5",active:e?"#7b5151":"#fcafaf"},_425_625:{default:e?"#f95c5e":"#c9191e",hover:e?"#fa9293":"#f93f42",active:e?"#fbabac":"#f95a5c"},_925_125:{default:e?"#3b2424":"#fddede",hover:e?"#6b4545":"#fbb6b6",active:e?"#865757":"#fa9e9e"},main472:{default:"#e1000f"},_850_200:{default:e?"#5e2a2b":"#fcbfbf"}},info:{_950_100:{default:e?"#1d2437":"#e8edff",hover:e?"#3b4767":"#c2d1ff",active:e?"#4c5b83":"#a9bfff"},_425_625:{default:e?"#518fff":"#0063cb",hover:e?"#98b4ff":"#3b87ff",active:e?"#b4c7ff":"#6798ff"},_975_75:{default:e?"#171d2e":"#f4f6ff"}},success:{_950_100:{default:e?"#19271d":"#b8fec9",hover:e?"#344c3b":"#46fd89",active:e?"#44624d":"#34eb7b"},_425_625:{default:e?"#27a658":"#18753c",hover:e?"#36d975":"#27a959",active:e?"#3df183":"#2fc368"},_975_75:{default:e?"#142117":"#dffee6"}},warning:{_950_100:{default:e?"#361e19":"#ffe9e6",hover:e?"#663d35":"#ffc6bd",active:e?"#824f44":"#ffb0a2"},_425_625:{default:e?"#fc5d00":"#b34000",hover:e?"#ff8c73":"#ff6218",active:e?"#ffa595":"#ff7a55"},_975_75:{default:e?"#2d1814":"#fff4f3"}},error:{_950_100:{default:e?"#391c1c":"#ffe9e9",hover:e?"#6c3a3a":"#ffc5c5",active:e?"#894b4b":"#ffafaf"},_425_625:{default:e?"#ff5655":"#ce0500",hover:e?"#ff8c8c":"#ff2725",active:e?"#ffa6a6":"#ff4140"},_975_75:{default:e?"#301717":"#fff4f4"}},greenTilleulVerveine:{_975_75:{default:e?"#201e14":"#fef7da",hover:e?"#433f2e":"#fce552",active:e?"#57533d":"#ebd54c"},_950_100:{default:e?"#272419":"#fceeac",hover:e?"#4c4734":"#e8d45c",active:e?"#615b44":"#d4c254"},sun418moon817:{default:e?"#d8c634":"#66673d",hover:e?"#fee943":"#929359",active:e?"#fef1ab":"#a7a967"},_925_125:{default:e?"#2d2a1d":"#fbe769",hover:e?"#534f39":"#d7c655",active:e?"#696349":"#c2b24c"},main707:{default:"#b7a73f"},_850_200:{default:e?"#3f3a20":"#e2cf58"}},greenBourgeon:{_975_75:{default:e?"#182014":"#e6feda",hover:e?"#35432e":"#a7fc62",active:e?"#46573d":"#98ed4d"},_950_100:{default:e?"#1e2719":"#c9fcac",hover:e?"#3d4c34":"#9ae95d",active:e?"#4e6144":"#8dd555"},sun425moon759:{default:e?"#99c221":"#447049",hover:e?"#baec2a":"#639f6a",active:e?"#c9fd2e":"#72b77a"},_925_125:{default:e?"#232d1d":"#a9fb68",hover:e?"#435339":"#8ed654",active:e?"#556949":"#7fc04b"},main640:{default:"#68a532"},_850_200:{default:e?"#2a401a":"#95e257"}},greenEmeraude:{_975_75:{default:e?"#142018":"#e3fdeb",hover:e?"#2e4335":"#94f9b9",active:e?"#3d5846":"#6df1a3"},_950_100:{default:e?"#19271e":"#c3fad5",hover:e?"#344c3d":"#77eda5",active:e?"#44624f":"#6dd897"},sun425moon753:{default:e?"#34cb6a":"#297254",hover:e?"#42fb84":"#3ea47a",active:e?"#80fda3":"#49bc8d"},_925_125:{default:e?"#1e2e23":"#9ef9be",hover:e?"#3b5543":"#69df97",active:e?"#4b6b55":"#5ec988"},main632:{default:"#00a95f"},_850_200:{default:e?"#21402c":"#6fe49d"}},greenMenthe:{_975_75:{default:e?"#15201e":"#dffdf7",hover:e?"#30433f":"#84f9e7",active:e?"#3f5753":"#70ebd8"},_950_100:{default:e?"#1a2624":"#bafaee",hover:e?"#364b47":"#79e7d5",active:e?"#46605b":"#6fd3c3"},sun373moon652:{default:e?"#21ab8e":"#37635f",hover:e?"#2eddb8":"#53918c",active:e?"#34f4cc":"#62a9a2"},_925_125:{default:e?"#1f2d2a":"#8bf8e7",hover:e?"#3c534e":"#6ed5c5",active:e?"#4d6963":"#62bfb1"},main548:{default:"#009081"},_850_200:{default:e?"#223f3a":"#73e0cf"}},greenArchipel:{_975_75:{default:e?"#152021":"#e5fbfd",hover:e?"#2f4345":"#99f2f8",active:e?"#3f5759":"#73e9f0"},_950_100:{default:e?"#1a2628":"#c7f6fc",hover:e?"#364a4e":"#64ecf8",active:e?"#465f63":"#5bd8e3"},sun391moon716:{default:e?"#34bab5":"#006a6f",hover:e?"#43e9e2":"#009fa7",active:e?"#4cfdf6":"#00bbc3"},_925_125:{default:e?"#1f2c2e":"#a6f2fa",hover:e?"#3c5255":"#62dbe5",active:e?"#4d676b":"#58c5cf"},main557:{default:"#009099"},_850_200:{default:e?"#233e41":"#60e0eb"}},blueEcume:{_975_75:{default:e?"#171d2f":"#f4f6fe",hover:e?"#333e5e":"#d7dffb",active:e?"#445179":"#c3cffa"},_950_100:{default:e?"#1d2437":"#e9edfe",hover:e?"#3b4767":"#c5d0fc",active:e?"#4c5b83":"#adbffc"},sun247moon675:{default:e?"#869ece":"#2f4077",hover:e?"#b8c5e2":"#4e68bb",active:e?"#ced6ea":"#667dcf"},_925_125:{default:e?"#222940":"#dee5fd",hover:e?"#424d73":"#b4c5fb",active:e?"#536190":"#99b3f9"},main400:{default:"#465f9d"},_850_200:{default:e?"#273962":"#bfccfb"}},blueCumulus:{_975_75:{default:e?"#171e2b":"#f3f6fe",hover:e?"#333f56":"#d3dffc",active:e?"#43536f":"#bed0fa"},_950_100:{default:e?"#1c2433":"#e6eefe",hover:e?"#3a4761":"#bcd3fc",active:e?"#4a5b7b":"#9fc3fc"},sun368moon732:{default:e?"#7ab1e8":"#3558a2",hover:e?"#bad2f2":"#5982e0",active:e?"#d2e2f6":"#7996e6"},_925_125:{default:e?"#212a3a":"#dae6fd",hover:e?"#404f69":"#a9c8fb",active:e?"#516384":"#8ab8f9"},main526:{default:"#417dc4"},_850_200:{default:e?"#263b58":"#b6cffb"}},purpleGlycine:{_975_75:{default:e?"#251a24":"#fef3fd",hover:e?"#4c394a":"#fcd4f8",active:e?"#634a60":"#fabff5"},_950_100:{default:e?"#2c202b":"#fee7fc",hover:e?"#554053":"#fdc0f8",active:e?"#6c536a":"#fca8f6"},sun319moon630:{default:e?"#ce70cc":"#6e445a",hover:e?"#dfa4dd":"#a66989",active:e?"#e7bbe6":"#bb7f9e"},_925_125:{default:e?"#332632":"#fddbfa",hover:e?"#5d485c":"#fbaff5",active:e?"#755b73":"#fa96f2"},main494:{default:"#a558a0"},_850_200:{default:e?"#502e4d":"#fbb8f6"}},pinkMacaron:{_975_75:{default:e?"#261b19":"#fef4f2",hover:e?"#4e3a37":"#fcd8d0",active:e?"#654c48":"#fac5b8"},_950_100:{default:e?"#2e211f":"#fee9e6",hover:e?"#58423f":"#fdc6bd",active:e?"#705551":"#fcb0a2"},sun406moon833:{default:e?"#ffb7ae":"#8d533e",hover:e?"#ffe0dc":"#ca795c",active:e?"#fff0ee":"#e08e73"},_925_125:{default:e?"#352724":"#fddfda",hover:e?"#614a45":"#fbb8ab",active:e?"#795d57":"#faa18d"},main689:{default:"#e18b76"},_850_200:{default:e?"#52312a":"#fcc0b4"}},pinkTuile:{_975_75:{default:e?"#281b19":"#fef4f3",hover:e?"#513a37":"#fcd7d3",active:e?"#694c48":"#fac4be"},_950_100:{default:e?"#2f211f":"#fee9e7",hover:e?"#5a423e":"#fdc6c0",active:e?"#725550":"#fcb0a7"},sun425moon750:{default:e?"#ff9575":"#a94645",hover:e?"#ffc4b7":"#d5706f",active:e?"#ffd8d0":"#da8a89"},_925_125:{default:e?"#372624":"#fddfdb",hover:e?"#644845":"#fbb8ad",active:e?"#7d5b57":"#faa191"},main556:{default:"#ce614a"},_850_200:{default:e?"#55302a":"#fcbfb7"}},yellowTournesol:{_975_75:{default:e?"#221d11":"#fef6e3",hover:e?"#473e29":"#fce086",active:e?"#5c5136":"#f5d24b"},_950_100:{default:e?"#292416":"#feecc2",hover:e?"#4f472f":"#fbd335",active:e?"#655b3d":"#e6c130"},sun407moon922:{default:e?"#ffe552":"#716043",hover:e?"#e1c700":"#a28a62",active:e?"#cab300":"#ba9f72"},_925_125:{default:e?"#302a1a":"#fde39c",hover:e?"#584e34":"#e9c53b",active:e?"#6f6342":"#d3b235"},main731:{default:"#c8aa39"},_850_200:{default:e?"#43391a":"#efcb3a"}},yellowMoutarde:{_975_75:{default:e?"#231d14":"#fef5e8",hover:e?"#483e2e":"#fcdca3",active:e?"#5e513d":"#fbcd64"},_950_100:{default:e?"#2a2319":"#feebd0",hover:e?"#514534":"#fdcd6d",active:e?"#685944":"#f4be30"},sun348moon860:{default:e?"#ffca00":"#695240",hover:e?"#cda200":"#9b7b61",active:e?"#b28c00":"#b58f72"},_925_125:{default:e?"#30291d":"#fde2b5",hover:e?"#584d39":"#f6c43c",active:e?"#6f6149":"#dfb135"},main679:{default:"#c3992a"},_850_200:{default:e?"#453820":"#fcc63a"}},orangeTerreBattue:{_975_75:{default:e?"#281a16":"#fef4f2",hover:e?"#513932":"#fcd8d0",active:e?"#6a4b42":"#fac5b8"},_950_100:{default:e?"#31201c":"#fee9e5",hover:e?"#5d403a":"#fdc6ba",active:e?"#77534a":"#fcb09e"},sun370moon672:{default:e?"#ff732c":"#755348",hover:e?"#ffa48b":"#ab7b6b",active:e?"#ffbbab":"#c68f7d"},_925_125:{default:e?"#382621":"#fddfd8",hover:e?"#664840":"#fbb8a5",active:e?"#7f5b51":"#faa184"},main645:{default:"#e4794a"},_850_200:{default:e?"#543125":"#fcc0b0"}},brownCafeCreme:{_975_75:{default:e?"#211d16":"#fbf6ed",hover:e?"#453e31":"#f2deb6",active:e?"#5a5141":"#eacf91"},_950_100:{default:e?"#28241c":"#f7ecdb",hover:e?"#4e4739":"#edce94",active:e?"#635b4a":"#dabd84"},sun383moon885:{default:e?"#ecd7a2":"#685c48",hover:e?"#c5b386":"#97866a",active:e?"#af9f77":"#ae9b7b"},_925_125:{default:e?"#2e2a21":"#f4e3c7",hover:e?"#554e3f":"#e1c386",active:e?"#6b6351":"#ccb078"},main782:{default:"#d1b781"},_850_200:{default:e?"#423925":"#e7ca8e"}},brownCaramel:{_975_75:{default:e?"#251c16":"#fbf5f2",hover:e?"#4c3c31":"#f1dbcf",active:e?"#624e41":"#ecc9b5"},_950_100:{default:e?"#2c221c":"#f7ebe5",hover:e?"#554439":"#eccbb9",active:e?"#6c574a":"#e6b79a"},sun425moon901:{default:e?"#fbd8ab":"#845d48",hover:e?"#efb547":"#bb8568",active:e?"#d6a23e":"#d69978"},_925_125:{default:e?"#332821":"#f3e2d9",hover:e?"#5d4b40":"#e7bea6",active:e?"#755f51":"#e1a982"},main648:{default:"#c08c65"},_850_200:{default:e?"#4b3525":"#eac7b2"}},brownOpera:{_975_75:{default:e?"#241c17":"#fbf5f2",hover:e?"#4a3c33":"#f1dbcf",active:e?"#604f44":"#ecc9b5"},_950_100:{default:e?"#2b221c":"#f7ece4",hover:e?"#53443a":"#eccdb3",active:e?"#6a574a":"#e6ba90"},sun395moon820:{default:e?"#e6be92":"#745b47",hover:e?"#f2e2d3":"#a78468",active:e?"#f8f0e9":"#c09979"},_925_125:{default:e?"#322821":"#f3e2d7",hover:e?"#5c4b40":"#e7bfa0",active:e?"#735f51":"#deaa7e"},main680:{default:"#bd987a"},_850_200:{default:e?"#493625":"#eac7ad"}},beigeGrisGalet:{_975_75:{default:e?"#211d19":"#f9f6f2",hover:e?"#453e37":"#eadecd",active:e?"#595148":"#e1ceb1"},_950_100:{default:e?"#28231f":"#f3ede5",hover:e?"#4e453f":"#e1d0b5",active:e?"#635950":"#d1bea2"},sun407moon821:{default:e?"#d0c3b7":"#6a6156",hover:e?"#eae5e1":"#988b7c",active:e?"#f4f2f0":"#afa08f"},_925_125:{default:e?"#2e2924":"#eee4d9",hover:e?"#554d45":"#dbc3a4",active:e?"#6b6157":"#c6b094"},main702:{default:"#aea397"},_850_200:{default:e?"#433829":"#e0cab0"}}}}const colorDecisions={background:{default:{grey:{default:"var(--background-default-grey)",hover:"var(--background-default-grey-hover)",active:"var(--background-default-grey-active)"}},alt:{grey:{default:"var(--background-alt-grey)",hover:"var(--background-alt-grey-hover)",active:"var(--background-alt-grey-active)"},blueFrance:{default:"var(--background-alt-blue-france)",hover:"var(--background-alt-blue-france-hover)",active:"var(--background-alt-blue-france-active)"},redMarianne:{default:"var(--background-alt-red-marianne)",hover:"var(--background-alt-red-marianne-hover)",active:"var(--background-alt-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-alt-green-tilleul-verveine)",hover:"var(--background-alt-green-tilleul-verveine-hover)",active:"var(--background-alt-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-alt-green-bourgeon)",hover:"var(--background-alt-green-bourgeon-hover)",active:"var(--background-alt-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-alt-green-emeraude)",hover:"var(--background-alt-green-emeraude-hover)",active:"var(--background-alt-green-emeraude-active)"},greenMenthe:{default:"var(--background-alt-green-menthe)",hover:"var(--background-alt-green-menthe-hover)",active:"var(--background-alt-green-menthe-active)"},greenArchipel:{default:"var(--background-alt-green-archipel)",hover:"var(--background-alt-green-archipel-hover)",active:"var(--background-alt-green-archipel-active)"},blueEcume:{default:"var(--background-alt-blue-ecume)",hover:"var(--background-alt-blue-ecume-hover)",active:"var(--background-alt-blue-ecume-active)"},blueCumulus:{default:"var(--background-alt-blue-cumulus)",hover:"var(--background-alt-blue-cumulus-hover)",active:"var(--background-alt-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-alt-purple-glycine)",hover:"var(--background-alt-purple-glycine-hover)",active:"var(--background-alt-purple-glycine-active)"},pinkMacaron:{default:"var(--background-alt-pink-macaron)",hover:"var(--background-alt-pink-macaron-hover)",active:"var(--background-alt-pink-macaron-active)"},pinkTuile:{default:"var(--background-alt-pink-tuile)",hover:"var(--background-alt-pink-tuile-hover)",active:"var(--background-alt-pink-tuile-active)"},yellowTournesol:{default:"var(--background-alt-yellow-tournesol)",hover:"var(--background-alt-yellow-tournesol-hover)",active:"var(--background-alt-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-alt-yellow-moutarde)",hover:"var(--background-alt-yellow-moutarde-hover)",active:"var(--background-alt-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-alt-orange-terre-battue)",hover:"var(--background-alt-orange-terre-battue-hover)",active:"var(--background-alt-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-alt-brown-cafe-creme)",hover:"var(--background-alt-brown-cafe-creme-hover)",active:"var(--background-alt-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-alt-brown-caramel)",hover:"var(--background-alt-brown-caramel-hover)",active:"var(--background-alt-brown-caramel-active)"},brownOpera:{default:"var(--background-alt-brown-opera)",hover:"var(--background-alt-brown-opera-hover)",active:"var(--background-alt-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-alt-beige-gris-galet)",hover:"var(--background-alt-beige-gris-galet-hover)",active:"var(--background-alt-beige-gris-galet-active)"}},contrast:{grey:{default:"var(--background-contrast-grey)",hover:"var(--background-contrast-grey-hover)",active:"var(--background-contrast-grey-active)"},blueFrance:{default:"var(--background-contrast-blue-france)",hover:"var(--background-contrast-blue-france-hover)",active:"var(--background-contrast-blue-france-active)"},redMarianne:{default:"var(--background-contrast-red-marianne)",hover:"var(--background-contrast-red-marianne-hover)",active:"var(--background-contrast-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-contrast-green-tilleul-verveine)",hover:"var(--background-contrast-green-tilleul-verveine-hover)",active:"var(--background-contrast-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-contrast-green-bourgeon)",hover:"var(--background-contrast-green-bourgeon-hover)",active:"var(--background-contrast-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-contrast-green-emeraude)",hover:"var(--background-contrast-green-emeraude-hover)",active:"var(--background-contrast-green-emeraude-active)"},greenMenthe:{default:"var(--background-contrast-green-menthe)",hover:"var(--background-contrast-green-menthe-hover)",active:"var(--background-contrast-green-menthe-active)"},greenArchipel:{default:"var(--background-contrast-green-archipel)",hover:"var(--background-contrast-green-archipel-hover)",active:"var(--background-contrast-green-archipel-active)"},blueEcume:{default:"var(--background-contrast-blue-ecume)",hover:"var(--background-contrast-blue-ecume-hover)",active:"var(--background-contrast-blue-ecume-active)"},blueCumulus:{default:"var(--background-contrast-blue-cumulus)",hover:"var(--background-contrast-blue-cumulus-hover)",active:"var(--background-contrast-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-contrast-purple-glycine)",hover:"var(--background-contrast-purple-glycine-hover)",active:"var(--background-contrast-purple-glycine-active)"},pinkMacaron:{default:"var(--background-contrast-pink-macaron)",hover:"var(--background-contrast-pink-macaron-hover)",active:"var(--background-contrast-pink-macaron-active)"},pinkTuile:{default:"var(--background-contrast-pink-tuile)",hover:"var(--background-contrast-pink-tuile-hover)",active:"var(--background-contrast-pink-tuile-active)"},yellowTournesol:{default:"var(--background-contrast-yellow-tournesol)",hover:"var(--background-contrast-yellow-tournesol-hover)",active:"var(--background-contrast-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-contrast-yellow-moutarde)",hover:"var(--background-contrast-yellow-moutarde-hover)",active:"var(--background-contrast-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-contrast-orange-terre-battue)",hover:"var(--background-contrast-orange-terre-battue-hover)",active:"var(--background-contrast-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-contrast-brown-cafe-creme)",hover:"var(--background-contrast-brown-cafe-creme-hover)",active:"var(--background-contrast-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-contrast-brown-caramel)",hover:"var(--background-contrast-brown-caramel-hover)",active:"var(--background-contrast-brown-caramel-active)"},brownOpera:{default:"var(--background-contrast-brown-opera)",hover:"var(--background-contrast-brown-opera-hover)",active:"var(--background-contrast-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-contrast-beige-gris-galet)",hover:"var(--background-contrast-beige-gris-galet-hover)",active:"var(--background-contrast-beige-gris-galet-active)"},info:{default:"var(--background-contrast-info)",hover:"var(--background-contrast-info-hover)",active:"var(--background-contrast-info-active)"},success:{default:"var(--background-contrast-success)",hover:"var(--background-contrast-success-hover)",active:"var(--background-contrast-success-active)"},warning:{default:"var(--background-contrast-warning)",hover:"var(--background-contrast-warning-hover)",active:"var(--background-contrast-warning-active)"},error:{default:"var(--background-contrast-error)",hover:"var(--background-contrast-error-hover)",active:"var(--background-contrast-error-active)"}},flat:{grey:{default:"var(--background-flat-grey)"},blueFrance:{default:"var(--background-flat-blue-france)"},redMarianne:{default:"var(--background-flat-red-marianne)"},greenTilleulVerveine:{default:"var(--background-flat-green-tilleul-verveine)"},greenBourgeon:{default:"var(--background-flat-green-bourgeon)"},greenEmeraude:{default:"var(--background-flat-green-emeraude)"},greenMenthe:{default:"var(--background-flat-green-menthe)"},greenArchipel:{default:"var(--background-flat-green-archipel)"},blueEcume:{default:"var(--background-flat-blue-ecume)"},blueCumulus:{default:"var(--background-flat-blue-cumulus)"},purpleGlycine:{default:"var(--background-flat-purple-glycine)"},pinkMacaron:{default:"var(--background-flat-pink-macaron)"},pinkTuile:{default:"var(--background-flat-pink-tuile)"},yellowTournesol:{default:"var(--background-flat-yellow-tournesol)"},yellowMoutarde:{default:"var(--background-flat-yellow-moutarde)"},orangeTerreBattue:{default:"var(--background-flat-orange-terre-battue)"},brownCafeCreme:{default:"var(--background-flat-brown-cafe-creme)"},brownCaramel:{default:"var(--background-flat-brown-caramel)"},brownOpera:{default:"var(--background-flat-brown-opera)"},beigeGrisGalet:{default:"var(--background-flat-beige-gris-galet)"},info:{default:"var(--background-flat-info)"},success:{default:"var(--background-flat-success)"},warning:{default:"var(--background-flat-warning)"},error:{default:"var(--background-flat-error)"}},actionHigh:{grey:{default:"var(--background-action-high-grey)",hover:"var(--background-action-high-grey-hover)",active:"var(--background-action-high-grey-active)"},blueFrance:{default:"var(--background-action-high-blue-france)",hover:"var(--background-action-high-blue-france-hover)",active:"var(--background-action-high-blue-france-active)"},redMarianne:{default:"var(--background-action-high-red-marianne)",hover:"var(--background-action-high-red-marianne-hover)",active:"var(--background-action-high-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-high-green-tilleul-verveine)",hover:"var(--background-action-high-green-tilleul-verveine-hover)",active:"var(--background-action-high-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-high-green-bourgeon)",hover:"var(--background-action-high-green-bourgeon-hover)",active:"var(--background-action-high-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-high-green-emeraude)",hover:"var(--background-action-high-green-emeraude-hover)",active:"var(--background-action-high-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-high-green-menthe)",hover:"var(--background-action-high-green-menthe-hover)",active:"var(--background-action-high-green-menthe-active)"},greenArchipel:{default:"var(--background-action-high-green-archipel)",hover:"var(--background-action-high-green-archipel-hover)",active:"var(--background-action-high-green-archipel-active)"},blueEcume:{default:"var(--background-action-high-blue-ecume)",hover:"var(--background-action-high-blue-ecume-hover)",active:"var(--background-action-high-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-high-blue-cumulus)",hover:"var(--background-action-high-blue-cumulus-hover)",active:"var(--background-action-high-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-high-purple-glycine)",hover:"var(--background-action-high-purple-glycine-hover)",active:"var(--background-action-high-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-high-pink-macaron)",hover:"var(--background-action-high-pink-macaron-hover)",active:"var(--background-action-high-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-high-pink-tuile)",hover:"var(--background-action-high-pink-tuile-hover)",active:"var(--background-action-high-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-high-yellow-tournesol)",hover:"var(--background-action-high-yellow-tournesol-hover)",active:"var(--background-action-high-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-high-yellow-moutarde)",hover:"var(--background-action-high-yellow-moutarde-hover)",active:"var(--background-action-high-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-high-orange-terre-battue)",hover:"var(--background-action-high-orange-terre-battue-hover)",active:"var(--background-action-high-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-high-brown-cafe-creme)",hover:"var(--background-action-high-brown-cafe-creme-hover)",active:"var(--background-action-high-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-high-brown-caramel)",hover:"var(--background-action-high-brown-caramel-hover)",active:"var(--background-action-high-brown-caramel-active)"},brownOpera:{default:"var(--background-action-high-brown-opera)",hover:"var(--background-action-high-brown-opera-hover)",active:"var(--background-action-high-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-high-beige-gris-galet)",hover:"var(--background-action-high-beige-gris-galet-hover)",active:"var(--background-action-high-beige-gris-galet-active)"},info:{default:"var(--background-action-high-info)",hover:"var(--background-action-high-info-hover)",active:"var(--background-action-high-info-active)"},success:{default:"var(--background-action-high-success)",hover:"var(--background-action-high-success-hover)",active:"var(--background-action-high-success-active)"},warning:{default:"var(--background-action-high-warning)",hover:"var(--background-action-high-warning-hover)",active:"var(--background-action-high-warning-active)"},error:{default:"var(--background-action-high-error)",hover:"var(--background-action-high-error-hover)",active:"var(--background-action-high-error-active)"}},actionLow:{blueFrance:{default:"var(--background-action-low-blue-france)",hover:"var(--background-action-low-blue-france-hover)",active:"var(--background-action-low-blue-france-active)"},redMarianne:{default:"var(--background-action-low-red-marianne)",hover:"var(--background-action-low-red-marianne-hover)",active:"var(--background-action-low-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-low-green-tilleul-verveine)",hover:"var(--background-action-low-green-tilleul-verveine-hover)",active:"var(--background-action-low-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-low-green-bourgeon)",hover:"var(--background-action-low-green-bourgeon-hover)",active:"var(--background-action-low-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-low-green-emeraude)",hover:"var(--background-action-low-green-emeraude-hover)",active:"var(--background-action-low-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-low-green-menthe)",hover:"var(--background-action-low-green-menthe-hover)",active:"var(--background-action-low-green-menthe-active)"},greenArchipel:{default:"var(--background-action-low-green-archipel)",hover:"var(--background-action-low-green-archipel-hover)",active:"var(--background-action-low-green-archipel-active)"},blueEcume:{default:"var(--background-action-low-blue-ecume)",hover:"var(--background-action-low-blue-ecume-hover)",active:"var(--background-action-low-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-low-blue-cumulus)",hover:"var(--background-action-low-blue-cumulus-hover)",active:"var(--background-action-low-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-low-purple-glycine)",hover:"var(--background-action-low-purple-glycine-hover)",active:"var(--background-action-low-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-low-pink-macaron)",hover:"var(--background-action-low-pink-macaron-hover)",active:"var(--background-action-low-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-low-pink-tuile)",hover:"var(--background-action-low-pink-tuile-hover)",active:"var(--background-action-low-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-low-yellow-tournesol)",hover:"var(--background-action-low-yellow-tournesol-hover)",active:"var(--background-action-low-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-low-yellow-moutarde)",hover:"var(--background-action-low-yellow-moutarde-hover)",active:"var(--background-action-low-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-low-orange-terre-battue)",hover:"var(--background-action-low-orange-terre-battue-hover)",active:"var(--background-action-low-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-low-brown-cafe-creme)",hover:"var(--background-action-low-brown-cafe-creme-hover)",active:"var(--background-action-low-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-low-brown-caramel)",hover:"var(--background-action-low-brown-caramel-hover)",active:"var(--background-action-low-brown-caramel-active)"},brownOpera:{default:"var(--background-action-low-brown-opera)",hover:"var(--background-action-low-brown-opera-hover)",active:"var(--background-action-low-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-low-beige-gris-galet)",hover:"var(--background-action-low-beige-gris-galet-hover)",active:"var(--background-action-low-beige-gris-galet-active)"}},active:{blueFrance:{default:"var(--background-active-blue-france)",hover:"var(--background-active-blue-france-hover)",active:"var(--background-active-blue-france-active)"},redMarianne:{default:"var(--background-active-red-marianne)",hover:"var(--background-active-red-marianne-hover)",active:"var(--background-active-red-marianne-active)"}},open:{blueFrance:{default:"var(--background-open-blue-france)",hover:"var(--background-open-blue-france-hover)",active:"var(--background-open-blue-france-active)"},redMarianne:{default:"var(--background-open-red-marianne)",hover:"var(--background-open-red-marianne-hover)",active:"var(--background-open-red-marianne-active)"}},disabled:{grey:{default:"var(--background-disabled-grey)"}},raised:{grey:{default:"var(--background-raised-grey)",hover:"var(--background-raised-grey-hover)",active:"var(--background-raised-grey-active)"}},overlap:{grey:{default:"var(--background-overlap-grey)",hover:"var(--background-overlap-grey-hover)",active:"var(--background-overlap-grey-active)"}},lifted:{grey:{default:"var(--background-lifted-grey)",hover:"var(--background-lifted-grey-hover)",active:"var(--background-lifted-grey-active)"}},altRaised:{grey:{default:"var(--background-alt-raised-grey)",hover:"var(--background-alt-raised-grey-hover)",active:"var(--background-alt-raised-grey-active)"}},altOverlap:{grey:{default:"var(--background-alt-overlap-grey)",hover:"var(--background-alt-overlap-grey-hover)",active:"var(--background-alt-overlap-grey-active)"}},contrastRaised:{grey:{default:"var(--background-contrast-raised-grey)",hover:"var(--background-contrast-raised-grey-hover)",active:"var(--background-contrast-raised-grey-active)"}},contrastOverlap:{grey:{default:"var(--background-contrast-overlap-grey)",hover:"var(--background-contrast-overlap-grey-hover)",active:"var(--background-contrast-overlap-grey-active)"}}},text:{default:{grey:{default:"var(--text-default-grey)"},info:{default:"var(--text-default-info)"},success:{default:"var(--text-default-success)"},warning:{default:"var(--text-default-warning)"},error:{default:"var(--text-default-error)"}},actionHigh:{grey:{default:"var(--text-action-high-grey)"},blueFrance:{default:"var(--text-action-high-blue-france)"},redMarianne:{default:"var(--text-action-high-red-marianne)"},greenTilleulVerveine:{default:"var(--text-action-high-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-action-high-green-bourgeon)"},greenEmeraude:{default:"var(--text-action-high-green-emeraude)"},greenMenthe:{default:"var(--text-action-high-green-menthe)"},greenArchipel:{default:"var(--text-action-high-green-archipel)"},blueEcume:{default:"var(--text-action-high-blue-ecume)"},blueCumulus:{default:"var(--text-action-high-blue-cumulus)"},purpleGlycine:{default:"var(--text-action-high-purple-glycine)"},pinkMacaron:{default:"var(--text-action-high-pink-macaron)"},pinkTuile:{default:"var(--text-action-high-pink-tuile)"},yellowTournesol:{default:"var(--text-action-high-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-action-high-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-action-high-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-action-high-brown-cafe-creme)"},brownCaramel:{default:"var(--text-action-high-brown-caramel)"},brownOpera:{default:"var(--text-action-high-brown-opera)"},beigeGrisGalet:{default:"var(--text-action-high-beige-gris-galet)"}},title:{grey:{default:"var(--text-title-grey)"},blueFrance:{default:"var(--text-title-blue-france)"},redMarianne:{default:"var(--text-title-red-marianne)"}},label:{grey:{default:"var(--text-label-grey)"},blueFrance:{default:"var(--text-label-blue-france)"},redMarianne:{default:"var(--text-label-red-marianne)"},greenTilleulVerveine:{default:"var(--text-label-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-label-green-bourgeon)"},greenEmeraude:{default:"var(--text-label-green-emeraude)"},greenMenthe:{default:"var(--text-label-green-menthe)"},greenArchipel:{default:"var(--text-label-green-archipel)"},blueEcume:{default:"var(--text-label-blue-ecume)"},blueCumulus:{default:"var(--text-label-blue-cumulus)"},purpleGlycine:{default:"var(--text-label-purple-glycine)"},pinkMacaron:{default:"var(--text-label-pink-macaron)"},pinkTuile:{default:"var(--text-label-pink-tuile)"},yellowTournesol:{default:"var(--text-label-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-label-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-label-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-label-brown-cafe-creme)"},brownCaramel:{default:"var(--text-label-brown-caramel)"},brownOpera:{default:"var(--text-label-brown-opera)"},beigeGrisGalet:{default:"var(--text-label-beige-gris-galet)"}},active:{grey:{default:"var(--text-active-grey)"},blueFrance:{default:"var(--text-active-blue-france)"},redMarianne:{default:"var(--text-active-red-marianne)"}},mention:{grey:{default:"var(--text-mention-grey)"}},inverted:{grey:{default:"var(--text-inverted-grey)"},blueFrance:{default:"var(--text-inverted-blue-france)"},redMarianne:{default:"var(--text-inverted-red-marianne)"},info:{default:"var(--text-inverted-info)"},success:{default:"var(--text-inverted-success)"},warning:{default:"var(--text-inverted-warning)"},error:{default:"var(--text-inverted-error)"},greenTilleulVerveine:{default:"var(--text-inverted-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-inverted-green-bourgeon)"},greenEmeraude:{default:"var(--text-inverted-green-emeraude)"},greenMenthe:{default:"var(--text-inverted-green-menthe)"},greenArchipel:{default:"var(--text-inverted-green-archipel)"},blueEcume:{default:"var(--text-inverted-blue-ecume)"},blueCumulus:{default:"var(--text-inverted-blue-cumulus)"},purpleGlycine:{default:"var(--text-inverted-purple-glycine)"},pinkMacaron:{default:"var(--text-inverted-pink-macaron)"},pinkTuile:{default:"var(--text-inverted-pink-tuile)"},yellowTournesol:{default:"var(--text-inverted-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-inverted-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-inverted-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-inverted-brown-cafe-creme)"},brownCaramel:{default:"var(--text-inverted-brown-caramel)"},brownOpera:{default:"var(--text-inverted-brown-opera)"},beigeGrisGalet:{default:"var(--text-inverted-beige-gris-galet)"}},disabled:{grey:{default:"var(--text-disabled-grey)"}},blackWhite:{grey:{default:"var(--text-black-white-grey)"}}},border:{default:{grey:{default:"var(--border-default-grey)"},blueFrance:{default:"var(--border-default-blue-france)"},redMarianne:{default:"var(--border-default-red-marianne)"},greenTilleulVerveine:{default:"var(--border-default-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-default-green-bourgeon)"},greenEmeraude:{default:"var(--border-default-green-emeraude)"},greenMenthe:{default:"var(--border-default-green-menthe)"},greenArchipel:{default:"var(--border-default-green-archipel)"},blueEcume:{default:"var(--border-default-blue-ecume)"},blueCumulus:{default:"var(--border-default-blue-cumulus)"},purpleGlycine:{default:"var(--border-default-purple-glycine)"},pinkMacaron:{default:"var(--border-default-pink-macaron)"},pinkTuile:{default:"var(--border-default-pink-tuile)"},yellowTournesol:{default:"var(--border-default-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-default-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-default-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-default-brown-cafe-creme)"},brownCaramel:{default:"var(--border-default-brown-caramel)"},brownOpera:{default:"var(--border-default-brown-opera)"},beigeGrisGalet:{default:"var(--border-default-beige-gris-galet)"}},contrast:{grey:{default:"var(--border-contrast-grey)"}},active:{blueFrance:{default:"var(--border-active-blue-france)"},redMarianne:{default:"var(--border-active-red-marianne)"}},actionHigh:{grey:{default:"var(--border-action-high-grey)"},blueFrance:{default:"var(--border-action-high-blue-france)"},redMarianne:{default:"var(--border-action-high-red-marianne)"},info:{default:"var(--border-action-high-info)"},success:{default:"var(--border-action-high-success)"},warning:{default:"var(--border-action-high-warning)"},error:{default:"var(--border-action-high-error)"}},actionLow:{blueFrance:{default:"var(--border-action-low-blue-france)"},redMarianne:{default:"var(--border-action-low-red-marianne)"},greenTilleulVerveine:{default:"var(--border-action-low-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-action-low-green-bourgeon)"},greenEmeraude:{default:"var(--border-action-low-green-emeraude)"},greenMenthe:{default:"var(--border-action-low-green-menthe)"},greenArchipel:{default:"var(--border-action-low-green-archipel)"},blueEcume:{default:"var(--border-action-low-blue-ecume)"},blueCumulus:{default:"var(--border-action-low-blue-cumulus)"},purpleGlycine:{default:"var(--border-action-low-purple-glycine)"},pinkMacaron:{default:"var(--border-action-low-pink-macaron)"},pinkTuile:{default:"var(--border-action-low-pink-tuile)"},yellowTournesol:{default:"var(--border-action-low-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-action-low-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-action-low-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-action-low-brown-cafe-creme)"},brownCaramel:{default:"var(--border-action-low-brown-caramel)"},brownOpera:{default:"var(--border-action-low-brown-opera)"},beigeGrisGalet:{default:"var(--border-action-low-beige-gris-galet)"}},open:{blueFrance:{default:"var(--border-open-blue-france)"},redMarianne:{default:"var(--border-open-red-marianne)"}},plain:{grey:{default:"var(--border-plain-grey)"},blueFrance:{default:"var(--border-plain-blue-france)"},redMarianne:{default:"var(--border-plain-red-marianne)"},info:{default:"var(--border-plain-info)"},success:{default:"var(--border-plain-success)"},warning:{default:"var(--border-plain-warning)"},error:{default:"var(--border-plain-error)"},greenTilleulVerveine:{default:"var(--border-plain-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-plain-green-bourgeon)"},greenEmeraude:{default:"var(--border-plain-green-emeraude)"},greenMenthe:{default:"var(--border-plain-green-menthe)"},greenArchipel:{default:"var(--border-plain-green-archipel)"},blueEcume:{default:"var(--border-plain-blue-ecume)"},blueCumulus:{default:"var(--border-plain-blue-cumulus)"},purpleGlycine:{default:"var(--border-plain-purple-glycine)"},pinkMacaron:{default:"var(--border-plain-pink-macaron)"},pinkTuile:{default:"var(--border-plain-pink-tuile)"},yellowTournesol:{default:"var(--border-plain-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-plain-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-plain-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-plain-brown-cafe-creme)"},brownCaramel:{default:"var(--border-plain-brown-caramel)"},brownOpera:{default:"var(--border-plain-brown-opera)"},beigeGrisGalet:{default:"var(--border-plain-beige-gris-galet)"}},disabled:{grey:{default:"var(--border-disabled-grey)"}}},artwork:{major:{blueFrance:{default:"var(--artwork-major-blue-france)",hover:"var(--artwork-major-blue-france-hover)",active:"var(--artwork-major-blue-france-active)"},redMarianne:{default:"var(--artwork-major-red-marianne)",hover:"var(--artwork-major-red-marianne-hover)",active:"var(--artwork-major-red-marianne-active)"},greenTilleulVerveine:{default:"var(--artwork-major-green-tilleul-verveine)",hover:"var(--artwork-major-green-tilleul-verveine-hover)",active:"var(--artwork-major-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--artwork-major-green-bourgeon)",hover:"var(--artwork-major-green-bourgeon-hover)",active:"var(--artwork-major-green-bourgeon-active)"},greenEmeraude:{default:"var(--artwork-major-green-emeraude)",hover:"var(--artwork-major-green-emeraude-hover)",active:"var(--artwork-major-green-emeraude-active)"},greenMenthe:{default:"var(--artwork-major-green-menthe)",hover:"var(--artwork-major-green-menthe-hover)",active:"var(--artwork-major-green-menthe-active)"},greenArchipel:{default:"var(--artwork-major-green-archipel)",hover:"var(--artwork-major-green-archipel-hover)",active:"var(--artwork-major-green-archipel-active)"},blueEcume:{default:"var(--artwork-major-blue-ecume)",hover:"var(--artwork-major-blue-ecume-hover)",active:"var(--artwork-major-blue-ecume-active)"},blueCumulus:{default:"var(--artwork-major-blue-cumulus)",hover:"var(--artwork-major-blue-cumulus-hover)",active:"var(--artwork-major-blue-cumulus-active)"},purpleGlycine:{default:"var(--artwork-major-purple-glycine)",hover:"var(--artwork-major-purple-glycine-hover)",active:"var(--artwork-major-purple-glycine-active)"},pinkMacaron:{default:"var(--artwork-major-pink-macaron)",hover:"var(--artwork-major-pink-macaron-hover)",active:"var(--artwork-major-pink-macaron-active)"},pinkTuile:{default:"var(--artwork-major-pink-tuile)",hover:"var(--artwork-major-pink-tuile-hover)",active:"var(--artwork-major-pink-tuile-active)"},yellowTournesol:{default:"var(--artwork-major-yellow-tournesol)",hover:"var(--artwork-major-yellow-tournesol-hover)",active:"var(--artwork-major-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--artwork-major-yellow-moutarde)",hover:"var(--artwork-major-yellow-moutarde-hover)",active:"var(--artwork-major-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--artwork-major-orange-terre-battue)",hover:"var(--artwork-major-orange-terre-battue-hover)",active:"var(--artwork-major-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--artwork-major-brown-cafe-creme)",hover:"var(--artwork-major-brown-cafe-creme-hover)",active:"var(--artwork-major-brown-cafe-creme-active)"},brownCaramel:{default:"var(--artwork-major-brown-caramel)",hover:"var(--artwork-major-brown-caramel-hover)",active:"var(--artwork-major-brown-caramel-active)"},brownOpera:{default:"var(--artwork-major-brown-opera)",hover:"var(--artwork-major-brown-opera-hover)",active:"var(--artwork-major-brown-opera-active)"},beigeGrisGalet:{default:"var(--artwork-major-beige-gris-galet)",hover:"var(--artwork-major-beige-gris-galet-hover)",active:"var(--artwork-major-beige-gris-galet-active)"}},minor:{blueFrance:{default:"var(--artwork-minor-blue-france)"},redMarianne:{default:"var(--artwork-minor-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-minor-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-minor-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-minor-green-emeraude)"},greenMenthe:{default:"var(--artwork-minor-green-menthe)"},greenArchipel:{default:"var(--artwork-minor-green-archipel)"},blueEcume:{default:"var(--artwork-minor-blue-ecume)"},blueCumulus:{default:"var(--artwork-minor-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-minor-purple-glycine)"},pinkMacaron:{default:"var(--artwork-minor-pink-macaron)"},pinkTuile:{default:"var(--artwork-minor-pink-tuile)"},yellowTournesol:{default:"var(--artwork-minor-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-minor-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-minor-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-minor-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-minor-brown-caramel)"},brownOpera:{default:"var(--artwork-minor-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-minor-beige-gris-galet)"}},decorative:{grey:{default:"var(--artwork-decorative-grey)"},blueFrance:{default:"var(--artwork-decorative-blue-france)"},redMarianne:{default:"var(--artwork-decorative-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-decorative-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-decorative-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-decorative-green-emeraude)"},greenMenthe:{default:"var(--artwork-decorative-green-menthe)"},greenArchipel:{default:"var(--artwork-decorative-green-archipel)"},blueEcume:{default:"var(--artwork-decorative-blue-ecume)"},blueCumulus:{default:"var(--artwork-decorative-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-decorative-purple-glycine)"},pinkMacaron:{default:"var(--artwork-decorative-pink-macaron)"},pinkTuile:{default:"var(--artwork-decorative-pink-tuile)"},yellowTournesol:{default:"var(--artwork-decorative-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-decorative-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-decorative-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-decorative-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-decorative-brown-caramel)"},brownOpera:{default:"var(--artwork-decorative-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-decorative-beige-gris-galet)"}},background:{grey:{default:"var(--artwork-background-grey)"},blueFrance:{default:"var(--artwork-background-blue-france)"},redMarianne:{default:"var(--artwork-background-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-background-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-background-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-background-green-emeraude)"},greenMenthe:{default:"var(--artwork-background-green-menthe)"},greenArchipel:{default:"var(--artwork-background-green-archipel)"},blueEcume:{default:"var(--artwork-background-blue-ecume)"},blueCumulus:{default:"var(--artwork-background-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-background-purple-glycine)"},pinkMacaron:{default:"var(--artwork-background-pink-macaron)"},pinkTuile:{default:"var(--artwork-background-pink-tuile)"},yellowTournesol:{default:"var(--artwork-background-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-background-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-background-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-background-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-background-brown-caramel)"},brownOpera:{default:"var(--artwork-background-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-background-beige-gris-galet)"}},motif:{grey:{default:"var(--artwork-motif-grey)"},blueFrance:{default:"var(--artwork-motif-blue-france)"},redMarianne:{default:"var(--artwork-motif-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-motif-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-motif-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-motif-green-emeraude)"},greenMenthe:{default:"var(--artwork-motif-green-menthe)"},greenArchipel:{default:"var(--artwork-motif-green-archipel)"},blueEcume:{default:"var(--artwork-motif-blue-ecume)"},blueCumulus:{default:"var(--artwork-motif-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-motif-purple-glycine)"},pinkMacaron:{default:"var(--artwork-motif-pink-macaron)"},pinkTuile:{default:"var(--artwork-motif-pink-tuile)"},yellowTournesol:{default:"var(--artwork-motif-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-motif-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-motif-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-motif-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-motif-brown-caramel)"},brownOpera:{default:"var(--artwork-motif-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-motif-beige-gris-galet)"}}}};function getColorDecisionsHex(n){const{colorOptions:e}=n;return{background:{default:{grey:{default:e.grey._1000_50.default,hover:e.grey._1000_50.hover,active:e.grey._1000_50.active}},alt:{grey:{default:e.grey._975_75.default,hover:e.grey._975_75.hover,active:e.grey._975_75.active},blueFrance:{default:e.blueFrance._975_75.default,hover:e.blueFrance._975_75.hover,active:e.blueFrance._975_75.active},redMarianne:{default:e.redMarianne._975_75.default,hover:e.redMarianne._975_75.hover,active:e.redMarianne._975_75.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default,hover:e.greenTilleulVerveine._975_75.hover,active:e.greenTilleulVerveine._975_75.active},greenBourgeon:{default:e.greenBourgeon._975_75.default,hover:e.greenBourgeon._975_75.hover,active:e.greenBourgeon._975_75.active},greenEmeraude:{default:e.greenEmeraude._975_75.default,hover:e.greenEmeraude._975_75.hover,active:e.greenEmeraude._975_75.active},greenMenthe:{default:e.greenMenthe._975_75.default,hover:e.greenMenthe._975_75.hover,active:e.greenMenthe._975_75.active},greenArchipel:{default:e.greenArchipel._975_75.default,hover:e.greenArchipel._975_75.hover,active:e.greenArchipel._975_75.active},blueEcume:{default:e.blueEcume._975_75.default,hover:e.blueEcume._975_75.hover,active:e.blueEcume._975_75.active},blueCumulus:{default:e.blueCumulus._975_75.default,hover:e.blueCumulus._975_75.hover,active:e.blueCumulus._975_75.active},purpleGlycine:{default:e.purpleGlycine._975_75.default,hover:e.purpleGlycine._975_75.hover,active:e.purpleGlycine._975_75.active},pinkMacaron:{default:e.pinkMacaron._975_75.default,hover:e.pinkMacaron._975_75.hover,active:e.pinkMacaron._975_75.active},pinkTuile:{default:e.pinkTuile._975_75.default,hover:e.pinkTuile._975_75.hover,active:e.pinkTuile._975_75.active},yellowTournesol:{default:e.yellowTournesol._975_75.default,hover:e.yellowTournesol._975_75.hover,active:e.yellowTournesol._975_75.active},yellowMoutarde:{default:e.yellowMoutarde._975_75.default,hover:e.yellowMoutarde._975_75.hover,active:e.yellowMoutarde._975_75.active},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default,hover:e.orangeTerreBattue._975_75.hover,active:e.orangeTerreBattue._975_75.active},brownCafeCreme:{default:e.brownCafeCreme._975_75.default,hover:e.brownCafeCreme._975_75.hover,active:e.brownCafeCreme._975_75.active},brownCaramel:{default:e.brownCaramel._975_75.default,hover:e.brownCaramel._975_75.hover,active:e.brownCaramel._975_75.active},brownOpera:{default:e.brownOpera._975_75.default,hover:e.brownOpera._975_75.hover,active:e.brownOpera._975_75.active},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default,hover:e.beigeGrisGalet._975_75.hover,active:e.beigeGrisGalet._975_75.active}},contrast:{grey:{default:e.grey._950_100.default,hover:e.grey._950_100.hover,active:e.grey._950_100.active},blueFrance:{default:e.blueFrance._950_100.default,hover:e.blueFrance._950_100.hover,active:e.blueFrance._950_100.active},redMarianne:{default:e.redMarianne._950_100.default,hover:e.redMarianne._950_100.hover,active:e.redMarianne._950_100.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default,hover:e.greenTilleulVerveine._950_100.hover,active:e.greenTilleulVerveine._950_100.active},greenBourgeon:{default:e.greenBourgeon._950_100.default,hover:e.greenBourgeon._950_100.hover,active:e.greenBourgeon._950_100.active},greenEmeraude:{default:e.greenEmeraude._950_100.default,hover:e.greenEmeraude._950_100.hover,active:e.greenEmeraude._950_100.active},greenMenthe:{default:e.greenMenthe._950_100.default,hover:e.greenMenthe._950_100.hover,active:e.greenMenthe._950_100.active},greenArchipel:{default:e.greenArchipel._950_100.default,hover:e.greenArchipel._950_100.hover,active:e.greenArchipel._950_100.active},blueEcume:{default:e.blueEcume._950_100.default,hover:e.blueEcume._950_100.hover,active:e.blueEcume._950_100.active},blueCumulus:{default:e.blueCumulus._950_100.default,hover:e.blueCumulus._950_100.hover,active:e.blueCumulus._950_100.active},purpleGlycine:{default:e.purpleGlycine._950_100.default,hover:e.purpleGlycine._950_100.hover,active:e.purpleGlycine._950_100.active},pinkMacaron:{default:e.pinkMacaron._950_100.default,hover:e.pinkMacaron._950_100.hover,active:e.pinkMacaron._950_100.active},pinkTuile:{default:e.pinkTuile._950_100.default,hover:e.pinkTuile._950_100.hover,active:e.pinkTuile._950_100.active},yellowTournesol:{default:e.yellowTournesol._950_100.default,hover:e.yellowTournesol._950_100.hover,active:e.yellowTournesol._950_100.active},yellowMoutarde:{default:e.yellowMoutarde._950_100.default,hover:e.yellowMoutarde._950_100.hover,active:e.yellowMoutarde._950_100.active},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default,hover:e.orangeTerreBattue._950_100.hover,active:e.orangeTerreBattue._950_100.active},brownCafeCreme:{default:e.brownCafeCreme._950_100.default,hover:e.brownCafeCreme._950_100.hover,active:e.brownCafeCreme._950_100.active},brownCaramel:{default:e.brownCaramel._950_100.default,hover:e.brownCaramel._950_100.hover,active:e.brownCaramel._950_100.active},brownOpera:{default:e.brownOpera._950_100.default,hover:e.brownOpera._950_100.hover,active:e.brownOpera._950_100.active},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default,hover:e.beigeGrisGalet._950_100.hover,active:e.beigeGrisGalet._950_100.active},info:{default:e.info._950_100.default,hover:e.info._950_100.hover,active:e.info._950_100.active},success:{default:e.success._950_100.default,hover:e.success._950_100.hover,active:e.success._950_100.active},warning:{default:e.warning._950_100.default,hover:e.warning._950_100.hover,active:e.warning._950_100.active},error:{default:e.error._950_100.default,hover:e.error._950_100.hover,active:e.error._950_100.active}},flat:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._200_850.default,hover:e.grey._200_850.hover,active:e.grey._200_850.active},blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active},info:{default:e.info._425_625.default,hover:e.info._425_625.hover,active:e.info._425_625.active},success:{default:e.success._425_625.default,hover:e.success._425_625.hover,active:e.success._425_625.active},warning:{default:e.warning._425_625.default,hover:e.warning._425_625.hover,active:e.warning._425_625.active},error:{default:e.error._425_625.default,hover:e.error._425_625.hover,active:e.error._425_625.active}},actionLow:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default,hover:e.greenTilleulVerveine._925_125.hover,active:e.greenTilleulVerveine._925_125.active},greenBourgeon:{default:e.greenBourgeon._925_125.default,hover:e.greenBourgeon._925_125.hover,active:e.greenBourgeon._925_125.active},greenEmeraude:{default:e.greenEmeraude._925_125.default,hover:e.greenEmeraude._925_125.hover,active:e.greenEmeraude._925_125.active},greenMenthe:{default:e.greenMenthe._925_125.default,hover:e.greenMenthe._925_125.hover,active:e.greenMenthe._925_125.active},greenArchipel:{default:e.greenArchipel._925_125.default,hover:e.greenArchipel._925_125.hover,active:e.greenArchipel._925_125.active},blueEcume:{default:e.blueEcume._925_125.default,hover:e.blueEcume._925_125.hover,active:e.blueEcume._925_125.active},blueCumulus:{default:e.blueCumulus._925_125.default,hover:e.blueCumulus._925_125.hover,active:e.blueCumulus._925_125.active},purpleGlycine:{default:e.purpleGlycine._925_125.default,hover:e.purpleGlycine._925_125.hover,active:e.purpleGlycine._925_125.active},pinkMacaron:{default:e.pinkMacaron._925_125.default,hover:e.pinkMacaron._925_125.hover,active:e.pinkMacaron._925_125.active},pinkTuile:{default:e.pinkTuile._925_125.default,hover:e.pinkTuile._925_125.hover,active:e.pinkTuile._925_125.active},yellowTournesol:{default:e.yellowTournesol._925_125.default,hover:e.yellowTournesol._925_125.hover,active:e.yellowTournesol._925_125.active},yellowMoutarde:{default:e.yellowMoutarde._925_125.default,hover:e.yellowMoutarde._925_125.hover,active:e.yellowMoutarde._925_125.active},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default,hover:e.orangeTerreBattue._925_125.hover,active:e.orangeTerreBattue._925_125.active},brownCafeCreme:{default:e.brownCafeCreme._925_125.default,hover:e.brownCafeCreme._925_125.hover,active:e.brownCafeCreme._925_125.active},brownCaramel:{default:e.brownCaramel._925_125.default,hover:e.brownCaramel._925_125.hover,active:e.brownCaramel._925_125.active},brownOpera:{default:e.brownOpera._925_125.default,hover:e.brownOpera._925_125.hover,active:e.brownOpera._925_125.active},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default,hover:e.beigeGrisGalet._925_125.hover,active:e.beigeGrisGalet._925_125.active}},active:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active}},open:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active}},disabled:{grey:{default:e.grey._925_125.default}},raised:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},overlap:{grey:{default:e.grey._1000_100.default,hover:e.grey._1000_100.hover,active:e.grey._1000_100.active}},lifted:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},altRaised:{grey:{default:e.grey._975_100.default,hover:e.grey._975_100.hover,active:e.grey._975_100.active}},altOverlap:{grey:{default:e.grey._975_125.default,hover:e.grey._975_125.hover,active:e.grey._975_125.active}},contrastRaised:{grey:{default:e.grey._950_125.default,hover:e.grey._950_125.hover,active:e.grey._950_125.active}},contrastOverlap:{grey:{default:e.grey._950_150.default,hover:e.grey._950_150.hover,active:e.grey._950_150.active}}},text:{default:{grey:{default:e.grey._200_850.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},title:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},label:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},active:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},mention:{grey:{default:e.grey._425_625.default}},inverted:{grey:{default:e.grey._1000_50.default},blueFrance:{default:e.blueFrance._975sun113.default},redMarianne:{default:e.redMarianne._975_75.default},info:{default:e.info._975_75.default},success:{default:e.success._975_75.default},warning:{default:e.warning._975_75.default},error:{default:e.error._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},disabled:{grey:{default:e.grey._625_425.default}},blackWhite:{grey:{default:e.grey._0_1000.default}}},border:{default:{grey:{default:e.grey._900_175.default},blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},contrast:{grey:{default:e.grey._625_425.default}},active:{blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionLow:{blueFrance:{default:e.blueFrance._850_200.default},redMarianne:{default:e.redMarianne._850_200.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._850_200.default},greenBourgeon:{default:e.greenBourgeon._850_200.default},greenEmeraude:{default:e.greenEmeraude._850_200.default},greenMenthe:{default:e.greenMenthe._850_200.default},greenArchipel:{default:e.greenArchipel._850_200.default},blueEcume:{default:e.blueEcume._850_200.default},blueCumulus:{default:e.blueCumulus._850_200.default},purpleGlycine:{default:e.purpleGlycine._850_200.default},pinkMacaron:{default:e.pinkMacaron._850_200.default},pinkTuile:{default:e.pinkTuile._850_200.default},yellowTournesol:{default:e.yellowTournesol._850_200.default},yellowMoutarde:{default:e.yellowMoutarde._850_200.default},orangeTerreBattue:{default:e.orangeTerreBattue._850_200.default},brownCafeCreme:{default:e.brownCafeCreme._850_200.default},brownCaramel:{default:e.brownCaramel._850_200.default},brownOpera:{default:e.brownOpera._850_200.default},beigeGrisGalet:{default:e.beigeGrisGalet._850_200.default}},open:{blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default}},plain:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},disabled:{grey:{default:e.grey._925_125.default}}},artwork:{major:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active}},minor:{blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},decorative:{grey:{default:e.grey._950_100.default},blueFrance:{default:e.blueFrance._950_100.default},redMarianne:{default:e.redMarianne._950_100.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default},greenBourgeon:{default:e.greenBourgeon._950_100.default},greenEmeraude:{default:e.greenEmeraude._950_100.default},greenMenthe:{default:e.greenMenthe._950_100.default},greenArchipel:{default:e.greenArchipel._950_100.default},blueEcume:{default:e.blueEcume._950_100.default},blueCumulus:{default:e.blueCumulus._950_100.default},purpleGlycine:{default:e.purpleGlycine._950_100.default},pinkMacaron:{default:e.pinkMacaron._950_100.default},pinkTuile:{default:e.pinkTuile._950_100.default},yellowTournesol:{default:e.yellowTournesol._950_100.default},yellowMoutarde:{default:e.yellowMoutarde._950_100.default},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default},brownCafeCreme:{default:e.brownCafeCreme._950_100.default},brownCaramel:{default:e.brownCaramel._950_100.default},brownOpera:{default:e.brownOpera._950_100.default},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default}},background:{grey:{default:e.grey._975_75.default},blueFrance:{default:e.blueFrance._975_75.default},redMarianne:{default:e.redMarianne._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},motif:{grey:{default:e.grey._925_125.default},blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default},greenBourgeon:{default:e.greenBourgeon._925_125.default},greenEmeraude:{default:e.greenEmeraude._925_125.default},greenMenthe:{default:e.greenMenthe._925_125.default},greenArchipel:{default:e.greenArchipel._925_125.default},blueEcume:{default:e.blueEcume._925_125.default},blueCumulus:{default:e.blueCumulus._925_125.default},purpleGlycine:{default:e.purpleGlycine._925_125.default},pinkMacaron:{default:e.pinkMacaron._925_125.default},pinkTuile:{default:e.pinkTuile._925_125.default},yellowTournesol:{default:e.yellowTournesol._925_125.default},yellowMoutarde:{default:e.yellowMoutarde._925_125.default},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default},brownCafeCreme:{default:e.brownCafeCreme._925_125.default},brownCaramel:{default:e.brownCaramel._925_125.default},brownOpera:{default:e.brownOpera._925_125.default},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default}}}}}const colors={options:colorOptions,decisions:colorDecisions,getHex:(()=>{const n=({isDark:t})=>{const r=getColorOptionsHex({isDark:t}),i=getColorDecisionsHex({colorOptions:r});return{options:r,decisions:i}},e={light:void 0,dark:void 0};return({isDark:t})=>{var r,i;return(r=e[i=t?"dark":"light"])!==null&&r!==void 0?r:e[i]=n({isDark:t})}})()},overwriteReadonlyProp=(n,e,t)=>{try{n[e]=t}catch{}if(n[e]===t)return t;let r;const i=Object.getOwnPropertyDescriptor(n,e)||{enumerable:!0,configurable:!0};if(i.get)throw new Error(`Probably a wrong ides to overwrite ${String(e)} getter`);try{Object.defineProperty(n,e,{...i,value:t})}catch(a){r=a}if(n[e]!==t)throw r||new Error("Can't assign");return t};class AssertionError extends Error{constructor(e){if(super("Wrong assertion encountered"+(e?`: "${e}"`:"")),this.originalMessage=e,Object.setPrototypeOf(this,new.target.prototype),!!this.stack)try{overwriteReadonlyProp(this,"stack",this.stack.split(`
`).filter((...[,t])=>t!==1&&t!==2).join(`
`))}catch{}}}let refOfIs;function assert$1(n,e){if(arguments.length===0&&(n=!0),refOfIs!==void 0){refOfIs=void 0;return}if(!n)throw new AssertionError(typeof e=="function"?e():e)}const errorMessage="Wrong usage of the `is` function refer to https://docs.tsafe.dev/is";function is(n){const e={};if(refOfIs!==void 0)throw refOfIs=void 0,new Error(errorMessage);return refOfIs=e,Promise.resolve().then(()=>{if(refOfIs===e)throw new Error(errorMessage)}),null}const breakpointsValuesUnit="em",breakpointKeys=["xs","sm","md","lg","xl"],breakpointsValues={xs:0,sm:36,md:48,lg:62,xl:78};assert$1();const isBrowser=typeof window=="object"&&typeof document=="object";function getBaseFontSizePx(){if(!isBrowser)return 16;const n=document.querySelector("html");assert$1(n!==null);const t=window.getComputedStyle(n).getPropertyValue("font-size");return parseFloat(t)}const epsilon=.003125,breakpoints={up:n=>`@media (min-width:${breakpointsValues[n]}${breakpointsValuesUnit})`,down:n=>`@media (max-width:${breakpointsValues[n]-epsilon}${breakpointsValuesUnit})`,between:(n,e)=>`@media (min-width:${breakpointsValues[n]}${breakpointsValuesUnit}) and (max-width:${breakpointsValues[e]-epsilon}${breakpointsValuesUnit})`,only:n=>breakpointKeys.indexOf(n)+1<breakpointKeys.length?breakpoints.between(n,breakpointKeys[breakpointKeys.indexOf(n)+1]):breakpoints.up((assert$1(n!=="xs"),n)),not:n=>{const e=breakpointKeys.indexOf(n);if(e===0)return breakpoints.up(breakpointKeys[1]);if(e===breakpointKeys.length-1){const t=breakpointKeys[e];return assert$1(t!=="xs"),breakpoints.down(t)}return breakpoints.between(n,breakpointKeys[breakpointKeys.indexOf(n)+1]).replace("@media","@media not all and")},values:(()=>{const n=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const e="xs";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="sm";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="md";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="lg";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="xl";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})());return assert$1(),n})(),valuesUnit:breakpointsValuesUnit,emValues:(assert$1(),breakpointsValues),getPxValues:()=>{assert$1();const n=getBaseFontSizePx();return Object.fromEntries(Object.entries(breakpointsValues).map(([e,t])=>[e,t*n]))}};function capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)}const spacingTokenByValue={"1v":"0.25rem","1w":"0.5rem","2v":"0.5rem","3v":"0.75rem","2w":"1rem","4v":"1rem","5v":"1.25rem","3w":"1.5rem","6v":"1.5rem","7v":"1.75rem","4w":"2rem","8v":"2rem","9v":"2.25rem","10v":"2.5rem","5w":"2.5rem","11v":"2.75rem","12v":"3rem","6w":"3rem","13v":"3.25rem","14v":"3.5rem","7w":"3.5rem","15v":"3.75rem","16v":"4rem","8w":"4rem","17v":"4.25rem","18v":"4.5rem","9w":"4.5rem","19v":"4.75rem","10w":"5rem","20v":"5rem","21v":"5.25rem","11w":"5.5rem","22v":"5.5rem","23v":"5.75rem","12w":"6rem","24v":"6rem","25v":"6.25rem","13w":"6.5rem","26v":"6.5rem","27v":"6.75rem","14w":"7rem","28v":"7rem","29v":"7.25rem","15w":"7.5rem","30v":"7.5rem","31v":"7.75rem","16w":"8rem","32v":"8rem"};function spacing(n,e){if(["padding","margin"].indexOf(n)>=0){const t=n;assert$1(e!==void 0);const r={},i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const{rightLeft:a}=e;return a!==void 0&&{right:a,left:a}})()),(()=>{const{topBottom:a}=e;return a!==void 0&&{top:a,bottom:a}})()),e.top!==void 0&&{top:e.top}),e.right!==void 0&&{right:e.right}),e.bottom!==void 0&&{bottom:e.bottom}),e.left!==void 0&&{left:e.left});return["top","right","bottom","left"].forEach(a=>{const o=i[a];o!==void 0&&(r[`${t}${capitalize(a)}`]=typeof o=="number"||o==="auto"?o:spacingTokenByValue[o])}),r}else return spacingTokenByValue[n]}function typeGuard(n,e){return e}const cx$1=(...n)=>{const e=n.length;let t=0,r="";for(;t<e;t++){const i=n[t];if(i==null)continue;let a;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=cx$1(...i);else{assert$1(!typeGuard(i,!1)),a="";for(const o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(r&&(r+=" "),r+=a)}return r},cx=cx$1,typography=[{selector:"h6",style:{fontWeight:700,fontSize:"1.125rem",lineHeight:"1.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.25rem",lineHeight:"1.75rem"}}},{selector:"h5",style:{fontWeight:700,fontSize:"1.25rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.375rem",lineHeight:"1.75rem"}}},{selector:"h4",style:{fontWeight:700,fontSize:"1.375rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.5rem",lineHeight:"2rem"}}},{selector:"h3",style:{fontWeight:700,fontSize:"1.5rem",lineHeight:"2rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.75rem",lineHeight:"2.25rem"}}},{selector:"h2",style:{fontWeight:700,fontSize:"1.75rem",lineHeight:"2.25rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2rem",lineHeight:"2.5rem"}}},{selector:"h1",style:{fontWeight:700,fontSize:"2rem",lineHeight:"2.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2.5rem",lineHeight:"3rem"}}},{selector:"p",style:{fontSize:"1rem",lineHeight:"1.5rem",margin:"var(--text-spacing)"}},{selector:".fr-text--light",style:{fontWeight:"300 !important"}},{selector:".fr-text--regular",style:{fontWeight:"400 !important"}},{selector:".fr-text--bold",style:{fontWeight:"700 !important"}},{selector:".fr-text--heavy",style:{fontWeight:"900 !important"}},{selector:".fr-display--xs",style:{fontWeight:"700 !important",fontSize:"2.5rem !important",lineHeight:"3rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3rem !important",lineHeight:"3.5rem !important"}}},{selector:".fr-display--sm",style:{fontWeight:"700 !important",fontSize:"3rem !important",lineHeight:"3.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3.5rem !important",lineHeight:"4rem !important"}}},{selector:".fr-display--md",style:{fontWeight:"700 !important",fontSize:"3.5rem !important",lineHeight:"4rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4rem !important",lineHeight:"4.5rem !important"}}},{selector:".fr-display--lg",style:{fontWeight:"700 !important",fontSize:"4rem !important",lineHeight:"4.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4.5rem !important",lineHeight:"5rem !important"}}},{selector:".fr-display--xl",style:{fontWeight:"700 !important",fontSize:"4.5rem !important",lineHeight:"5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"5rem !important",lineHeight:"5.5rem !important"}}},{selector:".fr-text--alt",style:{fontFamily:'"Spectral", georgia, serif !important'}},{selector:".fr-text--xs",style:{fontSize:"0.75rem !important",lineHeight:"1.25rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--sm",style:{fontSize:"0.875rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--md",style:{fontSize:"1rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lg",style:{fontSize:"1.125rem !important",lineHeight:"1.75rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--xl",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lead",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}}],fr={breakpoints,spacing,cx,colors,typography},exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(n,e){var t=[...exceptions,e],r=[];if(n&&n.includes("left")){var i=document.getElementById("position-container-bottom-left"),a=document.getElementById("position-container-top-left");r=[...i.children,...a.children]}if(n&&n.includes("right")){var o=document.getElementById("position-container-bottom-right"),l=document.getElementById("position-container-top-right");r=[...o.children,...l.children]}return r.filter(c=>{var h=c.id.match(/(\w+)-[0-9]+/)[1],f=t.includes(h),p=c.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(p==="true"&&!f)return c})}var PanelManager=function(n,e){var t=getSameSideOpenedPanel(n,e);t.length>0&&t[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}};const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ObjectEventType={PROPERTYCHANGE:"propertychange"},EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(n,e,t){let r,i;t=t||ascending;let a=0,o=n.length,l=!1;for(;a<o;)r=a+(o-a>>1),i=+t(n[r],e),i<0?a=r+1:(o=r,l=!i);return l?a:~a}function ascending(n,e){return n>e?1:n<e?-1:0}function descending(n,e){return n<e?1:n>e?-1:0}function linearFindNearest(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const a=n[i];if(a===e)return i;if(a<e)return t(e,n[i-1],a)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function reverseSubArray(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function extend$4(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function equals$2(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function isSorted(n,e,t){const r=e||ascending;return n.every(function(i,a){if(a===0)return!0;const o=r(n[a-1],i);return!(o>0||o===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!equals$2(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function toPromise(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(n){for(const e in n)delete n[e]}function isEmpty$1(n){let e;for(e in n)return!1;return!e}class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const a=t?new BaseEvent(e):e;a.target||(a.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,l[r]=0),++o[r];let c;for(let h=0,f=i.length;h<f;++h)if("handleEvent"in i[h]?c=i[h].handleEvent(a):c=i[h].call(this,a),c===!1||a.propagationStopped){c=!1;break}if(--o[r]===0){let h=l[r];for(delete l[r];h--;)this.removeEventListener(r,VOID);delete o[r]}return c}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=VOID,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function listen(n,e,t,r,i){if(i){const o=t;t=function(l){return n.removeEventListener(e,t),o.call(r??this,l)}}else r&&r!==n&&(t=t.bind(r));const a={target:n,type:e,listener:t};return n.addEventListener(e,t),a}function listenOnce(n,e,t,r){return listen(n,e,t,r,!0)}function unlistenByKey(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),clear$1(n))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=listen(this,e[a],t);return i}return listen(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let a=0;a<i;++a)r[a]=listenOnce(this,e[a],t)}else r=listenOnce(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)unByKey(r);else if(Array.isArray(e))for(let i=0,a=e.length;i<a;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)unlistenByKey(n[e]);else unlistenByKey(n)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(n){return n.ol_uid||(n.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new ObjectEvent(r,e,t)),r=ObjectEventType.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new ObjectEvent(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const a=i[e];i[e]=t,a!==t&&this.notify(e,a)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)unlistenByKey(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var checkDsfr=function(){var n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Rn,wf,hs,Uu;class PositionFactory{constructor(e){Me(this,Rn);return this.caller=e,this.container=null,Oe(this,Rn,hs).call(this,"top-left"),Oe(this,Rn,hs).call(this,"top-right"),Oe(this,Rn,hs).call(this,"bottom-left"),Oe(this,Rn,hs).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Oe(this,Rn,Uu).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Oe(this,Rn,Uu).call(this,e,!0)}}Rn=new WeakSet,wf=function(e){var t=this.container.children["position-container-"+e];return!!t},hs=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Oe(this,Rn,wf).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},Uu=function(e,t){var r=this;const i=f=>{var p=r.container.children["position-container-"+f];return p.children.length},a=f=>{var p=r.container.children["position-container-"+f],m=p.offsetWidth;return m},o=f=>{var p=r.container.children["position-container-"+f],m=p.offsetHeight;if(t){f.includes("top")&&(m=0);for(let v=0;v<p.children.length;v++){if(p.children[v].id===r.caller.element.id){m=f.includes("bottom")?m-r.caller.element.offsetHeight:m*-1;break}m-=p.children[v].offsetHeight}}return m},l=f=>{f.style.top="unset",f.style.bottom="unset",f.style.left="unset",f.style.right="unset"};l(this.caller.element),this.caller.element.style.position="unset";var c=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(c.length!==0){var h=0;c.forEach(f=>{if(f.nodeName.toLowerCase()==="dialog"){switch(l(f),e.toLowerCase()){case"top-left":checkDsfr()?f.style.top="0px":f.style.top=i(e)?o(e)+"px":"0px",f.style.left=a(e)+h+"px";break;case"bottom-left":checkDsfr()?f.style.top="0px":f.style.bottom=i(e)?o(e)+"px":"0px",f.style.left=a(e)+h+"px";break;case"top-right":checkDsfr()?f.style.top="0px":f.style.top=i(e)?o(e)+"px":"0px",f.style.right=a(e)+h+"px";break;case"bottom-right":checkDsfr()?f.style.top="0px":f.style.bottom=i(e)?o(e)+"px":"0px",f.style.right=a(e)+h+"px";break}h+=f.offsetWidth}})}};var Helper$1={detectSupport:function(){var n=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(n=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(n=!0),n},assign:function(n,e){n=n||{};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},mergeParams:function(n,e,t){if(!(typeof n>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var r in e)e.hasOwnProperty(r)&&(typeof e[r]=="object"?n.hasOwnProperty(r)?this.mergeParams(n[r],e[r],t):n[r]=e[r]:n.hasOwnProperty(r)?t&&(n[r]=e[r]):n[r]=e[r])}}},SelectorID={generate:function(){var n=Math.floor(Date.now());return function(){return n++}}(),name:function(n){var e=null,t=n.lastIndexOf("-");return t===-1?e=n:e=n.substring(0,t),e},index:function(n){var e=null,t=this.name(n),r=t.lastIndexOf("_");return r!==-1&&(e=t.substring(r+1)),e},uuid:function(n){var e=null,t=n.lastIndexOf("-");return t!==-1&&(e=parseInt(n.substring(t+1),10)),e}},loglevel$1={exports:{}},loglevel=loglevel$1.exports,hasRequiredLoglevel;function requireLoglevel(){return hasRequiredLoglevel||(hasRequiredLoglevel=1,function(n){(function(e,t){n.exports?n.exports=t():e.log=t()})(loglevel,function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],a={},o=null;function l(b,S){var x=b[S];if(typeof x.bind=="function")return x.bind(b);try{return Function.prototype.bind.call(x,b)}catch{return function(){return Function.prototype.apply.apply(x,[b,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===t?!1:b==="trace"&&r?c:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):e}function f(){for(var b=this.getLevel(),S=0;S<i.length;S++){var x=i[S];this[x]=S<b?e:this.methodFactory(x,b,this.name)}if(this.log=this.debug,typeof console===t&&b<this.levels.SILENT)return"No console available for logging"}function p(b){return function(){typeof console!==t&&(f.call(this),this[b].apply(this,arguments))}}function m(b,S,x){return h(b)||p.apply(this,arguments)}function v(b,S){var x=this,T,P,L,k="loglevel";typeof b=="string"?k+=":"+b:typeof b=="symbol"&&(k=void 0);function F(q){var j=(i[q]||"silent").toUpperCase();if(!(typeof window===t||!k)){try{window.localStorage[k]=j;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+j+";"}catch{}}}function U(){var q;if(!(typeof window===t||!k)){try{q=window.localStorage[k]}catch{}if(typeof q===t)try{var j=window.document.cookie,J=encodeURIComponent(k),X=j.indexOf(J+"=");X!==-1&&(q=/^([^;]+)/.exec(j.slice(X+J.length+1))[1])}catch{}return x.levels[q]===void 0&&(q=void 0),q}}function z(){if(!(typeof window===t||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(q){var j=q;if(typeof j=="string"&&x.levels[j.toUpperCase()]!==void 0&&(j=x.levels[j.toUpperCase()]),typeof j=="number"&&j>=0&&j<=x.levels.SILENT)return j;throw new TypeError("log.setLevel() called with invalid level: "+q)}x.name=b,x.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},x.methodFactory=S||m,x.getLevel=function(){return L??P??T},x.setLevel=function(q,j){return L=N(q),j!==!1&&F(L),f.call(x)},x.setDefaultLevel=function(q){P=N(q),U()||x.setLevel(q,!1)},x.resetLevel=function(){L=null,z(),f.call(x)},x.enableAll=function(q){x.setLevel(x.levels.TRACE,q)},x.disableAll=function(q){x.setLevel(x.levels.SILENT,q)},x.rebuild=function(){if(o!==x&&(T=N(o.getLevel())),f.call(x),o===x)for(var q in a)a[q].rebuild()},T=N(o?o.getLevel():"WARN");var K=U();K!=null&&(L=N(K)),f.call(x)}o=new v,o.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var x=a[S];return x||(x=a[S]=new v(S,o.methodFactory)),x};var C=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=C),o},o.getLoggers=function(){return a},o.default=o,o})}(loglevel$1)),loglevel$1.exports}var loglevelExports=requireLoglevel(),LoggerByDefault$1={getLogger:function(n){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=n||"default";return loglevelExports.getLogger(t)},disableAll:function(){var n=loglevelExports.getLoggers();for(const e in n)Object.hasOwnProperty.call(n,e)&&n[e].disableAll()},enableAll:function(){var n=loglevelExports.getLoggers();for(const e in n)Object.hasOwnProperty.call(n,e)&&n[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault$1);LoggerByDefault$1.getLogger("draggable");var Draggable={dragElement:function(n,e,t){let r=0,i=0,a=0,o=0,l=0,c=0;e?e.addEventListener("mousedown",p,!0):n.addEventListener("mousedown",p,!0);var h,f={bottom:0,left:0,right:0,top:0};function p(C){C=C||window.event,C.preventDefault(),r=C.clientX,i=C.clientY,h=n.getBoundingClientRect();const b=t.getBoundingClientRect();f={bottom:b.bottom,left:b.left,right:b.right,top:b.top},document.addEventListener("mouseup",m,!0),document.addEventListener("mousemove",v,!0)}function m(){l-=a,c-=o,document.removeEventListener("mouseup",m,!0),document.removeEventListener("mousemove",v,!0)}function v(C){C=C||window.event;let b=C.clientX,S=C.clientY,x=a,T=o;a=r-b,o=i-S;var P=h.left-a,L=h.top-o;if(P<f.left||L<f.top||P+h.width>f.right||L+h.height>f.bottom)a=x,o=T;else{let k=l-a,F=c-o;n.style.transform="translate("+k+"px,"+F+"px)"}}}},Config$1={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var n=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return n.Gp&&n.Gp.Config&&n.Gp.Config.layers&&Object.keys(n.Gp.Config.layers).length!==0?(this.configuration=n.Gp.Config,!0):!1}};const ViewHint={ANIMATING:0,INTERACTING:1},Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(n){const e=createEmpty();for(let t=0,r=n.length;t<r;++t)extendCoordinate(e,n[t]);return e}function _boundingExtentXYs(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),a=Math.max.apply(null,n),o=Math.max.apply(null,e);return createOrUpdate$2(r,i,a,o,t)}function buffer(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function clone$1(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function closestSquaredDistanceXY(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function containsCoordinate(n,e){return containsXY(n,e[0],e[1])}function containsExtent(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function containsXY(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function coordinateRelationship(n,e){const t=n[0],r=n[1],i=n[2],a=n[3],o=e[0],l=e[1];let c=Relationship.UNKNOWN;return o<t?c=c|Relationship.LEFT:o>i&&(c=c|Relationship.RIGHT),l<r?c=c|Relationship.BELOW:l>a&&(c=c|Relationship.ABOVE),c===Relationship.UNKNOWN&&(c=Relationship.INTERSECTING),c}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function createOrUpdateEmpty(n){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,n)}function createOrUpdateFromCoordinate(n,e){const t=n[0],r=n[1];return createOrUpdate$2(t,r,t,r,e)}function createOrUpdateFromFlatCoordinates(n,e,t,r,i){const a=createOrUpdateEmpty(i);return extendFlatCoordinates(a,n,e,t,r)}function equals$1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function extend$3(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function extendCoordinate(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function extendFlatCoordinates(n,e,t,r,i){for(;t<r;t+=i)extendXY(n,e[t],e[t+1]);return n}function extendXY(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function forEachCorner(n,e){let t;return t=e(getBottomLeft(n)),t||(t=e(getBottomRight(n)),t)||(t=e(getTopRight(n)),t)||(t=e(getTopLeft(n)),t)?t:!1}function getArea(n){let e=0;return isEmpty(n)||(e=getWidth(n)*getHeight(n)),e}function getBottomLeft(n){return[n[0],n[1]]}function getBottomRight(n){return[n[2],n[1]]}function getCenter(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function getCorner(n,e){let t;if(e==="bottom-left")t=getBottomLeft(n);else if(e==="bottom-right")t=getBottomRight(n);else if(e==="top-left")t=getTopLeft(n);else if(e==="top-right")t=getTopRight(n);else throw new Error("Invalid corner");return t}function getForViewAndSize(n,e,t,r,i){const[a,o,l,c,h,f,p,m]=getRotatedViewport(n,e,t,r);return createOrUpdate$2(Math.min(a,l,h,p),Math.min(o,c,f,m),Math.max(a,l,h,p),Math.max(o,c,f,m),i)}function getRotatedViewport(n,e,t,r){const i=e*r[0]/2,a=e*r[1]/2,o=Math.cos(t),l=Math.sin(t),c=i*o,h=i*l,f=a*o,p=a*l,m=n[0],v=n[1];return[m-c+p,v-h-f,m-c-p,v-h+f,m+c-p,v+h+f,m+c+p,v+h-f,m-c+p,v-h-f]}function getHeight(n){return n[3]-n[1]}function getIntersection(n,e,t){const r=t||createEmpty();return intersects$1(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):createOrUpdateEmpty(r),r}function getTopLeft(n){return[n[0],n[3]]}function getTopRight(n){return[n[2],n[3]]}function getWidth(n){return n[2]-n[0]}function intersects$1(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function isEmpty(n){return n[2]<n[0]||n[3]<n[1]}function returnOrUpdate(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function intersectsSegment(n,e,t){let r=!1;const i=coordinateRelationship(n,e),a=coordinateRelationship(n,t);if(i===Relationship.INTERSECTING||a===Relationship.INTERSECTING)r=!0;else{const o=n[0],l=n[1],c=n[2],h=n[3],f=e[0],p=e[1],m=t[0],v=t[1],C=(v-p)/(m-f);let b,S;a&Relationship.ABOVE&&!(i&Relationship.ABOVE)&&(b=m-(v-h)/C,r=b>=o&&b<=c),!r&&a&Relationship.RIGHT&&!(i&Relationship.RIGHT)&&(S=v-(m-c)*C,r=S>=l&&S<=h),!r&&a&Relationship.BELOW&&!(i&Relationship.BELOW)&&(b=m-(v-l)/C,r=b>=o&&b<=c),!r&&a&Relationship.LEFT&&!(i&Relationship.LEFT)&&(S=v-(m-o)*C,r=S>=l&&S<=h)}return r}function applyTransform(n,e,t,r){if(isEmpty(n))return createOrUpdateEmpty(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const a=[],o=[];for(let l=0,c=i.length;l<c;l+=2)a.push(i[l]),o.push(i[l+1]);return _boundingExtentXYs(a,o,t)}function wrapX$2(n,e){const t=e.getExtent(),r=getCenter(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=getWidth(t),o=Math.floor((r[0]-t[0])/i)*i;n[0]-=o,n[2]-=o}return n}function wrapAndSliceX(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];wrapX$2(n,e);const i=getWidth(r);if(getWidth(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function clamp$1(n,e,t){return Math.min(Math.max(n,e),t)}function squaredSegmentDistance(n,e,t,r,i,a){const o=i-t,l=a-r;if(o!==0||l!==0){const c=((n-t)*o+(e-r)*l)/(o*o+l*l);c>1?(t=i,r=a):c>0&&(t+=o*c,r+=l*c)}return squaredDistance$1(n,e,t,r)}function squaredDistance$1(n,e,t,r){const i=t-n,a=r-e;return i*i+a*a}function solveLinearSystem(n){const e=n.length;for(let r=0;r<e;r++){let i=r,a=Math.abs(n[r][r]);for(let l=r+1;l<e;l++){const c=Math.abs(n[l][r]);c>a&&(a=c,i=l)}if(a===0)return null;const o=n[i];n[i]=n[r],n[r]=o;for(let l=r+1;l<e;l++){const c=-n[l][r]/n[r][r];for(let h=r;h<e+1;h++)r==h?n[l][h]=0:n[l][h]+=c*n[r][h]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function toDegrees(n){return n*180/Math.PI}function toRadians(n){return n*Math.PI/180}function modulo(n,e){const t=n%e;return t*e<0?t+e:t}function lerp(n,e,t){return n+t*(e-n)}function toFixed(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function round(n,e){return Math.round(toFixed(n,e))}function floor(n,e){return Math.floor(toFixed(n,e))}function ceil(n,e){return Math.ceil(toFixed(n,e))}function wrap$1(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function compareVersions(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const a=parseInt(t[i]||"0",10),o=parseInt(r[i]||"0",10);if(a>o)return 1;if(o>a)return-1}return 0}function add$3(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function closestOnSegment(n,e){const t=n[0],r=n[1],i=e[0],a=e[1],o=i[0],l=i[1],c=a[0],h=a[1],f=c-o,p=h-l,m=f===0&&p===0?0:(f*(t-o)+p*(r-l))/(f*f+p*p||0);let v,C;return m<=0?(v=o,C=l):m>=1?(v=c,C=h):(v=o+m*f,C=l+m*p),[v,C]}function equals(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function rotate$1(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,a=n[1]*t+n[0]*r;return n[0]=i,n[1]=a,n}function scale$3(n,e){return n[0]*=e,n[1]*=e,n}function squaredDistance(n,e){const t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function distance(n,e){return Math.sqrt(squaredDistance(n,e))}function squaredDistanceToSegment(n,e){return squaredDistance(n,closestOnSegment(n,e))}function wrapX$1(n,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),r=getWorldsAway(n,e,t);r&&(n[0]-=r*t)}return n}function getWorldsAway(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||getWidth(r),i=Math.floor((n[0]-r[0])/t)),i}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function createCanvasContext2D(n,e,t,r){let i;return t&&t.length?i=t.shift():WORKER_OFFSCREEN_CANVAS?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function outerWidth(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function removeChildren(n){for(;n.lastChild;)n.lastChild.remove()}function replaceChildren(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],a=e[r];if(!i&&!a)break;if(i!==a){if(!i){n.appendChild(a);continue}if(!a){n.removeChild(i),--r;continue}n.insertBefore(a,i)}}}function warn(...n){console.warn(...n)}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,r){return t/Math.cosh(r[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let a=0;a<i;a+=r){e[a]=HALF_SIZE*n[a]/180;let o=RADIUS$1*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));o>MAX_SAFE_Y?o=MAX_SAFE_Y:o<-MAX_SAFE_Y&&(o=-MAX_SAFE_Y),e[a+1]=o}return e}function toEPSG4326(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let a=0;a<i;a+=r)e[a]=180*n[a]/HALF_SIZE,e[a+1]=360*Math.atan(Math.exp(n[a+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(n){return cache$1[n]||cache$1[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$2(n,e){cache$1[n]=e}let transforms={};function add$1(n,e,t){const r=n.getCode(),i=e.getCode();r in transforms||(transforms[r]={}),transforms[r][i]=t}function get$4(n,e){return n in transforms&&e in transforms[n]?transforms[n][e]:null}const K0=.9996,E=.00669438,E2$1=E*E,E3=E2$1*E,E_P2=E/(1-E),SQRT_E=Math.sqrt(1-E),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E/4-3*E2$1/64-5*E3/256,M2=3*E/8+3*E2$1/32+45*E3/1024,M3=15*E2$1/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R=6378137;function toLonLat(n,e,t){const r=n-5e5,o=(t.north?e:e-1e7)/K0/(R*M1),l=o+P2*Math.sin(2*o)+P3*Math.sin(4*o)+P4*Math.sin(6*o)+P5*Math.sin(8*o),c=Math.sin(l),h=c*c,f=Math.cos(l),p=c/f,m=p*p,v=m*m,C=1-E*h,b=Math.sqrt(1-E*h),S=R/b,x=(1-E)/C,T=E_P2*f**2,P=T*T,L=r/(S*K0),k=L*L,F=k*L,U=F*L,z=U*L,N=z*L,K=l-p/x*(k/2-U/24*(5+3*m+10*T-4*P-9*E_P2))+N/720*(61+90*m+298*T+45*v-252*E_P2-3*P);let q=(L-F/6*(1+2*m+T)+z/120*(5-2*T+28*m-3*P+8*E_P2+24*v))/f;return q=wrap$1(q+toRadians(zoneToCentralLongitude(t.number)),-Math.PI,Math.PI),[toDegrees(q),toDegrees(K)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(n,e,t){n=wrap$1(n,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const r=toRadians(e),i=Math.sin(r),a=Math.cos(r),o=i/a,l=o*o,c=l*l,h=toRadians(n),f=zoneToCentralLongitude(t.number),p=toRadians(f),m=R/Math.sqrt(1-E*i**2),v=E_P2*a**2,C=a*wrap$1(h-p,-Math.PI,Math.PI),b=C*C,S=b*C,x=S*C,T=x*C,P=T*C,L=R*(M1*r-M2*Math.sin(2*r)+M3*Math.sin(4*r)-M4*Math.sin(6*r)),k=K0*m*(C+S/6*(1-l+v)+T/120*(5-18*l+c+72*v-58*E_P2))+5e5;let F=K0*(L+m*o*(b/2+x/24*(5-l+9*v+4*v**2)+P/720*(61-58*l+c+600*v-330*E_P2)));return t.north||(F+=1e7),[k,F]}function zoneToCentralLongitude(n){return(n-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(n){let e=0;for(const i of epsgRegExes){const a=n.match(i);if(a){e=parseInt(a[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function makeTransformFunction(n,e){return function(t,r,i,a){const o=t.length;i=i>1?i:2,a=a??i,r||(i>2?r=t.slice():r=new Array(o));for(let l=0;l<o;l+=a){const c=t[l],h=t[l+1],f=n(c,h,e);r[l]=f[0],r[l+1]=f[1]}return r}}function makeProjection(n){return zoneFromCode(n)?new Projection$1({code:n,units:"m"}):null}function makeTransforms(n){const e=zoneFromCode(n.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat,e)}:null}const DEFAULT_RADIUS=63710088e-1;function getDistance(n,e,t){t=t||DEFAULT_RADIUS;const r=toRadians(n[1]),i=toRadians(e[1]),a=(i-r)/2,o=toRadians(e[0]-n[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(n){showCoordinateWarning=!1}function cloneTransform(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function addProjection(n){add$2(n.getCode(),n),add$1(n,n,cloneTransform)}function addProjections(n){n.forEach(addProjection)}function get$3(n){if(typeof n!="string")return n;const e=get$5(n);if(e)return e;for(const t of projectionFactories){const r=t(n);if(r)return r}return null}function getPointResolution(n,e,t,r){n=get$3(n);let i;const a=n.getPointResolutionFunc();if(a){if(i=a(e,t),r&&r!==n.getUnits()){const o=n.getMetersPerUnit();o&&(i=i*o/METERS_PER_UNIT$1[r])}}else{const o=n.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const l=getTransformFromProjections(n,get$3("EPSG:4326"));if(!l&&o!=="degrees")i=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=l(h,h,2);const f=getDistance(h.slice(0,2),h.slice(2,4)),p=getDistance(h.slice(4,6),h.slice(6,8));i=(f+p)/2}const c=r?METERS_PER_UNIT$1[r]:n.getMetersPerUnit();c!==void 0&&(i/=c)}}return i}function addEquivalentProjections(n){addProjections(n),n.forEach(function(e){n.forEach(function(t){e!==t&&add$1(e,t,cloneTransform)})})}function addEquivalentTransforms(n,e,t,r){n.forEach(function(i){e.forEach(function(a){add$1(i,a,t),add$1(a,i,r)})})}function createProjection(n,e){return n?typeof n=="string"?get$3(n):n:get$3(e)}function createTransformFromCoordinateTransform(n){return function(e,t,r,i){const a=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(a);for(let o=0;o<a;o+=i){const l=n(e.slice(o,o+r)),c=l.length;for(let h=0,f=i;h<f;++h)t[o+h]=h>=c?e[o+h]:l[h]}return t}}function addCoordinateTransforms(n,e,t,r){const i=get$3(n),a=get$3(e);add$1(i,a,createTransformFromCoordinateTransform(t)),add$1(a,i,createTransformFromCoordinateTransform(r))}function fromLonLat(n,e){return disableCoordinateWarning(),transform$1(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function equivalent(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||getTransformFromProjections(n,e)===cloneTransform)&&t}function getTransformFromProjections(n,e){const t=n.getCode(),r=e.getCode();let i=get$4(t,r);if(i)return i;let a=null,o=null;for(const c of transformFactories)a||(a=c(n)),o||(o=c(e));if(!a&&!o)return null;const l="EPSG:4326";if(o)if(a)i=composeTransformFuncs(a.inverse,o.forward);else{const c=get$4(t,l);c&&(i=composeTransformFuncs(c,o.forward))}else{const c=get$4(l,r);c&&(i=composeTransformFuncs(a.inverse,c))}return i&&(addProjection(n),addProjection(e),add$1(n,e,i)),i}function composeTransformFuncs(n,e){return function(t,r,i,a){return r=n(t,r,i,a),e(r,r,i,a)}}function getTransform(n,e){const t=get$3(n),r=get$3(e);return getTransformFromProjections(t,r)}function transform$1(n,e,t){const r=getTransform(e,t);if(!r){const i=get$3(e).getCode(),a=get$3(t).getCode();throw new Error(`No transform available between ${i} and ${a}`)}return r(n,void 0,n.length)}function transformExtent(n,e,t,r){const i=getTransform(e,t);return applyTransform(n,i,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(n,e){return n}function fromUserCoordinate(n,e){return showCoordinateWarning&&!equals(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function toUserExtent(n,e){return n}function fromUserExtent(n,e){return n}function fromUserResolution(n,e){return n}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3},names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(n){var f,p;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),names$y[n])t=names$y[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var a=n.slice(1),o=a.length,l=o<=4;r=1,l?(t=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],o===4&&(r=parseInt(a[3]+a[3],16)/255)):(t=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],o===8&&(r=parseInt(a[6]+a[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var c=e[1];i=c.replace(/a$/,"");var h=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(m,v){if(m[m.length-1]==="%")return m=parseFloat(m)/100,v===3?m:i==="rgb"?m*255:i[0]==="h"||i[0]==="l"&&!v?m*100:i==="lab"?m*125:i==="lch"?v<2?m*150:m*360:i[0]==="o"&&!v?m:i==="oklab"?m*.4:i==="oklch"?v<2?m*.4:m*360:m;if(i[v]==="h"||v===2&&i[i.length-1]==="h"){if(baseHues[m]!==void 0)return baseHues[m];if(m.endsWith("deg"))return parseFloat(m);if(m.endsWith("turn"))return parseFloat(m)*360;if(m.endsWith("grad"))return parseFloat(m)*360/400;if(m.endsWith("rad"))return parseFloat(m)*180/Math.PI}return m==="none"?0:parseFloat(m)}),r=t.length>h?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(m){return parseFloat(m)}),i=((p=(f=n.match(/([a-z])/ig))==null?void 0:f.join(""))==null?void 0:p.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,a,o,l,c,h=0;if(t===0)return c=r*255,[c,c,c];for(a=r<.5?r*(1+t):r+t-r*t,i=2*r-a,l=[0,0,0];h<3;)o=e+1/3*-(h-1),o<0?o++:o>1&&o--,c=6*o<1?i+(a-i)*6*o:2*o<1?a:3*o<2?i+(a-i)*(2/3-o)*6:i,l[h++]=c*255;return l}};rgb.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,l,c,h;return a===i?l=0:e===a?l=(t-r)/o:t===a?l=2+(r-e)/o:r===a&&(l=4+(e-t)/o),l=Math.min(l*60,360),l<0&&(l+=360),h=(i+a)/2,a===i?c=0:h<=.5?c=o/(a+i):c=o/(2-a-i),[l,c*100,h*100]};function rgba$1(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=parse$3(n);if(!t.space)return[];const r=t.space[0]==="h"?hsl.min:rgb.min,i=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(n,e){e=e||xyz.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],a,o,l;return a=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,o=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,l=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),l=Math.min(Math.max(0,l),1),[a*255,o*255,l*255]};rgb.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var a=t*.41239079926595+r*.35758433938387+i*.18048078840183,o=t*.21263900587151+r*.71516867876775+i*.072192315360733,l=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||xyz.whitepoint[2].E,[a*e[0],o*e[1],l*e[2]]};var luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,a,o,l,c,h,f,p,m,v,C,b;if(a=n[0],o=n[1],l=n[2],a===0)return[0,0,0];var S=.0011070564598794539;return e=e||"D65",t=t||2,p=xyz.whitepoint[t][e][0],m=xyz.whitepoint[t][e][1],v=xyz.whitepoint[t][e][2],C=4*p/(p+15*m+3*v),b=9*m/(p+15*m+3*v),r=o/(13*a)+C||0,i=l/(13*a)+b||0,h=a>8?m*Math.pow((a+16)/116,3):m*a*S,c=h*9*r/(4*i)||0,f=h*(12-3*r-20*i)/(4*i)||0,[c,h,f]}};xyz.luv=function(n,e,t){var r,i,a,o,l,c,h,f,p,m,v,C,b,S=.008856451679035631,x=903.2962962962961;e=e||"D65",t=t||2,p=xyz.whitepoint[t][e][0],m=xyz.whitepoint[t][e][1],v=xyz.whitepoint[t][e][2],C=4*p/(p+15*m+3*v),b=9*m/(p+15*m+3*v),c=n[0],h=n[1],f=n[2],r=4*c/(c+15*h+3*f)||0,i=9*h/(c+15*h+3*f)||0;var T=h/m;return a=T<=S?x*T:116*Math.pow(T,1/3)-16,o=13*a*(r-C),l=13*a*(i-b),[a,o,l]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,a,o;return o=r/360*2*Math.PI,i=t*Math.cos(o),a=t*Math.sin(o),[e,i,a]},xyz:function(n){return luv.xyz(lchuv.luv(n))}};luv.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),a=Math.atan2(r,t),o=a*360/2/Math.PI;return o<0&&(o+=360),[e,i,o]};xyz.lchuv=function(n){return luv.lchuv(xyz.luv(n))};const NO_COLOR=[NaN,NaN,NaN,0];function asString(n){return typeof n=="string"?n:toString$1(n)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function rgbaToLcha(n){const e=xyz.lchuv(rgb.xyz(n));return e[3]=n[3],e}function lchaToRgba(n){const e=xyz.rgb(lchuv.xyz(n));return e[3]=n[3],e}function fromString(n){if(n==="none")return NO_COLOR;if(cache.hasOwnProperty(n))return cache[n];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const r in cache)(t++&3)===0&&(delete cache[r],--cacheSize)}const e=rgba$1(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return normalize(e),cache[n]=e,++cacheSize,e}function asArray(n){return Array.isArray(n)?n:fromString(n)}function normalize(n){return n[0]=clamp$1(n[0]+.5|0,0,255),n[1]=clamp$1(n[1]+.5|0,0,255),n[2]=clamp$1(n[2]+.5|0,0,255),n[3]=clamp$1(n[3],0,1),n}function toString$1(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function listenImage(n,e,t){const r=n;let i=!0,a=!1,o=!1;const l=[listenOnce(r,EventType.LOAD,function(){o=!0,a||e()})];return r.src&&IMAGE_DECODE?(a=!0,r.decode().then(function(){i&&e()}).catch(function(c){i&&(o?e():t())})):l.push(listenOnce(r,EventType.ERROR,t)),function(){i=!1,l.forEach(unlistenByKey)}}function load(n,e){return new Promise((t,r)=>{function i(){o(),t(n)}function a(){o(),r(new Error("Image load error"))}function o(){n.removeEventListener("load",i),n.removeEventListener("error",a)}n.addEventListener("load",i),n.addEventListener("error",a)})}function decodeFallback(n,e){return e&&(n.src=e),n.src&&IMAGE_DECODE?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):load(n)}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=getCacheKey$1(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=getCacheKey$1(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,a){const o=getCacheKey$1(e,t,r),l=o in this.cache_;this.cache_[o]=i,a&&(i.getImageState()===ImageState.IDLE&&i.load(),i.getImageState()===ImageState.LOADING?i.ready().then(()=>{this.patternCache_[o]=getSharedCanvasContext2D().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=getSharedCanvasContext2D().createPattern(i.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(n,e,t){const r=t?asArray(t):"null";return e+":"+n+":"+r}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,t,r,i,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=a,this.imageState_=i===void 0?ImageState.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=createCanvasContext2D(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,r=createCanvasContext2D(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=asString(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const t=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,t),e())};this.addEventListener(EventType.CHANGE,t)}})),this.ready_}}function get$2(n,e,t,r,i,a){let o=e===void 0?void 0:shared.get(e,t,i);return o||(o=new IconImage(n,n&&"src"in n?n.src||void 0:e,t,r,i),shared.set(e,t,i,o,a)),a&&o&&!shared.getPattern(e,t,i)&&shared.set(e,t,i,o,a),o}function asColorLike(n){return n?Array.isArray(n)?toString$1(n):typeof n=="object"&&"src"in n?asCanvasPattern(n):n:null}function asCanvasPattern(n){if(!n.offset||!n.size)return shared.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=shared.getPattern(e,void 0,n.color);if(t)return t;const r=shared.get(n.src,"anonymous",null);if(r.getImageState()!==ImageState.LOADED)return null;const i=createCanvasContext2D(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),get$2(i.canvas,e,void 0,ImageState.LOADED,n.color,!0),shared.getPattern(e,void 0,n.color)}function inflateCoordinates(n,e,t,r,i){i=i!==void 0?i:[];let a=0;for(let o=e;o<t;o+=r)i[a++]=n.slice(o,o+r);return i.length=a,i}function inflateCoordinatesArray(n,e,t,r,i){i=i!==void 0?i:[];let a=0;for(let o=0,l=t.length;o<l;++o){const c=t[o];i[a++]=inflateCoordinates(n,e,c,r,i[a]),e=c}return i.length=a,i}function inflateMultiCoordinatesArray(n,e,t,r,i){i=i!==void 0?i:[];let a=0;for(let o=0,l=t.length;o<l;++o){const c=t[o];i[a++]=c.length===1&&c[0]===e?[]:inflateCoordinatesArray(n,e,c,r,i[a]),e=c[c.length-1]}return i.length=a,i}class VectorContext{drawCustom(e,t,r,i,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(n){const e=n.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=fontRegExMatchIndex.length;r<i;++r){const a=e[r+1];a!==void 0&&(t[fontRegExMatchIndex[r]]=a)}return t.families=t.family.split(/,\s?/),t},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let a,o;function l(h,f,p){let m=!0;for(let v=0;v<r;++v){const C=t[v];if(o=measureTextWidth(h+" "+f+" "+e+C,i),p!=C){const b=measureTextWidth(h+" "+f+" "+e+p+","+C,i);m=m&&b!=o}}return!!m}function c(){let h=!0;const f=checkedFonts.getKeys();for(let p=0,m=f.length;p<m;++p){const v=f[p];if(checkedFonts.get(v)<100){const[C,b,S]=v.split(`
`);l(C,b,S)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(v,100)):(checkedFonts.set(v,checkedFonts.get(v)+1,!0),h=!1)}}h&&(clearInterval(a),a=void 0)}return function(h){const f=getFontParameters(h);if(!f)return;const p=f.families;for(let m=0,v=p.length;m<v;++m){const C=p[m],b=f.style+`
`+f.weight+`
`+C;checkedFonts.get(b)===void 0&&(checkedFonts.set(b,100,!0),l(f.style,f.weight,C)||(checkedFonts.set(b,0,!0),a===void 0&&(a=setInterval(c,32))))}}}(),measureTextHeight=function(){let n;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const r=getFontParameters(e),i=measureText$1(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);textHeights[e]=t}return t}}();function measureText$1(n,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),n!=measureFont&&(measureContext$1.font=n,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(n,e){return measureText$1(n,e).width}function measureAndCacheTextWidth(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,a)=>Math.max(i,measureTextWidth(n,a)),0);return t[e]=r,r}function getTextDimensions(n,e){const t=[],r=[],i=[];let a=0,o=0,l=0,c=0;for(let h=0,f=e.length;h<=f;h+=2){const p=e[h];if(p===`
`||h===f){a=Math.max(a,o),i.push(o),o=0,l+=c,c=0;continue}const m=e[h+1]||n.font,v=measureTextWidth(m,p);t.push(v),o+=v;const C=measureTextHeight(m);r.push(C),c=Math.max(c,C)}return{width:a,height:l,widths:t,heights:r,lineWidths:i}}function drawImageOrLabel(n,e,t,r,i,a,o,l,c,h,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=p=>p.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(c,h),n.scale(f[0],f[1]),executeLabelInstructions(r,n)):f[0]<0||f[1]<0?(n.translate(c,h),n.scale(f[0],f[1]),n.drawImage(r,i,a,o,l,0,0,o,l)):n.drawImage(r,i,a,o,l,c,h,o*f[0],l*f[1]),n.restore()}function executeLabelInstructions(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class CanvasBuilder extends VectorContext{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,a=this.coordinates;let o=a.length;for(let l=0,c=e.length;l<c;l+=t)i[0]=e[l],i[1]=e[l+1],containsCoordinate(r,i)&&(a[o++]=i[0],a[o++]=i[1]);return o}appendFlatLineCoordinates(e,t,r,i,a,o){const l=this.coordinates;let c=l.length;const h=this.getBufferedMaxExtent();o&&(t+=i);let f=e[t],p=e[t+1];const m=this.tmpCoordinate_;let v=!0,C,b,S;for(C=t+i;C<r;C+=i)m[0]=e[C],m[1]=e[C+1],S=coordinateRelationship(h,m),S!==b?(v&&(l[c++]=f,l[c++]=p,v=!1),l[c++]=m[0],l[c++]=m[1]):S===Relationship.INTERSECTING?(l[c++]=m[0],l[c++]=m[1],v=!1):v=!0,f=m[0],p=m[1],b=S;return(a&&v||C===t+i)&&(l[c++]=f,l[c++]=p),c}drawCustomCoordinates_(e,t,r,i,a){for(let o=0,l=r.length;o<l;++o){const c=r[o],h=this.appendFlatLineCoordinates(e,t,c,i,!1,!1);a.push(h),t=c}return t}drawCustom(e,t,r,i,a){this.beginGeometry(e,t,a);const o=e.getType(),l=e.getStride(),c=this.coordinates.length;let h,f,p,m,v;switch(o){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),m=[];const C=e.getEndss();v=0;for(let b=0,S=C.length;b<S;++b){const x=[];v=this.drawCustomCoordinates_(h,v,C[b],l,x),m.push(x)}this.instructions.push([Instruction.CUSTOM,c,m,e,r,inflateMultiCoordinatesArray,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,c,m,e,i||r,inflateMultiCoordinatesArray,a]);break;case"Polygon":case"MultiLineString":p=[],h=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),v=this.drawCustomCoordinates_(h,0,e.getEnds(),l,p),this.instructions.push([Instruction.CUSTOM,c,p,e,r,inflateCoordinatesArray,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,c,p,e,i||r,inflateCoordinatesArray,a]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([Instruction.CUSTOM,c,f,e,r,inflateCoordinates,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,c,f,e,i||r,inflateCoordinates,a]);break;case"MultiPoint":h=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(h,l),f>c&&(this.instructions.push([Instruction.CUSTOM,c,f,e,r,inflateCoordinates,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,c,f,e,i||r,inflateCoordinates,a]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),f=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,c,f,e,r,void 0,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,c,f,e,i||r,void 0,a]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,a,o=-1;for(t=0;t<r;++t)i=e[t],a=i[0],a==Instruction.END_GEOMETRY?o=t:a==Instruction.BEGIN_GEOMETRY&&(i[2]=t,reverseSubArray(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=asColorLike(r||defaultFillStyle)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=asColorLike(r||defaultStrokeStyle);const i=e.getLineCap();t.lineCap=i!==void 0?i:defaultLineCap;const a=e.getLineDash();t.lineDash=a?a.slice():defaultLineDash;const o=e.getLineDashOffset();t.lineDashOffset=o||defaultLineDashOffset;const l=e.getLineJoin();t.lineJoin=l!==void 0?l:defaultLineJoin;const c=e.getWidth();t.lineWidth=c!==void 0?c:defaultLineWidth;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:defaultMiterLimit,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,a=e.lineDash,o=e.lineDashOffset,l=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||a!=e.currentLineDash&&!equals$2(e.currentLineDash,a)||e.currentLineDashOffset!=o||e.currentLineJoin!=l||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=a,e.currentLineDashOffset=o,e.currentLineJoin=l,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),a=e.getStride(),o=this.coordinates.length,l=this.appendFlatPointCoordinates(i,a);this.instructions.push([Instruction.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),a=[];for(let c=0,h=i.length;c<h;c+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,i.slice(c,c+2)))&&a.push(i[c],i[c+1]);const o=this.coordinates.length,l=this.appendFlatPointCoordinates(a,2);this.instructions.push([Instruction.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const a=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),l=[Instruction.MOVE_TO_LINE_TO,a,o];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r}drawLineString(e,t,r){const i=this.state,a=i.strokeStyle,o=i.lineWidth;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const l=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(l,0,l.length,c),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,a=i.strokeStyle,o=i.lineWidth;if(a===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const l=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let f=0;for(let p=0,m=l.length;p<m;++p)f=this.drawFlatCoordinates_(c,f,l[p],h);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}function douglasPeucker(n,e,t,r,i,a,o){const l=(t-e)/r;if(l<3){for(;e<t;e+=r)a[o++]=n[e],a[o++]=n[e+1];return o}const c=new Array(l);c[0]=1,c[l-1]=1;const h=[e,t-r];let f=0;for(;h.length>0;){const p=h.pop(),m=h.pop();let v=0;const C=n[m],b=n[m+1],S=n[p],x=n[p+1];for(let T=m+r;T<p;T+=r){const P=n[T],L=n[T+1],k=squaredSegmentDistance(P,L,C,b,S,x);k>v&&(f=T,v=k)}v>i&&(c[(f-e)/r]=1,m+r<f&&h.push(m,f),f+r<p&&h.push(f,p))}for(let p=0;p<l;++p)c[p]&&(a[o++]=n[e+p*r],a[o++]=n[e+p*r+1]);return o}function douglasPeuckerArray(n,e,t,r,i,a,o,l){for(let c=0,h=t.length;c<h;++c){const f=t[c];o=douglasPeucker(n,e,f,r,i,a,o),l.push(o),e=f}return o}function snap(n,e){return e*Math.round(n/e)}function quantize(n,e,t,r,i,a,o){if(e==t)return o;let l=snap(n[e],i),c=snap(n[e+1],i);e+=r,a[o++]=l,a[o++]=c;let h,f;do if(h=snap(n[e],i),f=snap(n[e+1],i),e+=r,e==t)return a[o++]=h,a[o++]=f,o;while(h==l&&f==c);for(;e<t;){const p=snap(n[e],i),m=snap(n[e+1],i);if(e+=r,p==h&&m==f)continue;const v=h-l,C=f-c,b=p-l,S=m-c;if(v*S==C*b&&(v<0&&b<v||v==b||v>0&&b>v)&&(C<0&&S<C||C==S||C>0&&S>C)){h=p,f=m;continue}a[o++]=h,a[o++]=f,l=h,c=f,h=p,f=m}return a[o++]=h,a[o++]=f,o}function quantizeArray(n,e,t,r,i,a,o,l){for(let c=0,h=t.length;c<h;++c){const f=t[c];o=quantize(n,e,f,r,i,a,o),l.push(o),e=f}return o}function quantizeMultiArray(n,e,t,r,i,a,o,l){for(let c=0,h=t.length;c<h;++c){const f=t[c],p=[];o=quantizeArray(n,e,f,r,i,a,o,p),l.push(p),e=f[f.length-1]}return o}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const a=this.state,o=a.fillStyle!==void 0,l=a.strokeStyle!==void 0,c=r.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let h=0;h<c;++h){const f=r[h],p=this.coordinates.length,m=this.appendFlatLineCoordinates(e,t,f,i,!0,!l),v=[Instruction.MOVE_TO_LINE_TO,p,m];this.instructions.push(v),this.hitDetectionInstructions.push(v),l&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=f}return o&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),l&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const l=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,c,!1,!1);const f=[Instruction.CIRCLE,h];this.instructions.push(beginPathInstruction,f),this.hitDetectionInstructions.push(beginPathInstruction,f),i.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),i.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const l=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,l,h),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,a=i.fillStyle,o=i.strokeStyle;if(a===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const l=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let f=0;for(let p=0,m=l.length;p<m;++p)f=this.drawFlatCoordinatess_(c,f,l[p],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=snap(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(n,e,t,r,i){const a=[];let o=t,l=0,c=e.slice(t,2);for(;l<n&&o+i<r;){const[h,f]=c.slice(-2),p=e[o+i],m=e[o+i+1],v=Math.sqrt((p-h)*(p-h)+(m-f)*(m-f));if(l+=v,l>=n){const C=(n-l+v)/v,b=lerp(h,p,C),S=lerp(f,m,C);c.push(b,S),a.push(c),c=[b,S],l==n&&(o+=i),l=0}else if(l<n)c.push(e[o+i],e[o+i+1]),o+=i;else{const C=v-l,b=lerp(h,p,C/v),S=lerp(f,m,C/v);c.push(b,S),a.push(c),c=[b,S],l=0,o+=i}}return l>0&&a.push(c),a}function matchingChunk(n,e,t,r,i){let a=t,o=t,l=0,c=0,h=t,f,p,m,v,C,b,S,x,T,P;for(p=t;p<r;p+=i){const L=e[p],k=e[p+1];C!==void 0&&(T=L-C,P=k-b,v=Math.sqrt(T*T+P*P),S!==void 0&&(c+=m,f=Math.acos((S*T+x*P)/(m*v)),f>n&&(c>l&&(l=c,a=h,o=p),c=0,h=p-i)),m=v,S=T,x=P),C=L,b=k}return c+=v,c>l?[h,p]:[a,o]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!a)return;const l=this.coordinates;let c=l.length;const h=e.getType();let f=null,p=e.getStride();if(o.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let m;if(f=e.getFlatCoordinates(),h=="LineString")m=[f.length];else if(h=="MultiLineString")m=e.getEnds();else if(h=="Polygon")m=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const S=e.getEndss();m=[];for(let x=0,T=S.length;x<T;++x)m.push(S[x][0])}this.beginGeometry(e,t,r);const v=o.repeat,C=v?void 0:o.textAlign;let b=0;for(let S=0,x=m.length;S<x;++S){let T;v?T=lineChunk(v*this.resolution,f,b,m[S],p):T=[f.slice(b,m[S])];for(let P=0,L=T.length;P<L;++P){const k=T[P];let F=0,U=k.length;if(C==null){const N=matchingChunk(o.maxAngle,k,0,k.length,2);F=N[0],U=N[1]}for(let N=F;N<U;N+=p)l.push(k[N],k[N+1]);const z=l.length;b=m[S],this.drawChars_(c,z),c=z}}this.endGeometry(t)}else{let m=o.overflow?null:[];switch(h){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),p=2;break;case"Polygon":f=e.getFlatInteriorPoint(),o.overflow||m.push(f[2]/this.resolution),p=3;break;case"MultiPolygon":const L=e.getFlatInteriorPoints();f=[];for(let k=0,F=L.length;k<F;k+=3)o.overflow||m.push(L[k+2]/this.resolution),f.push(L[k],L[k+1]);if(f.length===0)return;p=2;break}const v=this.appendFlatPointCoordinates(f,p);if(v===c)return;if(m&&(v-c)/2!==f.length/p){let L=c/2;m=m.filter((k,F)=>{const U=l[(L+F)*2]===f[F*p]&&l[(L+F)*2+1]===f[F*p+1];return U||--L,U})}this.saveTextStates_();const C=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,b=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,r);let S=o.padding;if(S!=defaultPadding&&(o.scale[0]<0||o.scale[1]<0)){let L=o.padding[0],k=o.padding[1],F=o.padding[2],U=o.padding[3];o.scale[0]<0&&(k=-k,U=-U),o.scale[1]<0&&(L=-L,F=-F),S=[L,k,F,U]}const x=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,S==defaultPadding?defaultPadding:S.map(function(L){return L*x}),C,b,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]);const T=1/x,P=C?C.slice(0):null;P&&(P[1]=defaultFillStyle),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,S,P,b,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,a=this.strokeKey_,o=this.textKey_,l=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=TEXT_ALIGN[i.textBaseline],f=this.textOffsetY_*c,p=this.text_,m=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,h,i.overflow,l,i.maxAngle,c,f,a,m*c,p,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,h,i.overflow,l&&defaultFillStyle,i.maxAngle,c,f,a,m*c,p,o,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,a;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=asColorLike(o.getColor()||defaultFillStyle)):(i=null,this.textFillState_=i);const l=e.getStroke();if(!l)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const b=l.getLineDash(),S=l.getLineDashOffset(),x=l.getWidth(),T=l.getMiterLimit();a.lineCap=l.getLineCap()||defaultLineCap,a.lineDash=b?b.slice():defaultLineDash,a.lineDashOffset=S===void 0?defaultLineDashOffset:S,a.lineJoin=l.getLineJoin()||defaultLineJoin,a.lineWidth=x===void 0?defaultLineWidth:x,a.miterLimit=T===void 0?defaultMiterLimit:T,a.strokeStyle=asColorLike(l.getColor()||defaultStrokeStyle)}r=this.textState_;const c=e.getFont()||defaultFont;registerFont(c);const h=e.getScaleArray();r.overflow=e.getOverflow(),r.font=c,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||defaultTextBaseline,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||defaultPadding,r.scale=h===void 0?[1,1]:h;const f=e.getOffsetX(),p=e.getOffsetY(),m=e.getRotateWithView(),v=e.getKeepUpright(),C=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=m===void 0?!1:m,this.textKeepUpright_=v===void 0?!0:v,this.textRotation_=C===void 0?0:C,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:getUid(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+getUid(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const a=r[i].finish();e[t][i]=a}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let a=i[t];if(a===void 0){const o=BATCH_CONSTRUCTORS[t];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=a}return a}}function transform2D(n,e,t,r,i,a,o){a=a||[],o=o||2;let l=0;for(let c=e;c<t;c+=r){const h=n[c],f=n[c+1];a[l++]=i[0]*h+i[2]*f+i[4],a[l++]=i[1]*h+i[3]*f+i[5];for(let p=2;p<o;p++)a[l++]=n[c+p]}return a&&a.length!=l&&(a.length=l),a}function rotate(n,e,t,r,i,a,o){o=o||[];const l=Math.cos(i),c=Math.sin(i),h=a[0],f=a[1];let p=0;for(let m=e;m<t;m+=r){const v=n[m]-h,C=n[m+1]-f;o[p++]=h+v*l-C*c,o[p++]=f+v*c+C*l;for(let b=m+2;b<m+r;++b)o[p++]=n[b]}return o&&o.length!=p&&(o.length=p),o}function scale$2(n,e,t,r,i,a,o,l){l=l||[];const c=o[0],h=o[1];let f=0;for(let p=e;p<t;p+=r){const m=n[p]-c,v=n[p+1]-h;l[f++]=c+i*m,l[f++]=h+a*v;for(let C=p+2;C<p+r;++C)l[f++]=n[C]}return l&&l.length!=f&&(l.length=f),l}function translate$1(n,e,t,r,i,a,o){o=o||[];let l=0;for(let c=e;c<t;c+=r){o[l++]=n[c]+i,o[l++]=n[c+1]+a;for(let h=c+2;h<c+r;++h)o[l++]=n[h]}return o&&o.length!=l&&(o.length=l),o}function assert(n,e){if(!n)throw new Error(e)}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(n){return set(n,1,0,0,1,0,0)}function multiply(n,e){const t=n[0],r=n[1],i=n[2],a=n[3],o=n[4],l=n[5],c=e[0],h=e[1],f=e[2],p=e[3],m=e[4],v=e[5];return n[0]=t*c+i*h,n[1]=r*c+a*h,n[2]=t*f+i*p,n[3]=r*f+a*p,n[4]=t*m+i*v+o,n[5]=r*m+a*v+l,n}function set(n,e,t,r,i,a,o){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=a,n[5]=o,n}function setFromArray(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function apply(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function scale$1(n,e,t){return multiply(n,set(tmp_,e,0,0,t,0,0))}function translate(n,e,t){return multiply(n,set(tmp_,1,0,0,1,e,t))}function compose(n,e,t,r,i,a,o,l){const c=Math.sin(a),h=Math.cos(a);return n[0]=r*h,n[1]=i*c,n[2]=-r*c,n[3]=i*h,n[4]=o*r*h-l*r*c+e,n[5]=o*i*c+l*i*h+t,n}function makeInverse(n,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],a=e[2],o=e[3],l=e[4],c=e[5];return n[0]=o/t,n[1]=-i/t,n[2]=-a/t,n[3]=r/t,n[4]=(a*c-o*l)/t,n[5]=-(r*c-i*l)/t,n}function determinant(n){return n[0]*n[3]-n[1]*n[2]}const matrixPrecision=[1e6,1e6,1e6,1e6,2,2];function toString(n){return"matrix("+n.map((t,r)=>Math.round(t*matrixPrecision[r])/matrixPrecision[r]).join(", ")+")"}function lineStringLength(n,e,t,r){let i=n[e],a=n[e+1],o=0;for(let l=e+r;l<t;l+=r){const c=n[l],h=n[l+1];o+=Math.sqrt((c-i)*(c-i)+(h-a)*(h-a)),i=c,a=h}return o}function drawTextOnPath(n,e,t,r,i,a,o,l,c,h,f,p,m=!0){let v=n[e],C=n[e+1],b=0,S=0,x=0,T=0;function P(){b=v,S=C,e+=r,v=n[e],C=n[e+1],T+=x,x=Math.sqrt((v-b)*(v-b)+(C-S)*(C-S))}do P();while(e<t-r&&T+x<a);let L=x===0?0:(a-T)/x;const k=lerp(b,v,L),F=lerp(S,C,L),U=e-r,z=T,N=a+l*c(h,i,f);for(;e<t-r&&T+x<N;)P();L=x===0?0:(N-T)/x;const K=lerp(b,v,L),q=lerp(S,C,L);let j=!1;if(m)if(p){const oe=[k,F,K,q];rotate(oe,0,4,2,p,oe,oe),j=oe[0]>oe[2]}else j=k>K;const J=Math.PI,X=[],te=U+r===e;e=U,x=0,T=z,v=n[e],C=n[e+1];let H;if(te){P(),H=Math.atan2(C-S,v-b),j&&(H+=H>0?-J:J);const oe=(K+k)/2,he=(q+F)/2;return X[0]=[oe,he,(N-a)/2,H,i],X}i=i.replace(/\n/g," ");for(let oe=0,he=i.length;oe<he;){P();let Ee=Math.atan2(C-S,v-b);if(j&&(Ee+=Ee>0?-J:J),H!==void 0){let ve=Ee-H;if(ve+=ve>J?-2*J:ve<-J?2*J:0,Math.abs(ve)>o)return null}H=Ee;const G=oe;let ie=0;for(;oe<he;++oe){const ve=j?he-oe-1:oe,_e=l*c(h,i[ve],f);if(e+r<t&&T+x<a+ie+_e/2)break;ie+=_e}if(oe===G)continue;const re=j?i.substring(he-G,he-oe):i.substring(G,oe);L=x===0?0:(a+ie/2-T)/x;const ye=lerp(b,v,L),me=lerp(S,C,L);X.push([ye,me,ie/2,Ee,re]),a+=ie}return X}class ZIndexContext{constructor(){mf(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,t)=>{if(typeof getSharedCanvasContext2D()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const a=t[r];if(typeof a=="function"){a(e);continue}const o=t[++r];if(typeof e[a]=="function")e[a](...o);else{if(typeof o=="function"){e[a]=o(e);continue}e[a]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(n){return n[3].declutterBox}const rtlRegEx=new RegExp("[-----]");function horizontalTextAlign(n,e){return e==="start"?e=rtlRegEx.test(n)?"right":"left":e==="end"&&(e=rtlRegEx.test(n)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class Executor{constructor(e,t,r,i,a){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const a=e+t+r+i;if(this.labels_[a])return this.labels_[a];const o=i?this.strokeStates[i]:null,l=r?this.fillStates[r]:null,c=this.textStates[t],h=this.pixelRatio,f=[c.scale[0]*h,c.scale[1]*h],p=c.justify?TEXT_ALIGN[c.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,c.textAlign||defaultTextAlign),m=i&&o.lineWidth?o.lineWidth:0,v=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:C,height:b,widths:S,heights:x,lineWidths:T}=getTextDimensions(c,v),P=C+m,L=[],k=(P+2)*f[0],F=(b+m)*f[1],U={width:k<0?Math.floor(k):Math.ceil(k),height:F<0?Math.floor(F):Math.ceil(F),contextInstructions:L};(f[0]!=1||f[1]!=1)&&L.push("scale",f),i&&(L.push("strokeStyle",o.strokeStyle),L.push("lineWidth",m),L.push("lineCap",o.lineCap),L.push("lineJoin",o.lineJoin),L.push("miterLimit",o.miterLimit),L.push("setLineDash",[o.lineDash]),L.push("lineDashOffset",o.lineDashOffset)),r&&L.push("fillStyle",l.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const z=.5-p;let N=p*P+z*m;const K=[],q=[];let j=0,J=0,X=0,te=0,H;for(let oe=0,he=v.length;oe<he;oe+=2){const Ee=v[oe];if(Ee===`
`){J+=j,j=0,N=p*P+z*m,++te;continue}const G=v[oe+1]||c.font;G!==H&&(i&&K.push("font",G),r&&q.push("font",G),H=G),j=Math.max(j,x[X]);const ie=[Ee,N+z*S[X]+p*(S[X]-T[te]),.5*(m+j)+J];N+=S[X],i&&K.push("strokeText",ie),r&&q.push("fillText",ie),++X}return Array.prototype.push.apply(L,K),Array.prototype.push.apply(L,q),this.labels_[a]=U,U}replayTextBackground_(e,t,r,i,a,o,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,a),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,a,o,l,c,h,f,p,m,v,C,b,S){l*=m[0],c*=m[1];let x=r-l,T=i-c;const P=a+h>e?e-h:a,L=o+f>t?t-f:o,k=C[3]+P*m[0]+C[1],F=C[0]+L*m[1]+C[2],U=x-C[3],z=T-C[0];(b||p!==0)&&(p1[0]=U,p4[0]=U,p1[1]=z,p2[1]=z,p2[0]=U+k,p3[0]=p2[0],p3[1]=z+F,p4[1]=p3[1]);let N;return p!==0?(N=compose(create(),r,i,1,1,p,-r,-i),apply(N,p1),apply(N,p2),apply(N,p3),apply(N,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(U,U+k),Math.min(z,z+F),Math.max(U,U+k),Math.max(z,z+F),tmpExtent),v&&(x=Math.round(x),T=Math.round(T)),{drawImageX:x,drawImageY:T,drawImageW:P,drawImageH:L,originX:h,originY:f,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:S},canvasTransform:N,scale:m}}replayImageOrLabel_(e,t,r,i,a,o,l){const c=!!(o||l),h=i.declutterBox,f=l?l[2]*i.scale[0]/2:0;return h.minX-f<=t[0]&&h.maxX+f>=0&&h.minY-f<=t[1]&&h.maxY+f>=0&&(c&&this.replayTextBackground_(e,p1,p2,p3,p4,o,l),drawImageOrLabel(e,i.canvasTransform,a,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=apply(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const a=this.textStates[t],o=this.createLabel(e,t,i,r),l=this.strokeStates[r],c=this.pixelRatio,h=horizontalTextAlign(Array.isArray(e)?e[0]:e,a.textAlign||defaultTextAlign),f=TEXT_ALIGN[a.textBaseline||defaultTextBaseline],p=l&&l.lineWidth?l.lineWidth:0,m=o.width/c-2*a.scale[0],v=h*m+2*(.5-h)*p,C=f*o.height/c+2*(.5-f)*p;return{label:o,anchorX:v,anchorY:C}}execute_(e,t,r,i,a,o,l,c){const h=this.zIndexContext_;let f;this.pixelCoordinates_&&equals$2(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=transform2D(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),setFromArray(this.renderedTransform_,r));let p=0;const m=i.length;let v=0,C,b,S,x,T,P,L,k,F,U,z,N,K,q=0,j=0;const J=this.coordinateCache_,X=this.viewRotation_,te=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,H={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:X},oe=this.instructions!=i||this.overlaps?0:200;let he,Ee,G,ie;for(;p<m;){const re=i[p];switch(re[0]){case Instruction.BEGIN_GEOMETRY:he=re[1],ie=re[3],he.getGeometry()?l!==void 0&&!intersects$1(l,ie.getExtent())?p=re[2]+1:++p:p=re[2],h&&(h.zIndex=re[4]);break;case Instruction.BEGIN_PATH:q>oe&&(this.fill_(e),q=0),j>oe&&(e.stroke(),j=0),!q&&!j&&(e.beginPath(),T=NaN,P=NaN),++p;break;case Instruction.CIRCLE:v=re[1];const me=f[v],ve=f[v+1],_e=f[v+2],De=f[v+3],Ie=_e-me,ke=De-ve,ce=Math.sqrt(Ie*Ie+ke*ke);e.moveTo(me+ce,ve),e.arc(me,ve,ce,0,2*Math.PI,!0),++p;break;case Instruction.CLOSE_PATH:e.closePath(),++p;break;case Instruction.CUSTOM:v=re[1],C=re[2];const it=re[3],Ft=re[4],Pe=re[5];H.geometry=it,H.feature=he,p in J||(J[p]=[]);const Mt=J[p];Pe?Pe(f,v,C,2,Mt):(Mt[0]=f[v],Mt[1]=f[v+1],Mt.length=2),h&&(h.zIndex=re[6]),Ft(Mt,H),++p;break;case Instruction.DRAW_IMAGE:v=re[1],C=re[2],F=re[3],b=re[4],S=re[5];let Pt=re[6];const Ue=re[7],yt=re[8],Ye=re[9],St=re[10];let Lt=re[11];const Ve=re[12];let It=re[13];x=re[14]||"declutter";const ae=re[15];if(!F&&re.length>=20){U=re[19],z=re[20],N=re[21],K=re[22];const _t=this.drawLabelWithPointPlacement_(U,z,N,K);F=_t.label,re[3]=F;const $n=re[23];b=(_t.anchorX-$n)*this.pixelRatio,re[4]=b;const Xt=re[24];S=(_t.anchorY-Xt)*this.pixelRatio,re[5]=S,Pt=F.height,re[6]=Pt,It=F.width,re[13]=It}let se;re.length>25&&(se=re[25]);let fe,pe,be;re.length>17?(fe=re[16],pe=re[17],be=re[18]):(fe=defaultPadding,pe=null,be=null),St&&te?Lt+=X:!St&&!te&&(Lt-=X);let Ce=0;for(;v<C;v+=2){if(se&&se[Ce++]<It/this.pixelRatio)continue;const _t=this.calculateImageOrLabelDimensions_(F.width,F.height,f[v],f[v+1],It,Pt,b,S,yt,Ye,Lt,Ve,a,fe,!!pe||!!be,he),$n=[e,t,F,_t,Ue,pe,be];if(c){let Xt,sn,Ht;if(ae){const ot=C-v;if(!ae[ot]){ae[ot]={args:$n,declutterMode:x};continue}const Ot=ae[ot];Xt=Ot.args,sn=Ot.declutterMode,delete ae[ot],Ht=getDeclutterBox(Xt)}let Yt,Mn;if(Xt&&(sn!=="declutter"||!c.collides(Ht))&&(Yt=!0),(x!=="declutter"||!c.collides(_t.declutterBox))&&(Mn=!0),sn==="declutter"&&x==="declutter"){const ot=Yt&&Mn;Yt=ot,Mn=ot}Yt&&(sn!=="none"&&c.insert(Ht),this.replayImageOrLabel_.apply(this,Xt)),Mn&&(x!=="none"&&c.insert(_t.declutterBox),this.replayImageOrLabel_.apply(this,$n))}else this.replayImageOrLabel_.apply(this,$n)}++p;break;case Instruction.DRAW_CHARS:const Te=re[1],qe=re[2],Ke=re[3],vt=re[4];K=re[5];const at=re[6],We=re[7],xt=re[8];N=re[9];const je=re[10];U=re[11],z=re[12];const Ze=[re[13],re[13]];x=re[14]||"declutter";const Bt=re[15],wt=this.textStates[z],st=wt.font,qt=[wt.scale[0]*We,wt.scale[1]*We];let fn;st in this.widths_?fn=this.widths_[st]:(fn={},this.widths_[st]=fn);const en=lineStringLength(f,Te,qe,2),Wn=Math.abs(qt[0])*measureAndCacheTextWidth(st,U,fn);if(vt||Wn<=en){const _t=this.textStates[z].textAlign,$n=(en-Wn)*horizontalTextAlign(U,_t),Xt=drawTextOnPath(f,Te,qe,2,U,$n,at,Math.abs(qt[0]),measureAndCacheTextWidth,st,fn,te?0:this.viewRotation_,Bt);e:if(Xt){const sn=[];let Ht,Yt,Mn,ot,Ot;if(N)for(Ht=0,Yt=Xt.length;Ht<Yt;++Ht){Ot=Xt[Ht],Mn=Ot[4],ot=this.createLabel(Mn,z,"",N),b=Ot[2]+(qt[0]<0?-je:je),S=Ke*ot.height+(.5-Ke)*2*je*qt[1]/qt[0]-xt;const gn=this.calculateImageOrLabelDimensions_(ot.width,ot.height,Ot[0],Ot[1],ot.width,ot.height,b,S,0,0,Ot[3],Ze,!1,defaultPadding,!1,he);if(c&&x==="declutter"&&c.collides(gn.declutterBox))break e;sn.push([e,t,ot,gn,1,null,null])}if(K)for(Ht=0,Yt=Xt.length;Ht<Yt;++Ht){Ot=Xt[Ht],Mn=Ot[4],ot=this.createLabel(Mn,z,K,""),b=Ot[2],S=Ke*ot.height-xt;const gn=this.calculateImageOrLabelDimensions_(ot.width,ot.height,Ot[0],Ot[1],ot.width,ot.height,b,S,0,0,Ot[3],Ze,!1,defaultPadding,!1,he);if(c&&x==="declutter"&&c.collides(gn.declutterBox))break e;sn.push([e,t,ot,gn,1,null,null])}c&&x!=="none"&&c.load(sn.map(getDeclutterBox));for(let gn=0,ys=sn.length;gn<ys;++gn)this.replayImageOrLabel_.apply(this,sn[gn])}}++p;break;case Instruction.END_GEOMETRY:if(o!==void 0){he=re[1];const _t=o(he,ie,x);if(_t)return _t}++p;break;case Instruction.FILL:oe?q++:this.fill_(e),++p;break;case Instruction.MOVE_TO_LINE_TO:for(v=re[1],C=re[2],Ee=f[v],G=f[v+1],e.moveTo(Ee,G),T=Ee+.5|0,P=G+.5|0,v+=2;v<C;v+=2)Ee=f[v],G=f[v+1],L=Ee+.5|0,k=G+.5|0,(v==C-2||L!==T||k!==P)&&(e.lineTo(Ee,G),T=L,P=k);++p;break;case Instruction.SET_FILL_STYLE:this.alignAndScaleFill_=re[2],q&&(this.fill_(e),q=0,j&&(e.stroke(),j=0)),e.fillStyle=re[1],++p;break;case Instruction.SET_STROKE_STYLE:j&&(e.stroke(),j=0),this.setStrokeStyle_(e,re),++p;break;case Instruction.STROKE:oe?j++:e.stroke(),++p;break;default:++p;break}}q&&this.fill_(e),j&&e.stroke()}execute(e,t,r,i,a,o){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,a,void 0,void 0,o)}executeHitDetection(e,t,r,i,a){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,a)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(n=>!DECLUTTER.includes(n));class ExecutorGroup{constructor(e,t,r,i,a,o,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,l)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const a=e[r];for(const o in a){const l=a[o];i[o]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,l,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,a=e.length;i<a;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,a,o){i=Math.round(i);const l=i*2+1,c=compose(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=createCanvasContext2D(l,l,void 0,{willReadFrequently:!0}));const f=this.hitDetectionContext_;f.canvas.width!==l||f.canvas.height!==l?(f.canvas.width=l,f.canvas.height=l):h||f.clearRect(0,0,l,l);let p;this.renderBuffer_!==void 0&&(p=createEmpty(),extendCoordinate(p,e),buffer(p,t*(this.renderBuffer_+i),p));const m=getPixelIndexArray(i);let v;function C(k,F,U){const z=f.getImageData(0,0,l,l).data;for(let N=0,K=m.length;N<K;N++)if(z[m[N]]>0){if(!o||U==="none"||v!=="Image"&&v!=="Text"||o.includes(k)){const q=(m[N]-3)/4,j=i-q%l,J=i-(q/l|0),X=a(k,F,j*j+J*J);if(X)return X}f.clearRect(0,0,l,l);break}}const b=Object.keys(this.executorsByZIndex_).map(Number);b.sort(ascending);let S,x,T,P,L;for(S=b.length-1;S>=0;--S){const k=b[S].toString();for(T=this.executorsByZIndex_[k],x=ALL.length-1;x>=0;--x)if(v=ALL[x],P=T[v],P!==void 0&&(L=P.executeHitDetection(f,c,r,C,p),L))return L}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],a=t[2],o=t[3],l=[r,i,r,o,a,o,a,i];return transform2D(l,0,8,2,e,l),l}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,r,i,a,o,l){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(l?descending:ascending),o=o||ALL;const h=ALL.length;for(let f=0,p=c.length;f<p;++f){const m=c[f].toString(),v=this.executorsByZIndex_[m];for(let C=0,b=o.length;C<b;++C){const S=o[C],x=v[S];if(x!==void 0){const T=l===null?void 0:x.getZIndexContext(),P=T?T.getContext():e,L=this.maxExtent_&&S!=="Image"&&S!=="Text";if(L&&(P.save(),this.clip(P,r)),!T||S==="Text"||S==="Image"?x.execute(P,t,r,i,a,l):T.pushFunction(k=>x.execute(k,t,r,i,a,l)),L&&P.restore(),T){T.offset();const k=c[f]*h+C;this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ascending);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[t[r]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(n){if(circlePixelIndexArrayCache[n]!==void 0)return circlePixelIndexArrayCache[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let a=0;a<=n;++a)for(let o=0;o<=n;++o){const l=a*a+o*o;if(l>t)break;let c=r[l];c||(c=[],r[l]=c),c.push(((n+a)*e+(n+o))*4+3),a>0&&c.push(((n-a)*e+(n+o))*4+3),o>0&&(c.push(((n+a)*e+(n-o))*4+3),a>0&&c.push(((n-a)*e+(n-o))*4+3))}const i=[];for(let a=0,o=r.length;a<o;++a)r[a]&&i.push(...r[a]);return circlePixelIndexArrayCache[n]=i,i}function hasArea(n){return n[0]>0&&n[1]>0}function scale(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function toSize(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var a,o;const t=(a=this.fill_)==null?void 0:a.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(o=shared.get(r,null,null))==null?void 0:o.getImage(1);if(!i){const l=this.renderOptions_,c=Math.ceil(l.size*e),h=createCanvasContext2D(c,c);this.draw_(l,h,e),i=h.canvas,shared.set(r,null,null,new IconImage(i,void 0,null,ImageState.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,a=this.radius2_===void 0?i:this.radius2_;if(i<a){const F=i;i=a,a=F}const o=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/o,c=a*Math.sin(l),h=Math.sqrt(a*a-c*c),f=i-h,p=Math.sqrt(c*c+f*f),m=p/c;if(e==="miter"&&m<=r)return m*t;const v=t/2/m,C=t/2*(f/p),S=Math.sqrt((i+v)*(i+v)+C*C)-i;if(this.radius2_===void 0||e==="bevel")return S*2;const x=i*Math.sin(l),T=Math.sqrt(i*i-x*x),P=a-T,k=Math.sqrt(x*x+P*P)/x;if(k<=r){const F=k*t/2-a-i;return 2*Math.max(S,F)}return S*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,r=0,i=null,a=0,o,l=0;this.stroke_&&(o=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),l=this.stroke_.getWidth()??defaultLineWidth,i=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,r=this.stroke_.getMiterLimit()??defaultMiterLimit);const c=this.calculateLineJoinSize_(t,l,r),h=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*h+c);return{strokeStyle:o,strokeWidth:l,size:f,lineCap:e,lineDash:i,lineDashOffset:a,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=defaultFillStyle),t.fillStyle=asColorLike(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=asArray(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const a=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let l=0;l<t;l++){const c=a+l*o,h=l%2===0?r:i;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ImageState.IDLE&&t.load(),t.getImageState()===ImageState.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function calculateScale(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let l=e.src;assert(!(l!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&o&&(l=o.src||getUid(o)),assert(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=ImageState.IDLE:o!==void 0&&("complete"in o?o.complete?c=o.src?ImageState.LOADED:ImageState.IDLE:c=ImageState.LOADING:c=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(o,l,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,f;if(e.size)[h,f]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)h=p.width,f=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const m=()=>{if(this.unlistenImageChange(m),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale(calculateScale(v[0],v[1],e.width,e.height))};this.listenImageChange(m);return}}h!==void 0&&this.setScale(calculateScale(h,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(assert(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(n,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),r=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new CircleStyle({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return defaultStyles}function createEditingStyle(){const n={},e=[255,255,255,1],t=[0,153,255,1],r=3;return n.Polygon=[new Style({fill:new Fill({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Style({stroke:new Stroke({color:e,width:r+2})}),new Style({stroke:new Stroke({color:t,width:r})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Style({image:new CircleStyle({radius:r*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:r/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function defaultGeometryFunction(n){return n.getGeometry()}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const tmpTransform$1=create(),tmpPoint=[NaN,NaN];class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,r,i){return abstract()}containsXY(e,t){return this.closestPointXY(e,t,tmpPoint,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,r){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const r=get$3(e),i=r.getUnits()=="tile-pixels"?function(a,o,l){const c=r.getExtent(),h=r.getWorldExtent(),f=getHeight(h)/getHeight(c);compose(tmpTransform$1,h[0],h[3],f,-f,0,0,0);const p=transform2D(a,0,a.length,l,tmpTransform$1,o),m=getTransform(r,t);return m?m(p,p,l):p}:getTransform(r,t);return this.applyTransform(i),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,r){let i;if(e)i=getStrideForLayout(e);else{for(let a=0;a<r;++a){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=getLayoutForStride(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();rotate(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=getCenter(this.getExtent()));const i=this.getFlatCoordinates();if(i){const a=this.getStride();scale$2(i,0,i.length,a,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();translate$1(r,0,r.length,i,e,t,r),this.changed()}}}function getLayoutForStride(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function getStrideForLayout(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function transformGeom2D(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return transform2D(r,0,r.length,i,e,t)}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,r,i,a,o,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?toFixed(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=o,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,t,r,i){if(!this.image_)return;const a=transform2D(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,c=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let f=0,p=a.length;f<p;f+=2){const m=a[f]-this.imageAnchorX_,v=a[f+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const C=m+this.imageAnchorX_,b=v+this.imageAnchorY_;compose(l,C,b,1,1,h,-C,-b),o.save(),o.transform.apply(o,l),o.translate(C,b),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,m,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=c)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=transform2D(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);t<r;t+=i){const c=a[t]+this.textOffsetX_,h=a[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(c-this.textOffsetX_,h-this.textOffsetY_),o.rotate(l),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,c,h),this.textFillState_&&o.fillText(this.text_,c,h))}}moveToLineTo_(e,t,r,i,a){const o=this.context_,l=transform2D(e,t,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(l[0],l[1]);let c=l.length;a&&(c-=2);for(let h=2;h<c;h+=2)o.lineTo(l[h],l[h+1]);return a&&o.closePath(),r}drawRings_(e,t,r,i){for(let a=0,o=r.length;a<o;++a)t=this.moveToLineTo_(e,t,r[a],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],a=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(t[0],t[1],a,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let a=0;const o=e.getEnds(),l=e.getStride();r.beginPath();for(let c=0,h=o.length;c<h;++c)a=this.moveToLineTo_(i,a,o[c],l,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const a=e.getEndss(),o=e.getStride();t.beginPath();for(let l=0,c=a.length;l<c;++l){const h=a[l];i=this.drawRings_(r,i,h,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:defaultTextAlign;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:asColorLike(r||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),a=t.getLineDash(),o=t.getLineDashOffset(),l=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),f=a||defaultLineDash;this.strokeState_={lineCap:i!==void 0?i:defaultLineCap,lineDash:this.pixelRatio_===1?f:f.map(p=>p*this.pixelRatio_),lineDashOffset:(o||defaultLineDashOffset)*this.pixelRatio_,lineJoin:l!==void 0?l:defaultLineJoin,lineWidth:(c!==void 0?c:defaultLineWidth)*this.pixelRatio_,miterLimit:h!==void 0?h:defaultMiterLimit,strokeStyle:asColorLike(r||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const v=t.getColor();this.textFillState_={fillStyle:asColorLike(v||defaultFillStyle)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const v=r.getColor(),C=r.getLineCap(),b=r.getLineDash(),S=r.getLineDashOffset(),x=r.getLineJoin(),T=r.getWidth(),P=r.getMiterLimit();this.textStrokeState_={lineCap:C!==void 0?C:defaultLineCap,lineDash:b||defaultLineDash,lineDashOffset:S||defaultLineDashOffset,lineJoin:x!==void 0?x:defaultLineJoin,lineWidth:T!==void 0?T:defaultLineWidth,miterLimit:P!==void 0?P:defaultMiterLimit,strokeStyle:asColorLike(v||defaultStrokeStyle)}}const i=e.getFont(),a=e.getOffsetX(),o=e.getOffsetY(),l=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),f=e.getText(),p=e.getTextAlign(),m=e.getTextBaseline();this.textState_={font:i!==void 0?i:defaultFont,textAlign:p!==void 0?p:defaultTextAlign,textBaseline:m!==void 0?m:defaultTextBaseline},this.text_=f!==void 0?Array.isArray(f)?f.reduce((v,C,b)=>v+=b%2?" ":C,""):f:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(n,e,t,r,i,a,o,l,c){const h=c?toUserExtent(i):i,f=n[0]*HIT_DETECT_RESOLUTION,p=n[1]*HIT_DETECT_RESOLUTION,m=createCanvasContext2D(f,p);m.imageSmoothingEnabled=!1;const v=m.canvas,C=new CanvasImmediateRenderer(m,HIT_DETECT_RESOLUTION,i,null,o,l,c?getTransformFromProjections(getUserProjection(),c):null),b=t.length,S=Math.floor((256*256*256-1)/b),x={};for(let P=1;P<=b;++P){const L=t[P-1],k=L.getStyleFunction()||r;if(!k)continue;let F=k(L,a);if(!F)continue;Array.isArray(F)||(F=[F]);const z=(P*S).toString(16).padStart(7,"#00000");for(let N=0,K=F.length;N<K;++N){const q=F[N],j=q.getGeometryFunction()(L);if(!j||!intersects$1(h,j.getExtent()))continue;const J=q.clone(),X=J.getFill();X&&X.setColor(z);const te=J.getStroke();te&&(te.setColor(z),te.setLineDash(null)),J.setText(void 0);const H=q.getImage();if(H){const G=H.getImageSize();if(!G)continue;const ie=createCanvasContext2D(G[0],G[1],void 0,{alpha:!1}),re=ie.canvas;ie.fillStyle=z,ie.fillRect(0,0,re.width,re.height),J.setImage(new Icon({img:re,anchor:H.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:H.getOrigin(),opacity:1,size:H.getSize(),scale:H.getScale(),rotation:H.getRotation(),rotateWithView:H.getRotateWithView()}))}const oe=J.getZIndex()||0;let he=x[oe];he||(he={},x[oe]=he,he.Polygon=[],he.Circle=[],he.LineString=[],he.Point=[]);const Ee=j.getType();if(Ee==="GeometryCollection"){const G=j.getGeometriesArrayRecursive();for(let ie=0,re=G.length;ie<re;++ie){const ye=G[ie];he[ye.getType().replace("Multi","")].push(ye,J)}}else he[Ee.replace("Multi","")].push(j,J)}}const T=Object.keys(x).map(Number).sort(ascending);for(let P=0,L=T.length;P<L;++P){const k=x[T[P]];for(const F in k){const U=k[F];for(let z=0,N=U.length;z<N;z+=2){C.setStyle(U[z+1]);for(let K=0,q=e.length;K<q;++K)C.setTransform(e[K]),C.drawGeometry(U[z])}}}return m.getImageData(0,0,v.width,v.height)}function hitDetect(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*HIT_DETECT_RESOLUTION),a=Math.floor(Math.round(n[1])*HIT_DETECT_RESOLUTION),o=(clamp$1(i,0,t.width-1)+clamp$1(a,0,t.height-1)*t.width)*4,l=t.data[o],c=t.data[o+1],f=t.data[o+2]+256*(c+256*l),p=Math.floor((256*256*256-1)/e.length);f&&f%p===0&&r.push(e[f/p-1])}return r}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(n,e){return parseInt(getUid(n),10)-parseInt(getUid(e),10)}function getSquaredTolerance(n,e){const t=getTolerance(n,e);return t*t}function getTolerance(n,e){return SIMPLIFY_TOLERANCE*n/e}function renderCircleGeometry(n,e,t,r,i){const a=t.getFill(),o=t.getStroke();if(a||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(a,o),c.drawCircle(e,r,i)}const l=t.getText();if(l&&l.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,r)}}function renderFeature$1(n,e,t,r,i,a,o,l){const c=[],h=t.getImage();if(h){let m=!0;const v=h.getImageState();v==ImageState.LOADED||v==ImageState.ERROR?m=!1:v==ImageState.IDLE&&h.load(),m&&c.push(h.ready())}const f=t.getFill();f&&f.loading()&&c.push(f.ready());const p=c.length>0;return p&&Promise.all(c).then(()=>i(null)),renderFeatureInternal(n,e,t,r,a,o,l),p}function renderFeatureInternal(n,e,t,r,i,a,o){const l=t.getGeometryFunction()(e);if(!l)return;const c=l.simplifyTransformed(r,i);if(t.getRenderer())renderGeometry(n,c,t,e,o);else{const f=GEOMETRY_RENDERERS[c.getType()];f(n,c,t,e,o,a)}}function renderGeometry(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let l=0,c=o.length;l<c;++l)renderGeometry(n,o[l],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function renderGeometryCollectionGeometry(n,e,t,r,i,a){const o=e.getGeometriesArray();let l,c;for(l=0,c=o.length;l<c;++l){const h=GEOMETRY_RENDERERS[o[l].getType()];h(n,o[l],t,r,i,a)}}function renderLineStringGeometry(n,e,t,r,i){const a=t.getStroke();if(a){const l=n.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,a),l.drawLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function renderMultiLineStringGeometry(n,e,t,r,i){const a=t.getStroke();if(a){const l=n.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,a),l.drawMultiLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function renderMultiPolygonGeometry(n,e,t,r,i){const a=t.getFill(),o=t.getStroke();if(o||a){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(a,o),c.drawMultiPolygon(e,r,i)}const l=t.getText();if(l&&l.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,r,i)}}function renderPointGeometry(n,e,t,r,i,a){const o=t.getImage(),l=t.getText(),c=l&&l.getText(),h=a&&o&&c?{}:void 0;if(o){if(o.getImageState()!=ImageState.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(o,h),f.drawPoint(e,r,i)}if(c){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,h),f.drawText(e,r,i)}}function renderMultiPointGeometry(n,e,t,r,i,a){const o=t.getImage(),l=o&&o.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),f=a&&l&&h?{}:void 0;if(l){if(o.getImageState()!=ImageState.LOADED)return;const p=n.getBuilder(t.getZIndex(),"Image");p.setImageStyle(o,f),p.drawMultiPoint(e,r,i)}if(h){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,f),p.drawText(e,r,i)}}function renderPolygonGeometry(n,e,t,r,i){const a=t.getFill(),o=t.getStroke();if(a||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(a,o),c.drawPolygon(e,r,i)}const l=t.getText();if(l&&l.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,r,i)}}class RenderEvent extends BaseEvent{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}forEachFeatureAtCoordinate(e,t,r,i,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const canvasPool$2=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let i;try{pixelContext.drawImage(e,t,r,1,1,0,0,1,1),i=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let a,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(r)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(o=l.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=i;let l=a.style;l.position="absolute",l.width="100%",l.height="100%",o=createCanvasContext2D();const c=o.canvas;a.appendChild(c),l=c.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=a,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=getTopLeft(r),a=getTopRight(r),o=getBottomRight(r),l=getBottomLeft(r);apply(t.coordinateToPixelTransform,i),apply(t.coordinateToPixelTransform,a),apply(t.coordinateToPixelTransform,o),apply(t.coordinateToPixelTransform,l);const c=this.inversePixelTransform;apply(c,i),apply(c,a),apply(c,o),apply(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,a=e.viewState.rotation,o=e.pixelRatio,l=Math.round(getWidth(r)/i*o),c=Math.round(getHeight(r)/i*o);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,a,-l/2,-c/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const h=toString(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=l||f.height!=c?(f.width=l,f.height=c):this.context.clearRect(0,0,l,c),h!==f.style.transform&&(f.style.transform=h)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const a=new RenderEvent(e,this.inversePixelTransform,r,t);i.dispatchEvent(a)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,a,o,l){const c=a/2,h=o/2,f=i/t,p=-f,m=-e[0]+l,v=-e[1];return compose(this.tempTransform,c,h,f,p,-r,m,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,a=t.viewState,o=a.center,l=a.resolution,c=a.projection,h=a.rotation,f=c.getExtent(),p=this.getLayer().getSource(),m=this.getLayer().getDeclutter(),v=t.pixelRatio,C=t.viewHints,b=!(C[ViewHint.ANIMATING]||C[ViewHint.INTERACTING]),S=this.context,x=Math.round(getWidth(i)/l*v),T=Math.round(getHeight(i)/l*v),P=p.getWrapX()&&c.canWrapX(),L=P?getWidth(f):null,k=P?Math.ceil((i[2]-f[2])/L)+1:1;let F=P?Math.floor((i[0]-f[0])/L):0;do{let U=this.getRenderTransform(o,l,0,v,x,T,F*L);t.declutter&&(U=U.slice(0)),e.execute(S,[S.canvas.width,S.canvas.height],U,h,b,r===void 0?ALL:r?DECLUTTER:NON_DECLUTTER,r?m&&t.declutter[m]:void 0)}while(++F<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool$2))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool$2.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const a=this.context,o=this.replayGroup_;let l=o&&!o.isEmpty();if(!l&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(a,e),i.projection,this.clipped_=!1,l&&r.extent&&this.clipping){const c=fromUserExtent(r.extent);l=intersects$1(c,e.extent),this.clipped_=l&&!containsExtent(c,e.extent),this.clipped_&&this.clipUnrotated(a,e,c)}return l&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&a.restore(),this.postRender(a,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,a=this.renderedResolution_,o=this.renderedRotation_,l=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),f=[],p=r[0]*HIT_DETECT_RESOLUTION,m=r[1]*HIT_DETECT_RESOLUTION;f.push(this.getRenderTransform(i,a,o,HIT_DETECT_RESOLUTION,p,m,0).slice());const v=h.getSource(),C=l.getExtent();if(v.getWrapX()&&l.canWrapX()&&!containsExtent(C,c)){let b=c[0];const S=getWidth(C);let x=0,T;for(;b<C[0];)--x,T=S*x,f.push(this.getRenderTransform(i,a,o,HIT_DETECT_RESOLUTION,p,m,T).slice()),b+=S;for(x=0,b=c[2];b>C[2];)++x,T=S*x,f.push(this.getRenderTransform(i,a,o,HIT_DETECT_RESOLUTION,p,m,T).slice()),b-=S}this.hitDetectionImageData_=createHitDetectionImageData(r,f,this.renderedFeatures_,h.getStyleFunction(),c,a,o,getSquaredTolerance(a,this.renderedPixelRatio_),null)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,a){var m,v;if(!this.replayGroup_)return;const o=t.viewState.resolution,l=t.viewState.rotation,c=this.getLayer(),h={},f=function(C,b,S){const x=getUid(C),T=h[x];if(T){if(T!==!0&&S<T.distanceSq){if(S===0)return h[x]=!0,a.splice(a.lastIndexOf(T),1),i(C,c,b);T.geometry=b,T.distanceSq=S}}else{if(S===0)return h[x]=!0,i(C,c,b);a.push(h[x]={feature:C,layer:c,geometry:b,distanceSq:S,callback:i})}},p=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,l,r,f,p?(v=(m=t.declutter)==null?void 0:m[p])==null?void 0:v.all().map(C=>C.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ViewHint.ANIMATING],a=e.viewHints[ViewHint.INTERACTING],o=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!o&&i||!l&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,f=h.projection,p=h.resolution,m=e.pixelRatio,v=t.getRevision(),C=t.getRenderBuffer();let b=t.getRenderOrder();b===void 0&&(b=defaultOrder);const S=h.center.slice(),x=buffer(c,C*p),T=x.slice(),P=[x.slice()],L=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!containsExtent(L,e.extent)){const X=getWidth(L),te=Math.max(getWidth(x)/2,X);x[0]=L[0]-te,x[2]=L[2]+te,wrapX$1(S,f);const H=wrapX$2(P[0],f);H[0]<L[0]&&H[2]<L[2]?P.push([H[0]+X,H[1],H[2]+X,H[3]]):H[0]>L[0]&&H[2]>L[2]&&P.push([H[0]-X,H[1],H[2]-X,H[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==v&&this.renderedRenderOrder_==b&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,x))return equals$2(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new BuilderGroup(getTolerance(p,m),x,p,m);let F;for(let X=0,te=P.length;X<te;++X)r.loadFeatures(P[X],p,f);const U=getSquaredTolerance(p,m);let z=!0;const N=(X,te)=>{let H;const oe=X.getStyleFunction()||t.getStyleFunction();if(oe&&(H=oe(X,p)),H){const he=this.renderFeature(X,U,H,k,F,this.getLayer().getDeclutter(),te);z=z&&!he}},K=toUserExtent(x),q=r.getFeaturesInExtent(K);b&&q.sort(b);for(let X=0,te=q.length;X<te;++X)N(q[X],X);this.renderedFeatures_=q,this.ready=z;const j=k.finish(),J=new ExecutorGroup(x,p,m,r.getOverlaps(),j,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=p,this.renderedRevision_=v,this.renderedRenderOrder_=b,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=x,this.renderedCenter_=S,this.renderedProjection_=f,this.renderedPixelRatio_=m,this.replayGroup_=J,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,a,o,l){if(!r)return!1;let c=!1;if(Array.isArray(r))for(let h=0,f=r.length;h<f;++h)c=renderFeature$1(i,e,r[h],t,this.boundHandleStyleImageChange_,a,o,l)||c;else c=renderFeature$1(i,e,r,t,this.boundHandleStyleImageChange_,a,o,l);return c}}function quickselect(n,e,t=0,r=n.length-1,i=defaultCompare){for(;r>t;){if(r-t>600){const c=r-t+1,h=e-t+1,f=Math.log(c),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(c-p)/c)*(h-c/2<0?-1:1),v=Math.max(t,Math.floor(e-h*p/c+m)),C=Math.min(r,Math.floor(e+(c-h)*p/c+m));quickselect(n,e,v,C,i)}const a=n[e];let o=t,l=r;for(swap(n,t,e),i(n[r],a)>0&&swap(n,t,r);o<l;){for(swap(n,o,l),o++,l--;i(n[o],a)<0;)o++;for(;i(n[l],a)>0;)l--}i(n[t],a)===0?swap(n,t,l):(l++,swap(n,l,r)),l<=e&&(t=l+1),e<=l&&(r=l-1)}}function swap(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function defaultCompare(n,e){return n<e?-1:n>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!intersects(e,t))return r;const i=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){const l=t.children[o],c=t.leaf?i(l):l;intersects(e,c)&&(t.leaf?r.push(l):contains(e,c)?this._all(l,r):a.push(l))}t=a.pop()}return r}collides(e){let t=this.data;if(!intersects(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const a=t.children[i],o=t.leaf?this.toBBox(a):a;if(intersects(e,o)){if(t.leaf||contains(e,o))return!0;r.push(a)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),a=[],o=[];let l,c,h;for(;r||a.length;){if(r||(r=a.pop(),c=a[a.length-1],l=o.pop(),h=!0),r.leaf){const f=findItem(e,r.children,t);if(f!==-1)return r.children.splice(f,1),a.push(r),this._condense(a),this}!h&&!r.leaf&&contains(r,i)?(a.push(r),o.push(l),l=0,c=r,r=r.children[0]):c?(l++,r=c.children[l],h=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const a=r-t+1;let o=this._maxEntries,l;if(a<=o)return l=createNode(e.slice(t,r+1)),calcBBox(l,this.toBBox),l;i||(i=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,i-1))),l=createNode([]),l.leaf=!1,l.height=i;const c=Math.ceil(a/o),h=c*Math.ceil(Math.sqrt(o));multiSelect(e,t,r,h,this.compareMinX);for(let f=t;f<=r;f+=h){const p=Math.min(f+h-1,r);multiSelect(e,f,p,c,this.compareMinY);for(let m=f;m<=p;m+=c){const v=Math.min(m+c-1,p);l.children.push(this._build(e,m,v,i-1))}}return calcBBox(l,this.toBBox),l}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let a=1/0,o=1/0,l;for(let c=0;c<t.children.length;c++){const h=t.children[c],f=bboxArea(h),p=enlargedArea(e,h)-f;p<o?(o=p,a=f<a?f:a,l=h):p===o&&f<a&&(a=f,l=h)}t=l||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),a=[],o=this._chooseSubtree(i,this.data,t,a);for(o.children.push(e),extend$2(o,i);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(i,a,t)}_split(e,t){const r=e[t],i=r.children.length,a=this._minEntries;this._chooseSplitAxis(r,a,i);const o=this._chooseSplitIndex(r,a,i),l=createNode(r.children.splice(o,r.children.length-o));l.height=r.height,l.leaf=r.leaf,calcBBox(r,this.toBBox),calcBBox(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(r,l)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,a=1/0,o=1/0;for(let l=t;l<=r-t;l++){const c=distBBox(e,0,l,this.toBBox),h=distBBox(e,l,r,this.toBBox),f=intersectionArea(c,h),p=bboxArea(c)+bboxArea(h);f<a?(a=f,i=l,o=p<o?p:o):f===a&&p<o&&(o=p,i=l)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:compareNodeMinX,a=e.leaf?this.compareMinY:compareNodeMinY,o=this._allDistMargin(e,t,r,i),l=this._allDistMargin(e,t,r,a);o<l&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const a=this.toBBox,o=distBBox(e,0,t,a),l=distBBox(e,r-t,r,a);let c=bboxMargin(o)+bboxMargin(l);for(let h=t;h<r-t;h++){const f=e.children[h];extend$2(o,e.leaf?a(f):f),c+=bboxMargin(o)}for(let h=r-t-1;h>=t;h--){const f=e.children[h];extend$2(l,e.leaf?a(f):f),c+=bboxMargin(l)}return c}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)extend$2(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function calcBBox(n,e){distBBox(n,0,n.children.length,e,n)}function distBBox(n,e,t,r,i){i||(i=createNode(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let a=e;a<t;a++){const o=n.children[a];extend$2(i,n.leaf?r(o):o)}return i}function extend$2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function compareNodeMinX(n,e){return n.minX-e.minX}function compareNodeMinY(n,e){return n.minY-e.minY}function bboxArea(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function bboxMargin(n){return n.maxX-n.minX+(n.maxY-n.minY)}function enlargedArea(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function intersectionArea(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,a-r)}function contains(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function intersects(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function createNode(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(n,e,t,r,i){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=r)continue;const o=e+Math.ceil((t-e)/r/2)*r;quickselect(n,o,e,t,i),a.push(e,o,o,t)}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(n){return n in typeNames}function typeName(n){const e=[];for(const t of namedTypes)includesType(n,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(n,e){return(n&e)===e}function isType(n,e){return n===e}class LiteralExpression{constructor(e,t){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=t}}class CallExpression{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function parse$2(n,e,t){switch(typeof n){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,n?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,n)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(n));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!n);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,n.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,n)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(n));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!n);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return parseCallExpression(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new LiteralExpression(SizeType,n)}if(isType(e,ColorType$1)){if(n.length===3)return new LiteralExpression(ColorType$1,[...n,1]);if(n.length===4)return new LiteralExpression(ColorType$1,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,n)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Zoom]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Time]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(n,e,t){const r=n.length-1,i=new Array(r);for(let a=0;a<r;++a){const o=n[a+1];switch(typeof o){case"number":{i[a]=new LiteralExpression(NumberType$1,o);break}case"string":{i[a]=new LiteralExpression(StringType$1,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}a===0&&t.properties.add(String(o))}return i}function withVarArgs(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new LiteralExpression(StringType$1,r)]}function usesFeatureId(n,e,t){t.featureId=!0}function usesGeometryType(n,e,t){t.geometryType=!0}function usesMapState(n,e,t){t.mapState=!0}function withNoArgs(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function hasArgsCount(n,e){return function(t,r,i){const a=t[0],o=t.length-1;if(n===e){if(o!==n){const l=n===1?"":"s";throw new Error(`expected ${n} argument${l} for ${a}, got ${o}`)}}else if(o<n||o>e){const l=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${l} arguments for ${a}, got ${o}`)}}}function withArgsOfReturnType(n,e,t){const r=n.length-1,i=new Array(r);for(let a=0;a<r;++a){const o=parse$2(n[a+1],e,t);i[a]=o}return i}function withArgsOfType(n){return function(e,t,r){const i=e.length-1,a=new Array(i);for(let o=0;o<i;++o){const l=parse$2(e[o+1],n,r);a[o]=l}return a}}function hasOddArgs(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function hasEvenArgs(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function withMatchArgs(n,e,t){const r=n.length-1,i=StringType$1|NumberType$1|BooleanType$1,a=parse$2(n[1],i,t),o=parse$2(n[n.length-1],e,t),l=new Array(r-2);for(let c=0;c<r-2;c+=2){try{const h=parse$2(n[c+2],a.type,t);l[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=parse$2(n[c+3],o.type,t);l[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[a,...l,o]}function withInterpolateArgs(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const c=r[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);i=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const a=new LiteralExpression(NumberType$1,i);let o;try{o=parse$2(n[2],NumberType$1,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const l=new Array(n.length-3);for(let c=0;c<l.length;c+=2){try{const h=parse$2(n[c+3],NumberType$1,t);l[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=parse$2(n[c+4],e,t);l[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[a,o,...l]}function withCaseArgs(n,e,t){const r=parse$2(n[n.length-1],e,t),i=new Array(n.length-1);for(let a=0;a<i.length-1;a+=2){try{const o=parse$2(n[a+1],BooleanType$1,t);i[a]=o}catch(o){throw new Error(`failed to parse argument ${a} of case expression: ${o.message}`)}try{const o=parse$2(n[a+2],r.type,t);i[a+1]=o}catch(o){throw new Error(`failed to parse argument ${a+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function withInArgs(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=StringType$1}else i=NumberType$1;const a=new Array(r.length);for(let l=0;l<a.length;l++)try{const c=parse$2(r[l],i,t);a[l]=c}catch(c){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${c.message}`)}return[parse$2(n[1],i,t),...a]}function withPaletteArgs(n,e,t){let r;try{r=parse$2(n[1],NumberType$1,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const a=new Array(i.length);for(let o=0;o<a.length;o++){let l;try{l=parse$2(i[o],ColorType$1,t)}catch(c){throw new Error(`failed to parse color at index ${o} in palette expression: ${c.message}`)}if(!(l instanceof LiteralExpression))throw new Error(`the palette color at index ${o} must be a literal value`);a[o]=l}return[r,...a]}function createCallExpressionParser(...n){return function(e,t,r){const i=e[0];let a;for(let o=0;o<n.length;o++){const l=n[o](e,t,r);if(o==n.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");a=l}}return new CallExpression(t,i,...a)}}function parseCallExpression(n,e,t){const r=n[0],i=parsers[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function computeGeometryType(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(n.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(n,e,t){const r=parse$2(n,e,t);return compileExpression(r)}function compileExpression(n,e){if(n instanceof LiteralExpression){if(n.type===ColorType$1&&typeof n.value=="string"){const r=fromString(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(n);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(n);case Ops.Id:return r=>r.featureId;case Ops.GeometryType:return r=>r.geometryType;case Ops.Concat:{const r=n.args.map(i=>compileExpression(i));return i=>"".concat(...r.map(a=>a(i).toString()))}case Ops.Resolution:return r=>r.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(n);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(n);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(n);case Ops.Case:return compileCaseExpression(n);case Ops.Match:return compileMatchExpression(n);case Ops.Interpolate:return compileInterpolateExpression(n);case Ops.ToString:return compileConvertExpression(n);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=compileExpression(n.args[a]);switch(t){case Ops.Coalesce:return a=>{for(let o=0;o<r;++o){const l=i[o](a);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return a=>{for(let o=0;o<r;++o){const l=i[o](a);if(typeof l===t)return l}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(n,e){const r=n.args[0].value;switch(n.operator){case Ops.Get:return i=>{const a=n.args;let o=i.properties[r];for(let l=1,c=a.length;l<c;++l){const f=a[l].value;o=o[f]}return o};case Ops.Var:return i=>i.variables[r];case Ops.Has:return i=>{const a=n.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let l=1,c=a.length;l<c;++l){const f=a[l].value;if(!o||!Object.hasOwn(o,f))return!1;o=o[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function compileComparisonExpression(n,e){const t=n.operator,r=compileExpression(n.args[0]),i=compileExpression(n.args[1]);switch(t){case Ops.Equal:return a=>r(a)===i(a);case Ops.NotEqual:return a=>r(a)!==i(a);case Ops.LessThan:return a=>r(a)<i(a);case Ops.LessThanOrEqualTo:return a=>r(a)<=i(a);case Ops.GreaterThan:return a=>r(a)>i(a);case Ops.GreaterThanOrEqualTo:return a=>r(a)>=i(a);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=compileExpression(n.args[a]);switch(t){case Ops.Any:return a=>{for(let o=0;o<r;++o)if(i[o](a))return!0;return!1};case Ops.All:return a=>{for(let o=0;o<r;++o)if(!i[o](a))return!1;return!0};case Ops.Between:return a=>{const o=i[0](a),l=i[1](a),c=i[2](a);return o>=l&&o<=c};case Ops.In:return a=>{const o=i[0](a);for(let l=1;l<r;++l)if(o===i[l](a))return!0;return!1};case Ops.Not:return a=>!i[0](a);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=compileExpression(n.args[a]);switch(t){case Ops.Multiply:return a=>{let o=1;for(let l=0;l<r;++l)o*=i[l](a);return o};case Ops.Divide:return a=>i[0](a)/i[1](a);case Ops.Add:return a=>{let o=0;for(let l=0;l<r;++l)o+=i[l](a);return o};case Ops.Subtract:return a=>i[0](a)-i[1](a);case Ops.Clamp:return a=>{const o=i[0](a),l=i[1](a);if(o<l)return l;const c=i[2](a);return o>c?c:o};case Ops.Mod:return a=>i[0](a)%i[1](a);case Ops.Pow:return a=>Math.pow(i[0](a),i[1](a));case Ops.Abs:return a=>Math.abs(i[0](a));case Ops.Floor:return a=>Math.floor(i[0](a));case Ops.Ceil:return a=>Math.ceil(i[0](a));case Ops.Round:return a=>Math.round(i[0](a));case Ops.Sin:return a=>Math.sin(i[0](a));case Ops.Cos:return a=>Math.cos(i[0](a));case Ops.Atan:return r===2?a=>Math.atan2(i[0](a),i[1](a)):a=>Math.atan(i[0](a));case Ops.Sqrt:return a=>Math.sqrt(i[0](a));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileCaseExpression(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=compileExpression(n.args[i]);return i=>{for(let a=0;a<t-1;a+=2)if(r[a](i))return r[a+1](i);return r[t-1](i)}}function compileMatchExpression(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=compileExpression(n.args[i]);return i=>{const a=r[0](i);for(let o=1;o<t;o+=2)if(a===r[o](i))return r[o+1](i);return r[t-1](i)}}function compileInterpolateExpression(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=compileExpression(n.args[i]);return i=>{const a=r[0](i),o=r[1](i);let l,c;for(let h=2;h<t;h+=2){const f=r[h](i);let p=r[h+1](i);const m=Array.isArray(p);if(m&&(p=withAlpha(p)),f>=o)return h===2?p:m?interpolateColor(a,o,l,c,f,p):interpolateNumber$1(a,o,l,c,f,p);l=f,c=p}return c}}function compileConvertExpression(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let a=0;a<r;++a)i[a]=compileExpression(n.args[a]);switch(t){case Ops.ToString:return a=>{const o=i[0](a);return n.args[0].type===ColorType$1?toString$1(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function interpolateNumber$1(n,e,t,r,i,a){const o=i-t;if(o===0)return r;const l=e-t,c=n===1?l/o:(Math.pow(n,l)-1)/(Math.pow(n,o)-1);return r+c*(a-r)}function interpolateColor(n,e,t,r,i,a){if(i-t===0)return r;const l=rgbaToLcha(r),c=rgbaToLcha(a);let h=c[2]-l[2];h>180?h-=360:h<-180&&(h+=360);const f=[interpolateNumber$1(n,e,t,l[0],i,c[0]),interpolateNumber$1(n,e,t,l[1],i,c[1]),l[2]+interpolateNumber$1(n,e,t,0,i,h),interpolateNumber$1(n,e,t,r[3],i,a[3])];return normalize(lchaToRgba(f))}function always$1(n){return!0}function rulesToStyleFunction(n){const e=newParsingContext(),t=buildRuleSet(n,e),r=newEvaluationContext();return function(i,a){if(r.properties=i.getPropertiesInternal(),r.resolution=a,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=computeGeometryType(i.getGeometry())),t(r)}}function flatStylesToStyleFunction(n){const e=newParsingContext(),t=n.length,r=new Array(t);for(let o=0;o<t;++o)r[o]=buildStyle(n[o],e);const i=newEvaluationContext(),a=new Array(t);return function(o,l){if(i.properties=o.getPropertiesInternal(),i.resolution=l,e.featureId){const h=o.getId();h!==void 0?i.featureId=h:i.featureId=null}let c=0;for(let h=0;h<t;++h){const f=r[h](i);f&&(a[c]=f,c+=1)}return a.length=c,a}}function buildRuleSet(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const a=n[i],o="filter"in a?buildExpression(a.filter,BooleanType$1,e):always$1;let l;if(Array.isArray(a.style)){const c=a.style.length;l=new Array(c);for(let h=0;h<c;++h)l[h]=buildStyle(a.style[h],e)}else l=[buildStyle(a.style,e)];r[i]={filter:o,styles:l}}return function(i){const a=[];let o=!1;for(let l=0;l<t;++l){const c=r[l].filter;if(c(i)&&!(n[l].else&&o)){o=!0;for(const h of r[l].styles){const f=h(i);f&&a.push(f)}}}return a}}function buildStyle(n,e){const t=buildFill(n,"",e),r=buildStroke(n,"",e),i=buildText(n,e),a=buildImage(n,e),o=numberEvaluator(n,"z-index",e);if(!t&&!r&&!i&&!a&&!isEmpty$1(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const l=new Style;return function(c){let h=!0;if(t){const f=t(c);f&&(h=!1),l.setFill(f)}if(r){const f=r(c);f&&(h=!1),l.setStroke(f)}if(i){const f=i(c);f&&(h=!1),l.setText(f)}if(a){const f=a(c);f&&(h=!1),l.setImage(f)}return o&&l.setZIndex(o(c)),h?null:l}}function buildFill(n,e,t){let r;if(e+"fill-pattern-src"in n)r=patternEvaluator(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return a=>null;r=colorLikeEvaluator(n,e+"fill-color",t)}if(!r)return null;const i=new Fill;return function(a){const o=r(a);return o===NO_COLOR?null:(i.setColor(o),i)}}function buildStroke(n,e,t){const r=numberEvaluator(n,e+"stroke-width",t),i=colorLikeEvaluator(n,e+"stroke-color",t);if(!r&&!i)return null;const a=stringEvaluator(n,e+"stroke-line-cap",t),o=stringEvaluator(n,e+"stroke-line-join",t),l=numberArrayEvaluator(n,e+"stroke-line-dash",t),c=numberEvaluator(n,e+"stroke-line-dash-offset",t),h=numberEvaluator(n,e+"stroke-miter-limit",t),f=new Stroke;return function(p){if(i){const m=i(p);if(m===NO_COLOR)return null;f.setColor(m)}if(r&&f.setWidth(r(p)),a){const m=a(p);if(m!=="butt"&&m!=="round"&&m!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(m)}if(o){const m=o(p);if(m!=="bevel"&&m!=="round"&&m!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(m)}return l&&f.setLineDash(l(p)),c&&f.setLineDashOffset(c(p)),h&&f.setMiterLimit(h(p)),f}}function buildText(n,e){const t="text-",r=stringEvaluator(n,t+"value",e);if(!r)return null;const i=buildFill(n,t,e),a=buildFill(n,t+"background-",e),o=buildStroke(n,t,e),l=buildStroke(n,t+"background-",e),c=stringEvaluator(n,t+"font",e),h=numberEvaluator(n,t+"max-angle",e),f=numberEvaluator(n,t+"offset-x",e),p=numberEvaluator(n,t+"offset-y",e),m=booleanEvaluator(n,t+"overflow",e),v=stringEvaluator(n,t+"placement",e),C=numberEvaluator(n,t+"repeat",e),b=sizeLikeEvaluator(n,t+"scale",e),S=booleanEvaluator(n,t+"rotate-with-view",e),x=numberEvaluator(n,t+"rotation",e),T=stringEvaluator(n,t+"align",e),P=stringEvaluator(n,t+"justify",e),L=stringEvaluator(n,t+"baseline",e),k=booleanEvaluator(n,t+"keep-upright",e),F=numberArrayEvaluator(n,t+"padding",e),U=optionalDeclutterMode(n,t+"declutter-mode"),z=new Text({declutterMode:U});return function(N){if(z.setText(r(N)),i&&z.setFill(i(N)),a&&z.setBackgroundFill(a(N)),o&&z.setStroke(o(N)),l&&z.setBackgroundStroke(l(N)),c&&z.setFont(c(N)),h&&z.setMaxAngle(h(N)),f&&z.setOffsetX(f(N)),p&&z.setOffsetY(p(N)),m&&z.setOverflow(m(N)),v){const K=v(N);if(K!=="point"&&K!=="line")throw new Error("Expected point or line for text-placement");z.setPlacement(K)}if(C&&z.setRepeat(C(N)),b&&z.setScale(b(N)),S&&z.setRotateWithView(S(N)),x&&z.setRotation(x(N)),T){const K=T(N);if(K!=="left"&&K!=="center"&&K!=="right"&&K!=="end"&&K!=="start")throw new Error("Expected left, right, center, start, or end for text-align");z.setTextAlign(K)}if(P){const K=P(N);if(K!=="left"&&K!=="right"&&K!=="center")throw new Error("Expected left, right, or center for text-justify");z.setJustify(K)}if(L){const K=L(N);if(K!=="bottom"&&K!=="top"&&K!=="middle"&&K!=="alphabetic"&&K!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");z.setTextBaseline(K)}return F&&z.setPadding(F(N)),k&&z.setKeepUpright(k(N)),z}}function buildImage(n,e){return"icon-src"in n?buildIcon(n,e):"shape-points"in n?buildShape(n,e):"circle-radius"in n?buildCircle(n,e):null}function buildIcon(n,e){const t="icon-",r=t+"src",i=requireString(n[r],r),a=coordinateEvaluator(n,t+"anchor",e),o=sizeLikeEvaluator(n,t+"scale",e),l=numberEvaluator(n,t+"opacity",e),c=coordinateEvaluator(n,t+"displacement",e),h=numberEvaluator(n,t+"rotation",e),f=booleanEvaluator(n,t+"rotate-with-view",e),p=optionalIconOrigin(n,t+"anchor-origin"),m=optionalIconAnchorUnits(n,t+"anchor-x-units"),v=optionalIconAnchorUnits(n,t+"anchor-y-units"),C=optionalColorLike(n,t+"color"),b=optionalString(n,t+"cross-origin"),S=optionalNumberArray(n,t+"offset"),x=optionalIconOrigin(n,t+"offset-origin"),T=optionalNumber(n,t+"width"),P=optionalNumber(n,t+"height"),L=optionalSize(n,t+"size"),k=optionalDeclutterMode(n,t+"declutter-mode"),F=new Icon({src:i,anchorOrigin:p,anchorXUnits:m,anchorYUnits:v,color:C,crossOrigin:b,offset:S,offsetOrigin:x,height:P,width:T,size:L,declutterMode:k});return function(U){return l&&F.setOpacity(l(U)),c&&F.setDisplacement(c(U)),h&&F.setRotation(h(U)),f&&F.setRotateWithView(f(U)),o&&F.setScale(o(U)),a&&F.setAnchor(a(U)),F}}function buildShape(n,e){const t="shape-",r=t+"points",i=t+"radius",a=requireNumber(n[r],r),o=requireNumber(n[i],i),l=buildFill(n,t,e),c=buildStroke(n,t,e),h=sizeLikeEvaluator(n,t+"scale",e),f=coordinateEvaluator(n,t+"displacement",e),p=numberEvaluator(n,t+"rotation",e),m=booleanEvaluator(n,t+"rotate-with-view",e),v=optionalNumber(n,t+"radius2"),C=optionalNumber(n,t+"angle"),b=optionalDeclutterMode(n,t+"declutter-mode"),S=new RegularShape({points:a,radius:o,radius2:v,angle:C,declutterMode:b});return function(x){return l&&S.setFill(l(x)),c&&S.setStroke(c(x)),f&&S.setDisplacement(f(x)),p&&S.setRotation(p(x)),m&&S.setRotateWithView(m(x)),h&&S.setScale(h(x)),S}}function buildCircle(n,e){const t="circle-",r=buildFill(n,t,e),i=buildStroke(n,t,e),a=numberEvaluator(n,t+"radius",e),o=sizeLikeEvaluator(n,t+"scale",e),l=coordinateEvaluator(n,t+"displacement",e),c=numberEvaluator(n,t+"rotation",e),h=booleanEvaluator(n,t+"rotate-with-view",e),f=optionalDeclutterMode(n,t+"declutter-mode"),p=new CircleStyle({radius:5,declutterMode:f});return function(m){return a&&p.setRadius(a(m)),r&&p.setFill(r(m)),i&&p.setStroke(i(m)),l&&p.setDisplacement(l(m)),c&&p.setRotation(c(m)),h&&p.setRotateWithView(h(m)),o&&p.setScale(o(m)),p}}function numberEvaluator(n,e,t){if(!(e in n))return;const r=buildExpression(n[e],NumberType$1,t);return function(i){return requireNumber(r(i),e)}}function stringEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],StringType$1,t);return function(i){return requireString(r(i),e)}}function patternEvaluator(n,e,t){const r=stringEvaluator(n,e+"pattern-src",t),i=sizeEvaluator(n,e+"pattern-offset",t),a=sizeEvaluator(n,e+"pattern-size",t),o=colorLikeEvaluator(n,e+"color",t);return function(l){return{src:r(l),offset:i&&i(l),size:a&&a(l),color:o&&o(l)}}}function booleanEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],BooleanType$1,t);return function(i){const a=r(i);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${e}`);return a}}function colorLikeEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],ColorType$1,t);return function(i){return requireColorLike(r(i),e)}}function numberArrayEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],NumberArrayType,t);return function(i){return requireNumberArray(r(i),e)}}function coordinateEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],NumberArrayType,t);return function(i){const a=requireNumberArray(r(i),e);if(a.length!==2)throw new Error(`Expected two numbers for ${e}`);return a}}function sizeEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],NumberArrayType,t);return function(i){return requireSize(r(i),e)}}function sizeLikeEvaluator(n,e,t){if(!(e in n))return null;const r=buildExpression(n[e],NumberArrayType|NumberType$1,t);return function(i){return requireSizeLike(r(i),e)}}function optionalNumber(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(n,e){const t=n[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(n,e){const t=n[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function requireString(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function requireNumber(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function requireColorLike(n,e){if(typeof n=="string")return n;const t=requireNumberArray(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSize(n,e){const t=requireNumberArray(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function requireSizeLike(n,e){return typeof n=="number"?n:requireSize(n,e)}const ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(n,e,t){return function(r,i,a,o,l){if(!r)return;if(!i&&!e)return r;const c=e?0:a[0]*i,h=e?0:a[1]*i,f=l?l[0]:0,p=l?l[1]:0;let m=n[0]+c/2+f,v=n[2]-c/2+f,C=n[1]+h/2+p,b=n[3]-h/2+p;m>v&&(m=(v+m)/2,v=m),C>b&&(C=(b+C)/2,b=C);let S=clamp$1(r[0],m,v),x=clamp$1(r[1],C,b);if(o&&t&&i){const T=30*i;S+=-T*Math.log(1+Math.max(0,m-r[0])/T)+T*Math.log(1+Math.max(0,r[0]-v)/T),x+=-T*Math.log(1+Math.max(0,C-r[1])/T)+T*Math.log(1+Math.max(0,r[1]-b)/T)}return[S,x]}}function none$1(n){return n}function easeIn(n){return Math.pow(n,3)}function easeOut(n){return 1-easeIn(1-n)}function inAndOut(n){return 3*n*n-2*n*n*n}function linear(n){return n}function linearRing(n,e,t,r){let i=0;const a=n[t-r],o=n[t-r+1];let l=0,c=0;for(;e<t;e+=r){const h=n[e]-a,f=n[e+1]-o;i+=c*h-l*f,l=h,c=f}return i/2}function linearRings(n,e,t,r){let i=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i+=linearRing(n,e,l,r),e=l}return i}function linearRingss$1(n,e,t,r){let i=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i+=linearRings(n,e,l,r),e=l[l.length-1]}return i}function assignClosest(n,e,t,r,i,a,o){const l=n[e],c=n[e+1],h=n[t]-l,f=n[t+1]-c;let p;if(h===0&&f===0)p=e;else{const m=((i-l)*h+(a-c)*f)/(h*h+f*f);if(m>1)p=t;else if(m>0){for(let v=0;v<r;++v)o[v]=lerp(n[e+v],n[t+v],m);o.length=r;return}else p=e}for(let m=0;m<r;++m)o[m]=n[p+m];o.length=r}function maxSquaredDelta(n,e,t,r,i){let a=n[e],o=n[e+1];for(e+=r;e<t;e+=r){const l=n[e],c=n[e+1],h=squaredDistance$1(a,o,l,c);h>i&&(i=h),a=l,o=c}return i}function arrayMaxSquaredDelta(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a){const l=t[a];i=maxSquaredDelta(n,e,l,r,i),e=l}return i}function multiArrayMaxSquaredDelta(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a){const l=t[a];i=arrayMaxSquaredDelta(n,e,l,r,i),e=l[l.length-1]}return i}function assignClosestPoint(n,e,t,r,i,a,o,l,c,h,f){if(e==t)return h;let p,m;if(i===0){if(m=squaredDistance$1(o,l,n[e],n[e+1]),m<h){for(p=0;p<r;++p)c[p]=n[e+p];return c.length=r,m}return h}f=f||[NaN,NaN];let v=e+r;for(;v<t;)if(assignClosest(n,v-r,v,r,o,l,f),m=squaredDistance$1(o,l,f[0],f[1]),m<h){for(h=m,p=0;p<r;++p)c[p]=f[p];c.length=r,v+=r}else v+=r*Math.max((Math.sqrt(m)-Math.sqrt(h))/i|0,1);if(a&&(assignClosest(n,t-r,e,r,o,l,f),m=squaredDistance$1(o,l,f[0],f[1]),m<h)){for(h=m,p=0;p<r;++p)c[p]=f[p];c.length=r}return h}function assignClosestArrayPoint(n,e,t,r,i,a,o,l,c,h,f){f=f||[NaN,NaN];for(let p=0,m=t.length;p<m;++p){const v=t[p];h=assignClosestPoint(n,e,v,r,i,a,o,l,c,h,f),e=v}return h}function assignClosestMultiArrayPoint(n,e,t,r,i,a,o,l,c,h,f){f=f||[NaN,NaN];for(let p=0,m=t.length;p<m;++p){const v=t[p];h=assignClosestArrayPoint(n,e,v,r,i,a,o,l,c,h,f),e=v[v.length-1]}return h}function deflateCoordinate(n,e,t,r){for(let i=0,a=t.length;i<a;++i)n[e++]=t[i];return e}function deflateCoordinates(n,e,t,r){for(let i=0,a=t.length;i<a;++i){const o=t[i];for(let l=0;l<r;++l)n[e++]=o[l]}return e}function deflateCoordinatesArray(n,e,t,r,i){i=i||[];let a=0;for(let o=0,l=t.length;o<l;++o){const c=deflateCoordinates(n,e,t[o],r);i[a++]=c,e=c}return i.length=a,i}function deflateMultiCoordinatesArray(n,e,t,r,i){i=i||[];let a=0;for(let o=0,l=t.length;o<l;++o){const c=deflateCoordinatesArray(n,e,t[o],r,i[a]);c.length===0&&(c[0]=e),i[a++]=c,e=c[c.length-1]}return i.length=a,i}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<closestSquaredDistanceXY(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class Tf extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Tf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const a=this.flatCoordinates,o=squaredDistance$1(e,t,a[0],a[1]);if(o<i){const l=this.stride;for(let c=0;c<l;++c)r[c]=a[c];return r.length=l,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function linearRingContainsExtent(n,e,t,r,i){return!forEachCorner(i,function(o){return!linearRingContainsXY(n,e,t,r,o[0],o[1])})}function linearRingContainsXY(n,e,t,r,i,a){let o=0,l=n[t-r],c=n[t-r+1];for(;e<t;e+=r){const h=n[e],f=n[e+1];c<=a?f>a&&(h-l)*(a-c)-(i-l)*(f-c)>0&&o++:f<=a&&(h-l)*(a-c)-(i-l)*(f-c)<0&&o--,l=h,c=f}return o!==0}function linearRingsContainsXY(n,e,t,r,i,a){if(t.length===0||!linearRingContainsXY(n,e,t[0],r,i,a))return!1;for(let o=1,l=t.length;o<l;++o)if(linearRingContainsXY(n,t[o-1],t[o],r,i,a))return!1;return!0}function linearRingssContainsXY(n,e,t,r,i,a){if(t.length===0)return!1;for(let o=0,l=t.length;o<l;++o){const c=t[o];if(linearRingsContainsXY(n,e,c,r,i,a))return!0;e=c[c.length-1]}return!1}function getInteriorPointOfArray(n,e,t,r,i,a,o){let l,c,h,f,p,m,v;const C=i[a+1],b=[];for(let T=0,P=t.length;T<P;++T){const L=t[T];for(f=n[L-r],m=n[L-r+1],l=e;l<L;l+=r)p=n[l],v=n[l+1],(C<=m&&v<=C||m<=C&&C<=v)&&(h=(C-m)/(v-m)*(p-f)+f,b.push(h)),f=p,m=v}let S=NaN,x=-1/0;for(b.sort(ascending),f=b[0],l=1,c=b.length;l<c;++l){p=b[l];const T=Math.abs(p-f);T>x&&(h=(f+p)/2,linearRingsContainsXY(n,e,t,r,h,C)&&(S=h,x=T)),f=p}return isNaN(S)&&(S=i[a]),o?(o.push(S,C,x),o):[S,C,x]}function getInteriorPointsOfMultiArray(n,e,t,r,i){let a=[];for(let o=0,l=t.length;o<l;++o){const c=t[o];a=getInteriorPointOfArray(n,e,c,r,i,2*o,a),e=c[c.length-1]}return a}function forEach(n,e,t,r,i){let a;for(e+=r;e<t;e+=r)if(a=i(n.slice(e-r,e),n.slice(e,e+r)),a)return a;return!1}function intersectsLineString(n,e,t,r,i,a){return a=a??extendFlatCoordinates(createEmpty(),n,e,t,r),intersects$1(i,a)?a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]?!0:forEach(n,e,t,r,function(o,l){return intersectsSegment(i,o,l)}):!1}function intersectsLineStringArray(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a){if(intersectsLineString(n,e,t[a],r,i))return!0;e=t[a]}return!1}function intersectsLinearRing(n,e,t,r,i){return!!(intersectsLineString(n,e,t,r,i)||linearRingContainsXY(n,e,t,r,i[0],i[1])||linearRingContainsXY(n,e,t,r,i[0],i[3])||linearRingContainsXY(n,e,t,r,i[2],i[1])||linearRingContainsXY(n,e,t,r,i[2],i[3]))}function intersectsLinearRingArray(n,e,t,r,i){if(!intersectsLinearRing(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let a=1,o=t.length;a<o;++a)if(linearRingContainsExtent(n,t[a-1],t[a],r,i)&&!intersectsLineString(n,t[a-1],t[a],r,i))return!1;return!0}function intersectsLinearRingMultiArray(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a){const l=t[a];if(intersectsLinearRingArray(n,e,l,r,i))return!0;e=l[l.length-1]}return!1}function coordinates(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const a=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=a}e+=r,t-=r}}function linearRingIsClockwise(n,e,t,r){let i=0,a=n[t-r],o=n[t-r+1];for(;e<t;e+=r){const l=n[e],c=n[e+1];i+=(l-a)*(c+o),a=l,o=c}return i===0?void 0:i>0}function linearRingsAreOriented(n,e,t,r,i){i=i!==void 0?i:!1;for(let a=0,o=t.length;a<o;++a){const l=t[a],c=linearRingIsClockwise(n,e,l,r);if(a===0){if(i&&c||!i&&!c)return!1}else if(i&&!c||!i&&c)return!1;e=l}return!0}function linearRingssAreOriented(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a){const l=t[a];if(!linearRingsAreOriented(n,e,l,r,i))return!1;l.length&&(e=l[l.length-1])}return!0}function orientLinearRings(n,e,t,r,i){i=i!==void 0?i:!1;for(let a=0,o=t.length;a<o;++a){const l=t[a],c=linearRingIsClockwise(n,e,l,r);(a===0?i&&c||!i&&!c:i&&!c||!i&&c)&&coordinates(n,e,l,r),e=l}return e}function orientLinearRingsArray(n,e,t,r,i){for(let a=0,o=t.length;a<o;++a)e=orientLinearRings(n,e,t[a],r,i);return e}function inflateEnds(n,e){const t=[];let r=0,i=0,a;for(let o=0,l=e.length;o<l;++o){const c=e[o],h=linearRingIsClockwise(n,r,c,2);if(a===void 0&&(a=h),h===a)t.push(e.slice(i,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=o+1,r=c}return t}class Polygon extends SimpleGeometry{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<closestSquaredDistanceXY(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let a=0;for(let o=0,l=r.length;o<l;++o){const c=r[o],h=new LinearRing(t.slice(a,c),e);i.push(h),a=c}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Polygon(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function fromExtent(n){if(isEmpty(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],a=[e,t,e,i,r,i,r,t,e,t];return new Polygon(a,"XY",[a.length])}function getViewportClampedResolution(n,e,t,r){const i=getWidth(e)/t[0],a=getHeight(e)/t[1];return r?Math.min(n,Math.max(i,a)):Math.min(n,Math.min(i,a))}function getSmoothClampedResolution(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),clamp$1(r,t/2,e*2)}function createSnapToResolutions(n,e,t,r){return e=e!==void 0?e:!0,function(i,a,o,l){if(i!==void 0){const c=n[0],h=n[n.length-1],f=t?getViewportClampedResolution(c,t,o,r):c;if(l)return e?getSmoothClampedResolution(i,f,h):clamp$1(i,h,f);const p=Math.min(f,i),m=Math.floor(linearFindNearest(n,p,a));return n[m]>f&&m<n.length-1?n[m+1]:n[m]}}}function createSnapToPower(n,e,t,r,i,a){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(o,l,c,h){if(o!==void 0){const f=i?getViewportClampedResolution(e,i,c,a):e;if(h)return r?getSmoothClampedResolution(o,f,t):clamp$1(o,t,f);const p=1e-9,m=Math.ceil(Math.log(e/f)/Math.log(n)-p),v=-l*(.5-p)+.5,C=Math.min(f,o),b=Math.floor(Math.log(e/C)/Math.log(n)+v),S=Math.max(m,b),x=e/Math.pow(n,S);return clamp$1(x,t,f)}}}function createMinMaxResolution(n,e,t,r,i){return t=t!==void 0?t:!0,function(a,o,l,c){if(a!==void 0){const h=r?getViewportClampedResolution(n,r,l,i):n;return!t||!c?clamp$1(a,e,h):getSmoothClampedResolution(a,h,e)}}}function disable(n){if(n!==void 0)return 0}function none(n){if(n!==void 0)return n}function createSnapToN(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(n){const e=toRadians(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256,DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const l in ViewProperty)delete t[l];this.setProperties(t,!0);const r=createResolutionConstraint(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=createCenterConstraint(e),a=r.constraint,o=createRotationConstraint(e);this.constraints_={center:i,resolution:a,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const a=this.getResolution(),o=a/2*(i[3]-t[3]+t[1]-i[1]),l=a/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-l])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=fromUserCoordinate(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=fromUserCoordinate(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&animationCallback(r,!0);return}let a=Date.now(),o=this.targetCenter_.slice(),l=this.targetResolution_,c=this.targetRotation_;const h=[];for(;i<t;++i){const f=arguments[i],p={start:a,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||inAndOut,callback:r};if(f.center&&(p.sourceCenter=o,p.targetCenter=f.center.slice(),o=p.targetCenter),f.zoom!==void 0?(p.sourceResolution=l,p.targetResolution=this.getResolutionForZoom(f.zoom),l=p.targetResolution):f.resolution&&(p.sourceResolution=l,p.targetResolution=f.resolution,l=p.targetResolution),f.rotation!==void 0){p.sourceRotation=c;const m=modulo(f.rotation-c+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=c+m,c=p.targetRotation}isNoopAnimation(p)?p.complete=!0:a+=p.duration,h.push(p)}this.animations_.push(h),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&animationCallback(i[0].callback,!1),!e)for(let a=0,o=i.length;a<o;++a){const l=i[a];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let a=!0;for(let o=0,l=i.length;o<l;++o){const c=i[o];if(c.complete)continue;const h=e-c.start;let f=c.duration>0?h/c.duration:1;f>=1?(c.complete=!0,f=1):a=!1;const p=c.easing(f);if(c.sourceCenter){const m=c.sourceCenter[0],v=c.sourceCenter[1],C=c.targetCenter[0],b=c.targetCenter[1];this.nextCenter_=c.targetCenter;const S=m+p*(C-m),x=v+p*(b-v);this.targetCenter_=[S,x]}if(c.sourceResolution&&c.targetResolution){const m=p===1?c.targetResolution:c.sourceResolution+p*(c.targetResolution-c.sourceResolution);if(c.anchor){const v=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(m,0,v,!0);this.targetCenter_=this.calculateCenterZoom(C,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const m=p===1?modulo(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+p*(c.targetRotation-c.sourceRotation);if(c.anchor){const v=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(v,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=m}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(a){this.animations_[r]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&animationCallback(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],rotate$1(r,e-this.getRotation()),add$3(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){const o=t[0]-e*(t[0]-i[0])/a,l=t[1]-e*(t[1]-i[1])/a;r=[o,l]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const r=this.getResolution();assert(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return assert(i!==void 0,"The view rotation is not defined"),getForViewAndSize(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=getWidth(e)/t[0],i=getHeight(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(a){return t/Math.pow(e,a*i)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(r/i)/t;return function(o){return Math.log(r/o)/t/a}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const a=this.padding_;if(a){const o=this.getViewportSizeMinusPadding_();i=calculateCenterOn(i,this.getViewportSize_(),[o[0]/2+a[3],o[1]/2+a[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const a=linearFindNearest(this.resolutions_,e,1);t=a,r=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=r/this.resolutions_[a+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=clamp$1(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,clamp$1(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const i=fromUserExtent(e,this.getProjection());r=fromExtent(i)}else if(e.getType()==="Circle"){const i=fromUserExtent(e.getExtent(),this.getProjection());r=fromExtent(i),r.rotate(this.getRotation(),getCenter(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),a=e.getFlatCoordinates(),o=e.getStride();let l=1/0,c=1/0,h=-1/0,f=-1/0;for(let p=0,m=a.length;p<m;p+=o){const v=a[p]*r-a[p+1]*i,C=a[p]*i+a[p+1]*r;l=Math.min(l,v),c=Math.min(c,C),h=Math.max(h,v),f=Math.max(f,C)}return[l,c,h,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],a=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const l=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(l,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,a?0:1);const h=this.getRotation(),f=Math.sin(h),p=Math.cos(h),m=getCenter(l);m[0]+=(i[1]-i[3])/2*c,m[1]+=(i[0]-i[2])/2*c;const v=m[0]*p-m[1]*f,C=m[1]*p+m[0]*f,b=this.getConstrainedCenter([v,C],c),S=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:c,center:b,duration:t.duration,easing:t.easing},S):(this.targetResolution_=c,this.targetCenter_=b,this.applyTargetState_(!1,!0),animationCallback(S,!0))}centerOn(e,t,r){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(calculateCenterOn(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let a;const o=this.padding_;if(o&&e){const l=this.getViewportSizeMinusPadding_(-r),c=calculateCenterOn(e,i,[l[0]/2+o[3],l[1]/2+o[0]],t,r);a=[e[0]-c[0],e[1]-c[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(a,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),a=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,a,r),l=this.constraints_.center(this.targetCenter_,o,a,r,this.calculateCenterShift(this.targetCenter_,o,i,a));this.get(ViewProperty.ROTATION)!==i&&this.set(ViewProperty.ROTATION,i),this.get(ViewProperty.RESOLUTION)!==o&&(this.set(ViewProperty.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),l))&&this.set(ViewProperty.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,a=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(a),l=this.constraints_.resolution(this.targetResolution_,i,o),c=this.constraints_.center(this.targetCenter_,l,o,!1,this.calculateCenterShift(this.targetCenter_,l,a,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=a,this.targetCenter_=c,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==a||!this.getCenterInternal()||!equals(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:c,resolution:l,duration:e,easing:easeOut,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,r){r=r&&fromUserCoordinate(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function animationCallback(n,e){setTimeout(function(){n(e)},0)}function createCenterConstraint(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return createExtent(n.extent,n.constrainOnlyCenter,t)}const e=createProjection(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none$1}function createResolutionConstraint(n){let e,t,r,o=n.minZoom!==void 0?n.minZoom:DEFAULT_MIN_ZOOM,l=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,p=n.showFullExtent!==void 0?n.showFullExtent:!1,m=createProjection(n.projection,"EPSG:3857"),v=m.getExtent();let C=n.constrainOnlyCenter,b=n.extent;if(!h&&!b&&m.isGlobal()&&(C=!1,b=v),n.resolutions!==void 0){const S=n.resolutions;t=S[o],r=S[l]!==void 0?S[l]:S[S.length-1],n.constrainResolution?e=createSnapToResolutions(S,f,!C&&b,p):e=createMinMaxResolution(t,r,f,!C&&b,p)}else{const x=(v?Math.max(getWidth(v),getHeight(v)):360*METERS_PER_UNIT$1.degrees/m.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),T=x/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=n.maxResolution,t!==void 0?o=0:t=x/Math.pow(c,o),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(c,l):r=x/Math.pow(c,l):r=T),l=o+Math.floor(Math.log(t/r)/Math.log(c)),r=t/Math.pow(c,l-o),n.constrainResolution?e=createSnapToPower(c,t,r,f,!C&&b,p):e=createMinMaxResolution(t,r,f,!C&&b,p)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:o,zoomFactor:c}}function createRotationConstraint(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none:typeof t=="number"?createSnapToN(t):none}return disable}function isNoopAnimation(n){return!(n.sourceCenter&&n.targetCenter&&!equals(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function calculateCenterOn(n,e,t,r,i){const a=Math.cos(-i);let o=Math.sin(-i),l=n[0]*a-n[1]*o,c=n[1]*a+n[0]*o;l+=(e[0]/2-t[0])*r,c+=(t[1]-e[1]/2)*r,o=-o;const h=l*a-c*o,f=c*a+l*o;return[h,f]}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=clamp$1(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Layer extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const a=this.getExtent();return inView(i,t.viewState)&&(!a||intersects$1(a,t.extent))}getAttributions(e){var a;if(!this.isVisible(e))return[];const t=(a=this.getSource())==null?void 0:a.getAttributions();if(!t)return[];const r=e instanceof View?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);assert(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function inView(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const Property$3={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$3.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Property$3.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const t=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(n){if(n===void 0)return createDefaultStyle;if(!n)return null;if(typeof n=="function"||n instanceof Style)return n;if(!Array.isArray(n))return flatStylesToStyleFunction([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Style){const i=new Array(e);for(let a=0;a<e;++a){const o=n[a];if(!(o instanceof Style))throw new Error("Expected a list of style instances");i[a]=o}return i}if("style"in t){const i=new Array(e);for(let a=0;a<e;++a){const o=n[a];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[a]=o}return rulesToStyleFunction(i)}return flatStylesToStyleFunction(n)}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}var LoggerByDefault={getLogger:function(n){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=n||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(n,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),r=t.shift(),i=t,a=this[r];try{Array.isArray(i)&&i.length>0?a=a.replace("%var%",i.join(" - ")):a=a.replace("%var%","%var% (not specified)")}catch{}return a}},Helper={normalyzeParameters:function(n){var e=null;if(n){var t=[];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i||(i=""),t.push(r+"="+i)}e=t.join("&")}return e},normalyzeUrl:function(n,e,t){var r=n;if(n){if(n.split("?").length-1>=2){var i=n.search(/\?/)+1;r=n.substring(0,i)+n.slice(i).replace(/\?/g,"&")}var a=n.indexOf("?");a===-1&&(r+="?"),a!==-1&&a!==n.length-1&&(r+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),r+=e):r+=this.normalyzeParameters(e)),t&&(r=encodeURIComponent(r)),r},indent:function(n,e){var t=n||0;return new Array(t+1).join("	")+e}};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise$1={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var es6Promise=es6Promise$1.exports,hasRequiredEs6Promise;function requireEs6Promise(){return hasRequiredEs6Promise||(hasRequiredEs6Promise=1,function(n,e){(function(t,r){n.exports=r()})(es6Promise,function(){function t(ae){var se=typeof ae;return ae!==null&&(se==="object"||se==="function")}function r(ae){return typeof ae=="function"}var i=void 0;Array.isArray?i=Array.isArray:i=function(ae){return Object.prototype.toString.call(ae)==="[object Array]"};var a=i,o=0,l=void 0,c=void 0,h=function(se,fe){F[o]=se,F[o+1]=fe,o+=2,o===2&&(c?c(U):N())};function f(ae){c=ae}function p(ae){h=ae}var m=typeof window<"u"?window:void 0,v=m||{},C=v.MutationObserver||v.WebKitMutationObserver,b=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){return function(){return process.nextTick(U)}}function T(){return typeof l<"u"?function(){l(U)}:k()}function P(){var ae=0,se=new C(U),fe=document.createTextNode("");return se.observe(fe,{characterData:!0}),function(){fe.data=ae=++ae%2}}function L(){var ae=new MessageChannel;return ae.port1.onmessage=U,function(){return ae.port2.postMessage(0)}}function k(){var ae=setTimeout;return function(){return ae(U,1)}}var F=new Array(1e3);function U(){for(var ae=0;ae<o;ae+=2){var se=F[ae],fe=F[ae+1];se(fe),F[ae]=void 0,F[ae+1]=void 0}o=0}function z(){try{var ae=Function("return this")().require("vertx");return l=ae.runOnLoop||ae.runOnContext,T()}catch{return k()}}var N=void 0;b?N=x():C?N=P():S?N=L():m===void 0&&typeof commonjsRequire=="function"?N=z():N=k();function K(ae,se){var fe=this,pe=new this.constructor(J);pe[j]===void 0&&Pe(pe);var be=fe._state;if(be){var Ce=arguments[be-1];h(function(){return ke(be,pe,Ce,fe._result)})}else De(fe,pe,ae,se);return pe}function q(ae){var se=this;if(ae&&typeof ae=="object"&&ae.constructor===se)return ae;var fe=new se(J);return ye(fe,ae),fe}var j=Math.random().toString(36).substring(2);function J(){}var X=void 0,te=1,H=2;function oe(){return new TypeError("You cannot resolve a promise with itself")}function he(){return new TypeError("A promises callback cannot return that same promise.")}function Ee(ae,se,fe,pe){try{ae.call(se,fe,pe)}catch(be){return be}}function G(ae,se,fe){h(function(pe){var be=!1,Ce=Ee(fe,se,function(Te){be||(be=!0,se!==Te?ye(pe,Te):ve(pe,Te))},function(Te){be||(be=!0,_e(pe,Te))},"Settle: "+(pe._label||" unknown promise"));!be&&Ce&&(be=!0,_e(pe,Ce))},ae)}function ie(ae,se){se._state===te?ve(ae,se._result):se._state===H?_e(ae,se._result):De(se,void 0,function(fe){return ye(ae,fe)},function(fe){return _e(ae,fe)})}function re(ae,se,fe){se.constructor===ae.constructor&&fe===K&&se.constructor.resolve===q?ie(ae,se):fe===void 0?ve(ae,se):r(fe)?G(ae,se,fe):ve(ae,se)}function ye(ae,se){if(ae===se)_e(ae,oe());else if(t(se)){var fe=void 0;try{fe=se.then}catch(pe){_e(ae,pe);return}re(ae,se,fe)}else ve(ae,se)}function me(ae){ae._onerror&&ae._onerror(ae._result),Ie(ae)}function ve(ae,se){ae._state===X&&(ae._result=se,ae._state=te,ae._subscribers.length!==0&&h(Ie,ae))}function _e(ae,se){ae._state===X&&(ae._state=H,ae._result=se,h(me,ae))}function De(ae,se,fe,pe){var be=ae._subscribers,Ce=be.length;ae._onerror=null,be[Ce]=se,be[Ce+te]=fe,be[Ce+H]=pe,Ce===0&&ae._state&&h(Ie,ae)}function Ie(ae){var se=ae._subscribers,fe=ae._state;if(se.length!==0){for(var pe=void 0,be=void 0,Ce=ae._result,Te=0;Te<se.length;Te+=3)pe=se[Te],be=se[Te+fe],pe?ke(fe,pe,be,Ce):be(Ce);ae._subscribers.length=0}}function ke(ae,se,fe,pe){var be=r(fe),Ce=void 0,Te=void 0,qe=!0;if(be){try{Ce=fe(pe)}catch(Ke){qe=!1,Te=Ke}if(se===Ce){_e(se,he());return}}else Ce=pe;se._state!==X||(be&&qe?ye(se,Ce):qe===!1?_e(se,Te):ae===te?ve(se,Ce):ae===H&&_e(se,Ce))}function ce(ae,se){try{se(function(pe){ye(ae,pe)},function(pe){_e(ae,pe)})}catch(fe){_e(ae,fe)}}var it=0;function Ft(){return it++}function Pe(ae){ae[j]=it++,ae._state=void 0,ae._result=void 0,ae._subscribers=[]}function Mt(){return new Error("Array Methods must be provided an Array")}var Pt=function(){function ae(se,fe){this._instanceConstructor=se,this.promise=new se(J),this.promise[j]||Pe(this.promise),a(fe)?(this.length=fe.length,this._remaining=fe.length,this._result=new Array(this.length),this.length===0?ve(this.promise,this._result):(this.length=this.length||0,this._enumerate(fe),this._remaining===0&&ve(this.promise,this._result))):_e(this.promise,Mt())}return ae.prototype._enumerate=function(fe){for(var pe=0;this._state===X&&pe<fe.length;pe++)this._eachEntry(fe[pe],pe)},ae.prototype._eachEntry=function(fe,pe){var be=this._instanceConstructor,Ce=be.resolve;if(Ce===q){var Te=void 0,qe=void 0,Ke=!1;try{Te=fe.then}catch(at){Ke=!0,qe=at}if(Te===K&&fe._state!==X)this._settledAt(fe._state,pe,fe._result);else if(typeof Te!="function")this._remaining--,this._result[pe]=fe;else if(be===Ve){var vt=new be(J);Ke?_e(vt,qe):re(vt,fe,Te),this._willSettleAt(vt,pe)}else this._willSettleAt(new be(function(at){return at(fe)}),pe)}else this._willSettleAt(Ce(fe),pe)},ae.prototype._settledAt=function(fe,pe,be){var Ce=this.promise;Ce._state===X&&(this._remaining--,fe===H?_e(Ce,be):this._result[pe]=be),this._remaining===0&&ve(Ce,this._result)},ae.prototype._willSettleAt=function(fe,pe){var be=this;De(fe,void 0,function(Ce){return be._settledAt(te,pe,Ce)},function(Ce){return be._settledAt(H,pe,Ce)})},ae}();function Ue(ae){return new Pt(this,ae).promise}function yt(ae){var se=this;return a(ae)?new se(function(fe,pe){for(var be=ae.length,Ce=0;Ce<be;Ce++)se.resolve(ae[Ce]).then(fe,pe)}):new se(function(fe,pe){return pe(new TypeError("You must pass an array to race."))})}function Ye(ae){var se=this,fe=new se(J);return _e(fe,ae),fe}function St(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Lt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ve=function(){function ae(se){this[j]=Ft(),this._result=this._state=void 0,this._subscribers=[],J!==se&&(typeof se!="function"&&St(),this instanceof ae?ce(this,se):Lt())}return ae.prototype.catch=function(fe){return this.then(null,fe)},ae.prototype.finally=function(fe){var pe=this,be=pe.constructor;return r(fe)?pe.then(function(Ce){return be.resolve(fe()).then(function(){return Ce})},function(Ce){return be.resolve(fe()).then(function(){throw Ce})}):pe.then(fe,fe)},ae}();Ve.prototype.then=K,Ve.all=Ue,Ve.race=yt,Ve.resolve=q,Ve.reject=Ye,Ve._setScheduler=f,Ve._setAsap=p,Ve._asap=h;function It(){var ae=void 0;if(typeof commonjsGlobal<"u")ae=commonjsGlobal;else if(typeof self<"u")ae=self;else try{ae=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var se=ae.Promise;if(se){var fe=null;try{fe=Object.prototype.toString.call(se.resolve())}catch{}if(fe==="[object Promise]"&&!se.cast)return}ae.Promise=Ve}return Ve.polyfill=It,Ve.Promise=Ve,Ve})}(es6Promise$1)),es6Promise$1.exports}var es6PromiseExports=requireEs6Promise();const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(n){var e=LoggerByDefault.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!n.url)throw new Error("missing parameter : url is not defined !");if(!n.method)throw new Error("missing parameter : method is not defined !");n.format||(n.format="text");var t={};switch(t.url=n.url,t.data=n.data?n.data:null,t.method=n.method,t.timeOut=n.timeOut||0,t.scope=n.scope||this,t.proxy=n.proxy||null,t.content=n.content||null,t.headers=n.headers||{referer:"http://localhost"},n.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=n.content?n.content:"application/x-www-form-urlencoded",t.headers=n.headers?n.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(n.format){case"text":this.__call(t).then(function(r){e.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;case"json":this.__callJSON(t).then(function(r){e.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;case"xml":this.__callXML(t).then(function(r){e.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(n){var e=LoggerByDefault.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(r,i){var a=n.method==="POST"||n.method==="PUT"?1:0;n.data&&(typeof n.data=="object"&&Object.keys(n.data).length||typeof n.data=="string"&&n.data.length)&&!a&&(n.url=Helper.normalyzeUrl(n.url,n.data)),e.trace("URL = ",n.url);var o=null;if(typeof window>"u"){var l=require("node-fetch"),c={headers:{Referer:"https://localhost"}};return n.data&&typeof n.data=="string"&&a&&(c={method:n.method,body:n.data,headers:{"Content-Type":n.content,Referer:"https://localhost"}}),l(n.url,c).then(function(m){if(m.ok)r(m.text());else{var v="Errors Occured on Http Request (status : '"+m.statusText+"' | url : '"+m.url+"')",C=m.status;i({message:v,status:C})}}).catch(function(m){i({message:m,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),o=new XMLHttpRequest,o.open(n.method,n.url,!0),o.overrideMimeType=n.content;var h=null;n.timeOut>0&&(e.trace("XHR - TimeOut actif !"),h=window.setTimeout(function(){var m="TimeOut Occured on Http Request with XMLHttpRequest !";i({message:m,status:-1})},n.timeOut)),a&&(e.trace("data = ",n.data),o.setRequestHeader("Content-type",n.content)),o.onerror=function(m){console.log(m),i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(m){console.log(m),i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onreadystatechange=function(m){if(o.readyState===4)if(o.status===200)window.clearTimeout(h),r(o.response);else{var v="Errors Occured on Http Request (status : '"+m.target.statusText+"' | url : '"+m.target.responseURL+"' | response : '"+m.target.response+"')",C=m.target.status;i({message:v,status:C})}};var f=n.data&&a?n.data:null;o.send(f)}else if(window.XDomainRequest){e.trace("XDomainRequest"),o=new XDomainRequest,o.open(n.method,n.url),o.overrideMimeType=n.content,n.timeOut>0&&(o.timeout=n.timeout,e.trace("XHR - TimeOut actif !")),a&&o.setRequestHeader("Content-type",n.content),o.onerror=function(){i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(){i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onload=function(m){if(o.status===200)r(o.responseText);else{var v="Errors Occured on Http Request (status : '"+m.target.statusText+"' | url : '"+m.target.responseURL+"')",C=m.target.status;i({message:v,status:C})}};var p=n.data&&a?n.data:null;o.send(p)}else throw new Error("CORS not supported")});return t},__callJSON:function(n){return this.__call(n).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",n.url,e)})},__callXML:function(n){return this.__call(n).then(function(e){var t;if(typeof window>"u"){var r=require("@xmldom/xmldom").DOMParser;t=new r().parseFromString(e,"text/xml")}else if(window.DOMParser){var i=new window.DOMParser;t=i.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",n.url,e)})}},JSONP={uuid:function(){var n=Math.floor(Date.now());return function(){return n++}}(),call:function(n){var e=LoggerByDefault.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!n)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!n.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(n.timeOut||(e.info("setting 'options.timeOut' default value"),n.timeOut=0),!n.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof n.callbackSuffix=="string"?n.callbackSuffix:this.uuid(),r=!1,i=!1,a=n.url.indexOf("callback=");if(a!==-1){r=!0;var o=n.url.indexOf("&",a);o===-1&&(o=n.url.length);var l=n.url.substring(a+9,o);l&&(i=!0,n.callbackName=l,e.info("setting 'options.callbackName' value ("+n.callbackName+") from 'options.url' parameter"))}if(!r){var c=n.url.indexOf("?");c===-1?n.url=n.url+"?callback=":c===n.url.length?n.url=n.url+"callback=":n.url=n.url+"&callback=",e.info("setting callback default key in 'options.url' : "+n.url)}var h=n.callbackName?!0:i;if(i||(n.callbackName||(e.info("setting 'options.callbackName' default value"),n.callbackName="callback",(t||t==="")&&(n.callbackName+=t)),n.url=n.url.replace("callback=","callback="+n.callbackName),e.info("setting callback function name in 'options.url' : "+n.url)),n.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),n.onTimeOut=function(){console.log("TimeOut while invoking url : "+n.url)}),!h){var f=this,p=null;n.timeOut>0&&(p=window.setTimeout(function(){window[n.callbackName]=function(){},n.onTimeOut(),f._deleteScript(t)},n.timeOut)),window[n.callbackName]=function(m){window.clearTimeout(p),n.onResponse(m),f._deleteScript(t)}}this._createScript(t,n.url)},_createScript:function(n,e){var t,r=document.getElementById("results"+n);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+n),t.setAttribute("async","true");var i=document.documentElement||document.getElementsByTagName("head")[0];r===null?i.appendChild(t):i.replaceChild(t,r)},_deleteScript:function(n){var e=document.getElementById("results"+n);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(n){var e=n||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&n.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(n.protocol==="XHR"||n.format==="json"?e.wrap=!1:n.protocol==="JSONP"&&n.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper.normalyzeUrl(n.url,t)}switch(e.protocol){case"XHR":n.method==="GET"&&n.nocache&&(e.url=Helper.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(n){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=n;typeof n=="string"||n instanceof String?(this.message=n,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$2="3.4.6",date="19/12/2024",Pkg$1={version:version$2,date};function CommonService(n){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(r){console.log("onSuccess - la reponse est la suivante : ",r)},onFailure:function(r){r.status===200||!r.status?console.log("onFailure : ",r.message):console.log("onFailure - Erreur (",r.status,") : ",r.message)}};for(var e in n)n.hasOwnProperty(e)&&(this.options[e]=n[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(r){console.log("onSuccess - la rponse brute du service est la suivante : ",r)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof n.httpMethod=="string"?n.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof n.protocol=="string"?n.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=n.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var n=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(n,a,t)}e.call(n);function t(o){this.logger.trace("CommonService::onBuildRequest : ",o),this.callService.call(n,a,r)}function r(o){this.logger.trace("CommonService::onCallService : ",o),this.analyzeResponse.call(n,a,i)}function i(o){if(this.logger.trace("CommonService::onAnalyzeResponse : ",o),o)this.options.onSuccess.call(this,o);else return a.call(this,new ErrorService("Analyse de la reponse en chec !?"))}function a(o){this.logger.trace("CommonService::onError()");var l=o;l instanceof ErrorService||(l=new ErrorService(o.message)),this.options.onFailure.call(this,l)}},buildRequest:function(n,e){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(n,e){var t=null,r=this.request,i=!!(this.options.proxyURL&&this.options.protocol==="XHR"),a={"gp-access-lib":Pkg$1.version};this.options.apiKey&&(a.apiKey=this.options.apiKey),this.options.serverUrl=Helper.normalyzeUrl(this.options.serverUrl,a,!1),i&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,this.request,!0),r=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,null,!0),r=this.request));var o=this,l={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:r,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(c){o.logger.trace("callService::onResponse()");var h=null;if(o.options.protocol==="XHR"&&(o.logger.trace("Response XHR",c),h=c),o.options.protocol==="JSONP")if(o.logger.trace("Response JSON",c),c)if(c.http)if(c.http.status!==200){n.call(o,new ErrorService({status:c.http.status,message:c.http.error,type:ErrorService.TYPE_SRVERR}));return}else h=c.xml,o.options.rawResponse&&(h=c);else h=c;else{n.call(o,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof o.options.onBeforeParse=="function"){var f=o.options.onBeforeParse(h);typeof f=="string"&&(h=f)}o.response=h,e.call(o,h)},onFailure:function(c){o.logger.trace("callService::onFailure()"),c.type=ErrorService.TYPE_SRVERR,n.call(o,new ErrorService(c))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),n.call(o,new ErrorService("TimeOut!"))}};Protocol.send(l)},analyzeResponse:function(n,e){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(n){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+n},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(n){Array.isArray(n)||(n=n.split(","));for(var e=[],t=0;t<n.length;t++)e[t]=this._key+n[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(n){if(n)return!!this.generalOptions.apiKeys[n]},getLayersId:function(n){return this.generalOptions.apiKeys[n]},getLayerId:function(n,e){if(!(!n||!e)){var t=null;if(this.layers){var r=this.layers;for(var i in r)if(r.hasOwnProperty(i)){var a=i.split("$");if(n===a[0]&&a[1]){var o=a[1].split(":"),l=a[1].split(";");if(l[1]===e.toUpperCase()){t=i;break}if(o[2]===e.toUpperCase()){t=i;break}}}}if(t)return t}},getLayersConf:function(n){var e={},t=this.getLayersId(n);if(t)for(var r=0;r<t.length;r++){var i=t[r];e[i]=this.layers[i]}return e},getLayerConf:function(n){if(this.layers)return this.layers[n]},getLayerParams:function(n,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var r=this.getLayerId(n,e);if(r){var i=this.getLayerConf(r),a=this.getLayerKey(r);if(a.length===0)return;for(var o=0;o<a.length;o++)i.serviceParams.serverUrl[a[o]]&&(t.url=i.serviceParams.serverUrl[a[o]]);if(e!=="WFS"&&(/\/v\//.test(t.url)?t.styles=" ":t.styles=i.styles[0].name),t.version=i.serviceParams.version,t.format=i.formats&&i.formats.length?i.formats[0].name:"",t.projection=i.defaultProjection,t.minScale=i.globalConstraint.minScaleDenominator,t.maxScale=i.globalConstraint.maxScaleDenominator,t.extent=i.globalConstraint.bbox,t.legends=i.legends,t.title=i.title,t.description=i.description,e==="WMS"&&(t.metadata=i.metadata),i.wmtsOptions){t.tileMatrixSetLimits=i.wmtsOptions.tileMatrixSetLimits;var l=i.wmtsOptions.tileMatrixSetLink;if(l){t.TMSLink=l;var c=this.getTMSConf(l);t.matrixIds=Object.keys(c.tileMatrices),t.tileMatrices=c.tileMatrices,t.nativeResolutions=c.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(n){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var r in t){var i=t[r];i.forEach(function(a){a===n&&e.push(r)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(n){if(this.tileMatrixSets)return this.tileMatrixSets[n]},getGlobalConstraints:function(n){var e={};if(n){var t=this.getLayerConf(n);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config(n){if(!(this instanceof Config))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=n.onSuccess!==null&&typeof n.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!n.apiKey&&!n.customConfigFile&&(n.apiKey="full"),this.options={},this.options.onSuccess=n.onSuccess,this.options.onFailure=n.onFailure,this.options.sync=n.sync||!1,this.options.listConfigUrls=n.customConfigFile?[n.customConfigFile]:Array.isArray(n.apiKey)?DefaultUrlService.Config.url(n.apiKey):DefaultUrlService.Config.url(n.apiKey.split(","))}Config.prototype=Object.create(CommonService.prototype,{});Config.prototype.constructor=Config;Config.prototype.buildRequest=function(n,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){n.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config.prototype.callService=function(n,e){this.options.sync?__callServiceSync.call(this,n,e):__callService.call(this,n,e)};var __callService=function(n,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var r=require("node-fetch");t=r}else t=window.fetch;var i=o=>t(o,{credentials:"same-origin"}).then(l=>{if(l.ok)return l.json().then(c=>c).catch(c=>{throw new Error("Exception Json : "+c)});throw new Error("Exception HTTP : "+l.status+" (status code) !")}).catch(l=>new Promise((c,h)=>{h(l)})),a=[];for(let o=0;o<this.listConfigUrls.length;o++){const l=this.listConfigUrls[o];a.push(i(l))}Promise.all(a).then(o=>{if(!o)throw new Error("results config empty !?");o.forEach(l=>{this.listConfigResults.push(l)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(o=>{n.call(this,o)})},__callServiceSync=function(n,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const i=this.listConfigUrls[t],a=new XMLHttpRequest;if(a.open("GET",i,!1),a.send(null),a.status===200){var r=JSON.parse(a.responseText);this.listConfigResults.push(r)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):n.call(this,new Error("..."))};Config.prototype.analyzeResponse=function(n,e){var t=function(l){for(var c={},h={},f={},p=0;p<l.length;p++){if(!l[p].generalOptions||!l[p].layers)return;h={...h,...l[p].generalOptions.apiKeys},c={...c,...l[p].layers},f={...f,...l[p].tileMatrixSets}}var m={generalOptions:{apiKeys:h},layers:c,tileMatrixSets:f};return m},r=t(this.listConfigResults);if(!r){n.call(this,new Error("configuration structure not conforme !"));return}var i=new ConfigInterface;Object.assign(i,r);var a=typeof window<"u"?window:{};if(a.Gp||(a.Gp={}),a.Gp.Config){Object.assign(a.Gp.Config,i);for(var o in i)a.Gp.Config[o]=i[o]}else a.Gp.Config=i;e.call(this,a.Gp.Config)};function AltiRequest(n){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=n||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];r.lon&&r.lat&&e.push(r)}this.positions=e},getPositions:function(n){if(!n)return this.positions;var e=this.positions.length-1;return n>e||n<e?(this.logger.warn("index out of range !"),this.positions):this.positions[n]},addPositions:function(n){for(var e=0;e<n.length;e++){var t=n[e];t.lon&&t.lat&&this.positions.push(n[e])}},getLon:function(){for(var n=[],e=0;e<this.positions.length;e++)n.push(this.positions[e].lon);return this.logger.trace(n),n.join(this.delimiter)},getLat:function(){for(var n=[],e=0;e<this.positions.length;e++)n.push(this.positions[e].lat);return this.logger.trace(n),n.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"delimiter",v:this.delimiter}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"format",v:this.format}),n};function AltiElevationRequest(n){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(n){this._zonly=n}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"zonly",v:this.zonly}),n.push({k:"format",v:this.format}),n.push({k:"resource",v:this.resource}),n};function AltiProfilRequest(n){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(n){this._sampling=n}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"sampling",v:this.sampling}),n.push({k:"format",v:this.format}),n.push({k:"resource",v:this.resource}),n};function AltiRequestREST(n){if(this.logger=LoggerByDefault.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=n||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var n="";return this.method==="POST"?n=this.template.post.value:this.method==="GET"&&(n=this.template.get.value),n=n.replace(/__LON__/g,this.DataObject.getLon()),n=n.replace(/__LAT__/g,this.DataObject.getLat()),n=n.replace(/__INDENT__/g,this.DataObject.indent),n=n.replace(/__CRS__/g,this.DataObject.crs),n=n.replace(/__RESOURCE__/g,this.DataObject.resource),n=n.replace(/__MEASURES__/g,this.DataObject.measures),n=n+this.__addDataInputs(),this.logger.trace("traduction tmpl",n),this.requestString=n,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var n;if(this.method==="POST")n=this.template.post;else if(this.method==="GET")n=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=n.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=n.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(n){if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=n||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var n=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return n.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var n="";if(this.method==="POST")n=this.template.post.value;else if(this.method==="GET")n=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return n=n.replace(/__SERVICE__/g,this.paramservice),n=n.replace(/__VERSION__/g,this.paramversion),n=n.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),n=n.replace(/__IDENTIFIER__/g,this.paramidentifier),n=n.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(n=n.replace(/__NAMESPACE__/g,this.namespaceByDefault),n=n.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),n=n.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),n?(this.requestString=n,this.logger.trace("traduction tmpl",n),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var n=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",r=this,i=this.DataObject.getData(),a=0;a<i.length;a++)(function(o){e&&(e=o===i.length-1?"":";"),t=t.concat(r.__addDataInput(n,i[o].k,i[o].v),e)})(a);return t},__addDataInput:function(n,e,t){var r=n;return r=r.replace(/__KEY__/g,e),r=r.replace(/__DATA__/g,t),r},setMethod:function(n){n==="GET"||n==="POST"?this.method=n:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(n){var e=LoggerByDefault.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!n.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(n.type){case"Elevation":n.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(n.param);break;case"Profil":n.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(n.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var r={data:t,method:n.method,param:n.wps},i=new WPS(r);if(!i.processRequestString())throw new Error("Enable to process request !");return i.requestString}},AltiRequestFactory={build:function(n){var e=LoggerByDefault.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,r={type:n.sampling?"Profil":"Elevation",method:n.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};r.param.positions=n.positions,r.param.format=n.outputFormat,r.param.sampling=n.sampling,r.param.zonly=n.zonly,r.param.measures=n.measures,r.param.resource=n.resource;var i=n.onError!==null&&typeof n.onError=="function",a=n.onSuccess!==null&&typeof n.onSuccess=="function",o=null;switch(n.api){case"REST":var l=new AltiRequestREST(r);if(!l.processRequestString()){if(o="Error in process request (rest) !",i){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}t=l.requestString;break;case"WPS":if(r.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(r),!t){if(o="Error in process request (wps) !",i){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or WPS) !",i){n.onError.call(n.scope,new ErrorService(o));return}throw new Error(o)}return a&&n.onSuccess.call(n.scope,t),t}};function XML$1(n){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,n&&(n.xmlString&&typeof n.xmlString=="string"&&(this.xmlString=n.xmlString,this.xmlDoc=__getXMLDOC(n.xmlString)),n.reader&&this.setReader(n.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(n){n&&typeof n=="string"&&(this.xmlString=n,this.xmlDoc=__getXMLDOC(n))},getReader:function(){return this.reader},setReader:function(n){n&&n.read&&typeof n.read=="function"&&(this.reader=n)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(n){this.xmlDoc=n},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var n=__getRootNode(this.xmlDoc);if(n){var e;return this.reader&&this.reader.read?e=this.reader.read(n):(e={},e[n.nodeName]=__readDefault(n)),e}else return{}}}};function __getXMLDOC(n){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(n,"text/xml")}else{var t,r,i="Erreur lors du parsing de la rponse du service : XML non conforme";if(window.ActiveXObject){r=new window.ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(n);var a=r.parseError;if(a.errorCode)throw a.line&&a.linepos&&(i+="( ligne "+a.line+", colonne "+a.linepos),a.reason&&(i+=":  "+a.reason+")"),new Error(i);return r}else if(window.DOMParser){t=new window.DOMParser;try{r=t.parseFromString(n,"text/xml")}catch(h){throw h.message==="SyntaxError"?new Error(i):new Error("Erreur lors du parsing de la rponse du service : "+h.message)}if(r.getElementsByTagName("parsererror").length>0)for(var o=r.getElementsByTagName("parsererror"),l=0;l<o.length;l++){var c=o[l].innerHTML;if(c.indexOf("Huge input lookup")===-1)throw i+="("+c+")",new Error(i)}else if(!r.documentElement)throw new Error(i);return r}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(n){var e;return n.nodeType===9?e=n.documentElement:n.nodeType===1&&(e=n),e}function __readDefault(n){var e={};if(n.attributes.length>0){var t=__getAttributes(n);e.attributes=t}if(n.hasChildNodes()){for(var r={},i,a=n.childNodes,o=0;o<a.length;o++)if(i=a[o],i.nodeType===3)e.textContent=i.nodeValue;else if(i.nodeType===1)if(r=__readDefault(i),!e[i.nodeName])e[i.nodeName]=r;else{if(!Array.isArray(e[i.nodeName])){var l=e[i.nodeName];e[i.nodeName]=[],e[i.nodeName].push(l)}e[i.nodeName].push(r)}}return e}function __getAttributes(n){if(n.attributes.length>0){for(var e={},t=n.attributes,r=0;r<t.length;r++){var i=t[r];e[i.nodeName]=i.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(n){var e=new AltiResponse;if(n.hasChildNodes())for(var t=n.childNodes,r,i,a=0;a<t.length;a++)r=t[a],AltiResponseReader.READERS[r.nodeName]&&(i=AltiResponseReader.READERS[r.nodeName](r),e.elevations.push(i));return e},elevation:function(n){var e=new Elevation;if(n.hasChildNodes())for(var t=n.childNodes,r,i=0;i<t.length;i++)r=t[i],AltiResponseReader.READERS[r.nodeName]&&AltiResponseReader.READERS[r.nodeName](r,e);return e},lat:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : latitude attendue mais absente")},lon:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : longitude attendue mais absente")},z:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la rponse du service : altitude attendue mais absente")},acc:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente")},source_name:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_name attendue mais absente")},source_measure:function(n,e){var t=n.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_measure attendue mais absente")},measures:function(n,e){e.measures=[];var t;if(n.hasChildNodes())for(var r=n.childNodes,i,a,o=0;o<r.length;o++){t=new Measure,i=r[o],a=i.childNodes;for(var l=0;l<a.length;l++)if(AltiResponseReader.READERS[a[l].nodeName])AltiResponseReader.READERS[a[l].nodeName](a[l],t);else throw new Error("Erreur dans la lecture de la rponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(n){var e={};if(n.hasChildNodes())for(var t=n.childNodes,r,i=0;i<t.length;i++)r=t[i],r.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(r));return e},exception:function(n){var e={},t=n.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var r=n.firstChild;return r&&r.nodeType===3&&(e.exception=r.nodeValue),e},error:function(n){var e={error:{}};if(n.hasChildNodes())for(var t=n.childNodes,r,i=0;i<t.length;i++){r=t[i];var a;r.nodeType===1&&r.nodeName==="code"&&(a=r.firstChild,a&&a.nodeType===3&&(e.error.code=a.nodeValue)),r.nodeType===1&&r.nodeName==="description"&&(a=r.firstChild,a&&a.nodeType===3&&(e.error.description=a.nodeValue))}return e}};AltiResponseReader.read=function(n){if(n.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(n);return e}else if(n.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(n);return t}else if(n.nodeName==="error"){var r=AltiResponseReader.READERS.error(n);return r}else throw new Error("Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(n){var e=LoggerByDefault.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{switch(n.outputFormat){case"xml":e.trace("analyze response : xml");try{var r=new XML$1({reader:AltiResponseReader});if(typeof n.response=="string"?r.setXMLString(n.response):r.setXMLDoc(n.response),t=r.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(p){var i=p.message;n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",i),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof n.response);var a=null;if(typeof n.response=="string"?a=JSON.parse(n.response):a=n.response,a&&a.error){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(a){var o=a.elevations,l=new AltiResponse,c;if(Array.isArray(o)&&o.length)for(var h=0;h<o.length;h++)c=new Elevation,typeof o[h]=="object"?(o[h].lon&&(c.lon=o[h].lon),o[h].lat&&(c.lat=o[h].lat),o[h].z&&(c.z=o[h].z),o[h].acc&&(c.acc=o[h].acc),o[h].measures&&(c.measures=o[h].measures)):typeof o[h]=="number"&&(c.z=o[h]),Array.isArray(l.elevations)&&l.elevations.push(c);t=l}if(!t){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var f=t.error.description;n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",f),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function Alti(n){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!n.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(n.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=n.positions,this.options.outputFormat=typeof n.outputFormat=="string"?n.outputFormat.toLowerCase():"xml",this.options.resource=n.resource||"ign_rge_alti_wld",this.options.sampling=n.sampling||null,this.options.api=typeof n.api=="string"?n.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=n.zonly||!1,this.options.measures=n.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var r=(n.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[r];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var i=this.options.serverUrl.lastIndexOf(".");if(i!==-1){var a=this.options.serverUrl.substring(i+1);if(a&&a.length<5)switch(this.logger.trace("Server Extension URL : "+a),a.toLowerCase()){case"json":case"xml":this.options.outputFormat=a.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(r){this.request=r,e.call(this,this.request)},onError:n,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(n){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=n||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var n={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(n[e]=this.filters[e]);return n},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var n=[];this.geocodeMethod==="search"&&n.push({k:"q",v:this.query}),this.index&&n.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&n.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(n.push({k:"lon",v:this.lon}),n.push({k:"lat",v:this.lat})),this.maxResp&&n.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&n.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)n.push({k:t,v:e[t]});return n};function GeocodeRequestREST(n){if(this.logger=LoggerByDefault.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var n="";const t=new GeocodeParamREST(this.settings).getParams();for(var r=0;r<t.length;r++){var i=t[r];n&&(n+="&"),n+=i.k+"="+i.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+n,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(n){var e=LoggerByDefault.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=n||{},r=new GeocodeRequestREST(t);if(!r.processRequestString())throw new Error("Error process request (rest) !");var i=r.requestString;return e.trace(i),i}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(n){var e=new GeocodeResponse;const t=JSON.parse(n);if(t.type==="FeatureCollection")for(var r=0;r<t.features.length;++r)_parseFeature(t.features[r],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var i=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:i,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(n,e){var t=new GeocodedLocation;if(n.geometry&&n.geometry.type==="Point"&&(t.position={lon:n.geometry.coordinates[0],lat:n.geometry.coordinates[1]}),n.properties){for(var r in n.properties)r==="score"?t.accuracy=n.properties[r]:r==="_type"?n.properties[r]==="address"?t.type="StreetAddress":n.properties[r]==="poi"?t.type="PositionOfInterest":(n.properties[r]==="parcel"||n.properties[r]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[r]=n.properties[r];n.properties._type==="address"&&(t.matchType=n.properties.number!==void 0&&n.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(n){return{exceptionReport:n}}var GeocodeReponseFactory={build:function(n){var e=null;if(n.response)if(n.rawResponse)e=n.response;else{try{if(e=new GeocodeResponseParser().parse(n.response),!e)throw new Error("L'analyse de la rponse du service !?")}catch(r){var t=r.message;typeof n.response=="string"?t+="('"+n.response+"')":t+="('"+n.response.documentElement.innerHTML+"')",n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}n.onSuccess.call(n.scope,e)}};function Geocode(n){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),r=0;r<t.length;r++){var i=t[r];(typeof e.filters[i]>"u"||typeof e.filters[i]=="object"&&Object.keys(e.filters[i]).length===0||typeof e.filters[i]=="string"&&e.filters[i].length===0||Array.isArray(e.filters[i])&&e.filters[i].length===0)&&delete this.options.filters[i]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(n){const e=n;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode(n){if(!(this instanceof ReverseGeocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),r=0;r<t.length;r++){var i=t[r];(typeof e.filters[i]>"u"||typeof e.filters[i]=="object"&&Object.keys(e.filters[i]).length===0||typeof e.filters[i]=="string"&&e.filters[i].length===0||Array.isArray(e.filters[i])&&e.filters[i].length===0)&&delete this.options.filters[i]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode.prototype=Object.create(CommonService.prototype,{});ReverseGeocode.prototype.constructor=ReverseGeocode;ReverseGeocode.prototype.patchOptionConvertor=function(n){var e=n;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode.prototype.buildRequest=function(n,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode.prototype.bbox2Json=function(n){return{type:"Polygon",coordinates:[[[n.left,n.top],[n.right,n.top],[n.right,n.bottom],[n.left,n.bottom],[n.left,n.top]]]}};ReverseGeocode.prototype.circle2Json=function(n){return{type:"Circle",radius:n.radius,coordinates:[n.x,n.y]}};ReverseGeocode.prototype.polygon2Json=function(n){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<n.length;++t)e.coordinates[0].push([n[t].x,n[t].y]);return e};ReverseGeocode.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(n){var e=LoggerByDefault.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{var r=null;if(typeof n.response=="string"?r=JSON.parse(n.response):r=n.response,r){if(r.error){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",r.error.description),status:r.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,r.results&&Array.isArray(r.results))for(var i=null,a=0;a<r.results.length;a++){var o=r.results[a];i=new SuggestedLocation,o&&(o.country==="StreetAddress"?(i.street=o.street,i.type="StreetAddress"):o.country==="PositionOfInterest"&&(i.poi=o.street,i.type="PositionOfInterest",i.poiType=o.poiType),i.position&&(i.position.x=o.x,i.position.y=o.y),i.kind=o.kind,i.commune=o.city,i.fullText=o.fulltext,i.postalCode=o.zipcode,i.classification=o.classification),t.suggestedLocations.push(i)}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function AutoComplete(n){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(n);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(n){const e=n;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(n,e){var t="";this.options.territory&&(t=this.options.territory);var r="";this.options.type&&(r=this.options.type.join(",")),this.request=Helper.normalyzeParameters({text:encodeURIComponent(this.options.text),type:r,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:n,scope:this};AutoCompleteResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(n){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=n||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var n=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];n.push(t.x+","+t.y)}return n.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var n=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)n.push(JSON.stringify(this.constraints[e]));return n.join("|")}};RouteParamREST.prototype.getParams=function(){var n=[];return n.push({k:"resource",v:this.resource}),n.push({k:"start",v:this.start}),n.push({k:"end",v:this.end}),n.push({k:"geometryFormat",v:"geojson"}),this.optimization&&n.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&n.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&n.push({k:"profile",v:this.getProfile()}),this.constraints&&n.push({k:"constraints",v:this.getConstraints()}),this.crs&&n.push({k:"crs",v:this.crs}),this.distanceUnit&&n.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&n.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&n.push({k:"waysAttributes",v:this.getWaysAttributes()}),n};function RouteRequestREST(n){if(this.logger=LoggerByDefault.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var n=new RouteParamREST(this.settings),e=n.getParams(),t="",r=0;r<e.length;r++){var i=e[r];t&&(t+="&"),t+=i.k+"="+i.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(n){var e=LoggerByDefault.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,r=n||{},i=n.onError!==null&&typeof n.onError=="function",a=null,o=new RouteRequestREST(r);if(!o.processRequestString()){if(a="Error process request (rest) !",i){n.onError.call(n.scope,new ErrorService(a));return}throw new Error(a)}return t=o.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(n){var e=LoggerByDefault.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{e.trace("analyze response : json");var r;if(typeof n.response=="string"?r=JSON.parse(n.response):r=n.response,r){if(r.message){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",r.message)));return}var i=[],a=[],o=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(r.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(r.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(r.bbox[0]),t.bbox.bottom=parseFloat(r.bbox[1]),t.bbox.right=parseFloat(r.bbox[2]),t.bbox.top=parseFloat(r.bbox[3])),t.hasOwnProperty("routeGeometry")&&!n.geometryInInstructions&&(t.routeGeometry=r.geometry),t.hasOwnProperty("routeInstructions")&&n.geometryInInstructions){var l=r.portions,c;if(Array.isArray(l)&&l.length)for(c=0;c<l.length;c++)i.push(l[c]);if(i.length)for(c=0;c<i.length;c++)a.push(i[c].steps);if(a.length)for(c=0;c<a.length;c++)o=o.concat(a[c]);o.forEach(function(h){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=h.duration,t.routeInstructions[t.routeInstructions.length-1].distance=h.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=h.geometry,h.name==="Valeur non renseigne"&&(h.name=""),h.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Dpart";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrive";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+=" la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+h.instruction.type+"?";break}if(h.instruction.modifier)switch(h.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" compltement  droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+="  droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lgrement  droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lgrement  gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+="  gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" compltement  gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+h.instruction.modifier+"?";break}h.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${h.instruction.exit}e sortie`),h.attributes.name&&((h.attributes.name.nom_1_droite||h.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),h.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${h.attributes.name.nom_1_droite}`),h.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${h.attributes.name.toponyme}`))})}}if(!t){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function Route(n){if(!(this instanceof Route))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!n.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(n.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(n.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!n.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(n.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(n.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(n.outputFormat&&n.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=n.resource||"bdtopo-osrm",this.options.startPoint=n.startPoint,this.options.endPoint=n.endPoint,this.options.viaPoints=n.viaPoints||[],this.options.routePreference=n.routePreference||"fastest",n.graph?(n.graph==="Voiture"&&(this.options.graph="car"),n.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],n.constraints)if(Array.isArray(n.constraints))for(var e=0;e<n.constraints.length;e++)this.options.constraints.push(n.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},r={},i={};if(n.exclusions&&n.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var a=0;a<n.exclusions.length;a++){if(typeof n.exclusions[a]=="string")n.exclusions[a]=n.exclusions[a].toLowerCase();else continue;n.exclusions[a]==="toll"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="autoroute",this.options.constraints.push(i)),n.exclusions[a]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),n.exclusions[a]==="bridge"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="pont",this.options.constraints.push(r))}}if(this.options.geometryInInstructions=n.geometryInInstructions||!1,this.options.provideBbox=n.provideBbox||!0,this.options.distanceUnit=n.distanceUnit||"m",this.options.timeUnit=n.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=n.srs||"EPSG:4326",this.options.waysAttributes=n.waysAttributes||[],!this.options.serverUrl){var o=DefaultUrlService.Route.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route.prototype=Object.create(CommonService.prototype,{});Route.prototype.constructor=Route;Route.prototype.buildRequest=function(n,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route.prototype.analyzeResponse=function(n,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:n,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(n){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=n||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var n=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)n.push(JSON.stringify(this.constraints[e]));return n.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var n=[];return n.push({k:"resource",v:this.resource}),n.push({k:"point",v:this.getLocation()}),n.push({k:"direction",v:this.getDirection()}),n.push({k:"costType",v:this.costType}),n.push({k:"costValue",v:this.costValue}),n.push({k:"profile",v:this.profile}),n.push({k:"timeUnit",v:this.timeUnit}),n.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&n.push({k:"crs",v:this.crs}),this.constraints&&n.push({k:"constraints",v:this.getConstraints()}),n};function ProcessIsoCurveRequest(n){if(this.logger=LoggerByDefault.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!n)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=n,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var n="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),r=t.getParams();for(e=0;e<r.length;e++){var i=r[e];n&&(n+="&"),n+=i.k+"="+i.v}break;case"POST":this.logger.trace("Process POST Request");var a={};a.resource=this.settings.resource,a.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(a.costType="distance",a.costValue=this.settings.distance):(a.costType="time",a.costValue=this.settings.time),a.profile=this.settings.graph,this.settings.reverse?a.direction="arrival":a.direction="departure",a.constraints=this.settings.constraints,a.distanceUnit=this.settings.distanceUnit,a.timeUnit=this.settings.timeUnit,a.crs=this.settings.srs,n=JSON.stringify(a);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(n),this.requestString=n,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(n){var e=LoggerByDefault.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(n.response)if(n.rawResponse)e.trace("analyze response : raw"),t=n.response;else{e.trace("analyze response : json");var r;if(typeof n.response=="string"?r=JSON.parse(n.response):r=n.response,t=new ProcessIsoCurveResponse,r){r.costType==="distance"?(t.time="",t.distance=r.costValue):(t.time=r.costValue,t.distance=""),t.message="",t.id="",t.srs=r.crs,t.geometry=r.geometry;var i=r.point.split(",");t.location&&(t.location.x=i[0],t.location.y=i[1])}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",n.response)));return}if(t.exceptionReport){n.onError.call(n.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{n.onError.call(n.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}n.onSuccess.call(n.scope,t)}};function ProcessIsoCurve(n){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!n.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(n.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(n.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!n.time&&!n.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!n.time&&n.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),n.time&&!n.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=n.resource||"bdtopo-valhalla",this.options.exclusions=n.exclusions||[],this.options.reverse=n.reverse||!1,this.options.srs=n.srs||"EPSG:4326",this.options.distanceUnit=n.distanceUnit||"m",this.options.timeUnit=n.timeUnit||"second",n.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,n.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,n.graph?(n.graph==="Voiture"&&(this.options.graph="car"),n.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],n.constraints)if(Array.isArray(n.constraints))for(var e=0;e<n.constraints.length;e++)this.options.constraints.push(n.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},r={},i={};if(n.exclusions&&n.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var a=0;a<n.exclusions.length;a++){if(typeof n.exclusions[a]=="string")n.exclusions[a]=n.exclusions[a].toLowerCase();else continue;n.exclusions[a]==="toll"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="autoroute",this.options.constraints.push(i)),n.exclusions[a]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),n.exclusions[a]==="bridge"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="pont",this.options.constraints.push(r))}}if(this.options.outputFormat=typeof n.outputFormat=="string"?n.outputFormat.toLowerCase():"json",n.outputFormat&&n.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var o=DefaultUrlService.ProcessIsoCurve.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(n,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(r){n.call(this,new ErrorService(r.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(n,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:n,scope:this};ProcessIsoCurveResponseFactory.build(t)}else n.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(n){var e=new Config(n);e.call()},getAltitude:function(n){var e=new Alti(n);e.call()},geocode:function(n){var e=new Geocode(n);e.call()},reverseGeocode:function(n){var e=new ReverseGeocode(n);e.call()},autoComplete:function(n){var e=new AutoComplete(n);e.call()},route:function(n){var e=new Route(n);e.call()},isoCurve:function(n){var e=new ProcessIsoCurve(n);e.call()}};const servicesVersion=Pkg$1.version,servicesDate=Pkg$1.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper;const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,r){super(e),this.element=t,this.index=r}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,i,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}let withCredentials=!1;function loadFeaturesXhr(n,e,t,r,i,a,o){const l=new XMLHttpRequest;l.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=withCredentials,l.onload=function(c){if(!l.status||l.status>=200&&l.status<300){const h=e.getType();try{let f;h=="text"||h=="json"?f=l.responseText:h=="xml"?f=l.responseXML||l.responseText:h=="arraybuffer"&&(f=l.response),f?a(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):o()}catch{o()}}else o()},l.onerror=o,l.send()}function xhr(n,e){return function(t,r,i,a,o){loadFeaturesXhr(n,e,t,r,i,(l,c)=>{this.addFeatures(l),a!==void 0&&a(l)},o||VOID)}}function all$1(n,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(n,e){return[n]}function tile(n){return function(e,t,r){const i=n.getZForResolution(fromUserResolution(t)),a=n.getTileRangeForExtentAndZ(fromUserExtent(e),i),o=[],l=[i,0,0];for(l[1]=a.minX;l[1]<=a.maxX;++l[1])for(l[2]=a.minY;l[2]<=a.maxY;++l[2])o.push(toUserExtent(n.getTileCoordExtent(l)));return o}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(assert(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function linearRingss(n,e,t,r){const i=[];let a=createEmpty();for(let o=0,l=t.length;o<l;++o){const c=t[o];a=createOrUpdateFromFlatCoordinates(n,e,c[0],r),i.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=c[c.length-1]}return i}function interpolatePoint(n,e,t,r,i,a,o){let l,c;const h=(t-e)/r;if(h===1)l=e;else if(h===2)l=e,c=i;else if(h!==0){let f=n[e],p=n[e+1],m=0;const v=[0];for(let S=e+r;S<t;S+=r){const x=n[S],T=n[S+1];m+=Math.sqrt((x-f)*(x-f)+(T-p)*(T-p)),v.push(m),f=x,p=T}const C=i*m,b=binarySearch$1(v,C);b<0?(c=(C-v[-b-2])/(v[-b-1]-v[-b-2]),l=e+(-b-2)*r):l=e+b*r}o=o>1?o:2,a=a||new Array(o);for(let f=0;f<o;++f)a[f]=l===void 0?NaN:c===void 0?n[l+f]:lerp(n[l+f],n[l+r+f],c);return a}function lineStringCoordinateAtM(n,e,t,r,i,a){if(t==e)return null;let o;if(i<n[e+r-1])return a?(o=n.slice(e,e+r),o[r-1]=i,o):null;if(n[t-1]<i)return a?(o=n.slice(t-r,t),o[r-1]=i,o):null;if(i==n[e+r-1])return n.slice(e,e+r);let l=e/r,c=t/r;for(;l<c;){const m=l+c>>1;i<n[(m+1)*r-1]?c=m:l=m+1}const h=n[l*r-1];if(i==h)return n.slice((l-1)*r,(l-1)*r+r);const f=n[(l+1)*r-1],p=(i-h)/(f-h);o=[];for(let m=0;m<r-1;++m)o.push(lerp(n[(l-1)*r+m],n[l*r+m],p));return o.push(i),o}function lineStringsCoordinateAtM(n,e,t,r,i,a,o){if(o)return lineStringCoordinateAtM(n,e,t[t.length-1],r,i,a);let l;if(i<n[r-1])return a?(l=n.slice(0,r),l[r-1]=i,l):null;if(n[n.length-1]<i)return a?(l=n.slice(n.length-r),l[r-1]=i,l):null;for(let c=0,h=t.length;c<h;++c){const f=t[c];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return lineStringCoordinateAtM(n,e,f,r,i,!1);e=f}}return null}class Circle extends SimpleGeometry{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const a=this.flatCoordinates,o=e-a[0],l=t-a[1],c=o*o+l*l;if(c<i){if(c===0)for(let h=0;h<this.stride;++h)r[h]=a[h];else{const h=this.getRadius()/Math.sqrt(c);r[0]=a[0]+h*o,r[1]=a[1]+h*l;for(let f=2;f<this.stride;++f)r[f]=a[f]}return r.length=this.stride,c}return i}containsXY(e,t){const r=this.flatCoordinates,i=e-r[0],a=t-r[1];return i*i+a*a<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,r=t[this.stride]-t[0];return createOrUpdate$2(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+r;for(let a=1;a<t;++a)i[t+a]=e[a];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let a=deflateCoordinate(i,0,e,this.stride);i[a++]=i[0]+t;for(let o=1,l=this.stride;o<l;++o)i[a++]=i[o];i.length=a,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const r=this.getCenter(),i=this.getStride();this.setCenter(rotate(r,0,r.length,i,e,t,r)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(listen(e[t],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<closestSquaredDistanceXY(this.getExtent(),e,t))return i;const a=this.geometries_;for(let o=0,l=a.length;o<l;++o)i=a[o].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,a=r.length;i<a;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)extend$3(e,t[r].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let a=0,o=r.length;a<o;++a){const l=r[a],c=l.getSimplifiedGeometry(e);t.push(c),c!==l&&(i=!0)}return i?new GeometryCollection(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,a=r.length;i<a;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=getCenter(this.getExtent()));const i=this.geometries_;for(let a=0,o=i.length;a<o;++a)i[a].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,a=r.length;i<a;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(n){return n.map(e=>e.clone())}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<closestSquaredDistanceXY(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,a=[],o=[];for(let c=0,h=i.length;c<h;++c){const f=i[c];extend$4(a,f.getFlatCoordinates()),o.push(a.length)}const l=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(l,a),this.ends_=o}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<closestSquaredDistanceXY(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let a=0;for(let o=0,l=t.length;o<l;++o){const c=t[o],h=new LineString(e.slice(a,c),r);i.push(h),a=c}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,a=this.stride;for(let o=0,l=i.length;o<l;++o){const c=i[o],h=interpolatePoint(t,r,c,a,.5);extend$4(e,h),r=c}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new MultiLineString(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<closestSquaredDistanceXY(this.getExtent(),e,t))return i;const a=this.flatCoordinates,o=this.stride;for(let l=0,c=a.length;l<c;l+=o){const h=squaredDistance$1(e,t,a[l],a[l+1]);if(h<i){i=h;for(let f=0;f<o;++f)r[f]=a[l+f];r.length=o}}return i}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let a=0,o=e.length;a<o;a+=r){const l=new Point$1(e.slice(a,a+r),t);i.push(l)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,a=t.length;i<a;i+=r){const o=t[i],l=t[i+1];if(containsXY(e,o,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiPolygon extends SimpleGeometry{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,a=[],o=[];for(let l=0,c=i.length;l<c;++l){const h=i[l],f=a.length,p=h.getEnds();for(let m=0,v=p.length;m<v;++m)p[m]+=f;extend$4(a,h.getFlatCoordinates()),o.push(p)}t=i.length===0?this.getLayout():i[0].getLayout(),e=a,r=o}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,a=t.length;i<a;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<closestSquaredDistanceXY(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new MultiPolygon(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const a=this.endss_[e-1];t=a[a.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let a=0,o=r.length;a<o;++a)r[a]-=t;return new Polygon(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let a=0;for(let o=0,l=r.length;o<l;++o){const c=r[o].slice(),h=c[c.length-1];if(a!==0)for(let p=0,m=c.length;p<m;++p)c[p]-=a;const f=new Polygon(t.slice(a,h),e,c);i.push(f),a=h}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,t,r,i,a,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=a,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,a=r.length;i<a;++i){const o=r[i],l=interpolatePoint(e,t,o,2,.5);extend$4(this.flatMidpoints_,l),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=getHeight(r)/getHeight(t);compose(tmpTransform,r[0],r[3],i,-i,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=douglasPeucker(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=douglasPeuckerArray(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=quantizeArray(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new RenderFeature(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[getUid(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,a=t.length;i<a;i++){const o=e[i],l=t[i],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:l};r[i]=c,this.items_[getUid(l)]=c}this.rbush_.load(r)}remove(e){const t=getUid(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[getUid(t)],i=[r.minX,r.minY,r.maxX,r.maxY];equals$1(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,a=e.length;i<a;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class VectorSourceEvent extends BaseEvent{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new Collection(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof RenderFeature){const a=this.idIndex_[i];a instanceof RenderFeature?Array.isArray(a)?a.push(t):this.idIndex_[i]=[a,t]:r=!1}else r=!1}return r&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let a=0,o=e.length;a<o;a++){const l=e[a],c=getUid(l);this.addToIndex_(c,l)&&r.push(l)}for(let a=0,o=r.length;a<o;a++){const l=r[a],c=getUid(l);this.setupChangeEvents_(c,l);const h=l.getGeometry();if(h){const f=h.getExtent();t.push(f),i.push(l)}else this.nullGeometryFeatures_[c]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(VectorEventType.ADDFEATURE))for(let a=0,o=r.length;a<o;a++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,r[a]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const a=i.getGeometry();if(a instanceof RenderFeature||a.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof RenderFeature||i.intersectsExtent(e)){const a=t(r);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=wrapAndSliceX(e,t);return[].concat(...i.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let a=null;const o=[NaN,NaN];let l=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const f=h.getGeometry(),p=l;if(l=f instanceof RenderFeature?0:f.closestPointXY(r,i,o,l),l<p){a=h;const m=Math.sqrt(l);c[0]=r-m,c[1]=i-m,c[2]=r+m,c[3]=i+m}}}),a}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=getUid(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const a=t.getId();if(a!==void 0){const o=a.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,a=this.strategy_(e,t,r);for(let o=0,l=a.length;o<l;++o){const c=a[o];i.forEachInExtent(c,function(f){return containsExtent(f.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,c,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),i.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(equals$1(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const a=i.toString(),o=this.idIndex_[a];o===e?delete this.idIndex_[a]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[a]=o[0]))}return delete this.uidIndex_[t],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=get$3(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(n,e,t){const r=t?get$3(t.featureProjection):null,i=t?get$3(t.dataProjection):null;let a=n;if(r&&i&&!equivalent(r,i)){e&&(a=n.clone());const o=e?r:i,l=e?i:r;o.getUnits()==="tile-pixels"?a.transform(o,l):a.applyTransform(getTransform(o,l))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),l=function(c){for(let h=0,f=c.length;h<f;++h)c[h]=Math.round(c[h]*o)/o;return c};a===n&&(a=n.clone()),a.applyTransform(l)}return a}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(n,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(n,0,e,t)||(n=n.slice(),orientLinearRingsArray(n,0,e,t)),n):(linearRingsAreOriented(n,0,e,t)||(n=n.slice(),orientLinearRings(n,0,e,t)),n)}function createRenderFeature(n,e){var a;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>createRenderFeature({...n,geometry:o})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return transformGeometryWithOptions(new RenderFeature(r,r==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,i):t.flatCoordinates,(a=t.ends)==null?void 0:a.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function createGeometry(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>createGeometry(i,e));return new GeometryCollection(r)}const t=GeometryConstructor[n.type];return transformGeometryWithOptions(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class GeoJSON extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=readGeometryInternal(r.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:i,id:r.id,properties:r.properties},t);const a=new Feature;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&a.setGeometryName(r.geometry_name),a.setGeometry(createGeometry(i,t)),"id"in r&&a.setId(r.id),r.properties&&a.setProperties(r.properties,!0),a}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const a=e;i=[];const o=a.features;for(let l=0,c=o.length;l<c;++l){const h=this.readFeatureFromObject(o[l],t);h&&i.push(h)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=get$3(t.properties.name);else if(t.type==="EPSG")r=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const a=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=writeGeometry(o,t),delete a[e.getGeometryName()]),isEmpty$1(a)||(r.properties=a),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,a=e.length;i<a;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}}function readGeometryInternal(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=readPointGeometry(n);break}case"LineString":{t=readLineStringGeometry(n);break}case"Polygon":{t=readPolygonGeometry(n);break}case"MultiPoint":{t=readMultiPointGeometry(n);break}case"MultiLineString":{t=readMultiLineStringGeometry(n);break}case"MultiPolygon":{t=readMultiPolygonGeometry(n);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function readGeometry(n,e){const t=readGeometryInternal(n);return createGeometry(t,e)}function readGeometryCollectionGeometry(n,e){return n.geometries.map(function(r){return readGeometryInternal(r)})}function readPointGeometry(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(((r=e[0])==null?void 0:r.length)||2)}}function readMultiLineStringGeometry(n){var a,o;const e=n.coordinates,t=((o=(a=e[0])==null?void 0:a[0])==null?void 0:o.length)||2,r=[],i=deflateCoordinatesArray(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:getLayoutForStride(t)}}function readMultiPointGeometry(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((t=e[0])==null?void 0:t.length)||2)}}function readMultiPolygonGeometry(n){var a,o;const e=n.coordinates,t=[],r=((o=(a=e[0])==null?void 0:a[0])==null?void 0:o[0].length)||2,i=deflateMultiCoordinatesArray(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:getLayoutForStride(r)}}function readPolygonGeometry(n){var a,o;const e=n.coordinates,t=[],r=(o=(a=e[0])==null?void 0:a[0])==null?void 0:o.length,i=deflateCoordinatesArray(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:getLayoutForStride(r)}}function writeGeometry(n,e){n=transformGeometryWithOptions(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=writePointGeometry(n);break}case"LineString":{r=writeLineStringGeometry(n);break}case"Polygon":{r=writePolygonGeometry(n,e);break}case"MultiPoint":{r=writeMultiPointGeometry(n);break}case"MultiLineString":{r=writeMultiLineStringGeometry(n);break}case"MultiPolygon":{r=writeMultiPolygonGeometry(n,e);break}case"GeometryCollection":{r=writeGeometryCollectionGeometry(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function writeGeometryCollectionGeometry(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return writeGeometry(r,e)})}}function writeLineStringGeometry(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function writeMultiLineStringGeometry(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function writeMultiPointGeometry(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function writeMultiPolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function writePointGeometry(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function writePolygonGeometry(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class TileRange{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new TileRange(n,e,t,r)}function createOrUpdate(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function getKeyZXY(n,e,t){return n+"/"+e+"/"+t}function hash(n){return hashZXY(n[0],n[1],n[2])}function hashZXY(n,e,t){return(e<<n)+t}function withinExtentAndZ(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const a=e.getFullTileRange(t);return a?a.containsXY(r,i):!0}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(i,a)=>a-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,a=this.resolutions_.length-1;i<a;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(r)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,a)=>{const o=new TileRange(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const l=this.getTileRangeForExtentAndZ(r,a);o.minX=Math.max(l.minX,o.minX),o.maxX=Math.min(l.maxX,o.maxX),o.minY=Math.max(l.minY,o.minY),o.maxY=Math.min(l.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let a=i.minX,o=i.maxX;a<=o;++a)for(let l=i.minY,c=i.maxY;l<=c;++l)r([t,a,l])}forEachTileCoordParentTileRange(e,t,r,i){let a,o,l,c=null,h=e[0]-1;for(this.zoomFactor_===2?(o=e[1],l=e[2]):c=this.getTileCoordExtent(e,i);h>=this.minZoom;){if(o!==void 0&&l!==void 0?(o=Math.floor(o/2),l=Math.floor(l/2),a=createOrUpdate$1(o,o,l,l,r)):a=this.getTileRangeForExtentAndZ(c,h,r),t(h,a))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,o=e[2]*2;return createOrUpdate$1(a,a+1,o,o+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],a=e[1],o=e[2];if(t===i)return createOrUpdate$1(a,o,a,o,r);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-i),h=Math.floor(a*c),f=Math.floor(o*c);if(t<i)return createOrUpdate$1(h,h,f,f,r);const p=Math.floor(c*(a+1))-1,m=Math.floor(c*(o+1))-1;return createOrUpdate$1(h,p,f,m,r)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const i=tmpTileCoord[1],a=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const o=tmpTileCoord[1],l=tmpTileCoord[2];return createOrUpdate$1(i,o,a,l,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),a=toSize(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*a[0]*i,l=r[1]-(e[2]+1)*a[1]*i,c=o+a[0]*i,h=l+a[1]*i;return createOrUpdate$2(o,l,c,h,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,a){const o=this.getZForResolution(r),l=r/this.getResolution(o),c=this.getOrigin(o),h=toSize(this.getTileSize(o),this.tmpSize_);let f=l*(e-c[0])/r/h[0],p=l*(c[1]-t)/r/h[1];return i?(f=ceil(f,DECIMALS$1)-1,p=ceil(p,DECIMALS$1)-1):(f=floor(f,DECIMALS$1),p=floor(p,DECIMALS$1)),createOrUpdate(o,f,p,a)}getTileCoordForXYAndZ_(e,t,r,i,a){const o=this.getOrigin(r),l=this.getResolution(r),c=toSize(this.getTileSize(r),this.tmpSize_);let h=(e-o[0])/l/c[0],f=(o[1]-t)/l/c[1];return i?(h=ceil(h,DECIMALS$1)-1,f=ceil(f,DECIMALS$1)-1):(h=floor(h,DECIMALS$1),f=floor(f,DECIMALS$1)),createOrUpdate(r,h,f,a)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=linearFindNearest(this.resolutions_,e,t||0);return clamp$1(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function createFromCapabilitiesMatrixSet(n,e,t){const r=[],i=[],a=[],o=[],l=[];t=t!==void 0?t:[];const c="SupportedCRS",h="TileMatrix",f="Identifier",p="ScaleDenominator",m="TopLeftCorner",v="TileWidth",C="TileHeight",b=n[c],S=get$3(b),x=S.getMetersPerUnit(),T=S.getAxisOrientation().startsWith("ne");return n[h].sort(function(P,L){return L[p]-P[p]}),n[h].forEach(function(P){let L;if(t.length>0?L=t.find(function(k){return P[f]==k[h]?!0:P[f].includes(":")?!1:n[f]+":"+P[f]===k[h]}):L=!0,L){i.push(P[f]);const k=P[p]*28e-5/x,F=P[v],U=P[C];T?a.push([P[m][1],P[m][0]]):a.push(P[m]),r.push(k),o.push(F==U?F:[F,U]),l.push([P.MatrixWidth,P.MatrixHeight])}}),new WMTSTileGrid({extent:e,origins:a,resolutions:r,matrixIds:i,tileSizes:o,sizes:l})}function getForProjection(n){let e=n.getDefaultTileGrid();return e||(e=createForProjection(n),n.setDefaultTileGrid(e)),e}function wrapX(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),a=extentFromProjection(t);if(!containsCoordinate(a,i)){const o=getWidth(a),l=Math.ceil((a[0]-i[0])/o);return i[0]+=o*l,n.getTileCoordForCoordAndZ(i,r)}return e}function createForExtent(n,e,t,r){r=r!==void 0?r:"top-left";const i=resolutionsFromExtent(n,e,t);return new TileGrid({extent:n,origin:getCorner(n,r),resolutions:i,tileSize:t})}function createXYZ(n){const e=n||{},t=e.extent||get$3("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(r)}function resolutionsFromExtent(n,e,t,r){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const i=getHeight(n),a=getWidth(n);r=r>0?r:Math.max(a/t[0],i/t[1]);const o=e+1,l=new Array(o);for(let c=0;c<o;++c)l[c]=r/Math.pow(2,c);return l}function createForProjection(n,e,t,r){const i=extentFromProjection(n);return createForExtent(i,e,t,r)}function extentFromProjection(n){n=get$3(n);let e=n.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/n.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}const version$1="1.0.0-beta.3",Pkg={version:version$1};LoggerByDefault$1.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,r=t?t.params:null,i=e.apiKey;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WFS");if(!a)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config$1.configuration.getLayerConf(a),!t)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");i=Config$1.configuration.getLayerKey(a)[0],r=Config$1.configuration.getLayerParams(e.layer,"WFS")}var o=e.ssl===!1?"http://":"https://",l={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(r.url.includes("/private/")){var c=e.apiKey||i;if(!c)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");l.apikey=c}var h=(p,m,v,C)=>{const b=new XMLHttpRequest;b.open("GET",m);const S=function(){p.removeLoadedExtent(extent),C()};b.onerror=S,b.onload=function(){if(b.status==200){var x=JSON.parse(b.responseText);const T=p.getFormat().readFeatures(x);if(p.addFeatures(T),v(T),x.links)for(let P=0;P<x.links.length;P++){const L=x.links[P];L.rel==="next"&&h(p,L.href,v,C)}}else S()},b.send()},f={format:new GeoJSON,loader:function(p,m,v,C,b){var S=this;const x=e.maxFeatures,T=e.layer,P=v.getCode(),L=Gp.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,o),l,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+T+"&outputFormat=application/json&srsname="+P+"&bbox="+p.join(",")+","+P+"&maxFeatures="+x+"&count="+x+"&startIndex=0";h(S,L,C,b)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper$1.mergeParams(f,e.olParams),e.olParams&&!r.originators&&(r.originators=e.olParams.attributions),super(f),this._originators=r.originators,this._legends=e.legends||r.legends,this._metadata=e.metadata||r.metadata,this._title=e.title||r.title,this._description=e.description||r.description,this._quicklookUrl=e.quicklookUrl||r.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var r=Config$1.configuration.getLayerId(e.layer,"WFS");if(t=Config$1.configuration.getLayerConf(r),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var i;e.olParams&&e.olParams.sourceParams&&(i=e.olParams.sourceParams);var a=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:i||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),o={source:a};return e.olParams?Helper$1.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper$1.mergeParams(o,e.olParams),super(o),this.name=e.layer,this.service="WFS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Tile extends Target{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.EMPTY){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:easeIn(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function asImageLike(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const disposedError=new Error("disposed"),defaultSize=[256,256];class DataTile extends Tile{constructor(e){const t=TileState.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=TileState.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class ImageTile extends Tile{constructor(e,t,r,i,a,o){super(e,t,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const n=createCanvasContext2D(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function verifyBrokenDiagonalRendering(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const n=createCanvasContext2D(6,6,canvasPool$1);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(n,4,5,4,0),drawTestTriangle(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(n),canvasPool$1.push(n.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(n,e,t,r){const i=transform$1(t,e,n);let a=getPointResolution(e,r,t);const o=e.getMetersPerUnit();o!==void 0&&(a*=o);const l=n.getMetersPerUnit();l!==void 0&&(a/=l);const c=n.getExtent();if(!c||containsCoordinate(c,i)){const h=getPointResolution(n,a,i)/a;isFinite(h)&&h>0&&(a/=h)}return a}function calculateSourceExtentResolution(n,e,t,r){const i=getCenter(t);let a=calculateSourceResolution(n,e,i,r);return(!isFinite(a)||a<=0)&&forEachCorner(t,function(o){return a=calculateSourceResolution(n,e,o,r),isFinite(a)&&a>0}),a}function render(n,e,t,r,i,a,o,l,c,h,f,p,m,v){const C=createCanvasContext2D(Math.round(t*n),Math.round(t*e),canvasPool$1);if(p||(C.imageSmoothingEnabled=!1),c.length===0)return C.canvas;C.scale(t,t);function b(k){return Math.round(k*t)/t}C.globalCompositeOperation="lighter";const S=createEmpty();c.forEach(function(k,F,U){extend$3(S,k.extent)});let x;const T=t/r,P=(p?1:1+Math.pow(2,-24))/T;x=createCanvasContext2D(Math.round(getWidth(S)*T),Math.round(getHeight(S)*T),canvasPool$1),p||(x.imageSmoothingEnabled=!1),c.forEach(function(k,F,U){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){x.save();const j=(k.clipExtent[0]-S[0])*T,J=-(k.clipExtent[3]-S[3])*T,X=getWidth(k.clipExtent)*T,te=getHeight(k.clipExtent)*T;x.rect(p?j:Math.round(j),p?J:Math.round(J),p?X:Math.round(j+X)-Math.round(j),p?te:Math.round(J+te)-Math.round(J)),x.clip()}const z=(k.extent[0]-S[0])*T,N=-(k.extent[3]-S[3])*T,K=getWidth(k.extent)*T,q=getHeight(k.extent)*T;x.drawImage(k.image,h,h,k.image.width-2*h,k.image.height-2*h,p?z:Math.round(z),p?N:Math.round(N),p?K:Math.round(z+K)-Math.round(z),p?q:Math.round(N+q)-Math.round(N)),k.clipExtent&&x.restore()}});const L=getTopLeft(o);return l.getTriangles().forEach(function(k,F,U){const z=k.source,N=k.target;let K=z[0][0],q=z[0][1],j=z[1][0],J=z[1][1],X=z[2][0],te=z[2][1];const H=b((N[0][0]-L[0])/a),oe=b(-(N[0][1]-L[1])/a),he=b((N[1][0]-L[0])/a),Ee=b(-(N[1][1]-L[1])/a),G=b((N[2][0]-L[0])/a),ie=b(-(N[2][1]-L[1])/a),re=K,ye=q;K=0,q=0,j-=re,J-=ye,X-=re,te-=ye;const me=[[j,J,0,0,he-H],[X,te,0,0,G-H],[0,0,j,J,Ee-oe],[0,0,X,te,ie-oe]],ve=solveLinearSystem(me);if(!ve)return;if(C.save(),C.beginPath(),isBrokenDiagonalRendering()||!p){C.moveTo(he,Ee);const De=4,Ie=H-he,ke=oe-Ee;for(let ce=0;ce<De;ce++)C.lineTo(he+b((ce+1)*Ie/De),Ee+b(ce*ke/(De-1))),ce!=De-1&&C.lineTo(he+b((ce+1)*Ie/De),Ee+b((ce+1)*ke/(De-1)));C.lineTo(G,ie)}else C.moveTo(he,Ee),C.lineTo(H,oe),C.lineTo(G,ie);C.clip(),C.transform(ve[0],ve[2],ve[1],ve[3],H,oe),C.translate(S[0]-re,S[3]-ye);let _e;if(x)_e=x.canvas,C.scale(P,-P);else{const De=c[0],Ie=De.extent;_e=De.image,C.scale(getWidth(Ie)/_e.width,-getHeight(Ie)/_e.height)}C.drawImage(_e,0,0),C.restore()}),x&&(releaseCanvas(x),canvasPool$1.push(x.canvas)),f&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,l.getTriangles().forEach(function(k,F,U){const z=k.target,N=(z[0][0]-L[0])/a,K=-(z[0][1]-L[1])/a,q=(z[1][0]-L[0])/a,j=-(z[1][1]-L[1])/a,J=(z[2][0]-L[0])/a,X=-(z[2][1]-L[1])/a;C.beginPath(),C.moveTo(q,j),C.lineTo(N,K),C.lineTo(J,X),C.closePath(),C.stroke()}),C.restore()),C.canvas}const MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,r,i,a,o,l){this.sourceProj_=e,this.targetProj_=t;let c={};const h=l?createTransformFromCoordinateTransform(P=>apply(l,transform$1(P,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(P){const L=P[0]+"/"+P[1];return c[L]||(c[L]=h(P)),c[L]},this.maxSourceExtent_=i,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&getWidth(i)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const f=getTopLeft(r),p=getTopRight(r),m=getBottomRight(r),v=getBottomLeft(r),C=this.transformInv_(f),b=this.transformInv_(p),S=this.transformInv_(m),x=this.transformInv_(v),T=MAX_SUBDIVISION+(o?Math.max(0,Math.ceil(Math.log2(getArea(r)/(o*o*256*256)))):0);if(this.addQuad_(f,p,m,v,C,b,S,x,T),this.wrapsXInSource_){let P=1/0;this.triangles_.forEach(function(L,k,F){P=Math.min(P,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-P>this.sourceWorldWidth_/2){const k=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];k[0][0]-P>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-P>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-P>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const F=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-F<this.sourceWorldWidth_/2&&(L.source=k)}})}c={}}addTriangle_(e,t,r,i,a,o){this.triangles_.push({source:[i,a,o],target:[e,t,r]})}addQuad_(e,t,r,i,a,o,l,c,h){const f=boundingExtent([a,o,l,c]),p=this.sourceWorldWidth_?getWidth(f)/this.sourceWorldWidth_:null,m=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&p>.5&&p<1;let C=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const S=boundingExtent([e,t,r,i]);C=getWidth(S)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||C}!v&&this.sourceProj_.isGlobal()&&p&&(C=p>MAX_TRIANGLE_WIDTH||C)}if(!C&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!intersects$1(f,this.maxSourceExtent_))return;let b=0;if(!C&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)C=!0;else if(b=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),b!=1&&b!=2&&b!=4&&b!=8)return}if(h>0){if(!C){const S=[(e[0]+r[0])/2,(e[1]+r[1])/2],x=this.transformInv_(S);let T;v?T=(modulo(a[0],m)+modulo(l[0],m))/2-modulo(x[0],m):T=(a[0]+l[0])/2-x[0];const P=(a[1]+l[1])/2-x[1];C=T*T+P*P>this.errorThresholdSquared_}if(C){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const S=[(t[0]+r[0])/2,(t[1]+r[1])/2],x=this.transformInv_(S),T=[(i[0]+e[0])/2,(i[1]+e[1])/2],P=this.transformInv_(T);this.addQuad_(e,t,S,T,a,o,x,P,h-1),this.addQuad_(T,S,r,i,P,x,l,c,h-1)}else{const S=[(e[0]+t[0])/2,(e[1]+t[1])/2],x=this.transformInv_(S),T=[(r[0]+i[0])/2,(r[1]+i[1])/2],P=this.transformInv_(T);this.addQuad_(e,S,T,i,a,x,P,c,h-1),this.addQuad_(S,t,r,T,x,o,l,P,h-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(b&11)==0&&this.addTriangle_(e,r,i,a,l,c),(b&14)==0&&this.addTriangle_(e,r,t,a,l,o),b&&((b&13)==0&&this.addTriangle_(t,i,e,o,c,a),(b&7)==0&&this.addTriangle_(t,i,r,o,c,l))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,r,i){const a=t.source;extendCoordinate(e,a[0]),extendCoordinate(e,a[1]),extendCoordinate(e,a[2])}),e}getTriangles(){return this.triangles_}}const ERROR_THRESHOLD=.5;class ReprojTile extends Tile{constructor(e,t,r,i,a,o,l,c,h,f,p,m){super(a,TileState.IDLE,m),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=l,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=o||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const v=i.getTileCoordExtent(this.wrappedTileCoord_),C=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const S=C?getIntersection(v,C):v;if(getArea(S)===0){this.state=TileState.EMPTY;return}const x=e.getExtent();x&&(b?b=getIntersection(b,x):b=x);const T=i.getResolution(this.wrappedTileCoord_[0]),P=calculateSourceExtentResolution(e,r,S,T);if(!isFinite(P)||P<=0){this.state=TileState.EMPTY;return}const L=f!==void 0?f:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,r,S,b,P*L,T),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(P);let k=this.triangulation_.calculateSourceExtent();if(b&&(e.canWrapX()?(k[1]=clamp$1(k[1],b[1],b[3]),k[3]=clamp$1(k[3],b[1],b[3])):k=getIntersection(k,b)),!getArea(k))this.state=TileState.EMPTY;else{let F=0,U=0;e.canWrapX()&&(F=getWidth(x),U=Math.floor((k[0]-x[0])/F)),wrapAndSliceX(k.slice(),e,!0).forEach(N=>{const K=t.getTileRangeForExtentAndZ(N,this.sourceZ_);for(let q=K.minX;q<=K.maxX;q++)for(let j=K.minY;j<=K.maxY;j++){const J=h(this.sourceZ_,q,j,l);if(J){const X=U*F;this.sourceTiles_.push({tile:J,offset:X})}}++U}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==TileState.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);a[0]+=t.offset,a[2]+=t.offset;const o=(i=this.clipExtent_)==null?void 0:i.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:a,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],a=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(i,a,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==TileState.IDLE||r==TileState.LOADING){e++;const i=listen(t,EventType.CHANGE,a=>{const o=t.getState();(o==TileState.LOADED||o==TileState.ERROR||o==TileState.EMPTY)&&(unlistenByKey(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return assert(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function getCacheKey(n,e,t,r){return`${n},${getKeyZXY(e,t,r)}`}function addTileToLookup(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function removeTileFromLookup(n,e,t){const r=n[t];return r?r.delete(e):!1}function getRenderExtent(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=getIntersection(e,fromUserExtent(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=getIntersection(e,i))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new LRUCache(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const a=this.tileCache_,l=this.getLayer().getSource(),c=getCacheKey(l.getKey(),e,t,r);let h;if(a.containsKey(c))h=a.get(c);else{if(h=l.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!h)return null;a.set(c,h)}return h}getTile(e,t,r,i){const a=this.getOrCreateTile(e,t,r,i);return a||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=apply(t.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!containsCoordinate(a,i))return null;const o=t.viewState,l=r.getRenderSource(),c=l.getTileGridForProjection(o.projection),h=l.getTilePixelRatio(t.pixelRatio);for(let f=c.getZForResolution(o.resolution);f>=c.getMinZoom();--f){const p=c.getTileCoordForCoordAndZ(i,f),m=this.getTile(f,p[1],p[2],t);if(!m||m.getState()!==TileState.LOADED)continue;const v=c.getOrigin(f),C=toSize(c.getTileSize(f)),b=c.getResolution(f);let S;if(m instanceof ImageTile||m instanceof ReprojTile)S=m.getImage();else if(m instanceof DataTile){if(S=asImageLike(m.getData()),!S)continue}else continue;const x=Math.floor(h*((i[0]-v[0])/b-p[1]*C[0])),T=Math.floor(h*((v[1]-i[1])/b-p[2]*C[1])),P=Math.round(h*l.getGutterForProjection(o.projection));return this.getImageData(S,x+P,T+P)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,a){const o=e.viewState,l=this.getLayer(),c=l.getRenderSource(),h=c.getTileGridForProjection(o.projection),f=getUid(c);f in e.wantedTiles||(e.wantedTiles[f]={});const p=e.wantedTiles[f],m=l.getMapInternal(),v=Math.max(r-a,h.getMinZoom(),h.getZForResolution(Math.min(l.getMaxResolution(),m?m.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),C=o.rotation,b=C?getRotatedViewport(o.center,o.resolution,C,e.size):void 0;for(let S=r;S>=v;--S){const x=h.getTileRangeForExtentAndZ(t,S,this.tempTileRange_),T=h.getResolution(S);for(let P=x.minX;P<=x.maxX;++P)for(let L=x.minY;L<=x.maxY;++L){if(C&&!h.tileCoordIntersectsViewport([S,P,L],b))continue;const k=this.getTile(S,P,L,e);if(!k||!addTileToLookup(i,k,S))continue;const U=k.getKey();if(p[U]=!0,k.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(U)){const z=createOrUpdate(S,P,L,this.tempTileCoord_);e.tileQueue.enqueue([k,f,h.getTileCoordCenter(z),T])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],a=e[1],o=e[2],l=this.getStaleKeys();for(let c=0;c<l.length;++c){const h=getCacheKey(l[c],i,a,o);if(r.containsKey(h)){const f=r.peek(h);if(f.getState()===TileState.LOADED)return f.endTransition(getUid(this)),addTileToLookup(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const a=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!a)return!1;let o=!0;const l=this.tileCache_,h=this.getLayer().getRenderSource().getKey();for(let f=a.minX;f<=a.maxX;++f)for(let p=a.minY;p<=a.maxY;++p){const m=getCacheKey(h,r,f,p);let v=!1;if(l.containsKey(m)){const C=l.peek(m);C.getState()===TileState.LOADED&&(addTileToLookup(i,C,r),v=!0)}v||(o=!1)}return o}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],a=e.viewState,o=a.projection,l=a.resolution,c=a.center,h=e.pixelRatio,f=this.getLayer(),p=f.getSource(),m=p.getTileGridForProjection(o),v=m.getZForResolution(l,p.zDirection),C=m.getResolution(v),b=p.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==b&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=b):this.renderedSourceKey_=b;let S=e.extent;const x=p.getTilePixelRatio(h);this.prepareContainer(e,t);const T=this.context.canvas.width,P=this.context.canvas.height,L=i.extent&&fromUserExtent(i.extent);L&&(S=getIntersection(S,fromUserExtent(i.extent)));const k=C*T/2/x,F=C*P/2/x,U=[c[0]-k,c[1]-F,c[0]+k,c[1]+F],z={};this.renderedTiles.length=0;const N=f.getPreload();if(e.nextExtent){const Ee=m.getZForResolution(a.nextResolution,p.zDirection),G=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,G,Ee,z,N)}const K=getRenderExtent(e,S);if(this.enqueueTiles(e,K,v,z,0),N>0&&setTimeout(()=>{this.enqueueTiles(e,K,v-1,z,N-1)},0),!(v in z))return this.container;const q=getUid(this),j=e.time;for(const Ee of z[v]){const G=Ee.getState();if(G===TileState.EMPTY)continue;const ie=Ee.tileCoord;if(G===TileState.LOADED&&Ee.getAlpha(q,j)===1){Ee.endTransition(q);continue}if(G!==TileState.IDLE&&(r=!1),G!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ie,z)){removeTileFromLookup(z,Ee,v),e.animate=!0;continue}if(this.findAltTiles_(m,ie,v+1,z))continue;const me=m.getMinZoom();for(let ve=v-1;ve>=me&&!this.findAltTiles_(m,ie,ve,z);--ve);}const J=C/l*h/x,X=this.getRenderContext(e);compose(this.tempTransform,T/2,P/2,J,J,0,-T/2,-P/2),i.extent&&this.clipUnrotated(X,e,L),p.getInterpolate()||(X.imageSmoothingEnabled=!1),this.preRender(X,e);const te=Object.keys(z).map(Number);te.sort(ascending);let H;const oe=[],he=[];for(let Ee=te.length-1;Ee>=0;--Ee){const G=te[Ee],ie=p.getTilePixelSize(G,h,o),ye=m.getResolution(G)/C,me=ie[0]*ye*J,ve=ie[1]*ye*J,_e=m.getTileCoordForCoordAndZ(getTopLeft(U),G),De=m.getTileCoordExtent(_e),Ie=apply(this.tempTransform,[x*(De[0]-U[0])/C,x*(U[3]-De[3])/C]),ke=x*p.getGutterForProjection(o);for(const ce of z[G]){if(ce.getState()!==TileState.LOADED)continue;const it=ce.tileCoord,Ft=_e[1]-it[1],Pe=Math.round(Ie[0]-(Ft-1)*me),Mt=_e[2]-it[2],Pt=Math.round(Ie[1]-(Mt-1)*ve),Ue=Math.round(Ie[0]-Ft*me),yt=Math.round(Ie[1]-Mt*ve),Ye=Pe-Ue,St=Pt-yt,Lt=te.length===1;let Ve=!1;H=[Ue,yt,Ue+Ye,yt,Ue+Ye,yt+St,Ue,yt+St];for(let It=0,ae=oe.length;It<ae;++It)if(!Lt&&G<he[It]){const se=oe[It];intersects$1([Ue,yt,Ue+Ye,yt+St],[se[0],se[3],se[4],se[7]])&&(Ve||(X.save(),Ve=!0),X.beginPath(),X.moveTo(H[0],H[1]),X.lineTo(H[2],H[3]),X.lineTo(H[4],H[5]),X.lineTo(H[6],H[7]),X.moveTo(se[6],se[7]),X.lineTo(se[4],se[5]),X.lineTo(se[2],se[3]),X.lineTo(se[0],se[1]),X.clip())}oe.push(H),he.push(G),this.drawTile(ce,e,Ue,yt,Ye,St,ke,Lt),Ve&&X.restore(),this.renderedTiles.unshift(ce),this.updateUsedTiles(e.usedTiles,p,ce)}}if(this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,U),this.renderedExtent_=U,this.renderedPixelRatio=h,this.postRender(this.context,e),i.extent&&X.restore(),X.imageSmoothingEnabled=!0,this.renderComplete){const Ee=(G,ie)=>{const re=getUid(p),ye=ie.wantedTiles[re],me=ye?Object.keys(ye).length:0;this.updateCacheSize(me),this.tileCache_.expireCache()};e.postRenderFunctions.push(Ee)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,a,o,l,c){let h;if(e instanceof DataTile){if(h=asImageLike(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const f=this.getRenderContext(t),p=getUid(this),m=t.layerStatesArray[t.layerIndex],v=m.opacity*(c?e.getAlpha(p,t.time):1),C=v!==f.globalAlpha;C&&(f.save(),f.globalAlpha=v),f.drawImage(h,l,l,h.width-2*l,h.height-2*l,r,i,a,o),C&&f.restore(),v!==m.opacity?t.animate=!0:c&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=getUid(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}function appendParams(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(n,e,t,r,i){return n.replace(zRegEx,e.toString()).replace(xRegEx,t.toString()).replace(yRegEx,r.toString()).replace(dashYRegEx,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function expandUrl(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let a;for(a=r;a<=i;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function createFromTemplate(n,e){return function(t,r,i){if(!t)return;let a;const o=t[0];if(e){const l=e.getFullTileRange(o);l&&(a=l.getHeight()-1)}return renderXYZTemplate(n,o,t[1],t[2],a)}}function createFromTemplates(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=createFromTemplate(n[i],e);return createFromTileUrlFunctions(r)}function createFromTileUrlFunctions(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=hash(e),a=modulo(i,n.length);return n[a](e,t,r)}}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,a){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),a=this.getTilePixelRatio(t),o=toSize(i.getTileSize(e),this.tmpSize);return a==1?o:scale(o,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=wrapX(i,e,r)),withinExtentAndZ(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=getUid(t),i=t.getState();let a;i==TileState.LOADING?(this.tileLoadingKeys_[r]=!0,a=TileEventType.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],a=i==TileState.ERROR?TileEventType.TILELOADERROR:i==TileState.LOADED?TileEventType.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new TileSourceEvent(a,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const r=getUid(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=getForProjection(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,a,o){const l=[e,t,r],c=this.getTileCoordForTileUrlFunction(l,a),h=c?this.tileUrlFunction(c,i,a):void 0,f=new this.tileClass(l,h!==void 0?TileState.IDLE:TileState.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,a){const o=this.getProjection();if(!o||!a||equivalent(o,a))return this.getTileInternal(e,t,r,i,o||a);const l=[e,t,r],c=this.getKey(),h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(a),p=this.getTileCoordForTileUrlFunction(l,a),m=new ReprojTile(o,h,a,f,l,p,this.getTilePixelRatio(i),this.getGutter(),(v,C,b,S)=>this.getTileInternal(v,C,b,S,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=c,m}getTileInternal(e,t,r,i,a){const o=this.getKey();return this.createTile_(e,t,r,i,a,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=get$3(e);if(r){const i=getUid(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function defaultTileLoadFunction(n,e){n.getImage().src=e}const DECIMALS=4,DEFAULT_VERSION="1.3.0";function getRequestUrl(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const a=r.getAxisOrientation(),o=compareVersions(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=r.getCode();const l=o&&a.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=l.join(","),appendParams(n,i)}function getImageSrc(n,e,t,r,i,a,o){a=Object.assign({REQUEST:"GetMap"},a);const l=e/t,c=[round(getWidth(n)/l,DECIMALS),round(getHeight(n)/l,DECIMALS)];if(t!=1)switch(o){case"geoserver":const f=90*t+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+f:a.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":a.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":a.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(i,n,c,r,a)}function getRequestParams(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const a=get$3(r),o=this.getProjection()||a;let l=this.getTileGrid();l||(l=this.getTileGridForProjection(o));const c=transform$1(e,a,o),h=calculateSourceResolution(o,a,e,t),f=l.getZForResolution(h,this.zDirection),p=l.getResolution(f),m=l.getTileCoordForCoordAndZ(c,f);if(l.getResolutions().length<=m[0])return;let v=l.getTileCoordExtent(m,this.tmpExtent_);const C=this.gutter_;C!==0&&(v=buffer(v,p*C,v));const b={QUERY_LAYERS:this.params_.LAYERS};Object.assign(b,getRequestParams(this.params_,"GetFeatureInfo"),i);const S=Math.floor((c[0]-v[0])/p),x=Math.floor((v[3]-c[1])/p);return b[this.v13_?"I":"X"]=S,b[this.v13_?"J":"Y"]=x,this.getRequestUrl_(m,v,1,o||a,b)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,a=28e-5;r.SCALE=e*i/a}return Object.assign(r,t),appendParams(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,a){const o=this.urls;if(!o)return;let l;if(o.length==1)l=o[0];else{const c=modulo(hash(e),o.length);l=o[c]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,l,a,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const a=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const l=this.gutter_;l!==0&&(o=buffer(o,a*l,o));const c=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,r,c)}}LoggerByDefault$1.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,r=t?t.params:null,i=e.apiKey;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMS");if(!a)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config$1.configuration.getLayerConf(a),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");i=Config$1.configuration.getLayerKey(a)[0],r=Config$1.configuration.getLayerParams(e.layer,"WMS")}var o=e.ssl===!1?"http://":"https://",l={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(r.url.includes("/private/")){var c=e.apiKey||i;if(!c)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");l.apikey=c}var h={url:Gp.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,o),l,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:r.version,STYLES:r.styles,FORMAT:r.format},crossOrigin:"anonymous"};return Helper$1.mergeParams(h,e.olParams),e.olParams&&!r.originators&&(r.originators=e.olParams.attributions),super(h),this._originators=r.originators,this._legends=e.legends||r.legends,this._metadata=e.metadata||r.metadata,this._title=e.title||r.title,this._description=e.description||r.description,this._quicklookUrl=e.quicklookUrl||r.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var r=Config$1.configuration.getLayerId(e.layer,"WMS");if(t=Config$1.configuration.getLayerConf(r),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var i;e.olParams&&e.olParams.sourceParams&&(i=e.olParams.sourceParams);var a=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:i}),o={source:a};if(a.getParams().LAYERS!==void 0&&i&&i.projection){var l=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];o.extent=transformExtent(l,"EPSG:4326",i.projection);var c;typeof i.projection=="string"?c=get$3(i.projection):typeof i.projection=="object"&&i.projection.getCode()&&(c=get$3(i.projection.getCode())),c&&c.getUnits()&&(c.getUnits()==="m"?(o.minResolution=(t.globalConstraints.minScale-1)*28e-5,o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):c.getUnits()==="degrees"&&(o.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(o,e.olParams),super(o),this.name=e.layer,this.service="WMS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let i=e.urls;i===void 0&&e.url!==void 0&&(i=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,r):e.replace(/\{(\w+?)\}/g,function(o,l){return l.toLowerCase()in r?r[l.toLowerCase()]:o});const i=this.tileGrid,a=this.dimensions_;return function(o,l,c){if(!o)return;const h={TileMatrix:i.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(h,a);let f=e;return t=="KVP"?f=appendParams(f,h):f=f.replace(/\{(\w+?)\}/g,function(p,m){return encodeURIComponent(h[m])}),f}}};function optionsFromCapabilities(n,e){const t=n.Contents.Layer,r=t==null?void 0:t.find(function(j){return j.Identifier==e.layer});if(!r)return null;const i=n.Contents.TileMatrixSet;let a;r.TileMatrixSetLink.length>1?"projection"in e?a=r.TileMatrixSetLink.findIndex(function(j){const X=i.find(function(oe){return oe.Identifier==j.TileMatrixSet}).SupportedCRS,te=get$3(X),H=get$3(e.projection);return te&&H?equivalent(te,H):X==e.projection}):a=r.TileMatrixSetLink.findIndex(function(j){return j.TileMatrixSet==e.matrixSet}):a=0,a<0&&(a=0);const o=r.TileMatrixSetLink[a].TileMatrixSet,l=r.TileMatrixSetLink[a].TileMatrixSetLimits;let c=r.Format[0];"format"in e&&(c=e.format),a=r.Style.findIndex(function(j){return"style"in e?j.Title==e.style:j.isDefault}),a<0&&(a=0);const h=r.Style[a].Identifier,f={};"Dimension"in r&&r.Dimension.forEach(function(j,J,X){const te=j.Identifier;let H=j.Default;H===void 0&&(H=j.Value[0]),f[te]=H});const m=n.Contents.TileMatrixSet.find(function(j){return j.Identifier==o});let v;const C=m.SupportedCRS;if(C&&(v=get$3(C)),"projection"in e){const j=get$3(e.projection);j&&(!v||equivalent(j,v))&&(v=j)}let b=!1;const S=v.getAxisOrientation().startsWith("ne");let x=m.TileMatrix[0],T={MinTileCol:0,MinTileRow:0,MaxTileCol:x.MatrixWidth-1,MaxTileRow:x.MatrixHeight-1};if(l){T=l[l.length-1];const j=m.TileMatrix.find(J=>J.Identifier===T.TileMatrix||m.Identifier+":"+J.Identifier===T.TileMatrix);j&&(x=j)}const P=x.ScaleDenominator*28e-5/v.getMetersPerUnit(),L=S?[x.TopLeftCorner[1],x.TopLeftCorner[0]]:x.TopLeftCorner,k=x.TileWidth*P,F=x.TileHeight*P;let U=m.BoundingBox;U&&S&&(U=[U[1],U[0],U[3],U[2]]);let z=[L[0]+k*T.MinTileCol,L[1]-F*(1+T.MaxTileRow),L[0]+k*(1+T.MaxTileCol),L[1]-F*T.MinTileRow];if(U!==void 0&&!containsExtent(U,z)){const j=r.WGS84BoundingBox,J=get$3("EPSG:4326").getExtent();if(z=U,j)b=j[0]===J[0]&&j[2]===J[2];else{const X=transformExtent(U,m.SupportedCRS,"EPSG:4326");b=X[0]-1e-10<=J[0]&&X[2]+1e-10>=J[2]}}const N=createFromCapabilitiesMatrixSet(m,z,l),K=[];let q=e.requestEncoding;if(q=q!==void 0?q:"","OperationsMetadata"in n&&"GetTile"in n.OperationsMetadata){const j=n.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let J=0,X=j.length;J<X;++J)if(j[J].Constraint){const H=j[J].Constraint.find(function(oe){return oe.name=="GetEncoding"}).AllowedValues.Value;if(q===""&&(q=H[0]),q==="KVP")H.includes("KVP")&&K.push(j[J].href);else break}else j[J].href&&(q="KVP",K.push(j[J].href))}return K.length===0&&(q="REST",r.ResourceURL.forEach(function(j){j.resourceType==="tile"&&(c=j.format,K.push(j.template))})),{urls:K,layer:e.layer,matrixSet:o,format:c,projection:v,requestEncoding:q,tileGrid:N,style:h,dimensions:f,wrapX:b,crossOrigin:e.crossOrigin}}var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,r,i){var a=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,o=this.tileGrid,l=this.tileGrid.getTileCoordForCoordAndResolution(e,t),c=function(P,L,k){var F=[0,0,0],U=createEmpty(),z=P[1],N=P[2],K=L.getTileCoordExtent(P),q=k.getExtent();if(q!=null&&k.isGlobal()){var j=Math.ceil(getWidth(q)/getWidth(K));z=z%j,F[0]=P[0],F[1]=z,F[2]=P[2],K=L.getTileCoordExtent(F,U)}return intersects$1(K,q)?[P[0],z,N]:null},h=o.getTileCoordExtent(l),f=c(l,o,r);if(!(o.getResolutions().length<=l[0])){var p=o.getResolution(l[0]),m=o.getMatrixIds()[l[0]],v={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:f[1],TILEROW:f[2],TILEMATRIX:m,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper$1.assign(v,i);var C=Math.floor((e[0]-h[0])/(p/a)),b=Math.floor((h[3]-e[1])/(p/a)),S=o.getTileSize(l[0]);C=Math.min(C,(S[0]|S)-1),b=Math.max(b,0),v.I=C,v.J=b;var x=this.urls[0],T=Gp.Helper.normalyzeUrl(x,v);return T}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(n,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var r=n*28e-5;for(var i in t)if(t.hasOwnProperty(i)&&t[i]<=r)return i=parseInt(i,10),i;return 0},getAttributions:function(n){var e=n.zoom,t=[];if(n.originators!=null&&n.visibility)for(var r,i=0,a=n.originators.length;i<a;i++){r=!0;for(var o=n.originators[i],l=n.originators[i].constraints||[],c=0,h=l.length;c<h;c++){var f=l[c];r=!0;var p=this.getZoomLevelFromScaleDenominator(f.maxScaleDenominator,n.crs),m=this.getZoomLevelFromScaleDenominator(f.minScaleDenominator,n.crs)||21;p&&p>e&&(r=!1),r&&m&&m<e&&(r=!1);var v=f.bbox;if(r&&v){r=!1;var C=n.extent;if(C){var b=[v.top,v.left,v.bottom,v.right];if(this.intersects(C,b)){r=!0;break}}}}if(r){var S=o.logo,x=o.url,T=o.name?o.name:"",P=o.attribution,L=document.createElement("div");L.className="gp-control-attribution";var k=null;k=document.createElement("a"),k.className="gp-control-attribution-link",k.target="_blank",L.appendChild(k),x&&(k.href=x);var F=!!S,U=null;F?(U=document.createElement("img"),k?(U.className="gp-control-attribution-image",k.appendChild(U)):(U.className="",L.appendChild(U)),U.src=S,U.title=P||T,U.style.height="30px",U.style.width="30px"):T?k.textContent=T:P?k.textContent=P:x?k.textContent=x:k.textContent="",t.push(L.innerHTML+" ")}}return t},intersects:function(n,e){var t=n[1]<=e[3]&&e[1]<=n[3],r=n[2]<=e[0]&&e[2]<=n[0];return t&&r}};LoggerByDefault$1.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,r=t?t.params:null,i=e.apiKey;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMTS");if(!a)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config$1.configuration.getLayerConf(a),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");i=Config$1.configuration.getLayerKey(a)[0],r=Config$1.configuration.getLayerParams(e.layer,"WMTS")}var o=e.ssl===!1?"http://":"https://",l={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(r.url.includes("/private/")){var c=e.apiKey||i;if(!c)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");l.apikey=c}var h={url:Gp.Helper.normalyzeUrl(r.url.replace(/(http|https):\/\//,o),l,!1),version:r.version,style:r.styles,format:r.format,projection:r.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(r.minScale),layer:e.layer,matrixSet:r.TMSLink,tileGrid:new WMTSTileGrid({resolutions:r.nativeResolutions,matrixIds:r.matrixIds,origin:[Object.values(r.tileMatrices)[0].topLeftCorner.x,Object.values(r.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper$1.mergeParams(h,e.olParams),e.olParams&&!r.originators&&(r.originators=e.olParams.attributions),super(h),this._originators=r.originators,this._legends=e.legends||r.legends,this._metadata=e.metadata||r.metadata,this._description=e.description||r.description,this._title=e.title||r.title,this._quicklookUrl=e.quicklookUrl||r.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var r=Config$1.configuration.getLayerId(e.layer,"WMTS");if(t=Config$1.configuration.getLayerConf(r),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var i;e.olParams&&e.olParams.sourceParams&&(i=e.olParams.sourceParams);var a=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:i}),o={source:a};if(a.getLayer()!==void 0&&t.globalConstrainWFSts&&t.globalConstraints.projection){var l;typeof t.globalConstraints.projection=="string"&&(l=get$3(t.globalConstraints.projection)),l&&l.getUnits()&&(l.getUnits()==="m"?(o.minResolution=(t.globalConstraints.minScale-1)*28e-5,o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):l.getUnits()==="degrees"&&(o.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),o.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(o,e.olParams),super(o),this.name=e.layer,this.service="WMTS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create(),this.tileClipContexts_=null}drawTile(e,t,r,i,a,o,l,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,a,o,l,c)}getTile(e,t,r,i){const a=this.getOrCreateTile(e,t,r,i);if(!a)return null;const l=i.viewState.resolution,c=i.viewHints;return(!(c[ViewHint.ANIMATING]||c[ViewHint.INTERACTING])||!a.wantedResolution)&&(a.wantedResolution=l),a}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),a=i.getRevision(),o=i.getRenderOrder()||null,l=e.wantedResolution,c=e.getReplayState(i);if(!c.dirty&&c.renderedResolution===l&&c.renderedRevision==a&&c.renderedRenderOrder==o)return;const h=i.getSource(),f=!!i.getDeclutter(),p=h.getTileGrid(),v=h.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),C=h.getSourceTiles(t,r,e),b=getUid(i);delete e.hitDetectionImageData[b],e.executorGroups[b]=[],c.dirty=!1;for(let S=0,x=C.length;S<x;++S){const T=C[S];if(T.getState()!=TileState.LOADED)continue;const P=T.tileCoord,L=p.getTileCoordExtent(P),k=getIntersection(v,L),F=buffer(k,i.getRenderBuffer()*l,this.tempExtent),U=equals$1(L,k)?null:F,z=new BuilderGroup(0,k,l,t),N=getSquaredTolerance(l,t),K=function(te,H){let oe;const he=te.getStyleFunction()||i.getStyleFunction();if(he&&(oe=he(te,l)),oe){const Ee=this.renderFeature(te,N,oe,z,f,H);c.dirty=c.dirty||Ee}},q=T.getFeatures();o&&o!==c.renderedRenderOrder&&q.sort(o);for(let te=0,H=q.length;te<H;++te){const oe=q[te];(!U||intersects$1(U,oe.getGeometry().getExtent()))&&K.call(this,oe,te)}const j=z.finish(),J=i.getRenderMode()!=="vector"&&f&&C.length===1?null:k,X=new ExecutorGroup(J,l,t,h.getOverlaps(),j,i.getRenderBuffer(),!0);e.executorGroups[b].push(X)}c.renderedRevision=a,c.renderedRenderOrder=o,c.renderedResolution=l}forEachFeatureAtCoordinate(e,t,r,i,a){var P,L;const o=t.viewState.resolution,l=t.viewState.rotation;r=r??0;const c=this.getLayer(),f=c.getSource().getTileGridForProjection(t.viewState.projection),p=boundingExtent([e]);buffer(p,o*r,p);const m={},v=function(k,F,U){let z=k.getId();z===void 0&&(z=getUid(k));const N=m[z];if(N){if(N!==!0&&U<N.distanceSq){if(U===0)return m[z]=!0,a.splice(a.lastIndexOf(N),1),i(k,c,F);N.geometry=F,N.distanceSq=U}}else{if(U===0)return m[z]=!0,i(k,c,F);a.push(m[z]={feature:k,layer:c,geometry:F,distanceSq:U,callback:i})}},C=this.renderedTiles,b=getUid(c),S=c.getDeclutter(),x=S?(L=(P=t.declutter)==null?void 0:P[S])==null?void 0:L.all().map(k=>k.value):null;let T;e:for(let k=0,F=C.length;k<F;++k){const U=C[k],z=f.getTileCoordExtent(U.wrappedTileCoord);if(!intersects$1(z,p))continue;const N=U.executorGroups[b];for(let K=0,q=N.length;K<q;++K)if(T=N[K].forEachFeatureAtCoordinate(e,o,l,r,v,x),T)break e}return T}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),a=i.getSource(),o=this.renderedProjection,l=o.getExtent(),c=this.renderedResolution,h=a.getTileGridForProjection(o),f=apply(this.renderedPixelToCoordinateTransform_,e.slice()),p=h.getTileCoordForCoordAndResolution(f,c).toString(),m=this.renderedTiles.find(P=>P.tileCoord.toString()===p&&P.getState()===TileState.LOADED);if(!m||m.loadingSourceTiles>0){t([]);return}a.getWrapX()&&o.canWrapX()&&!containsExtent(l,h.getTileCoordExtent(m.tileCoord))&&wrapX$1(f,o);const v=getUid(i),C=h.getTileCoordExtent(m.wrappedTileCoord),b=getTopLeft(C),S=[(f[0]-b[0])/c,(b[1]-f[1])/c],x=m.getSourceTiles().reduce((P,L)=>P.concat(L.getFeatures()),[]);let T=m.hitDetectionImageData[v];if(!T){const P=toSize(h.getTileSize(h.getZForResolution(c,a.zDirection))),L=this.renderedRotation_,k=[this.getRenderTransform(h.getTileCoordCenter(m.wrappedTileCoord),c,0,HIT_DETECT_RESOLUTION,P[0]*HIT_DETECT_RESOLUTION,P[1]*HIT_DETECT_RESOLUTION,0)];T=createHitDetectionImageData(P,k,x,i.getStyleFunction(),h.getTileCoordExtent(m.wrappedTileCoord),m.getReplayState(i).renderedResolution,L),m.hitDetectionImageData[v]=T}t(hitDetect(S,x,T))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const a=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=a.getZForResolution(this.renderedResolution),l={};return r.forEach(c=>{if(c.tileCoord[0]!==o||c.getState()!==TileState.LOADED)return;const h=c.getSourceTiles();for(let f=0,p=h.length;f<p;++f){const m=h[f],v=m.getKey();if(v in l)continue;l[v]=!0;const C=m.tileCoord;if(intersects$1(e,a.getTileCoordExtent(C))){const b=m.getFeatures();if(b)for(let S=0,x=b.length;S<x;++S){const T=b[S],P=T.getGeometry();intersects$1(e,P.getExtent())&&t.push(T)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var m;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const a=e.viewHints,o=!(a[ViewHint.ANIMATING]||a[ViewHint.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?(m=e.declutter)==null?void 0:m[c]:void 0,f=getUid(this.getLayer()),p=this.renderedTiles;for(let v=0,C=p.length;v<C;++v){const b=p[v],S=b.executorGroups[f];if(S)for(let x=S.length-1;x>=0;--x)S[x].execute(this.context,l,this.getTileRenderTransform(b,e),e.viewState.rotation,o,DECLUTTER,h)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=getUid(this.getLayer()),i=t.reduce((c,h,f)=>(h.executorGroups[r].forEach(p=>c.push({executorGroup:p,index:f})),c),[]),a=i.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),o={};for(let c=0,h=i.length;c<h;++c){const f=i[c].executorGroup.getDeferredZIndexContexts();for(const p in f)o[p]=!0}Object.keys(o).map(Number).sort(ascending).forEach(c=>{a.forEach((h,f)=>{h[c]&&(h[c].forEach(p=>{const{executorGroup:m,index:v}=i[f],C=m.getRenderedContext(),b=C.globalAlpha;C.globalAlpha=this.renderedOpacity_;const S=this.tileClipContexts_[v];S&&S.draw(C),p.draw(C),S&&C.restore(),C.globalAlpha=b,p.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,a=i.center,o=i.resolution,l=i.rotation,c=t.size,h=Math.round(c[0]*r),f=Math.round(c[1]*r),m=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),v=e.tileCoord,C=m.getTileCoordExtent(e.wrappedTileCoord),b=m.getTileCoordExtent(v,this.tempExtent)[0]-C[0];return multiply(scale$1(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(a,o,l,r,h,f,b))}postRender(e,t){var k;const r=t.viewHints,i=!(r[ViewHint.ANIMATING]||r[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const a=this.getLayer(),o=a.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=a.getDeclutter(),h=c?VECTOR_REPLAYS[o].filter(F=>!DECLUTTER.includes(F)):VECTOR_REPLAYS[o],f=t.viewState,p=f.rotation,m=a.getSource(),C=m.getTileGridForProjection(f.projection).getZForResolution(f.resolution,m.zDirection),b=this.renderedTiles,S=[],x=[],T=[],P=getUid(a);let L=!0;for(let F=b.length-1;F>=0;--F){const U=b[F];L=L&&!U.getReplayState(a).dirty;const z=U.executorGroups[P].filter(te=>te.hasExecutors(h));if(z.length===0)continue;const N=this.getTileRenderTransform(U,t),K=U.tileCoord[0];let q=!1;const j=z[0].getClipCoords(N);let J=e,X;if(j){X=new ZIndexContext,J=X.getContext();for(let te=0,H=S.length;te<H;++te)if(C!==K&&K<x[te]){const oe=S[te];intersects$1([j[0],j[3],j[4],j[7]],[oe[0],oe[3],oe[4],oe[7]])&&(q||(J.save(),q=!0),J.beginPath(),J.moveTo(j[0],j[1]),J.lineTo(j[2],j[3]),J.lineTo(j[4],j[5]),J.lineTo(j[6],j[7]),J.moveTo(oe[6],oe[7]),J.lineTo(oe[4],oe[5]),J.lineTo(oe[2],oe[3]),J.lineTo(oe[0],oe[1]),J.clip())}S.push(j),x.push(K)}for(let te=0,H=z.length;te<H;++te)z[te].execute(e,[e.canvas.width,e.canvas.height],N,p,i,h,(k=t.declutter)==null?void 0:k[c]);q&&(J===e?J.restore():T[F]=X)}e.globalAlpha=l,this.ready=L,this.tileClipContexts_=T,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,h=r.length;c<h;++c)l=renderFeature$1(i,e,r[c],t,this.boundHandleStyleImageChange_,void 0,a,o)||l;else l=renderFeature$1(i,e,r,t,this.boundHandleStyleImageChange_,void 0,a,o);return l}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),a=e.wantedResolution;return r.renderedTileResolution!==a||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),a=r.getRevision(),o=e.executorGroups[getUid(r)];i.renderedTileRevision=a;const l=e.wrappedTileCoord,c=l[0],h=r.getSource();let f=t.pixelRatio;const m=t.viewState.projection,v=h.getTileGridForProjection(m),C=v.getResolution(e.tileCoord[0]),b=t.pixelRatio/e.wantedResolution*C,S=v.getResolution(c),x=e.getContext();f=Math.round(Math.max(f,b/f));const T=h.getTilePixelSize(c,f,m);x.canvas.width=T[0],x.canvas.height=T[1];const P=f/b;if(P!==1){const U=reset(this.tmpTransform_);scale$1(U,P,P),x.setTransform.apply(x,U)}const L=v.getTileCoordExtent(l,this.tempExtent),k=b/S,F=reset(this.tmpTransform_);scale$1(F,k,-k),translate(F,-L[0],-L[3]);for(let U=0,z=o.length;U<z;++U)o[U].execute(x,[x.canvas.width*P,x.canvas.height*P],F,0,!0,IMAGE_REPLAYS[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";assert(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}const canvasPool=[];class VectorRenderTile extends Tile{constructor(e,t,r,i,a){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=a,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let VectorTile$1=class extends Tile{constructor(e,t,r,i,a,o){super(e,t,o),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=a,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||extentFromProjection(t),i=e.tileGrid||createXYZ({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===TileState.IDLE){r.setState(TileState.LOADING);const i=r.wrappedTileCoord,a=this.getTileGridForProjection(t),o=a.getTileCoordExtent(i),l=i[0],c=a.getResolution(l);buffer(o,-c,o);const h=this.tileGrid,f=h.getExtent();f&&getIntersection(o,f,o);const p=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(o,p,m=>{const v=this.tileUrlFunction(m,e,t);this.sourceTiles_[v]||(this.sourceTiles_[v]=new this.tileClass(m,v?TileState.IDLE:TileState.EMPTY,v,this.format_,this.tileLoadFunction));const C=this.sourceTiles_[v];r.sourceTiles.push(C),this.tileKeysBySourceTileUrl_[v]||(this.tileKeysBySourceTileUrl_[v]=[]),this.tileKeysBySourceTileUrl_[v].push(r.getKey());const b=C.getState();if(b<TileState.LOADED){const S=x=>{this.handleTileChange(x);const T=C.getState();if(T===TileState.LOADED||T===TileState.ERROR){const P=C.getKey();P in r.errorTileKeys?C.getState()===TileState.LOADED&&delete r.errorTileKeys[P]:r.loadingSourceTiles--,T===TileState.ERROR?r.errorTileKeys[P]=!0:C.removeEventListener(EventType.CHANGE,S),r.loadingSourceTiles===0&&r.setState(isEmpty$1(r.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};C.addEventListener(EventType.CHANGE,S),r.loadingSourceTiles++}b===TileState.IDLE&&(C.extent=h.getTileCoordExtent(m),C.projection=t,C.resolution=h.getResolution(m[0]),C.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(m=>m.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,a=r.length;i<a;++i){const o=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const l=this.tileKeysBySourceTileUrl_[o].indexOf(t);l!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(l,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(e,t,r,i,a){const o=[e,t,r];let l=this.getTileCoordForTileUrlFunction(o,a);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(a);if(l&&c){const m=h.getTileCoordExtent(l);buffer(m,-h.getResolution(e),m),intersects$1(c,m)||(l=null)}let f=!0;if(l!==null){const m=this.tileGrid,v=h.getResolution(e),C=m.getZForResolution(v,1),b=h.getTileCoordExtent(l);buffer(b,-v,b),m.forEachTileCoord(b,C,S=>{f=f&&!this.tileUrlFunction(S,i,a)})}const p=new VectorRenderTile(o,f?TileState.EMPTY:TileState.IDLE,l,this.getSourceTiles.bind(this,i,a),this.removeSourceTiles.bind(this));return p.key=this.getKey(),p}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,a=i.getResolutions().slice(),o=a.map(function(h,f){return i.getOrigin(f)}),l=a.map(function(h,f){return i.getTileSize(f)}),c=DEFAULT_MAX_ZOOM+1;for(let h=a.length;h<c;++h)a.push(a[h-1]/2),o.push(o[h-1]),l.push(l[h-1]);r=new TileGrid({extent:i.getExtent(),origins:o,resolutions:a,tileSizes:l}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),a=toSize(i.getTileSize(e),this.tmpSize);return[Math.round(a[0]*t),Math.round(a[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(n,e){n.setLoader(function(t,r,i){loadFeaturesXhr(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function jsonp(n,e,t,r){const i=document.createElement("script"),a="olc_"+getUid(e);function o(){delete window[a],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+a;const l=setTimeout(function(){o(),t&&t()},1e4);window[a]=function(c){clearTimeout(l),o(),e(c)},document.head.appendChild(i)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const h=getTransformFromProjections(t,r);i=applyTransform(e.bounds,h)}const a=extentFromProjection(r),o=e.minzoom||0,l=e.maxzoom||22,c=createXYZ({extent:a,maxZoom:l,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=createFromTemplates(e.tiles,c),e.attribution&&!this.getAttributions()){const h=i!==void 0?i:a;this.setAttributions(function(f){return intersects$1(h,f.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),a=i>>3,o=this.pos;this.type=i&7,e(a,t,this),this.pos===o&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,readVarintRemainder(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(t,e)):readUtf8(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(t===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(t===PBF_FIXED32)this.pos+=4;else if(t===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const r=this.pos-t;r>=128&&makeRoomForExtraLength(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&makeRoomForExtraLength(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,PBF_BYTES),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,writePackedVarint,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,writePackedSVarint,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,writePackedBoolean,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,writePackedFloat,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,writePackedDouble,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,writePackedFixed32,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,writePackedSFixed32,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,writePackedFixed64,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,writePackedSFixed64,t)}writeBytesField(e,t){this.writeTag(e,PBF_BYTES),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,PBF_BYTES),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,PBF_FIXED32),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,PBF_FIXED64),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function readVarintRemainder(n,e,t){const r=t.buf;let i,a;if(a=r[t.pos++],i=(a&112)>>4,a<128||(a=r[t.pos++],i|=(a&127)<<3,a<128)||(a=r[t.pos++],i|=(a&127)<<10,a<128)||(a=r[t.pos++],i|=(a&127)<<17,a<128)||(a=r[t.pos++],i|=(a&127)<<24,a<128)||(a=r[t.pos++],i|=(a&1)<<31,a<128))return toNum(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function writeBigVarint(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,r,e),writeBigVarintHigh(r,e)}function writeBigVarintLow(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function writeBigVarintHigh(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function makeRoomForExtraLength(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function writePackedVarint(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function writePackedSVarint(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function writePackedFloat(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function writePackedDouble(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function writePackedBoolean(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function writePackedFixed32(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function writePackedSFixed32(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function writePackedFixed64(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function writePackedSFixed64(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function readUtf8(n,e,t){let r="",i=e;for(;i<t;){const a=n[i];let o=null,l=a>239?4:a>223?3:a>191?2:1;if(i+l>t)break;let c,h,f;l===1?a<128&&(o=a):l===2?(c=n[i+1],(c&192)===128&&(o=(a&31)<<6|c&63,o<=127&&(o=null))):l===3?(c=n[i+1],h=n[i+2],(c&192)===128&&(h&192)===128&&(o=(a&15)<<12|(c&63)<<6|h&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):l===4&&(c=n[i+1],h=n[i+2],f=n[i+3],(c&192)===128&&(h&192)===128&&(f&192)===128&&(o=(a&15)<<18|(c&63)<<12|(h&63)<<6|f&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,l=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),i+=l}return r}function writeUtf8(n,e,t){for(let r=0,i,a;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(a)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,a=i;continue}else i=a-55296<<10|i-56320|65536,a=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):a=i;continue}else a&&(n[t++]=239,n[t++]=191,n[t++]=189,a=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const a=e.readVarint()+e.pos;let o=1,l=0,c=0,h=0,f=0,p=0;for(;e.pos<a;){if(!l){const m=e.readVarint();o=m&7,l=m>>3}if(l--,o===1||o===2)c+=e.readSVarint(),h+=e.readSVarint(),o===1&&f>p&&(i.push(f),p=f),r.push(c,h),f+=2;else if(o===7)f>p&&(r.push(r[p],r[p+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>p&&(i.push(f),p=f)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let a;const o=t.properties;let l;this.idProperty_?(l=o[this.idProperty_],delete o[this.idProperty_]):l=t.id,o[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const f=getGeometryType(i,h.length);if(this.featureClass===RenderFeature)a=new this.featureClass(f,c,h,2,o,l),a.transform(r.dataProjection);else{let p;if(f=="Polygon"){const C=inflateEnds(c,h);p=C.length>1?new MultiPolygon(c,"XY",C):new Polygon(c,"XY",h)}else p=f==="Point"?new Point$1(c,"XY"):f==="LineString"?new LineString(c,"XY"):f==="MultiPoint"?new MultiPoint(c,"XY"):f==="MultiLineString"?new MultiLineString(c,"XY",h):null;const m=this.featureClass;a=new m,this.geometryName_&&a.setGeometryName(this.geometryName_);const v=transformGeometryWithOptions(p,!1,r);a.setGeometry(v),l!==void 0&&a.setId(l),a.setProperties(o,!0)}return a}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=get$3(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const a=new Pbf(e),o=a.readFields(layersPBFReader,{}),l=[];for(const c in o){if(r&&!r.includes(c))continue;const h=o[c],f=h?[0,0,h.extent,h.extent]:null;i.setExtent(f);for(let p=0,m=h.length;p<m;++p){const v=readRawFeature(a,h,p),C=this.createFeature_(a,v,t);C!==null&&l.push(C)}}return l}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(layerPBFReader,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function layerPBFReader(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function featurePBFReader(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],a=e.layer.values[t.readVarint()];e.properties[i]=a}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function readRawFeature(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(featurePBFReader,i,r),i}function getGeometryType(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}var $version=8,$root={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources={"*":{type:"source"}},source=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter={type:"array",value:"*"},filter_operator={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression$1={type:"array",value:"*",minimum:1},light={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection$1={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},promoteId={"*":{type:"string"}},v8Spec={$version,$root,sources,source,source_vector,source_raster,source_raster_dem,source_geojson,source_video,source_image,layer,layout,layout_background,layout_fill,layout_circle,layout_heatmap,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line,layout_symbol,layout_raster,layout_hillshade,filter,filter_operator,geometry_type,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop,expression:expression$1,light,sky,terrain,projection:projection$1,paint,paint_fill,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line,paint_circle,paint_heatmap,paint_symbol,paint_raster,paint_hillshade,paint_background,transition,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId};const refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return refProperties.forEach(r=>{r in e&&(t[r]=e[r])}),t}function derefLayers(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=deref(n[t],e[n[t].ref]));return n}class ExpressionParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ProjectionDefinitionType={kind:"projectionDefinition"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},PaddingType={kind:"padding"},ResolvedImageType={kind:"resolvedImage"},VariableAnchorOffsetCollectionType={kind:"variableAnchorOffsetCollection"};function array(n,e){return{kind:"array",itemType:n,N:e}}function typeToString(n){if(n.kind==="array"){const e=typeToString(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,ProjectionDefinitionType,FormattedType,ObjectType,array(ValueType),PaddingType,ResolvedImageType,VariableAnchorOffsetCollectionType];function checkSubtype(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${typeToString(n)} but found ${typeToString(e)} instead.`}function isValidType(n,e){return e.some(t=>t.kind===n.kind)}function isValidNativeType(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function verifyType(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function constrainAngle(n){return n=n%360,n<0&&(n+=360),n}function rgbToLab([n,e,t,r]){n=rgb2xyz(n),e=rgb2xyz(e),t=rgb2xyz(t);let i,a;const o=xyz2lab((.2225045*n+.7168786*e+.0606169*t)/Yn);n===e&&e===t?i=a=o:(i=xyz2lab((.4360747*n+.3850649*e+.1430804*t)/Xn),a=xyz2lab((.0139322*n+.0971045*e+.7141733*t)/Zn));const l=116*o-16;return[l<0?0:l,500*(i-o),200*(o-a),r]}function rgb2xyz(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function xyz2lab(n){return n>t3?Math.pow(n,1/3):n/t2+t0}function labToRgb([n,e,t,r]){let i=(n+16)/116,a=isNaN(e)?i:i+e/500,o=isNaN(t)?i:i-t/200;return i=Yn*lab2xyz(i),a=Xn*lab2xyz(a),o=Zn*lab2xyz(o),[xyz2rgb(3.1338561*a-1.6168667*i-.4906146*o),xyz2rgb(-.9787684*a+1.9161415*i+.033454*o),xyz2rgb(.0719453*a-.2289914*i+1.4052427*o),r]}function xyz2rgb(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function lab2xyz(n){return n>t1?n*n*n:t2*(n-t0)}function rgbToHcl(n){const[e,t,r,i]=rgbToLab(n),a=Math.sqrt(t*t+r*r);return[Math.round(a*1e4)?constrainAngle(Math.atan2(r,t)*rad2deg):NaN,a,e,i]}function hclToRgb([n,e,t,r]){return n=isNaN(n)?0:n*deg2rad$1,labToRgb([t,Math.cos(n)*e,Math.sin(n)*e,r])}function hslToRgb([n,e,t,r]){n=constrainAngle(n),e/=100,t/=100;function i(a){const o=(a+n/30)%12,l=e*Math.min(t,1-t);return t-l*Math.max(-1,Math.min(o-3,9-o,1))}return[i(0),i(8),i(4),r]}function parseCssColor(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=namedColors[n];if(e){const[i,a,o]=e;return[i/255,a/255,o/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const a=n.length<6?1:2;let o=1;return[parseHex(n.slice(o,o+=a)),parseHex(n.slice(o,o+=a)),parseHex(n.slice(o,o+=a)),parseHex(n.slice(o,o+a)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,a=n.match(i);if(a){const[o,l,c,h,f,p,m,v,C,b,S,x]=a,T=[h||" ",m||" ",b].join("");if(T==="  "||T==="  /"||T===",,"||T===",,,"){const P=[c,p,C].join(""),L=P==="%%%"?100:P===""?255:0;if(L){const k=[clamp(+l/L,0,1),clamp(+f/L,0,1),clamp(+v/L,0,1),S?parseAlpha(+S,x):1];if(validateNumbers(k))return k}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,a,o,l,c,h,f,p,m]=r,v=[o||" ",c||" ",f].join("");if(v==="  "||v==="  /"||v===",,"||v===",,,"){const C=[+a,clamp(+l,0,100),clamp(+h,0,100),p?parseAlpha(+p,m):1];if(validateNumbers(C))return hslToRgb(C)}}}function parseHex(n){return parseInt(n.padEnd(2,n),16)/255}function parseAlpha(n,e){return clamp(e?n/100:n,0,1)}function clamp(n,e,t){return Math.min(Math.max(e,n),t)}function validateNumbers(n){return!n.some(Number.isNaN)}const namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function interpolateNumber(n,e,t){return n+t*(e-n)}function interpolateArray(n,e,t){return n.map((r,i)=>interpolateNumber(r,e[i],t))}class Color{constructor(e,t,r,i=1,a=!0){this.r=e,this.g=t,this.b=r,this.a=i,a||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCssColor(e);if(t)return new Color(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,a=i||1/0;return this.overwriteGetter("rgb",[e/a,t/a,r/a,i])}get hcl(){return this.overwriteGetter("hcl",rgbToHcl(this.rgb))}get lab(){return this.overwriteGetter("lab",rgbToLab(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(a=>Math.round(a*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[a,o,l,c]=interpolateArray(e.rgb,t.rgb,r);return new Color(a,o,l,c,!1)}case"hcl":{const[a,o,l,c]=e.hcl,[h,f,p,m]=t.hcl;let v,C;if(!isNaN(a)&&!isNaN(h)){let P=h-a;h>a&&P>180?P-=360:h<a&&a-h>180&&(P+=360),v=a+r*P}else isNaN(a)?isNaN(h)?v=NaN:(v=h,(l===1||l===0)&&(C=f)):(v=a,(p===1||p===0)&&(C=o));const[b,S,x,T]=hclToRgb([v,C??interpolateNumber(o,f,r),interpolateNumber(l,p,r),interpolateNumber(c,m,r)]);return new Color(b,S,x,T,!1)}case"lab":{const[a,o,l,c]=labToRgb(interpolateArray(e.lab,t.lab,r));return new Color(a,o,l,c,!1)}}}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);class Collator{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const VERTICAL_ALIGN_OPTIONS=["bottom","center","top"];class FormattedSection{constructor(e,t,r,i,a,o){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=a,this.verticalAlign=o}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Padding{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Padding)return e;if(typeof e=="number")return new Padding([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Padding(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Padding(interpolateArray(e.values,t.values,r))}}class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const anchors=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class VariableAnchorOffsetCollection{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof VariableAnchorOffsetCollection)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!anchors.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new VariableAnchorOffsetCollection(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,a=t.values;if(i.length!==a.length)throw new RuntimeError(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let l=0;l<i.length;l+=2){if(i[l]!==a[l])throw new RuntimeError(`Cannot interpolate values containing mismatched anchors. from[${l}]: ${i[l]}, to[${l}]: ${a[l]}`);o.push(i[l]);const[c,h]=i[l+1],[f,p]=a[l+1];o.push([interpolateNumber(c,f,r),interpolateNumber(h,p,r)])}return new VariableAnchorOffsetCollection(o)}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}}class ProjectionDefinition{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new ProjectionDefinition(e,t,r)}static parse(e){if(e instanceof ProjectionDefinition)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new ProjectionDefinition(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new ProjectionDefinition(e.from,e.to,e.transition);if(typeof e=="string")return new ProjectionDefinition(e,e,1)}}function validateRGBA(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof ProjectionDefinition||n instanceof Color||n instanceof Collator||n instanceof Formatted||n instanceof Padding||n instanceof VariableAnchorOffsetCollection||n instanceof ResolvedImage)return!0;if(Array.isArray(n)){for(const e of n)if(!isValue(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!isValue(n[e]))return!1;return!0}else return!1}function typeOf(n){if(n===null)return NullType;if(typeof n=="string")return StringType;if(typeof n=="boolean")return BooleanType;if(typeof n=="number")return NumberType;if(n instanceof Color)return ColorType;if(n instanceof ProjectionDefinition)return ProjectionDefinitionType;if(n instanceof Collator)return CollatorType;if(n instanceof Formatted)return FormattedType;if(n instanceof Padding)return PaddingType;if(n instanceof VariableAnchorOffsetCollection)return VariableAnchorOffsetCollectionType;if(n instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=typeOf(r);if(!t)t=i;else{if(t===i)continue;t=ValueType;break}}return array(t||ValueType,e)}else return ObjectType}function valueToString(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Color||n instanceof ProjectionDefinition||n instanceof Formatted||n instanceof Padding||n instanceof VariableAnchorOffsetCollection||n instanceof ResolvedImage?n.toString():JSON.stringify(n)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const r=e[1];let i=typeOf(r);const a=t.expectedType;return i.kind==="array"&&i.N===0&&a&&a.kind==="array"&&(typeof a.N!="number"||a.N===0)&&(i=a),new Literal(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const types$1={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const a=e[0];if(a==="array"){let l;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in types$1)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);l=types$1[h],r++}else l=ValueType;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],r++}i=array(l,c)}else{if(!types$1[a])throw new Error(`Types doesn't contain name = ${a}`);i=types$1[a]}const o=[];for(;r<e.length;r++){const l=t.parse(e[r],r,ValueType);if(!l)return null;o.push(l)}return new Assertion(i,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(r))){if(t===this.args.length-1)throw new RuntimeError(`Expected value to be of type ${typeToString(this.type)}, but found ${typeToString(typeOf(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const types$2={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!types$2[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=types$2[r],a=[];for(let o=1;o<e.length;o++){const l=t.parse(e[o],o,ValueType);if(!l)return null;a.push(l)}return new Coercion(i,a)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Color)return t;if(typeof t=="string"){const a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=validateRGBA(t[0],t[1],t[2],t[3]),!r))return new Color(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Padding.parse(t);if(i)return i}throw new RuntimeError(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=VariableAnchorOffsetCollection.parse(t);if(i)return i}throw new RuntimeError(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new RuntimeError(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Formatted.fromString(valueToString(this.args[0].evaluate(e)));case"resolvedImage":return ResolvedImage.fromString(valueToString(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return valueToString(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color.parse(e)),t}}class ParsingContext{constructor(e,t,r=[],i,a=new Scope,o=[]){this.registry=e,this.path=r,this.key=r.map(l=>`[${l}]`).join(""),this.scope=a,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,a={}){return t?this.concat(t,r,i)._parse(e,a):this._parse(e,a)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,a,o){return o==="assert"?new Assertion(a,[i]):o==="coerce"?new Coercion(a,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[i];if(a){let o=a.parse(e,this);if(!o)return null;if(this.expectedType){const l=this.expectedType,c=o.type;if((l.kind==="string"||l.kind==="number"||l.kind==="boolean"||l.kind==="object"||l.kind==="array")&&c.kind==="value")o=r(o,l,t.typeAnnotation||"assert");else if(l.kind==="projectionDefinition"&&(c.kind==="string"||c.kind==="array"))o=r(o,l,t.typeAnnotation||"coerce");else if((l.kind==="color"||l.kind==="formatted"||l.kind==="resolvedImage")&&(c.kind==="value"||c.kind==="string"))o=r(o,l,t.typeAnnotation||"coerce");else if(l.kind==="padding"&&(c.kind==="value"||c.kind==="number"||c.kind==="array"))o=r(o,l,t.typeAnnotation||"coerce");else if(l.kind==="variableAnchorOffsetCollection"&&(c.kind==="value"||c.kind==="array"))o=r(o,l,t.typeAnnotation||"coerce");else if(this.checkSubtype(l,c))return null}if(!(o instanceof Literal)&&o.type.kind!=="resolvedImage"&&this._isConstant(o)){const l=new EvaluationContext;try{o=new Literal(o.type,o.evaluate(l))}catch(c){return this.error(c.message),null}}return o}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new ParsingContext(this.registry,this._isConstant,i,t||null,a,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new ExpressionParsingError(r,e))}checkSubtype(e,t){const r=checkSubtype(e,t);return r&&this.error(r),r}}class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let a=1;a<e.length-1;a+=2){const o=e[a];if(typeof o!="string")return t.error(`Expected string, but found ${typeof o} instead.`,a);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);const l=t.parse(e[a+1],a+1);if(!l)return null;r.push([o,l])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new Let(r,i):null}outputDefined(){return this.result.outputDefined()}}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Var(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class At{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,NumberType),i=t.parse(e[2],2,array(t.expectedType||ValueType));if(!r||!i)return null;const a=i.type;return new At(a.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new RuntimeError(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new RuntimeError(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ValueType),i=t.parse(e[2],2,ValueType);return!r||!i?null:isValidType(r.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(t))} instead.`);if(!isValidNativeType(r,["string","array"]))throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class IndexOf{constructor(e,t,r){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ValueType),i=t.parse(e[2],2,ValueType);if(!r||!i)return null;if(!isValidType(r.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(r.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,NumberType);return a?new IndexOf(r,i,a):null}else return new IndexOf(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),isValidNativeType(r,["string"])){const a=r.indexOf(t,i);return a===-1?-1:[...r.slice(0,a)].length}else{if(isValidNativeType(r,["array"]))return r.indexOf(t,i);throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Match{constructor(e,t,r,i,a,o){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const a={},o=[];for(let h=2;h<e.length-1;h+=2){let f=e[h];const p=e[h+1];Array.isArray(f)||(f=[f]);const m=t.concat(h);if(f.length===0)return m.error("Expected at least one branch label.");for(const C of f){if(typeof C!="number"&&typeof C!="string")return m.error("Branch labels must be numbers or strings.");if(typeof C=="number"&&Math.abs(C)>Number.MAX_SAFE_INTEGER)return m.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof C=="number"&&Math.floor(C)!==C)return m.error("Numeric branch labels must be integer values.");if(!r)r=typeOf(C);else if(m.checkSubtype(r,typeOf(C)))return null;if(typeof a[String(C)]<"u")return m.error("Branch labels must be unique.");a[String(C)]=o.length}const v=t.parse(p,h,i);if(!v)return null;i=i||v.type,o.push(v)}const l=t.parse(e[1],1,ValueType);if(!l)return null;const c=t.parse(e[e.length-1],e.length-1,i);return!c||l.type.kind!=="value"&&t.concat(1).checkSubtype(r,l.type)?null:new Match(r,i,l,a,o,c)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Case{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const l=t.parse(e[o],o,BooleanType);if(!l)return null;const c=t.parse(e[o+1],o+1,r);if(!c)return null;i.push([l,c]),r=r||c.type}const a=t.parse(e[e.length-1],e.length-1,r);if(!a)return null;if(!r)throw new Error("Can't infer output type");return new Case(r,i,a)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Slice{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ValueType),i=t.parse(e[2],2,NumberType);if(!r||!i)return null;if(!isValidType(r.type,[array(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${typeToString(r.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,NumberType);return a?new Slice(r.type,r,i,a):null}else return new Slice(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),isValidNativeType(t,["string"]))return[...t].slice(r,i).join("");if(isValidNativeType(t,["array"]))return t.slice(r,i);throw new RuntimeError(`Expected first argument to be of type array or string, but found ${typeToString(typeOf(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function findStopLessThanOrEqualTo(n,e){const t=n.length-1;let r=0,i=t,a=0,o,l;for(;r<=i;)if(a=Math.floor((r+i)/2),o=n[a],l=n[a+1],o<=e){if(a===t||e<l)return a;r=a+1}else if(o>e)i=a-1;else throw new RuntimeError("Input is not a number.");return 0}class Step{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,a]of r)this.labels.push(i),this.outputs.push(a)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,NumberType);if(!r)return null;const i=[];let a=null;t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);for(let o=1;o<e.length;o+=2){const l=o===1?-1/0:e[o],c=e[o+1],h=o,f=o+1;if(typeof l!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(i.length&&i[i.length-1][0]>=l)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const p=t.parse(c,f,a);if(!p)return null;a=a||p.type,i.push([l,p])}return new Step(a,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const a=t.length;if(i>=t[a-1])return r[a-1].evaluate(e);const o=findStopLessThanOrEqualTo(t,i);return r[o].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var unitbezier,hasRequiredUnitbezier;function requireUnitbezier(){if(hasRequiredUnitbezier)return unitbezier;hasRequiredUnitbezier=1,unitbezier=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var a=this.sampleCurveX(r)-e;if(Math.abs(a)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-a/o}var l=0,c=1;for(r=e,i=0;i<20&&(a=this.sampleCurveX(r),!(Math.abs(a-e)<t));i++)e>a?l=r:c=r,r=(c-l)*.5+l;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},unitbezier}var unitbezierExports=requireUnitbezier(),UnitBezier=getDefaultExportFromCjs(unitbezierExports);class Interpolate{constructor(e,t,r,i,a){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[o,l]of a)this.labels.push(o),this.outputs.push(l)}static interpolationFactor(e,t,r,i){let a=0;if(e.name==="exponential")a=exponentialInterpolation(t,e.base,r,i);else if(e.name==="linear")a=exponentialInterpolation(t,1,r,i);else if(e.name==="cubic-bezier"){const o=e.controlPoints;a=new UnitBezier(o[0],o[1],o[2],o[3]).solve(exponentialInterpolation(t,1,r,i))}return a}static parse(e,t){let[r,i,a,...o]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const h=i[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:h}}else if(i[0]==="cubic-bezier"){const h=i.slice(1);if(h.length!==4||h.some(f=>typeof f!="number"||f<0||f>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(a=t.parse(a,2,NumberType),!a)return null;const l=[];let c=null;r==="interpolate-hcl"||r==="interpolate-lab"?c=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<o.length;h+=2){const f=o[h],p=o[h+1],m=h+3,v=h+4;if(typeof f!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(l.length&&l[l.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);const C=t.parse(p,v,c);if(!C)return null;c=c||C.type,l.push([f,C])}return!verifyType(c,NumberType)&&!verifyType(c,ProjectionDefinitionType)&&!verifyType(c,ColorType)&&!verifyType(c,PaddingType)&&!verifyType(c,VariableAnchorOffsetCollectionType)&&!verifyType(c,array(NumberType))?t.error(`Type ${typeToString(c)} is not interpolatable.`):new Interpolate(c,r,i,a,l)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const a=t.length;if(i>=t[a-1])return r[a-1].evaluate(e);const o=findStopLessThanOrEqualTo(t,i),l=t[o],c=t[o+1],h=Interpolate.interpolationFactor(this.interpolation,i,l,c),f=r[o].evaluate(e),p=r[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return interpolateNumber(f,p,h);case"color":return Color.interpolate(f,p,h);case"padding":return Padding.interpolate(f,p,h);case"variableAnchorOffsetCollection":return VariableAnchorOffsetCollection.interpolate(f,p,h);case"array":return interpolateArray(f,p,h);case"projectionDefinition":return ProjectionDefinition.interpolate(f,p,h)}case"interpolate-hcl":return Color.interpolate(f,p,h,"hcl");case"interpolate-lab":return Color.interpolate(f,p,h,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function exponentialInterpolation(n,e,t,r){const i=r-t,a=n-t;return i===0?0:e===1?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const a=[];for(const l of e.slice(1)){const c=t.parse(l,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!c)return null;r=r||c.type,a.push(c)}if(!r)throw new Error("No output type");return i&&a.some(l=>checkSubtype(i,l.type))?new Coalesce(ValueType,a):new Coalesce(r,a)}evaluate(e){let t=null,r=0,i;for(const a of this.args)if(r++,t=a.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function isComparableType(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(n,e,t){return e===t}function neq(n,e,t){return e!==t}function lt(n,e,t){return e<t}function gt(n,e,t){return e>t}function lteq(n,e,t){return e<=t}function gteq(n,e,t){return e>=t}function eqCollate(n,e,t,r){return r.compare(e,t)===0}function neqCollate(n,e,t,r){return!eqCollate(n,e,t,r)}function ltCollate(n,e,t,r){return r.compare(e,t)<0}function gtCollate(n,e,t,r){return r.compare(e,t)>0}function lteqCollate(n,e,t,r){return r.compare(e,t)<=0}function gteqCollate(n,e,t,r){return r.compare(e,t)>=0}function makeComparison(n,e,t){const r=n!=="=="&&n!=="!=";return class Rf{constructor(a,o,l){this.type=BooleanType,this.lhs=a,this.rhs=o,this.collator=l,this.hasUntypedArgument=a.type.kind==="value"||o.type.kind==="value"}static parse(a,o){if(a.length!==3&&a.length!==4)return o.error("Expected two or three arguments.");const l=a[0];let c=o.parse(a[1],1,ValueType);if(!c)return null;if(!isComparableType(l,c.type))return o.concat(1).error(`"${l}" comparisons are not supported for type '${typeToString(c.type)}'.`);let h=o.parse(a[2],2,ValueType);if(!h)return null;if(!isComparableType(l,h.type))return o.concat(2).error(`"${l}" comparisons are not supported for type '${typeToString(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return o.error(`Cannot compare types '${typeToString(c.type)}' and '${typeToString(h.type)}'.`);r&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new Assertion(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new Assertion(c.type,[h])));let f=null;if(a.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(f=o.parse(a[3],3,CollatorType),!f)return null}return new Rf(c,h,f)}evaluate(a){const o=this.lhs.evaluate(a),l=this.rhs.evaluate(a);if(r&&this.hasUntypedArgument){const c=typeOf(o),h=typeOf(l);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new RuntimeError(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const c=typeOf(o),h=typeOf(l);if(c.kind!=="string"||h.kind!=="string")return e(a,o,l)}return this.collator?t(a,o,l,this.collator.evaluate(a)):e(a,o,l)}eachChild(a){a(this.lhs),a(this.rhs),this.collator&&a(this.collator)}outputDefined(){return!0}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt,ltCollate),GreaterThan=makeComparison(">",gt,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class CollatorExpression{constructor(e,t,r){this.type=CollatorType,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,BooleanType);if(!i)return null;const a=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,BooleanType);if(!a)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,StringType),!o)?null:new CollatorExpression(i,a,o)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class NumberFormat{constructor(e,t,r,i,a){this.type=StringType,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,NumberType);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let a=null;if(i.locale&&(a=t.parse(i.locale,1,StringType),!a))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,StringType),!o))return null;let l=null;if(i["min-fraction-digits"]&&(l=t.parse(i["min-fraction-digits"],1,NumberType),!l))return null;let c=null;return i["max-fraction-digits"]&&(c=t.parse(i["max-fraction-digits"],1,NumberType),!c)?null:new NumberFormat(r,a,o,l,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let a=!1;for(let o=1;o<=e.length-1;++o){const l=e[o];if(a&&typeof l=="object"&&!Array.isArray(l)){a=!1;let c=null;if(l["font-scale"]&&(c=t.parse(l["font-scale"],1,NumberType),!c))return null;let h=null;if(l["text-font"]&&(h=t.parse(l["text-font"],1,array(StringType)),!h))return null;let f=null;if(l["text-color"]&&(f=t.parse(l["text-color"],1,ColorType),!f))return null;let p=null;if(l["vertical-align"]){if(typeof l["vertical-align"]=="string"&&!VERTICAL_ALIGN_OPTIONS.includes(l["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${l["vertical-align"]}' instead.`);if(p=t.parse(l["vertical-align"],1,StringType),!p)return null}const m=i[i.length-1];m.scale=c,m.font=h,m.textColor=f,m.verticalAlign=p}else{const c=t.parse(e[o],1,ValueType);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new FormatExpression(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return typeOf(i)===ResolvedImageType?new FormattedSection("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new FormattedSection(valueToString(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,StringType);return r?new ImageExpression(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=ResolvedImage.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${typeToString(r.type)} instead.`):new Length(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new RuntimeError(`Expected value to be of type string or array, but found ${typeToString(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const EXTENT=8192;function getTileCoordinates(n,e){const t=mercatorXfromLng(n[0]),r=mercatorYfromLat(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*EXTENT),Math.round(r*i*EXTENT)]}function getLngLatFromTileCoord(n,e){const t=Math.pow(2,e.z),r=(n[0]/EXTENT+e.x)/t,i=(n[1]/EXTENT+e.y)/t;return[lngFromMercatorXfromLng(r),latFromMercatorY(i)]}function mercatorXfromLng(n){return(180+n)/360}function lngFromMercatorXfromLng(n){return n*360-180}function mercatorYfromLat(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function latFromMercatorY(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function updateBBox(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function boxWithinBox(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function rayIntersect(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function pointOnBoundary(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],a=n[0]-t[0],o=n[1]-t[1];return r*o-a*i===0&&r*a<=0&&i*o<=0}function segmentIntersectSegment(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],a=[r[0]-t[0],r[1]-t[1]];return perp(a,i)===0?!1:!!(twoSided(n,e,t,r)&&twoSided(t,r,n,e))}function lineIntersectPolygon(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(segmentIntersectSegment(n,e,r[i],r[i+1]))return!0;return!1}function pointWithinPolygon(n,e,t=!1){let r=!1;for(const i of e)for(let a=0;a<i.length-1;a++){if(pointOnBoundary(n,i[a],i[a+1]))return t;rayIntersect(n,i[a],i[a+1])&&(r=!r)}return r}function pointWithinPolygons(n,e){for(const t of e)if(pointWithinPolygon(n,t))return!0;return!1}function lineStringWithinPolygon(n,e){for(const t of n)if(!pointWithinPolygon(t,e))return!1;for(let t=0;t<n.length-1;++t)if(lineIntersectPolygon(n[t],n[t+1],e))return!1;return!0}function lineStringWithinPolygons(n,e){for(const t of e)if(lineStringWithinPolygon(n,t))return!0;return!1}function perp(n,e){return n[0]*e[1]-n[1]*e[0]}function twoSided(n,e,t,r){const i=n[0]-t[0],a=n[1]-t[1],o=e[0]-t[0],l=e[1]-t[1],c=r[0]-t[0],h=r[1]-t[1],f=i*h-c*a,p=o*h-c*l;return f>0&&p<0||f<0&&p>0}function getTilePolygon(n,e,t){const r=[];for(let i=0;i<n.length;i++){const a=[];for(let o=0;o<n[i].length;o++){const l=getTileCoordinates(n[i][o],t);updateBBox(e,l),a.push(l)}r.push(a)}return r}function getTilePolygons(n,e,t){const r=[];for(let i=0;i<n.length;i++){const a=getTilePolygon(n[i],e,t);r.push(a)}return r}function updatePoint(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let a=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;a===0&&(a=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=a}updateBBox(e,n)}function resetBBox(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function getTilePoints(n,e,t,r){const i=Math.pow(2,r.z)*EXTENT,a=[r.x*EXTENT,r.y*EXTENT],o=[];for(const l of n)for(const c of l){const h=[c.x+a[0],c.y+a[1]];updatePoint(h,e,t,i),o.push(h)}return o}function getTileLines(n,e,t,r){const i=Math.pow(2,r.z)*EXTENT,a=[r.x*EXTENT,r.y*EXTENT],o=[];for(const l of n){const c=[];for(const h of l){const f=[h.x+a[0],h.y+a[1]];updateBBox(e,f),c.push(f)}o.push(c)}if(e[2]-e[0]<=i/2){resetBBox(e);for(const l of o)for(const c of l)updatePoint(c,e,t,i)}return o}function pointsWithinPolygons(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const a=getTilePolygon(e.coordinates,r,i),o=getTilePoints(n.geometry(),t,r,i);if(!boxWithinBox(t,r))return!1;for(const l of o)if(!pointWithinPolygon(l,a))return!1}if(e.type==="MultiPolygon"){const a=getTilePolygons(e.coordinates,r,i),o=getTilePoints(n.geometry(),t,r,i);if(!boxWithinBox(t,r))return!1;for(const l of o)if(!pointWithinPolygons(l,a))return!1}return!0}function linesWithinPolygons(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const a=getTilePolygon(e.coordinates,r,i),o=getTileLines(n.geometry(),t,r,i);if(!boxWithinBox(t,r))return!1;for(const l of o)if(!lineStringWithinPolygon(l,a))return!1}if(e.type==="MultiPolygon"){const a=getTilePolygons(e.coordinates,r,i),o=getTileLines(n.geometry(),t,r,i);if(!boxWithinBox(t,r))return!1;for(const l of o)if(!lineStringWithinPolygons(l,a))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const a of r.features){const{type:o,coordinates:l}=a.geometry;o==="Polygon"&&i.push(l),o==="MultiPolygon"&&i.push(...l)}if(i.length){const a={type:"MultiPolygon",coordinates:i};return new Within(r,a)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Within(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Within(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class TinyQueue{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const a=e-1>>1,o=t[a];if(r(i,o)>=0)break;t[e]=o,e=a}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,a=t[e];for(;e<i;){let o=(e<<1)+1;const l=o+1;if(l<this.length&&r(t[l],t[o])<0&&(o=l),r(t[o],a)>=0)break;t[e]=t[o],e=o}t[e]=a}}function classifyRings(n,e){if(n.length<=1)return[n];const r=[];let i,a;for(const o of n){const l=calculateSignedArea(o);l!==0&&(o.area=Math.abs(l),a===void 0&&(a=l<0),a===l<0?(i&&r.push(i),i=[o]):i.push(o))}return i&&r.push(i),r}function calculateSignedArea(n){let e=0;for(let t=0,r=n.length,i=r-1,a,o;t<r;i=t++)a=n[t],o=n[i],e+=(o.x-a.x)*(a.y+o.y);return e}const RE=6378.137,FE=1/298.257223563,E2=FE*(2-FE),RAD=Math.PI/180;class CheapRuler{constructor(e){const t=RAD*RE*1e3,r=Math.cos(e*RAD),i=1/(1-E2*(1-r*r)),a=Math.sqrt(i);this.kx=t*a*r,this.ky=t*a*i*(1-E2)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,a,o,l;for(let c=0;c<e.length-1;c++){let h=e[c][0],f=e[c][1],p=this.wrap(e[c+1][0]-h)*this.kx,m=(e[c+1][1]-f)*this.ky,v=0;(p!==0||m!==0)&&(v=(this.wrap(t[0]-h)*this.kx*p+(t[1]-f)*this.ky*m)/(p*p+m*m),v>1?(h=e[c+1][0],f=e[c+1][1]):v>0&&(h+=p/this.kx*v,f+=m/this.ky*v)),p=this.wrap(t[0]-h)*this.kx,m=(t[1]-f)*this.ky;const C=p*p+m*m;C<r&&(r=C,i=h,a=f,o=c,l=v)}return{point:[i,a],index:o,t:Math.max(0,Math.min(1,l))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const MinPointsSize=100,MinLinePointsSize=50;function compareDistPair(n,e){return e[0]-n[0]}function getRangeSize(n){return n[1]-n[0]+1}function isRangeSafe(n,e){return n[1]>=n[0]&&n[1]<e}function splitRange(n,e){if(n[0]>n[1])return[null,null];const t=getRangeSize(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function getBBox(n,e){if(!isRangeSafe(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)updateBBox(t,n[r]);return t}function getPolygonBBox(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)updateBBox(e,r);return e}function isValidBBox(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function bboxToBBoxDistance(n,e,t){if(!isValidBBox(n)||!isValidBBox(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function pointToLineDistance(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function segmentToSegmentDistance(n,e,t,r,i){const a=Math.min(pointToLineDistance(n,[t,r],i),pointToLineDistance(e,[t,r],i)),o=Math.min(pointToLineDistance(t,[n,e],i),pointToLineDistance(r,[n,e],i));return Math.min(a,o)}function lineToLineDistance(n,e,t,r,i){if(!(isRangeSafe(e,n.length)&&isRangeSafe(r,t.length)))return 1/0;let o=1/0;for(let l=e[0];l<e[1];++l){const c=n[l],h=n[l+1];for(let f=r[0];f<r[1];++f){const p=t[f],m=t[f+1];if(segmentIntersectSegment(c,h,p,m))return 0;o=Math.min(o,segmentToSegmentDistance(c,h,p,m,i))}}return o}function pointsToPointsDistance(n,e,t,r,i){if(!(isRangeSafe(e,n.length)&&isRangeSafe(r,t.length)))return NaN;let o=1/0;for(let l=e[0];l<=e[1];++l)for(let c=r[0];c<=r[1];++c)if(o=Math.min(o,i.distance(n[l],t[c])),o===0)return o;return o}function pointToPolygonDistance(n,e,t){if(pointWithinPolygon(n,e,!0))return 0;let r=1/0;for(const i of e){const a=i[0],o=i[i.length-1];if(a!==o&&(r=Math.min(r,pointToLineDistance(n,[o,a],t)),r===0))return r;const l=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,l.point)),r===0)return r}return r}function lineToPolygonDistance(n,e,t,r){if(!isRangeSafe(e,n.length))return NaN;for(let a=e[0];a<=e[1];++a)if(pointWithinPolygon(n[a],t,!0))return 0;let i=1/0;for(let a=e[0];a<e[1];++a){const o=n[a],l=n[a+1];for(const c of t)for(let h=0,f=c.length,p=f-1;h<f;p=h++){const m=c[p],v=c[h];if(segmentIntersectSegment(o,l,m,v))return 0;i=Math.min(i,segmentToSegmentDistance(o,l,m,v,r))}}return i}function polygonIntersect(n,e){for(const t of n)for(const r of t)if(pointWithinPolygon(r,e,!0))return!0;return!1}function polygonToPolygonDistance(n,e,t,r=1/0){const i=getPolygonBBox(n),a=getPolygonBBox(e);if(r!==1/0&&bboxToBBoxDistance(i,a,t)>=r)return r;if(boxWithinBox(i,a)){if(polygonIntersect(n,e))return 0}else if(polygonIntersect(e,n))return 0;let o=1/0;for(const l of n)for(let c=0,h=l.length,f=h-1;c<h;f=c++){const p=l[f],m=l[c];for(const v of e)for(let C=0,b=v.length,S=b-1;C<b;S=C++){const x=v[S],T=v[C];if(segmentIntersectSegment(p,m,x,T))return 0;o=Math.min(o,segmentToSegmentDistance(p,m,x,T,t))}}return o}function updateQueue(n,e,t,r,i,a){if(!a)return;const o=bboxToBBoxDistance(getBBox(r,a),i,t);o<e&&n.push([o,a,[0,0]])}function updateQueueTwoSets(n,e,t,r,i,a,o){if(!a||!o)return;const l=bboxToBBoxDistance(getBBox(r,a),getBBox(i,o),t);l<e&&n.push([l,a,o])}function pointsToPolygonDistance(n,e,t,r,i=1/0){let a=Math.min(r.distance(n[0],t[0][0]),i);if(a===0)return a;const o=new TinyQueue([[0,[0,n.length-1],[0,0]]],compareDistPair),l=getPolygonBBox(t);for(;o.length>0;){const c=o.pop();if(c[0]>=a)continue;const h=c[1],f=e?MinLinePointsSize:MinPointsSize;if(getRangeSize(h)<=f){if(!isRangeSafe(h,n.length))return NaN;if(e){const p=lineToPolygonDistance(n,h,t,r);if(isNaN(p)||p===0)return p;a=Math.min(a,p)}else for(let p=h[0];p<=h[1];++p){const m=pointToPolygonDistance(n[p],t,r);if(a=Math.min(a,m),a===0)return 0}}else{const p=splitRange(h,e);updateQueue(o,a,r,n,l,p[0]),updateQueue(o,a,r,n,l,p[1])}}return a}function pointSetToPointSetDistance(n,e,t,r,i,a=1/0){let o=Math.min(a,i.distance(n[0],t[0]));if(o===0)return o;const l=new TinyQueue([[0,[0,n.length-1],[0,t.length-1]]],compareDistPair);for(;l.length>0;){const c=l.pop();if(c[0]>=o)continue;const h=c[1],f=c[2],p=e?MinLinePointsSize:MinPointsSize,m=r?MinLinePointsSize:MinPointsSize;if(getRangeSize(h)<=p&&getRangeSize(f)<=m){if(!isRangeSafe(h,n.length)&&isRangeSafe(f,t.length))return NaN;let v;if(e&&r)v=lineToLineDistance(n,h,t,f,i),o=Math.min(o,v);else if(e&&!r){const C=n.slice(h[0],h[1]+1);for(let b=f[0];b<=f[1];++b)if(v=pointToLineDistance(t[b],C,i),o=Math.min(o,v),o===0)return o}else if(!e&&r){const C=t.slice(f[0],f[1]+1);for(let b=h[0];b<=h[1];++b)if(v=pointToLineDistance(n[b],C,i),o=Math.min(o,v),o===0)return o}else v=pointsToPointsDistance(n,h,t,f,i),o=Math.min(o,v)}else{const v=splitRange(h,e),C=splitRange(f,r);updateQueueTwoSets(l,o,i,n,t,v[0],C[0]),updateQueueTwoSets(l,o,i,n,t,v[0],C[1]),updateQueueTwoSets(l,o,i,n,t,v[1],C[0]),updateQueueTwoSets(l,o,i,n,t,v[1],C[1])}}return o}function pointToGeometryDistance(n,e){const t=n.geometry(),r=t.flat().map(o=>getLngLatFromTileCoord([o.x,o.y],n.canonical));if(t.length===0)return NaN;const i=new CheapRuler(r[0][1]);let a=1/0;for(const o of e){switch(o.type){case"Point":a=Math.min(a,pointSetToPointSetDistance(r,!1,[o.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,pointSetToPointSetDistance(r,!1,o.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,pointsToPolygonDistance(r,!1,o.coordinates,i,a));break}if(a===0)return a}return a}function lineStringToGeometryDistance(n,e){const t=n.geometry(),r=t.flat().map(o=>getLngLatFromTileCoord([o.x,o.y],n.canonical));if(t.length===0)return NaN;const i=new CheapRuler(r[0][1]);let a=1/0;for(const o of e){switch(o.type){case"Point":a=Math.min(a,pointSetToPointSetDistance(r,!0,[o.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,pointSetToPointSetDistance(r,!0,o.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,pointsToPolygonDistance(r,!0,o.coordinates,i,a));break}if(a===0)return a}return a}function polygonToGeometryDistance(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=classifyRings(t).map(o=>o.map(l=>l.map(c=>getLngLatFromTileCoord([c.x,c.y],n.canonical)))),i=new CheapRuler(r[0][0][0][1]);let a=1/0;for(const o of e)for(const l of r){switch(o.type){case"Point":a=Math.min(a,pointsToPolygonDistance([o.coordinates],!1,l,i,a));break;case"LineString":a=Math.min(a,pointsToPolygonDistance(o.coordinates,!0,l,i,a));break;case"Polygon":a=Math.min(a,polygonToPolygonDistance(l,o.coordinates,i,a));break}if(a===0)return a}return a}function toSimpleGeometry(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Distance{constructor(e,t){this.type=NumberType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Distance(r,r.features.map(i=>toSimpleGeometry(i.geometry)).flat());if(r.type==="Feature")return new Distance(r,toSimpleGeometry(r.geometry));if("type"in r&&"coordinates"in r)return new Distance(r,toSimpleGeometry(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointToGeometryDistance(e,this.geometries);if(e.geometryType()==="LineString")return lineStringToGeometryDistance(e,this.geometries);if(e.geometryType()==="Polygon")return polygonToGeometryDistance(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const expressions$1={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion,at:At,boolean:Assertion,case:Case,coalesce:Coalesce,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In,"index-of":IndexOf,interpolate:Interpolate,"interpolate-hcl":Interpolate,"interpolate-lab":Interpolate,length:Length,let:Let,literal:Literal,match:Match,number:Assertion,"number-format":NumberFormat,object:Assertion,slice:Slice,step:Step,string:Assertion,"to-boolean":Coercion,"to-color":Coercion,"to-number":Coercion,"to-string":Coercion,var:Var,within:Within,distance:Distance};class CompoundExpression{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=CompoundExpression.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,l=o.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,f]of l){c=new ParsingContext(t.registry,isExpressionConstant,t.path,null,t.scope);const p=[];let m=!1;for(let v=1;v<e.length;v++){const C=e[v],b=Array.isArray(h)?h[v-1]:h.type,S=c.parse(C,1+p.length,b);if(!S){m=!0;break}p.push(S)}if(!m){if(Array.isArray(h)&&h.length!==p.length){c.error(`Expected ${h.length} arguments, but found ${p.length} instead.`);continue}for(let v=0;v<p.length;v++){const C=Array.isArray(h)?h[v]:h.type,b=p[v];c.concat(v+1).checkSubtype(C,b.type)}if(c.errors.length===0)return new CompoundExpression(r,a,f,p)}}if(l.length===1)t.errors.push(...c.errors);else{const f=(l.length?l:o).map(([m])=>stringifySignature(m)).join(" | "),p=[];for(let m=1;m<e.length;m++){const v=t.parse(e[m],1+p.length);if(!v)return null;p.push(typeToString(v.type))}t.error(`Expected arguments of type ${f}, but found (${p.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const r in t)e[r]=CompoundExpression}}function rgba(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const a=i?i.evaluate(n):1,o=validateRGBA(e,t,r,a);if(o)throw new RuntimeError(o);return new Color(e/255,t/255,r/255,a,!1)}function has(n,e){return n in e}function get$1(n,e){const t=e[n];return typeof t>"u"?null:t}function binarySearch(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function varargs(n){return{type:n}}CompoundExpression.register(expressions$1,{error:[ErrorType,[StringType],(n,[e])=>{throw new RuntimeError(e.evaluate(n))}],typeof:[StringType,[ValueType],(n,[e])=>typeToString(typeOf(e.evaluate(n)))],"to-rgba":[array(NumberType,4),[ColorType],(n,[e])=>{const[t,r,i,a]=e.evaluate(n).rgb;return[t*255,r*255,i*255,a]}],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(n,[e])=>has(e.evaluate(n),n.properties())],[[StringType,ObjectType],(n,[e,t])=>has(e.evaluate(n),t.evaluate(n))]]},get:{type:ValueType,overloads:[[[StringType],(n,[e])=>get$1(e.evaluate(n),n.properties())],[[StringType,ObjectType],(n,[e,t])=>get$1(e.evaluate(n),t.evaluate(n))]]},"feature-state":[ValueType,[StringType],(n,[e])=>get$1(e.evaluate(n),n.featureState||{})],properties:[ObjectType,[],n=>n.properties()],"geometry-type":[StringType,[],n=>n.geometryType()],id:[ValueType,[],n=>n.id()],zoom:[NumberType,[],n=>n.globals.zoom],"heatmap-density":[NumberType,[],n=>n.globals.heatmapDensity||0],"line-progress":[NumberType,[],n=>n.globals.lineProgress||0],accumulated:[ValueType,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[NumberType,varargs(NumberType),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[NumberType,varargs(NumberType),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[NumberType],(n,[e])=>-e.evaluate(n)]]},"/":[NumberType,[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[NumberType,[NumberType,NumberType],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[NumberType,[NumberType],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))],log2:[NumberType,[NumberType],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[NumberType,[NumberType],(n,[e])=>Math.sin(e.evaluate(n))],cos:[NumberType,[NumberType],(n,[e])=>Math.cos(e.evaluate(n))],tan:[NumberType,[NumberType],(n,[e])=>Math.tan(e.evaluate(n))],asin:[NumberType,[NumberType],(n,[e])=>Math.asin(e.evaluate(n))],acos:[NumberType,[NumberType],(n,[e])=>Math.acos(e.evaluate(n))],atan:[NumberType,[NumberType],(n,[e])=>Math.atan(e.evaluate(n))],min:[NumberType,varargs(NumberType),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[NumberType,varargs(NumberType),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[NumberType,[NumberType],(n,[e])=>Math.abs(e.evaluate(n))],round:[NumberType,[NumberType],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[NumberType,[NumberType],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[BooleanType,[StringType,ValueType],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(n,[e])=>n.id()===e.value],"filter-type-==":[BooleanType,[StringType],(n,[e])=>n.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[BooleanType,[StringType,ValueType],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[BooleanType,[ValueType],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[BooleanType,[ValueType],(n,[e])=>e.value in n.properties()],"filter-has-id":[BooleanType,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[BooleanType,[array(StringType)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[BooleanType,[array(ValueType)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[BooleanType,[StringType,array(ValueType)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array(ValueType)],(n,[e,t])=>binarySearch(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[varargs(BooleanType),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[varargs(BooleanType),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(n,[e])=>!e.evaluate(n)],"is-supported-script":[BooleanType,[StringType],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[StringType,[StringType],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[StringType,[StringType],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[StringType,varargs(ValueType),(n,e)=>e.map(t=>valueToString(t.evaluate(n))).join("")],"resolved-locale":[StringType,[CollatorType],(n,[e])=>e.evaluate(n).resolvedLocale()]});function stringifySignature(n){return Array.isArray(n)?`(${n.map(typeToString).join(", ")})`:`(${typeToString(n.type)}...)`}function isExpressionConstant(n){if(n instanceof Var)return isExpressionConstant(n.boundExpression);if(n instanceof CompoundExpression&&n.name==="error")return!1;if(n instanceof CollatorExpression)return!1;if(n instanceof Within)return!1;if(n instanceof Distance)return!1;const e=n instanceof Coercion||n instanceof Assertion;let t=!0;return n.eachChild(r=>{e?t=t&&isExpressionConstant(r):t=t&&r instanceof Literal}),t?isFeatureConstant(n)&&isGlobalPropertyConstant(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function isFeatureConstant(n){if(n instanceof CompoundExpression){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Within||n instanceof Distance)return!1;let e=!0;return n.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(n){if(n instanceof CompoundExpression&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(n,e){if(n instanceof CompoundExpression&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!isGlobalPropertyConstant(r,e)&&(t=!1)}),t}function success(n){return{result:"success",value:n}}function error(n){return{result:"error",value:n}}function supportsPropertyExpression(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function supportsZoomExpression(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(n){return!!n.expression&&n.expression.interpolated}function isFunction$1(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,a,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,a,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null;try{const l=this.expression.evaluate(this._evaluator);if(l==null||typeof l=="number"&&l!==l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new RuntimeError(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(l)} instead.`);return l}catch(l){return this._warningHistory[l.message]||(this._warningHistory[l.message]=!0,typeof console<"u"&&console.warn(l.message)),this._defaultValue}}}function isExpression(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in expressions$1}function createExpression(n,e){const t=new ParsingContext(expressions$1,isExpressionConstant,[],e?getExpectedType(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?success(new StyleExpression(r,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,a,o)}evaluate(e,t,r,i,a,o){return this._styleExpression.evaluate(e,t,r,i,a,o)}}class ZoomDependentExpression{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,a,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,a,o)}evaluate(e,t,r,i,a,o){return this._styleExpression.evaluate(e,t,r,i,a,o)}interpolationFactor(e,t,r){return this.interpolationType?Interpolate.interpolationFactor(this.interpolationType,e,t,r):0}}function createPropertyExpression(n,e){const t=createExpression(n,e);if(t.result==="error")return t;const r=t.value.expression,i=isFeatureConstant(r);if(!i&&!supportsPropertyExpression(e))return error([new ExpressionParsingError("","data expressions not supported")]);const a=isGlobalPropertyConstant(r,["zoom"]);if(!a&&!supportsZoomExpression(e))return error([new ExpressionParsingError("","zoom expressions not supported")]);const o=findZoomCurve(r);if(!o&&!a)return error([new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof ExpressionParsingError)return error([o]);if(o instanceof Interpolate&&!supportsInterpolation(e))return error([new ExpressionParsingError("",'"interpolate" expressions cannot be used with this property')]);if(!o)return success(i?new ZoomConstantExpression("constant",t.value):new ZoomConstantExpression("source",t.value));const l=o instanceof Interpolate?o.interpolation:void 0;return success(i?new ZoomDependentExpression("camera",t.value,o.labels,l):new ZoomDependentExpression("composite",t.value,o.labels,l))}function findZoomCurve(n){let e=null;if(n instanceof Let)e=findZoomCurve(n.result);else if(n instanceof Coalesce){for(const t of n.args)if(e=findZoomCurve(t),e)break}else(n instanceof Step||n instanceof Interpolate)&&n.input instanceof CompoundExpression&&n.input.name==="zoom"&&(e=n);return e instanceof ExpressionParsingError||n.eachChild(t=>{const r=findZoomCurve(t);r instanceof ExpressionParsingError?e=r:!e&&r?e=new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new ExpressionParsingError("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(n){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,padding:PaddingType,projectionDefinition:ProjectionDefinitionType,resolvedImage:ResolvedImageType,variableAnchorOffsetCollection:VariableAnchorOffsetCollectionType};return n.type==="array"?array(e[n.value]||ValueType,n.length):e[n.type]}function getDefaultValue(n){return n.type==="color"&&isFunction$1(n.default)?new Color(0,0,0,0):n.type==="color"?Color.parse(n.default)||null:n.type==="padding"?Padding.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?VariableAnchorOffsetCollection.parse(n.default)||null:n.type==="projectionDefinition"?ProjectionDefinition.parse(n.default)||null:n.default===void 0?null:n.default}function isExpressionFilter(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const filterSpec={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function featureFilter(n){if(n==null)return{filter:()=>!0,needGeometry:!1};isExpressionFilter(n)||(n=convertFilter$1(n));const e=createExpression(n,filterSpec);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=geometryNeeded(n);return{filter:(r,i,a)=>e.value.evaluate(r,i,{},a),needGeometry:t}}}function compare(n,e){return n<e?-1:n>e?1:0}function geometryNeeded(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(geometryNeeded(n[e]))return!0;return!1}function convertFilter$1(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?convertComparisonOp$1(n[1],n[2],"=="):e==="!="?convertNegation(convertComparisonOp$1(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp$1(n[1],n[2],e):e==="any"?convertDisjunctionOp(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(convertFilter$1)):e==="none"?["all"].concat(n.slice(1).map(convertFilter$1).map(convertNegation)):e==="in"?convertInOp$1(n[1],n.slice(2)):e==="!in"?convertNegation(convertInOp$1(n[1],n.slice(2))):e==="has"?convertHasOp$1(n[1]):e==="!has"?convertNegation(convertHasOp$1(n[1])):!0}function convertComparisonOp$1(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function convertDisjunctionOp(n){return["any"].concat(n.map(convertFilter$1))}function convertInOp$1(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(compare)]]:["filter-in-small",n,["literal",e]]}}function convertHasOp$1(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function convertNegation(n){return["!",n]}function convertLiteral(n){return typeof n=="object"?["literal",n]:n}function convertFunction(n,e){let t=n.stops;if(!t)return convertIdentityFunction(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,a=r||!i;return t=t.map(o=>!i&&e.tokens&&typeof o[1]=="string"?[o[0],convertTokenString(o[1])]:[o[0],convertLiteral(o[1])]),r?convertZoomAndPropertyFunction(n,e,t):a?convertZoomFunction(n,e,t):convertPropertyFunction(n,e,t)}function convertIdentityFunction(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,convertLiteral(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function getInterpolateOperator(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(n,e,t){const r={},i={},a=[];for(let l=0;l<t.length;l++){const c=t[l],h=c[0].zoom;r[h]===void 0&&(r[h]={zoom:h,type:n.type,property:n.property,default:n.default},i[h]=[],a.push(h)),i[h].push([c[0].value,c[1]])}if(getFunctionType({},e)==="exponential"){const l=[getInterpolateOperator(n),["linear"],["zoom"]];for(const c of a){const h=convertPropertyFunction(r[c],e,i[c]);appendStopPair(l,c,h,!1)}return l}else{const l=["step",["zoom"]];for(const c of a){const h=convertPropertyFunction(r[c],e,i[c]);appendStopPair(l,c,h,!0)}return fixupDegenerateStepCurve(l),l}}function coalesce(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function getFallback(n,e){const t=convertLiteral(coalesce(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(n,e,t){const r=getFunctionType(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const a=["case"];for(const o of t)a.push(["==",i,o[0]],o[1]);return a.push(getFallback(n,e)),a}else if(r==="categorical"){const a=["match",i];for(const o of t)appendStopPair(a,o[0],o[1],!1);return a.push(getFallback(n,e)),a}else if(r==="interval"){const a=["step",["number",i]];for(const o of t)appendStopPair(a,o[0],o[1],!0);return fixupDegenerateStepCurve(a),n.default===void 0?a:["case",["==",["typeof",i],"number"],a,convertLiteral(n.default)]}else if(r==="exponential"){const a=n.base!==void 0?n.base:1,o=[getInterpolateOperator(n),a===1?["linear"]:["exponential",a],["number",i]];for(const l of t)appendStopPair(o,l[0],l[1],!1);return n.default===void 0?o:["case",["==",["typeof",i],"number"],o,convertLiteral(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function convertZoomFunction(n,e,t,r=["zoom"]){const i=getFunctionType(n,e);let a,o=!1;if(i==="interval")a=["step",r],o=!0;else if(i==="exponential"){const l=n.base!==void 0?n.base:1;a=[getInterpolateOperator(n),l===1?["linear"]:["exponential",l],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const l of t)appendStopPair(a,l[0],l[1],o);return fixupDegenerateStepCurve(a),a}function fixupDegenerateStepCurve(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function appendStopPair(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function getFunctionType(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const a=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,a.length>0&&e.push(a),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}const v8=v8Spec;var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={};function mb2css(n,e,t){var r=fontCache[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,a="normal",o=[],l,c,h=0,f=n.length;h<f;++h){var p=n[h],m=p.split(" "),v=m[m.length-1].toLowerCase();v=="normal"||v=="italic"||v=="oblique"?(a=c?a:v,c=!0,m.pop(),v=m[m.length-1].toLowerCase()):italicRE.test(v)&&(v=v.replace(italicRE,""),a=c?a:m[m.length-1].replace(v,""),c=!0);for(var C in fontWeights){var b=m.length>1?m[m.length-2].toLowerCase():"";if(v==C||v==C.replace("-","")||b+"-"+v==C){i=l?i:fontWeights[C],m.pop(),b&&C.startsWith(b)&&m.pop();break}}!l&&typeof v=="number"&&(i=v,l=!0);var S=m.join(sp).replace("Klokantech Noto Sans","Noto Sans");S.indexOf(sp)!==-1&&(S='"'+S+'"'),o.push(S)}r=fontCache[n]=[a,i,o]}return r[0]+sp+r[1]+sp+e+"px"+(t?"/"+t:"")+sp+r[2]}class Kinetic{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const a=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MapEvent extends BaseEvent{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,r,i,a,o){super(e,t,a),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=listen(r,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(r,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(r,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(r,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,a=t[e],o=r[e],l=e;for(;e<i>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),f=h<i&&r[h]<r[c]?h:c;t[e]=t[f],r[e]=r[f],e=f}t[e]=a,r[e]=o,this.siftDown_(l,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,a=r[t],o=i[t];for(;t>e;){const l=this.getParentIndex_(t);if(i[l]>o)r[t]=r[l],i[t]=i[l],t=l;else break}r[t]=a,i[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const a=t.length;let o,l,c;for(l=0;l<a;++l)o=t[l],c=e(o),c==DROP?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=c,t[i++]=o);t.length=i,r.length=i,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===TileState.LOADED||r===TileState.ERROR||r===TileState.EMPTY){r!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],a=i.getKey();i.getState()===TileState.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++r,i.load())}}}function getTilePriority(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return DROP;const a=n.viewState.center,o=r[0]-a[0],l=r[1]-a[1];return 65536*Math.log(i)+Math.sqrt(o*o+l*l)/i}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=o):this.collapseLabel_=a;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=i):this.label_=l;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=h,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(a=>{var o;return((o=a.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>toPromise(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let i=0,a=t.length;i<a;++i){const o=document.createElement("li");o.innerHTML=t[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const a=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=a,o.appendChild(this.label_),o.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const l=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,c=this.element;c.className=l,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const a=this.element.classList.contains(CLASS_HIDDEN);!a&&r===0?this.element.classList.add(CLASS_HIDDEN):a&&r!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=i}this.rotation_=r}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(EventType.CLICK,this.handleClick_.bind(this,r),!1);const p=document.createElement("button");p.className=a,p.setAttribute("type","button"),p.title=h,p.appendChild(typeof l=="string"?document.createTextNode(l):l),p.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-r),!1);const m=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,v=this.element;v.className=m,v.appendChild(f),v.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const a=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:a,duration:this.duration_,easing:easeOut})):r.setZoom(a)}}}function defaults$2(n){n=n||{};const e=new Collection;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Zoom(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Rotate(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Attribution(n.attributionOptions)),e}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:linear,center:n.getConstrainedCenter(i)})}}function zoomByDelta(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const a=n.getConstrainedZoom(i+e),o=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:r!==void 0?r:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const r=e.originalEvent,i=e.map,a=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,l=i.getView();zoomByDelta(l,o,a,this.duration_),r.preventDefault(),t=!0}return!t}}function all(n){const e=arguments;return function(t){let r=!0;for(let i=0,a=e.length;i<a&&(r=r&&e[i](t),!!r);++i);return r}}const altKeyOnly=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},focusWithTabindex=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?focus(n):!0},always=TRUE,mouseActionButton=function(n){const e=n.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,singleClick=function(n){return n.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(n){const e=n.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(n){const e=n.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(n){const e=n.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(centroid(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const a=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=e.map.getView();scale$3(a,l.getResolution()),rotate$1(a,l.getRotation()),l.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),o=r.getCenterInternal(),l=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([l[0]-i*Math.cos(a),l[1]-i*Math.sin(a)]);r.animateInternal({center:r.getConstrainedCenter(c),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===disable)return;const i=t.getSize(),a=e.pixel,o=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;r.adjustRotationInternal(-l)}this.lastAngle_=o}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Polygon([i])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],a=r[1]-t[1];return i*i+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const a=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(a),l=r.getResolution()/o;i=i.clone(),i.scale(l*l)}r.fitInternal(i,{duration:this.duration_,easing:easeOut})}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Key.DOWN||i==Key.LEFT||i==Key.RIGHT||i==Key.UP)){const o=e.map.getView(),l=o.getResolution()*this.pixelDelta_;let c=0,h=0;i==Key.DOWN?h=-l:i==Key.LEFT?c=-l:i==Key.RIGHT?c=l:h=l;const f=[c,h];rotate$1(f,o.getRotation()),pan(o,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const a=e.map,o=i==="+"?this.delta_:-this.delta_,l=a.getView();zoomByDelta(l,o,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always;this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let a;if(e.type==EventType.WHEEL&&(a=i.deltaY,FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const l=r.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=a;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-clamp$1(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),zoomByDelta(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const c=a-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=a;const o=e.map,l=o.getView();l.getConstraints().rotation!==disable&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(o.render(),l.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],a=r.clientX-i.clientX,o=r.clientY-i.clientY,l=Math.sqrt(a*a+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/l),this.lastDistance_=l;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(centroid(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function defaults$1(n){n=n||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new DragRotate),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new DragPan({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new PinchRotate),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new PinchZoom({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new DragZoom({duration:n.zoomDuration})),e}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property$1={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property$1.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Collection(r.slice(),{unique:!0}):assert(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Collection(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const a=t[r];this.registerLayerListeners_(a),this.dispatchEvent(new GroupEvent("addlayer",a))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=getUid(t);this.listenerKeys_[r].forEach(unlistenByKey),delete this.listenerKeys_[r],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property$1.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,a=r.length;i<a;++i)this.dispatchEvent(new GroupEvent("removelayer",r[i]))}this.set(Property$1.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const i=this.getLayerState();let a=i.zIndex;!e&&i.zIndex===void 0&&(a=0);for(let o=r,l=t.length;o<l;o++){const c=t[o];c.opacity*=i.opacity,c.visible=c.visible&&i.visible,c.maxResolution=Math.min(c.maxResolution,i.maxResolution),c.minResolution=Math.max(c.minResolution,i.minResolution),c.minZoom=Math.max(c.minZoom,i.minZoom),c.maxZoom=Math.min(c.maxZoom,i.maxZoom),i.extent!==void 0&&(c.extent!==void 0?c.extent=getIntersection(c.extent,i.extent):c.extent=i.extent),c.zIndex===void 0&&(c.zIndex=a)}return t}getSourceState(){return"ready"}}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;compose(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(i,r)}forEachFeatureAtCoordinate(e,t,r,i,a,o,l,c){let h;const f=t.viewState;function p(L,k,F,U){return a.call(o,k,L?F:null,U)}const m=f.projection,v=wrapX$1(e.slice(),m),C=[[0,0]];if(m.canWrapX()&&i){const L=m.getExtent(),k=getWidth(L);C.push([-k,0],[k,0])}const b=t.layerStatesArray,S=b.length,x=[],T=[];for(let L=0;L<C.length;L++)for(let k=S-1;k>=0;--k){const F=b[k],U=F.layer;if(U.hasRenderer()&&inView(F,f)&&l.call(c,U)){const z=U.getRenderer(),N=U.getSource();if(z&&N){const K=N.getWrapX()?v:e,q=p.bind(null,F.managed);T[0]=K[0]+C[L][0],T[1]=K[1]+C[L][1],h=z.forEachFeatureAtCoordinate(T,t,r,q,x)}if(h)return h}}if(x.length===0)return;const P=1/x.length;return x.forEach((L,k)=>L.distanceSq+=k*P),x.sort((L,k)=>L.distanceSq-k.distanceSq),x.some(L=>h=L.callback(L.feature,L.layer,L.geometry)),h}hasFeatureAtCoordinate(e,t,r,i,a,o){return this.forEachFeatureAtCoordinate(e,t,r,i,TRUE,this,a,o)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(n,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new RenderEvent(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort((l,c)=>l.zIndex-c.zIndex);t.some(l=>l.layer instanceof BaseVectorLayer&&l.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const a=[];let o=null;for(let l=0,c=t.length;l<c;++l){const h=t[l];e.layerIndex=l;const f=h.layer,p=f.getSourceState();if(!inView(h,i)||p!="ready"&&p!="undefined"){f.unrender();continue}const m=f.render(e,o);m&&(m!==o&&(this.children_.push(m),o=m),a.push(h))}this.declutter(e,a),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],a=i.layer;a.getDeclutter()&&a.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function removeLayerMapProperty(n){if(n instanceof Layer){n.setMapInternal(null);return}n instanceof LayerGroup&&n.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(n,e){if(n instanceof Layer){n.setMapInternal(e);return}if(n instanceof LayerGroup){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)setLayerMapProperty(t[r],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$2(),this.interactions=t.interactions||defaults$1({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof View)&&e.view.then(function(i){r.setView(new View(i))}),this.controls.addEventListener(CollectionEventType.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,i=>{const a=i.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const a=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:TRUE,l=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,l,t,null,o,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof LayerGroup?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:TRUE,a=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,a,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),a=r.width/i[0],o=r.height/i[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-r.left)/a,(l.clientY-r.top)/o]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const a=i.layer.getRenderer();if(a&&!a.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return getTilePriority(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===PointerEventType.POINTERDOWN||r===EventType.WHEEL||r===EventType.KEYDOWN){const i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=t.target,l=a instanceof ShadowRoot?a.host===o?a.host.ownerDocument:a:a===i?i.documentElement:a;if(this.overlayContainerStopEvent_.contains(o)||!l.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,a=i;if(e){const o=e.viewHints;if(o[ViewHint.ANIMATING]||o[ViewHint.INTERACTING]){const l=Date.now()-e.time>8;i=l?0:8,a=l?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,a=r.length;i<a;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)unlistenByKey(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const a in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const a=t.getRootNode();r=a instanceof ShadowRoot?a.host:t}this.targetChangeHandlerKeys_=[listen(r,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(r,EventType.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let a=null;if(t!==void 0&&hasArea(t)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=r.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(l.center,l.resolution,l.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:o,wantedTiles:{},mapId:getUid(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const c=isNaN(l.nextRotation)?l.rotation:l.nextRotation;a.nextExtent=getForViewAndSize(l.nextCenter,l.nextResolution,c,t)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(a.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,i)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!a.viewHints[ViewHint.ANIMATING]&&!a.viewHints[ViewHint.INTERACTING]&&!equals$1(a.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,a)),clone$1(a.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(r){t.setView(new View(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),a=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(t=[Math.max(0,a),Math.max(0,o)],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!equals$2(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new LayerGroup({layers:n.layers});t[MapProperty.LAYERGROUP]=r,t[MapProperty.TARGET]=n.target,t[MapProperty.VIEW]=n.view instanceof View?n.view:new View;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new Collection(n.controls.slice()):(assert(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new Collection(n.interactions.slice()):(assert(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Collection(n.overlays.slice()):(assert(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Collection,{controls:i,interactions:a,keyboardEventTarget:e,overlays:o,values:t}}const Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property.ELEMENT,this.handleElementChanged),this.addChangeListener(Property.MAP,this.handleMapChanged),this.addChangeListener(Property.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property.POSITION,this.handlePositionChanged),this.addChangeListener(Property.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property.MAP)||null}getOffset(){return this.get(Property.OFFSET)}getPosition(){return this.get(Property.POSITION)}getPositioning(){return this.get(Property.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property.ELEMENT,e)}setMap(e){this.set(Property.MAP,e)}setOffset(e){this.set(Property.OFFSET,e)}setPosition(e){this.set(Property.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),a=this.getRect(i,[outerWidth(i),outerHeight(i)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!containsExtent(r,a)){const l=a[0]-r[0],c=r[2]-a[2],h=a[1]-r[1],f=r[3]-a[3],p=[0,0];if(l<0?p[0]=l-o:c<0&&(p[0]=Math.abs(c)+o),h<0?p[1]=h-o:f<0&&(p[1]=Math.abs(f)+o),p[0]!==0||p[1]!==0){const m=t.getView().getCenterInternal(),v=t.getPixelFromCoordinateInternal(m);if(!v)return;const C=[v[0]+p[0],v[1]+p[1]],b=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(C),duration:b.duration,easing:b.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,a=r.top+window.pageYOffset;return[i,a,i+t[0],a+t[1]]}setPositioning(e){this.set(Property.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),a=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+i[0])+"px",l=Math.round(e[1]+i[1])+"px";let c="0%",h="0%";a=="bottom-right"||a=="center-right"||a=="top-right"?c="-100%":(a=="bottom-center"||a=="center-center"||a=="top-center")&&(c="-50%"),a=="bottom-left"||a=="bottom-center"||a=="bottom-right"?h="-100%":(a=="center-left"||a=="center-center"||a=="center-right")&&(h="-50%");const f=`translate(${c}, ${h}) translate(${o}, ${l})`;this.rendered.transform_!=f&&(this.rendered.transform_=f,r.transform=f)}getOptions(){return this.options}}const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function normalizeSpriteUrl(n,e,t){const r=getMapboxPath(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const a=r.slice(i.length);return`${mapboxBaseUrl}/styles/v1/${a}/sprite?access_token=${e}`}function normalizeStyleUrl(n,e){const t=getMapboxPath(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${mapboxBaseUrl}/styles/v1/${i}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(n,e,t,r){const i=new URL(n,r||location.href),a=getMapboxPath(n);if(!a)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(a==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${a}/{z}/{x}/{y}${o}.webp?access_token=${e}`]}return mapboxSubdomains.map(o=>`https://${o}.tiles.mapbox.com/v4/${a}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(n){return n.id||(n.id=styleId++),n.id}function getStyleFunctionKey(n,e){return getStyleId(n)+"."+getUid(e)}function getFunctionCache(n){let e=functionCacheByStyleId[n.id];return e||(e={},functionCacheByStyleId[getStyleId(n)]=e),e}function getFilterCache(n){let e=filterCacheByStyleId[n.id];return e||(e={},filterCacheByStyleId[getStyleId(n)]=e),e}function deg2rad(n){return n*Math.PI/180}const defaultResolutions=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function createCanvas(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function getZoomForResolution(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const a=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(a)}return r-1}function getResolutionForZoom(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const pendingRequests={};function fetchResource(n,e,t={},r){if(e in pendingRequests)return r&&(r.url=pendingRequests[e][0].url),pendingRequests[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,a=function(c){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))},o=function(c){return delete pendingRequests[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},l=toPromise(()=>i).then(c=>c instanceof Response?(r&&(r.url=c.url),o(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),r&&(r.url=c.url),fetch(c).then(o).catch(a))).catch(a);return pendingRequests[e]=[i,l],l}function getGlStyle(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=normalizeStyleUrl(n,e.accessToken),fetchResource("Style",n,e);else return Promise.resolve(n)}const tilejsonCache={};function getTileJson(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=tilejsonCache[r];if(!i||t.transformRequest){let a;t.transformRequest&&(a=(l,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(l instanceof VectorTile$1)l.setLoader((f,p,m)=>{const v=function(C){C.arrayBuffer().then(b=>{const x=l.getFormat().readFeatures(b,{extent:f,featureProjection:m});l.setFeatures(x)})};toPromise(()=>h).then(C=>{if(C instanceof Response)return v(C);fetch(C).then(v).catch(b=>l.setState(TileState.ERROR))}).catch(C=>l.setState(TileState.ERROR))});else{const f=l.getImage();toPromise(()=>h).then(p=>{if(typeof p=="string"){f.src=p;return}const m=v=>v.blob().then(C=>{const b=URL.createObjectURL(C);f.addEventListener("load",()=>URL.revokeObjectURL(b)),f.addEventListener("error",()=>URL.revokeObjectURL(b)),f.src=b});if(p instanceof Response)return m(p);fetch(p).then(m).catch(v=>l.setState(TileState.ERROR))}).catch(p=>l.setState(TileState.ERROR))}});const o=n.url;if(o&&!n.tiles){const l=normalizeSourceUrl(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:l}),tileLoadFunction:a});else{const c={};i=fetchResource("Source",l[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(f){return h.scheme==="tms"&&(f=f.replace("{y}","{-y}")),normalizeSourceUrl(f,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:a})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(l){return n.scheme==="tms"&&(l=l.replace("{y}","{-y}")),normalizeSourceUrl(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:a});tilejsonCache[r]=i}return i}function drawIconHalo(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],a=createCanvas(i[0],i[1]),o=a.getContext("2d");o.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const l=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const c=l.data;for(let h=0,f=l.width;h<f;++h)for(let p=0,m=l.height;p<m;++p){const v=(p*f+h)*4;c[v+3]>0&&o.arc(h,p,t*e.pixelRatio,0,2*Math.PI)}return o.fill(),a}function smoothstep(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function drawSDF(n,e,t){const r=createCanvas(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),o=a.data;for(let l=0,c=a.width;l<c;++l)for(let h=0,f=a.height;h<f;++h){const p=(h*c+l)*4,m=o[p+3]/255,v=.75,C=.1,b=smoothstep(v-C,v+C,m);b>0?(o[p+0]=Math.round(255*t.r*b),o[p+1]=Math.round(255*t.g*b),o[p+2]=Math.round(255*t.b*b),o[p+3]=Math.round(255*b)):o[p+3]=0}return i.putImageData(a,0,0),r}const hairSpacePool=Array(256).join("");function applyLetterSpacing(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=hairSpacePool.slice(0,Math.round(e/.1));for(let a=0,o=r.length;a<o;++a)a>0&&(t+=`
`),t+=r[a].split("").join(i);return t}return n}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(n,e){return getMeasureContext().measureText(n).width+(n.length-1)*e}const measureCache={};function wrapText(n,e,t,r){if(n.indexOf(`
`)!==-1){const o=n.split(`
`),l=[];for(let c=0,h=o.length;c<h;++c)l.push(wrapText(o[c],e,t,r));return l.join(`
`)}const i=t+","+e+","+n+","+r;let a=measureCache[i];if(!a){const o=n.split(" ");if(o.length>1){const l=getMeasureContext();l.font=e;const h=l.measureText("M").width*t;let f="";const p=[];for(let m=0,v=o.length;m<v;++m){const C=o[m],b=f+(f?" ":"")+C;measureText(b,r)<=h?f=b:(f&&p.push(f),f=C)}f&&p.push(f);for(let m=0,v=p.length;m<v&&v>1;++m){const C=p[m];if(measureText(C,r)<h*.35){const b=m>0?measureText(p[m-1],r):1/0,S=m<v-1?measureText(p[m+1],r):1/0;p.splice(m,1),v-=1,b<S?(p[m-1]+=" "+C,m-=1):p[m]=C+" "+p[m]}}for(let m=0,v=p.length-1;m<v;++m){const C=p[m],b=p[m+1];if(measureText(C,r)>h*.7&&measureText(b,r)<h*.6){const S=C.split(" "),x=S.pop();measureText(x,r)<h*.2&&(p[m]=S.join(" "),p[m+1]=x+" "+b),v-=1}}a=p.join(`
`)}else a=n;a=applyLetterSpacing(a,r),measureCache[i]=a}return a}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(n){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const a=i.rules||i.cssRules;if(a)for(let o=0,l=a.length;o<l;++o){const c=a[o];if(c.type==5){const h=c.cssText.match(fontFamilyRegEx);loadedFontFamilies[h[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return n in loadedFontFamilies}const processedFontFamilies={};function getFonts(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const r=[];for(let i=0,a=n.length;i<a;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const o=n[i],l=mb2css(o,1);registerFont(l);const c=l.split(" ");r.push([c.slice(3).join(" ").replace(/"/g,""),c[1],c[0]])}for(let i=0,a=r.length;i<a;++i){const o=r[i],l=o[0];if(!hasFontFamily(l)&&checkedFonts.get(`${o[2]}
${o[1]} 
${l}`)!==100){const c=e.replace("{font-family}",l.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",l.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+c+'"]')){const h=document.createElement("link");h.href=c,h.rel="stylesheet",document.head.appendChild(h)}}}return processedFontFamilies[t]=n,n}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(n,e){const t=createPropertyExpression(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},emptyObj={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(n,e,t,r,i,a,o){const l=n.id;a||(a={},console.warn("No functionCache provided to getValue()")),a[l]||(a[l]={});const c=a[l];if(!c[t]){let h=(n[e]||emptyObj)[t];const f=v8[`${e}_${n.type}`][t];h===void 0&&(h=f.default);let p=isExpression(h);if(!p&&isFunction$1(h)&&(h=convertFunction(h,f),p=!0),p){const m=expressionData(h,f);c[t]=m.evaluate.bind(m)}else f.type=="color"&&(h=Color.parse(h)),c[t]=function(){return h}}return zoomObj.zoom=r,c[t](zoomObj,i,o)}function getDeclutterMode(n,e,t,r,i){return getValue(n,"layout",`${r}-allow-overlap`,e,t,i)?getValue(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function evaluateFilter(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=featureFilter(e).filter),zoomObj.zoom=r,i[n](zoomObj,t)}function colorWithOpacity(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(n,e){return n.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(n,e,t,r=defaultResolutions,i=void 0,a=void 0,o=void 0,l=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,n)]=Array.from(arguments);let c,h,f;a&&toPromise(()=>a).then(async U=>{let z;if(typeof Image<"u"){const N=new Image;if(typeof U=="string")N.crossOrigin="anonymous",N.src=U;else{let K;U instanceof Request?K=await fetch(U):U instanceof Response&&(K=U);const q=await K.blob();z=URL.createObjectURL(q),N.src=z}N.addEventListener("load",function K(){N.removeEventListener("load",K),c=N,h=[N.width,N.height],n.changed(),z&&URL.revokeObjectURL(z)}),N.addEventListener("error",function K(){URL.revokeObjectURL(z),N.removeEventListener("error",K)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const N=self;N.postMessage({action:"loadImage",src:U}),N.addEventListener("message",function(q){q.data.action==="imageLoaded"&&q.data.src===U&&(c=q.data.image,h=[c.width,c.height])})}});const p=derefLayers(e.layers),m={},v=[],C={},b={},S=getFunctionCache(e),x=getFilterCache(e);let T;for(let U=0,z=p.length;U<z;++U){const N=p[U],K=N.id;if(typeof t=="string"&&N.source==t||Array.isArray(t)&&t.indexOf(K)!==-1){const q=N["source-layer"];if(T){if(N.source!==T)throw new Error(`Layer "${K}" does not use source "${T}`)}else{T=N.source;const J=e.sources[T];if(!J)throw new Error(`Source "${T}" is not defined`);const X=J.type;if(X!=="vector"&&X!=="geojson")throw new Error(`Source "${T}" is not of type "vector" or "geojson", but "${X}"`)}let j=m[q];j||(j=[],m[q]=j),j.push({layer:N,index:U}),v.push(K)}}const P=new Stroke,L=new Fill,k=[],F=function(U,z,N){const K=U.getProperties(),q=m[K.layer];if(!q)return;let j=r.indexOf(z);j==-1&&(j=getZoomForResolution(z,r));const J=types[U.getGeometry().getType()],X={id:U.getId(),properties:K,type:J},te=n.get("mapbox-featurestate")[U.getId()];let H=-1;for(let oe=0,he=q.length;oe<he;++oe){const Ee=q[oe],G=Ee.layer,ie=G.id;if(N!==void 0&&N!==ie)continue;const re=G.layout||emptyObj,ye=G.paint||emptyObj;if(re.visibility==="none"||"minzoom"in G&&j<G.minzoom||"maxzoom"in G&&j>=G.maxzoom)continue;const me=G.filter;if(!me||evaluateFilter(ie,me,X,j,x)){let ve,_e,De,Ie,ke,ce;const it=Ee.index;if(J==3&&(G.type=="fill"||G.type=="fill-extrusion"))if(_e=getValue(G,"paint",G.type+"-opacity",j,X,S,te),G.type+"-pattern"in ye){const se=getValue(G,"paint",G.type+"-pattern",j,X,S,te);if(se){const fe=typeof se=="string"?fromTemplate(se,K):se.toString();if(c&&i&&i[fe]){++H,ce=k[H],(!ce||!ce.getFill()||ce.getStroke()||ce.getText())&&(ce=new Style({fill:new Fill}),k[H]=ce),De=ce.getFill(),ce.setZIndex(it);const pe=fe+"."+_e;let be=b[pe];if(!be){const Ce=i[fe],Te=createCanvas(Ce.width,Ce.height),qe=Te.getContext("2d");qe.globalAlpha=_e,qe.drawImage(c,Ce.x,Ce.y,Ce.width,Ce.height,0,0,Ce.width,Ce.height),be=qe.createPattern(Te,"repeat"),b[pe]=be}De.setColor(be)}}}else ve=colorWithOpacity(getValue(G,"paint",G.type+"-color",j,X,S,te),_e),G.type+"-outline-color"in ye&&(ke=colorWithOpacity(getValue(G,"paint",G.type+"-outline-color",j,X,S,te),_e)),ke||(ke=ve),(ve||ke)&&(++H,ce=k[H],(!ce||ve&&!ce.getFill()||!ve&&ce.getFill()||ke&&!ce.getStroke()||!ke&&ce.getStroke()||ce.getText())&&(ce=new Style({fill:ve?new Fill:void 0,stroke:ke?new Stroke:void 0}),k[H]=ce),ve&&(De=ce.getFill(),De.setColor(ve)),ke&&(Ie=ce.getStroke(),Ie.setColor(ke),Ie.setWidth(.5)),ce.setZIndex(it));if(J!=1&&G.type=="line"){"line-pattern"in ye?ve=void 0:ve=colorWithOpacity(getValue(G,"paint","line-color",j,X,S,te),getValue(G,"paint","line-opacity",j,X,S,te));const se=getValue(G,"paint","line-width",j,X,S,te);ve&&se>0&&(++H,ce=k[H],(!ce||!ce.getStroke()||ce.getFill()||ce.getText())&&(ce=new Style({stroke:new Stroke}),k[H]=ce),Ie=ce.getStroke(),Ie.setLineCap(getValue(G,"layout","line-cap",j,X,S,te)),Ie.setLineJoin(getValue(G,"layout","line-join",j,X,S,te)),Ie.setMiterLimit(getValue(G,"layout","line-miter-limit",j,X,S,te)),Ie.setColor(ve),Ie.setWidth(se),Ie.setLineDash(ye["line-dasharray"]?getValue(G,"paint","line-dasharray",j,X,S,te).map(function(fe){return fe*se}):null),ce.setZIndex(it))}let Ft=!1,Pe=null,Mt=0,Pt,Ue,yt;if((J==1||J==2)&&"icon-image"in re){const se=getValue(G,"layout","icon-image",j,X,S,te);if(se){Pt=typeof se=="string"?fromTemplate(se,K):se.toString();let fe;const pe=l?l(n,Pt):void 0;if(c&&i&&i[Pt]||pe){const be=getValue(G,"layout","icon-rotation-alignment",j,X,S,te);if(J==2){const Ce=U.getGeometry();if(Ce.getFlatMidpoint||Ce.getFlatMidpoints){const Te=Ce.getExtent();if(Math.sqrt(Math.max(Math.pow((Te[2]-Te[0])/z,2),Math.pow((Te[3]-Te[1])/z,2)))>150){const Ke=Ce.getType()==="MultiLineString"?Ce.getFlatMidpoints():Ce.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),fe=renderFeature,renderFeatureCoordinates[0]=Ke[0],renderFeatureCoordinates[1]=Ke[1],getValue(G,"layout","symbol-placement",j,X,S,te)==="line"&&be==="map"){const at=Ce.getStride(),We=Ce.getFlatCoordinates();for(let xt=0,je=We.length-at;xt<je;xt+=at){const Ze=We[xt],Bt=We[xt+1],wt=We[xt+at],st=We[xt+at+1],qt=Math.min(Ze,wt),fn=Math.max(Ze,wt),en=Ke[0],Wn=Ke[1],_t=(st-Bt)*(en-Ze)-(wt-Ze)*(Wn-Bt);if(Math.abs(_t)<.001&&en<=fn&&en>=qt){Mt=Math.atan2(Bt-st,wt-Ze);break}}}}}}if(J!==2||fe){const Ce=getValue(G,"layout","icon-size",j,X,S,te),Te=ye["icon-color"]!==void 0?getValue(G,"paint","icon-color",j,X,S,te):null;if(!Te||Te.a!==0){const qe=getValue(G,"paint","icon-halo-color",j,X,S,te),Ke=getValue(G,"paint","icon-halo-width",j,X,S,te);let vt=`${Pt}.${Ce}.${Ke}.${qe}`;if(Te!==null&&(vt+=`.${Te}`),Ue=C[vt],!Ue){const at=getDeclutterMode(G,j,X,"icon",S);let We;"icon-offset"in re&&(We=getValue(G,"layout","icon-offset",j,X,S,te).slice(0),We[0]*=Ce,We[1]*=-Ce);let xt=Te?[Te.r*255,Te.g*255,Te.b*255,Te.a]:void 0;if(pe){const je={color:xt,rotateWithView:be==="map",displacement:We,declutterMode:at,scale:Ce};typeof pe=="string"?je.src=pe:(je.img=pe,je.imgSize=[pe.width,pe.height]),Ue=new Icon(je)}else{const je=i[Pt];let Ze,Bt,wt;Ke?je.sdf?(Ze=drawIconHalo(drawSDF(c,je,Te||[0,0,0,1]),{x:0,y:0,width:je.width,height:je.height,pixelRatio:je.pixelRatio},Ke,qe),xt=void 0):Ze=drawIconHalo(c,je,Ke,qe):(je.sdf?(f||(f=drawSDF(c,{x:0,y:0,width:h[0],height:h[1]},{r:1,g:1,b:1})),Ze=f):Ze=c,Bt=[je.width,je.height],wt=[je.x,je.y]),Ue=new Icon({color:xt,img:Ze,imgSize:h,size:Bt,offset:wt,rotateWithView:be==="map",scale:Ce/je.pixelRatio,displacement:We,declutterMode:at})}C[vt]=Ue}}Ue&&(++H,ce=k[H],(!ce||!ce.getImage()||ce.getFill()||ce.getStroke())&&(ce=new Style,k[H]=ce),ce.setGeometry(fe),Ue.setRotation(Mt+deg2rad(getValue(G,"layout","icon-rotate",j,X,S,te))),Ue.setOpacity(getValue(G,"paint","icon-opacity",j,X,S,te)),Ue.setAnchor(anchor[getValue(G,"layout","icon-anchor",j,X,S,te)]),ce.setImage(Ue),Pe=ce.getText(),ce.setText(void 0),ce.setZIndex(it),Ft=!0,yt=!1)}else yt=!0}}}if(J==1&&G.type==="circle"){++H,ce=k[H],(!ce||!ce.getImage()||ce.getFill()||ce.getStroke())&&(ce=new Style,k[H]=ce);const se="circle-radius"in ye?getValue(G,"paint","circle-radius",j,X,S,te):5,fe=colorWithOpacity(getValue(G,"paint","circle-stroke-color",j,X,S,te),getValue(G,"paint","circle-stroke-opacity",j,X,S,te)),pe=getValue(G,"paint","circle-translate",j,X,S,te),be=colorWithOpacity(getValue(G,"paint","circle-color",j,X,S,te),getValue(G,"paint","circle-opacity",j,X,S,te)),Ce=getValue(G,"paint","circle-stroke-width",j,X,S,te),Te=se+"."+fe+"."+be+"."+Ce+"."+pe[0]+"."+pe[1];Ue=C[Te],Ue||(Ue=new CircleStyle({radius:se,displacement:[pe[0],-pe[1]],stroke:fe&&Ce>0?new Stroke({width:Ce,color:fe}):void 0,fill:be?new Fill({color:be}):void 0,declutterMode:"none"}),C[Te]=Ue),ce.setImage(Ue),Pe=ce.getText(),ce.setText(void 0),ce.setGeometry(void 0),ce.setZIndex(it),Ft=!0}let Ye,St,Lt,Ve,It,ae;if("text-field"in re){Ve=Math.round(getValue(G,"layout","text-size",j,X,S,te));const se=getValue(G,"layout","text-font",j,X,S,te);Lt=getValue(G,"layout","text-line-height",j,X,S,te),St=mb2css(o?o(se,e.metadata?e.metadata["ol:webfonts"]:void 0):se,Ve,Lt),St.includes("sans-serif")||(St+=",sans-serif"),It=getValue(G,"layout","text-letter-spacing",j,X,S,te),ae=getValue(G,"layout","text-max-width",j,X,S,te);const fe=getValue(G,"layout","text-field",j,X,S,te);typeof fe=="object"&&fe.sections?fe.sections.length===1?Ye=fe.toString():Ye=fe.sections.reduce((pe,be,Ce)=>{const Te=be.fontStack?be.fontStack.split(","):se,qe=mb2css(o?o(Te):Te,Ve*(be.scale||1),Lt);let Ke=be.text;if(Ke===`
`)return pe.push(`
`,""),pe;if(J==2)return pe.push(applyLetterSpacing(Ke,It),qe),pe;Ke=wrapText(Ke,qe,ae,It).split(`
`);for(let vt=0,at=Ke.length;vt<at;++vt)vt>0&&pe.push(`
`,""),pe.push(Ke[vt],qe);return pe},[]):Ye=fromTemplate(fe,K).trim(),_e=getValue(G,"paint","text-opacity",j,X,S,te)}if(Ye&&_e&&!yt){Ft||(++H,ce=k[H],(!ce||!ce.getText()||ce.getFill()||ce.getStroke())&&(ce=new Style,k[H]=ce),ce.setImage(void 0),ce.setGeometry(void 0));const se=getDeclutterMode(G,j,X,"text",S);ce.getText()||ce.setText(Pe),Pe=ce.getText(),(!Pe||"getDeclutterMode"in Pe&&Pe.getDeclutterMode()!==se)&&(Pe=new Text({padding:[2,2,2,2],declutterMode:se}),ce.setText(Pe));const fe=getValue(G,"layout","text-transform",j,X,S,te);fe=="uppercase"?Ye=Array.isArray(Ye)?Ye.map((st,qt)=>qt%2?st:st.toUpperCase()):Ye.toUpperCase():fe=="lowercase"&&(Ye=Array.isArray(Ye)?Ye.map((st,qt)=>qt%2?st:st.toLowerCase()):Ye.toLowerCase());const pe=Array.isArray(Ye)?Ye:J==2?applyLetterSpacing(Ye,It):wrapText(Ye,St,ae,It);if(Pe.setText(pe),Pe.setFont(St),Pe.setRotation(deg2rad(getValue(G,"layout","text-rotate",j,X,S,te))),typeof Pe.setKeepUpright=="function"){const st=getValue(G,"layout","text-keep-upright",j,X,S,te);Pe.setKeepUpright(st)}const be=getValue(G,"layout","text-anchor",j,X,S,te),Ce=Ft||J==1?"point":getValue(G,"layout","symbol-placement",j,X,S,te);let Te;if(Ce==="line-center"?(Pe.setPlacement("line"),Te="center"):Pe.setPlacement(Ce),Ce==="line"&&typeof Pe.setRepeat=="function"){const st=getValue(G,"layout","symbol-spacing",j,X,S,te);Pe.setRepeat(st*2)}Pe.setOverflow(Ce==="point");let qe=getValue(G,"paint","text-halo-width",j,X,S,te);const Ke=getValue(G,"layout","text-offset",j,X,S,te),vt=getValue(G,"paint","text-translate",j,X,S,te);let at=0,We=0;if(Ce=="point"){Te="center",be.indexOf("left")!==-1?(Te="left",We=qe):be.indexOf("right")!==-1&&(Te="right",We=-qe);const st=getValue(G,"layout","text-rotation-alignment",j,X,S,te);Pe.setRotateWithView(st=="map")}else Pe.setMaxAngle(deg2rad(getValue(G,"layout","text-max-angle",j,X,S,te))*Ye.length/pe.length),Pe.setRotateWithView(!1);Pe.setTextAlign(Te);let xt="middle";be.indexOf("bottom")==0?(xt="bottom",at=-qe-.5*(Lt-1)*Ve):be.indexOf("top")==0&&(xt="top",at=qe+.5*(Lt-1)*Ve),Pe.setTextBaseline(xt);const je=getValue(G,"layout","text-justify",j,X,S,te);Pe.setJustify(je==="auto"?void 0:je),Pe.setOffsetX(Ke[0]*Ve+We+vt[0]),Pe.setOffsetY(Ke[1]*Ve+at+vt[1]),L.setColor(colorWithOpacity(getValue(G,"paint","text-color",j,X,S,te),_e)),Pe.setFill(L);const Ze=colorWithOpacity(getValue(G,"paint","text-halo-color",j,X,S,te),_e);if(Ze&&qe>0){P.setColor(Ze),qe*=2;const st=.5*Ve;P.setWidth(qe<=st?qe:st),Pe.setStroke(P)}else Pe.setStroke(void 0);const Bt=getValue(G,"layout","text-padding",j,X,S,te),wt=Pe.getPadding();Bt!==wt[0]&&(wt[0]=Bt,wt[1]=Bt,wt[2]=Bt,wt[3]=Bt),ce.setZIndex(it)}}}if(H>-1)return k.length=H+1,k};return n.setStyle(F),n.set("mapbox-source",T),n.set("mapbox-layers",v),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),F}function getTileResolutions(n,e=512){return n.getExtent()?createXYZ({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function applyStyle(n,e,t="",r={},i=void 0){let a,o,l,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(l=t,c=l.source||l.layers,r=l):c=t,typeof r=="string"?(a=r,l={}):(a=r.styleUrl,l=r),l.updateSource===!1&&(h=!1),i||(i=l.resolutions),!a&&typeof e=="string"&&!e.trim().startsWith("{")&&(a=e),a&&(a=a.startsWith("data:")?location.href:normalizeStyleUrl(a,l.accessToken),l=completeOptions(a,l)),new Promise(function(f,p){getGlStyle(e,l).then(function(m){if(m.version!=8)return p(new Error("glStyle version 8 required."));if(!(n instanceof VectorLayer||n instanceof VectorTileLayer))return p(new Error("Can only apply to VectorLayer or VectorTileLayer"));const v=n instanceof VectorTileLayer?"vector":"geojson";if(c?Array.isArray(c)?o=m.layers.find(function(L){return L.id===c[0]}).source:o=c:(o=Object.keys(m.sources).find(function(L){return m.sources[L].type===v}),c=o),!o)return p(new Error(`No ${v} source found in the glStyle.`));function C(){if(!h)return Promise.resolve();if(n instanceof VectorTileLayer)return setupVectorSource(m.sources[o],a,l).then(function(U){const z=n.getSource();z?U!==z&&(z.setTileUrlFunction(U.getTileUrlFunction()),typeof z.setUrls=="function"&&typeof U.getUrls=="function"&&z.setUrls(U.getUrls()),z.format_||(z.format_=U.format_),z.getAttributions()||z.setAttributions(U.getAttributions()),z.getTileLoadFunction()===defaultLoadFunction&&z.setTileLoadFunction(U.getTileLoadFunction()),equivalent(z.getProjection(),U.getProjection())&&(z.tileGrid=U.getTileGrid())):n.setSource(U);const N=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&N.getMinZoom()>0&&n.setMaxResolution(getResolutionForZoom(Math.max(0,N.getMinZoom()-1e-12),N.getResolutions()))});const L=m.sources[o];let k=n.getSource();(!k||k.get("mapbox-source")!==L)&&(k=setupGeoJSONSource(L,a,l));const F=n.getSource();return F?k!==F&&(F.getAttributions()||F.setAttributions(k.getAttributions()),F.format_||(F.format_=k.getFormat()),F.url_=k.getUrl()):n.setSource(k),Promise.resolve()}let b,S,x,T;function P(){if(!T&&(!m.sprite||S)){if(l.projection&&!i){const k=get$3(l.projection).getUnits();k!=="m"&&(i=defaultResolutions.map(F=>F/METERS_PER_UNIT$1[k]))}T=stylefunction(n,m,c,i,S,x,(L,k=l.webfonts)=>getFonts(L,k),l.getImage),n.getStyle()?C().then(f).catch(p):p(new Error(`Nothing to show for source [${o}]`))}else T?(n.setStyle(T),C().then(f).catch(p)):p(new Error("Something went wrong trying to apply style."))}if(m.sprite){const L=new URL(normalizeSpriteUrl(m.sprite,l.accessToken,a||location.href));b=window.devicePixelRatio>=1.5?.5:1;const k=b==.5?"@2x":"";let F=L.origin+L.pathname+k+".json"+L.search;new Promise(function(U,z){fetchResource("Sprite",F,l).then(U).catch(function(N){F=L.origin+L.pathname+".json"+L.search,fetchResource("Sprite",F,l).then(U).catch(z)})}).then(function(U){if(U===void 0&&p(new Error("No sprites found.")),S=U,x=L.origin+L.pathname+k+".png"+L.search,l.transformRequest){const z=l.transformRequest(x,"SpriteImage")||x;(z instanceof Request||z instanceof Promise)&&(x=z)}P()}).catch(function(U){p(new Error(`Sprites cannot be loaded: ${F}: ${U.message}`))})}else P()}).catch(p)})}function extentFromTileJSON(n,e){const t=n.bounds;if(t){const r=fromLonLat([t[0],t[1]],e),i=fromLonLat([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(n,e,t){const r=new TileJSON({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),a=r.getTileGrid(),o=get$3(t.projection||"EPSG:3857"),l=extentFromTileJSON(i,o),c=o.getExtent(),h=i.minzoom||0,f=i.maxzoom||22,p={attributions:r.getAttributions(),projection:o,tileGrid:new TileGrid({origin:c?getTopLeft(c):a.getOrigin(0),extent:l||a.getExtent(),minZoom:h,resolutions:getTileResolutions(o,e.tileSize).slice(0,f+1),tileSize:a.getTileSize(0)})};return Array.isArray(i.tiles)?p.urls=i.tiles:p.url=i.tiles,p}function setupVectorSource(n,e,t){return new Promise(function(r,i){getTileJson(n,e,t).then(function({tileJson:a,tileLoadFunction:o}){const l=sourceOptionsFromTileJSON(n,a,t);l.tileLoadFunction=o,l.format=new MVT,r(new VectorTile(l))}).catch(i)})}function getBboxTemplate(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(n,e,t){const r=t.projection?new GeoJSON({dataProjection:t.projection}):new GeoJSON,i=n.data,a={};if(typeof i=="string"){const[l]=normalizeSourceUrl(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(l)){const h=(p,m,v)=>{const C=getBboxTemplate(v);return l.replace(C,`${p.join(",")}`)},f=new VectorSource({attributions:n.attribution,format:r,loader:(p,m,v,C,b)=>{const S=typeof h=="function"?h(p,m,v):h;fetchResource("GeoJSON",S,t).then(x=>{const T=f.getFormat().readFeatures(x,{featureProjection:v});f.addFeatures(T),C(T)}).catch(x=>{f.removeLoadedExtent(p),b()})},strategy:bbox});return f.set("mapbox-source",n),f}const c=new VectorSource({attributions:n.attribution,format:r,url:l,loader:(h,f,p,m,v)=>{fetchResource("GeoJSON",l,t).then(C=>{const b=c.getFormat().readFeatures(C,{featureProjection:p});c.addFeatures(b),m(b)}).catch(C=>{c.removeLoadedExtent(h),v()})}});return c}a.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const o=new VectorSource(Object.assign({attributions:n.attribution,format:r},a));return o.set("mapbox-source",n),o}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var r=e.ssl===!1?"http://":"https://",i=e.configuration;if(!i){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=e.layer+"$GEOPORTAIL:GPP:TMS";if(i=Config$1.configuration.getLayerConf(a),!i)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var o=null,l="",c=e.style,h=0;h<i.styles.length;h++){var f=i.styles[h];if(c&&f.name===c){o=f.url,l=f.title;break}else if(!c&&f.current){c=f.name,o=f.url,l=f.title;break}}if(!o)throw new Error("ERROR : Style URL not found !?");o.replace(/(http|https):\/\//,r);var p=new VectorTile({state:"loading",format:new MVT});p._originators=i.originators,p._legends=i.legends,p._metadata=i.metadata,p._description=i.description,p._title=i.title+" ("+l+")",p._quicklookUrl=i.quicklookUrl;var m={source:p};return Helper$1.mergeParams(m,t),e.olParams&&!i.originators&&(p._originators=e.olParams.attributions),super(m),this.name=e.layer,this.service="TMS",this.protocol=r,this.sourceId=e.source,this.styleUrl=o,this.config=i,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(r){e.onStyleMapBoxLoad(r)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var r=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var i=new TileJSON({url:t.url}),a=this,o=i.on("change",function(){if(i.getState()==="ready"){var c=i.getTileJSON();if(!c)return;a.set("mapbox-extensions",c);for(var h=Array.isArray(c.tiles)?c.tiles:[c.tiles],f=0;f<t.tiles.length;f++)h[f].replace(/(http|https):\/\//,this.protocol);r.setUrls(h),unByKey(o)}})}if(t.tiles){for(var l=0;l<t.tiles.length;l++)t.tiles[l].replace(/(http|https):\/\//,this.protocol);r.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{r.setState("ready"),this.set("mapbox-styles",e)}).catch(c=>{this.onStyleMapBoxError(c)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const stringToHTML=n=>{var e=function(){if(!window.DOMParser)return!1;var a=new DOMParser;try{a.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,r=t.parseFromString(n,"text/html");return r.body}var i=document.createElement("div");return i.innerHTML=n,i};var CatalogDOM={_addUID:function(n){var e=this.uid?n+"-"+this.uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPcatalog"),n.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",n},_createShowCatalogPictoElement:function(){var n=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de donnes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i),n.onShowCatalogClick(r)}):e.attachEvent&&e.attachEvent("onclick",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i),n.onShowCatalogClick(r)}),e},_createCatalogPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPcatalogPanel"),n.className="GPpanel gpf-panel fr-modal",n},_createCatalogPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createCatalogPanelContentDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__content fr-modal__content",n},_createCatalogPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header fr-modal__header",n},_createCatalogPanelTitleElement:function(n){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=n,e},_createCatalogPanelCloseElement:function(){var n=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowCatalogPicto")).click(),n.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowCatalogPicto")).click(),n.onCloseCatalogClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createCatalogContentDivElement:function(){var n=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return n.firstChild},_createCatalogContentTitleElement:function(n){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${n}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var n=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donne" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(n);const t=e.attachShadow({mode:"open"});t.innerHTML=n.trim();var r=t.getElementById("search-button");r&&r.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var i=t.getElementById("search-input");return i&&i.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),t},_createCatalogWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPcatalogCalcWaitingContainer"),n.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",n.appendChild(e),n},_createCatalogContentCategoriesTabs:function(n){var e="",t=(b,S,x,T)=>{var P="GPtabButton fr-tabs__tab",L="false",k=-1;return T&&(P="GPtabButton GPtabButtonActive fr-tabs__tab",L="true",k=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${b}_${S}" class="${P}" tabindex="${k}" role="tabbutton" aria-selected="${L}" aria-controls="tabpanel-${b}-panel_${S}">${x}</button>
            </li>
            `},r="",i=b=>{var S=b.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${b.id}" name="radio-inline" ${S} aria-controls="tabcontent-${b.id}">
                    <label class="fr-label" for="radio-inline_${b.id}">
                        ${b.title}
                    </label>
                </div>
            </div>
            `},a=(b,S)=>{var x="";for(let P=0;P<S.length;P++){const L=S[P];r+=i(L);var T="";L.default||(T="GPelementHidden gpf-hidden"),x+=`<div class="tabcontent ${T}" role="tabpanel-section" id="tabcontent-${L.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${b}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${r}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${x}
            `},o="",l=(b,S,x,T)=>{var P="GPtabContent fr-tabs__panel",L=-1;x&&(P="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",L=0);var k='<div class="tabcontent"></div>';return T&&(k=a(S,T)),`
            <!-- panneaux -->
            <div id="tabpanel-${b}-panel_${S}" class="${P}" role="tabpanel" aria-labelledby="tabbutton-${b}_${S}" tabindex="${L}" style="max-height: 250px;overflow-y: auto;">
                ${k}
            </div>
            `};for(let b=0;b<n.length;b++){const S=n[b];e+=t(b,S.id,S.title,S.default),o+=l(b,S.id,S.default,S.items)}var c=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du systme d'onglet]">
                    ${e}
                </ul>
                ${o}
            </div>
        </div>
        `,h=stringToHTML(c.trim());const f=h.attachShadow({mode:"open"});f.innerHTML=c.trim();var p=f.querySelectorAll('[role="tabpanel-section"]'),m=f.querySelectorAll('[name="radio-inline"]');m&&m.forEach(b=>{b.addEventListener("change",S=>{for(let T=0;T<p.length;T++){const P=p[T];P.classList.add("gpf-hidden"),P.classList.add("GPelementHidden")}var x=document.getElementById(S.target.getAttribute("aria-controls"));x.classList.remove("gpf-hidden"),x.classList.remove("GPelementHidden")})});var v=f.querySelectorAll('[role="tabpanel"]'),C=f.querySelectorAll('[role="tabbutton"]');return C&&C.forEach(b=>{b.addEventListener("click",S=>{for(let T=0;T<C.length;T++){const P=C[T];P.setAttribute("tabindex",-1),P.ariaSelected=!1,P.classList.remove("GPtabButtonActive")}S.target.setAttribute("tabindex",0),S.target.ariaSelected=!0,S.target.classList.add("GPtabButtonActive");for(let T=0;T<v.length;T++){const P=v[T];P.setAttribute("tabindex",-1),P.classList.remove("fr-tabs__panel--selected"),P.classList.remove("GPtabContentSelected"),P.classList.add("gpf-hidden"),P.classList.add("GPelementHidden")}var x=document.getElementById(S.target.getAttribute("aria-controls"));x.setAttribute("tabindex",0),x.classList.add("fr-tabs__panel--selected"),x.classList.add("GPtabContentSelected"),x.classList.remove("gpf-hidden"),x.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(S)})}),f},_createCatalogContentCategoryTabContent:function(n,e){var t=Object.values(e),r="",i=(P,L,k,F,U)=>`
            <div class="fr-fieldset__element" id="fieldset-${U}_${L}-${F}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${U}"
                        id="checkboxes-${U}-${P}_${L}-${F}"
                        type="checkbox"
                        data-layer="${L}:${F}"
                        aria-describedby="checkboxes-messages-${U}-${P}_${L}-${F}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${U}-${P}_${L}-${F}" title="nom technique : ${L}">
                        ${k} (${F})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${U}-${P}_${L}-${F}" aria-live="assertive"></div>
                </div>
            </div>
            `,a=(P,L,k,F,U)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${L}" aria-expanded="false" aria-controls="accordion-${P}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${L}"></span>${k}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${P}">
                    ${U}
                </div>
            </section>
            `,o=n.section;o&&(t=t.sort((P,L)=>P[n.filter.field].localeCompare(L[n.filter.field])));var l={};for(let P=0;P<t.length;P++){const L=t[P];if(o){var c=L[n.filter.field];c&&(l.hasOwnProperty(c)||(l[c]=""),l[c]+=i(P,L.name,L.title,L.service,n.id))}else r+=i(P,L.name,L.title,L.service,n.id)}if(o){for(const P in l)if(Object.prototype.hasOwnProperty.call(l,P)){const L=l[P];var h=[...L.matchAll(/fr-fieldset__element/g)].length,f=Math.abs(Array.from(P).reduce((k,F)=>Math.imul(31,k)+F.charCodeAt(0)|0,0));r+=a(f,n.id,P,h,L)}}var p=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${n.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${r}
            </fieldset>
        `,m=stringToHTML(p);const v=m.attachShadow({mode:"open"});v.innerHTML=p.trim();var C=`checkboxes-${n.id}`,b=v.querySelectorAll('[name="'+C+'"]');b&&b.forEach(P=>{P.addEventListener("click",L=>{this.onSelectCatalogEntryClick(L)})});var S=`button-collapse-${n.id}`,x=v.querySelectorAll('[role="'+S+'"]');x&&x.forEach(P=>{P.addEventListener("click",L=>{L.target.ariaExpanded=L.target.ariaExpanded!=="true";var k=document.getElementById(L.target.getAttribute("aria-controls"));k&&(L.target.ariaExpanded==="true"?(k.classList.add("fr-collapse--expanded"),k.classList.remove("GPelementHidden")):(k.classList.remove("fr-collapse--expanded"),k.classList.add("GPelementHidden")))},!1)}),`${n.id}`;var T=v.querySelectorAll('[role="'+S+'"]');return T&&T.forEach(P=>{P.addEventListener("click",L=>{L.target.parentElement.click()})}),v}},logger$5=LoggerByDefault$1.getLogger("widget"),Catalog=class Mf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Mf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(t=>{logger$5.trace(this,t),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:t})}).catch(t=>{this.hideWaiting(),logger$5.error(t)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Grer vos couches de donnes",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper$1.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(t=>{var r=t.items;return t.items&&(r=t.items.map(i=>({title:i.title,id:i.id||Math.abs(Array.from(i.title).reduce((a,o)=>Math.imul(31,a)+o.charCodeAt(0)|0,0)),section:i.hasOwnProperty("section")?i.section:!1,default:i.hasOwnProperty("default")?i.default:!1,filter:i.filter||null}))),{title:t.title,id:t.id||Math.abs(Array.from(t.title).reduce((i,a)=>Math.imul(31,i)+a.charCodeAt(0)|0,0)),default:t.hasOwnProperty("default")?t.default:!1,filter:t.filter||null,items:r||null}}),this.categoryId=(()=>{var t=this.categories.findIndex(r=>r.default);return t===-1&&(t=0,this.categories[t].default=!0),this.categories[t].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),t=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(t);var r=this.panelCatalogContainer=this._createCatalogPanelElement(),i=this._createCatalogPanelDivElement();r.appendChild(i);var a=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),o=this._createCatalogPanelTitleElement(this.options.titlePrimary);a.appendChild(o);var l=this.buttonCatalogClose=this._createCatalogPanelCloseElement();a.appendChild(l),i.appendChild(a);var c=this._createCatalogPanelContentDivElement(),h=this.contentCatalogContainer=this._createCatalogContentDivElement();h.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&h.appendChild(this._createCatalogContentSearchElement());var f=this.waitingContainer=this._createCatalogWaitingElement();return h.appendChild(f),c.appendChild(h),i.appendChild(c),e.appendChild(r),e}initMapLayers(){var e=this.getMap();if(e){var t=e.getLayers();t.forEach(r=>{if(r.name&&r.service){this.layersListOnMap[r.name+":"+r.service]=r;var i=document.querySelectorAll(`input[data-layer="${r.name}:${r.service}"]`);i&&i.forEach(a=>{a.checked=!0})}})}}async initLayersList(){var e=null,t=this;const r=h=>{var f=t.contentCatalogContainer,p=t._createCatalogContentCategoriesTabs(this.categories);f.appendChild(p);var m=[];t.categories.forEach(b=>{if(b.items)for(let S=0;S<b.items.length;S++){const x=b.items[S];m.push(x)}else m.push(b)});var v=f.querySelectorAll(".tabcontent");for(let b=0;b<v.length;b++){const S=v[b];var C=i(m[b],h);S.appendChild(t._createCatalogContentCategoryTabContent(m[b],C))}},i=(h,f)=>{var p=f,m=h.filter;if(m){p={};for(const C in f)if(Object.prototype.hasOwnProperty.call(f,C)){const b=f[C];if(b[m.field]){var v=Array.isArray(m.value)?m.value.includes(b[m.field].toString()):m.value==="*"||b[m.field].toString()===m.value;v&&(p[C]=b,this.layersList[C].categories.push(h.id))}}}return p},a=(h,f)=>f;if(this.options.configuration.data){e=this.options.configuration.data||{},Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const h in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,h)){const f=e.layers[h];var o=f.serviceParams.id.split(":").slice(-1)[0];f.service=o,f.categories=[]}var l=a(this.options.layerFilter,e.layers);return this.layersList=l,r(l),new Promise((h,f)=>{h(e)})}if(this.options.configuration.urls){var c=[];for(let h=0;h<this.options.configuration.urls.length;h++){const f=this.options.configuration.urls[h],p=function(){return fetch(f,{}).then(function(m){if(m.ok)return m.json().then(function(C){return C}).catch(C=>{logger$5.warn("fetch json exception :",C)});var v=new Error("HTTP status code: "+m.status);throw v}).catch(m=>new Promise((v,C)=>{logger$5.error("fetch json exception :",m),C(m)}))};c.push(p())}try{const h=await Promise.all(c);e=h[0];for(let p=1;p<h.length;p++){const m=h[p];Helper$1.mergeParams(e,m)}Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const p in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,p)){const m=e.layers[p];var o=m.serviceParams.id.split(":").slice(-1)[0];m.service=o,m.categories=[]}var l=a(this.options.layerFilter,e.layers);return this.layersList=l,r(l),await new Promise((p,m)=>{p(e)})}catch(h){return await new Promise((f,p)=>{p(h)})}}}addEventsListeners(e){var t=this;this.eventsListeners["map:add"]=function(r){logger$5.trace(r);var i=r.element.name,a=r.element.service;t.layersListOnMap[i+":"+a]=r.element;var o=document.querySelectorAll(`input[data-layer="${i}:${a}"]`);o&&o.forEach(l=>{l.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(r){logger$5.trace(r);var i=r.element.name,a=r.element.service;delete t.layersListOnMap[i+":"+a];var o=document.querySelectorAll(`input[data-layer="${i}:${a}"]`);o&&o.forEach(l=>{l.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,t){var r=null,i=null;switch(t){case"WMS":i=new LayerWMS({layer:e});break;case"WMTS":i=new LayerWMTS({layer:e});break;case"TMS":i=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":i=new LayerWFS({layer:e});break}if(i){var a=this.getMap();a.addLayer(i),this.layersListOnMap[e+":"+t]=i,r=i.getConfiguration()}return r}removeLayer(e,t){var r=null,i=this.layersListOnMap[e+":"+t];if(i){r=i.getConfiguration();var a=this.getMap();a.removeLayer(i),delete this.layersListOnMap[e+":"+t]}return r}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const t=this.layersList[e];t.hidden=!1,this.updateFilteredLayersListDOM(t.name,t.service,t.hidden)}}setFilteredLayersList(e){var t=this.options.search.criteria;for(const i in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,i)){const a=this.layersList[i];var r="";for(let o=0;o<t.length;o++){const l=t[o];a[l]&&(r+=a[l].toLowerCase())}a.hidden=!r.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(a.name,a.service,a.hidden)}}updateFilteredLayersListDOM(e,t,r){var i=[];this.categories.forEach(o=>{if(o.items)for(let l=0;l<o.items.length;l++){const c=o.items[l];i.push(c.id)}else i.push(o.id)});for(let o=0;o<i.length;o++){const l=i[o];var a=document.getElementById(`fieldset-${l}_${e}-${t}`);a&&(r?(a.classList.add("gpf-hidden"),a.classList.add("GPelementHidden")):(a.classList.remove("gpf-hidden"),a.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e)}onCloseCatalogClick(e){logger$5.trace(e)}onSelectCatalogTabClick(e){logger$5.trace(e);var t=e.target.id,r=t.split("_")[1];this.categoryId=r}onSelectCatalogEntryClick(e){logger$5.trace(e);var t=e.target.dataset.layer,r=t.substring(0,t.lastIndexOf(":")),i=t.substring(t.lastIndexOf(":")+1),a={};e.target.checked?(this.options.addToMap&&(a=this.addLayer(r,i)),this.dispatchEvent({type:"catalog:layer:add",name:r,service:i,layer:a})):(this.options.addToMap&&(a=this.removeLayer(r,i)),this.dispatchEvent({type:"catalog:layer:remove",name:r,service:i,layer:a}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const events=["fullscreenchange","webkitfullscreenchange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const r=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const i=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let r;this.source_?r=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:r=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(r):requestFullScreen(r)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let r=0,i=e.length;r<i;++r)unlistenByKey(e[r]);e.length=0;const t=this.getMap();if(t){const r=t.getOwnerDocument();isFullScreenSupported(r)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let i=0,a=events.length;i<a;++i)e.push(listen(r,events[i],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function isFullScreen(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function requestFullScreen(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function requestFullScreenWithKeys(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():requestFullScreen(n)}function exitFullScreen(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}LoggerByDefault$1.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein cran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var r=document.createElement("div");r.id=t,r.classList.add("position"),r.classList.add(t),this.container.appendChild(r)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],t=document.createElement("span");e.appendChild(t),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i)}):e.attachEvent&&e.attachEvent("onclick",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(r=>{r.element.classList.contains("ol-full-screen")&&(r.element.classList.add("ol-hidden"),r.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _objectSpread2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _typeof(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}function _defineProperty(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _extends(){return _extends=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function _objectWithoutProperties(n,e){if(n==null)return{};var t=_objectWithoutPropertiesLoose(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}var version="1.15.3";function userAgent(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(n,e,t){n.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(n,e,t){n.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function closest(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&matches(n,e):matches(n,e))||r&&n===t)return n;if(n===t)break}while(n=getParentOrHost(n))}return null}var R_SPACE=/\s+/g;function toggleClass(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(R_SPACE," ")}}function css(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function matrix(n,e){var t="";if(typeof n=="string")t=n;else do{var r=css(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function find(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,a=r.length;if(t)for(;i<a;i++)t(r[i],i);return r}return[]}function getWindowScrollingElement(){var n=document.scrollingElement;return n||document.documentElement}function getRect(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var a,o,l,c,h,f,p;if(n!==window&&n.parentNode&&n!==getWindowScrollingElement()?(a=n.getBoundingClientRect(),o=a.top,l=a.left,c=a.bottom,h=a.right,f=a.height,p=a.width):(o=0,l=0,c=window.innerHeight,h=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!IE11OrLess))do if(i&&i.getBoundingClientRect&&(css(i,"transform")!=="none"||t&&css(i,"position")!=="static")){var m=i.getBoundingClientRect();o-=m.top+parseInt(css(i,"border-top-width")),l-=m.left+parseInt(css(i,"border-left-width")),c=o+a.height,h=l+a.width;break}while(i=i.parentNode);if(r&&n!==window){var v=matrix(i||n),C=v&&v.a,b=v&&v.d;v&&(o/=b,l/=C,p/=C,f/=b,c=o+f,h=l+p)}return{top:o,left:l,bottom:c,right:h,width:p,height:f}}}function isScrolledPast(n,e,t){for(var r=getParentAutoScrollElement(n,!0),i=getRect(n)[e];r;){var a=getRect(r)[t],o=void 0;if(o=i>=a,!o)return r;if(r===getWindowScrollingElement())break;r=getParentAutoScrollElement(r,!1)}return!1}function getChild(n,e,t,r){for(var i=0,a=0,o=n.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==Sortable.ghost&&(r||o[a]!==Sortable.dragged)&&closest(o[a],t.draggable,n,!1)){if(i===e)return o[a];i++}a++}return null}function lastChild(n,e){for(var t=n.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Sortable.clone&&(!e||matches(n,e))&&t++;return t}function getRelativeScrollOffset(n){var e=0,t=0,r=getWindowScrollingElement();if(n)do{var i=matrix(n),a=i.a,o=i.d;e+=n.scrollLeft*a,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function indexOfObject(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function getParentAutoScrollElement(n,e){if(!n||!n.getBoundingClientRect)return getWindowScrollingElement();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=css(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(r||e)return t;r=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function isRectEqual(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var _throttleTimeout;function throttle(n,e){return function(){if(!_throttleTimeout){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function clone(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function getChildContainingRectFromElement(n,e,t){var r={};return Array.from(n.children).forEach(function(i){var a,o,l,c;if(!(!closest(i,e.draggable,n,!1)||i.animated||i===t)){var h=getRect(i);r.left=Math.min((a=r.left)!==null&&a!==void 0?a:1/0,h.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,h.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,h.right),r.bottom=Math.max((c=r.bottom)!==null&&c!==void 0?c:-1/0,h.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(css(i,"display")==="none"||i===Sortable.ghost)){n.push({target:i,rect:getRect(i)});var a=_objectSpread2({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=matrix(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(indexOfObject(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var a=!1,o=0;n.forEach(function(l){var c=0,h=l.target,f=h.fromRect,p=getRect(h),m=h.prevFromRect,v=h.prevToRect,C=l.rect,b=matrix(h,!0);b&&(p.top-=b.f,p.left-=b.e),h.toRect=p,h.thisAnimationDuration&&isRectEqual(m,p)&&!isRectEqual(f,p)&&(C.top-p.top)/(C.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(c=calculateRealTime(C,m,v,i.options)),isRectEqual(p,f)||(h.prevFromRect=f,h.prevToRect=p,c||(c=i.options.animation),i.animate(h,C,p,c)),c&&(a=!0,o=Math.max(o,c),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},c),h.thisAnimationDuration=c)}),clearTimeout(e),a?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,a,o){if(o){css(r,"transition",""),css(r,"transform","");var l=matrix(this.el),c=l&&l.a,h=l&&l.d,f=(i.left-a.left)/(c||1),p=(i.top-a.top)/(h||1);r.animatingX=!!f,r.animatingY=!!p,css(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=repaint(r),css(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),css(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){css(r,"transition",""),css(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function repaint(n){return n.offsetWidth}function calculateRealTime(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var a=e+"Global";plugins.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][a]&&t[o.pluginName][a](_objectSpread2({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](_objectSpread2({sortable:t},r)))})},initializePlugins:function(e,t,r,i){plugins.forEach(function(l){var c=l.pluginName;if(!(!e.options[c]&&!l.initializeByDefault)){var h=new l(e,t,e.options);h.sortable=e,h.options=e.options,e[c]=h,_extends(r,h.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,t){var r={};return plugins.forEach(function(i){typeof i.eventProperties=="function"&&_extends(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return plugins.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(i=a.optionListeners[t].call(e[a.pluginName],r))}),i}};function dispatchEvent(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,a=n.cloneEl,o=n.toEl,l=n.fromEl,c=n.oldIndex,h=n.newIndex,f=n.oldDraggableIndex,p=n.newDraggableIndex,m=n.originalEvent,v=n.putSortable,C=n.extraEventProperties;if(e=e||t&&t[expando],!!e){var b,S=e.options,x="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=o||t,b.from=l||t,b.item=i||t,b.clone=a,b.oldIndex=c,b.newIndex=h,b.oldDraggableIndex=f,b.newDraggableIndex=p,b.originalEvent=m,b.pullMode=v?v.lastPutMode:void 0;var T=_objectSpread2(_objectSpread2({},C),PluginManager.getEventProperties(r,e));for(var P in T)b[P]=T[P];t&&t.dispatchEvent(b),S[x]&&S[x].call(e,b)}}var _excluded=["evt"],pluginEvent=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,a=_objectWithoutProperties(r,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:i,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(l){_dispatchEvent({sortable:t,name:l,originalEvent:i})}},a))};function _dispatchEvent(n){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},n))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var r=css(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),a=getChild(e,0,t),o=getChild(e,1,t),l=a&&css(a),c=o&&css(o),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+getRect(a).width,f=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+getRect(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return o&&(c.clear==="both"||c.clear===p)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||h>=i&&r[CSSFloatProperty]==="none"||o&&r[CSSFloatProperty]==="none"&&h+f>i)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,r){var i=r?e.left:e.top,a=r?e.right:e.bottom,o=r?e.width:e.height,l=r?t.left:t.top,c=r?t.right:t.bottom,h=r?t.width:t.height;return i===l||a===c||i+o/2===l+h/2},_detectNearestEmptySortable=function(e,t){var r;return sortables.some(function(i){var a=i[expando].options.emptyInsertThreshold;if(!(!a||lastChild(i))){var o=getRect(i),l=e>=o.left-a&&e<=o.right+a,c=t>=o.top-a&&t<=o.bottom+a;if(l&&c)return r=i}}),r},_prepareGroup=function(e){function t(a,o){return function(l,c,h,f){var p=l.options.group.name&&c.options.group.name&&l.options.group.name===c.options.group.name;if(a==null&&(o||p))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return t(a(l,c,h,f),o)(l,c,h,f);var m=(o?l:c).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var r={},i=e.group;(!i||_typeof(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(n){if(ignoreNextClick)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[expando]._onDragOver(r)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=_extends({},e),n[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,l){o.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);_prepareGroup(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(n,"pointerdown",this._onTapStart):(on(n,"mousedown",this._onTapStart),on(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(n,"dragover",this),on(n,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,a=i.preventOnFilter,o=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(l||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,f=i.filter;if(_saveInputCheckedState(r),!dragEl&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Safari&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=closest(c,i.draggable,r,!1),!(c&&c.animated)&&lastDownEl!==c)){if(oldIndex=index(c),oldDraggableIndex=index(c,i.draggable),typeof f=="function"){if(f.call(this,e,c,this)){_dispatchEvent({sortable:t,rootEl:h,name:"filter",targetEl:c,toEl:r,fromEl:r}),pluginEvent("filter",t,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=closest(h,p.trim(),r,!1),p)return _dispatchEvent({sortable:t,rootEl:p,name:"filter",targetEl:c,fromEl:r,toEl:r}),pluginEvent("filter",t,{evt:e}),!0}),f)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!closest(h,i.handle,r,!1)||this._prepareDragStart(e,l,c)}}},_prepareDragStart:function(e,t,r){var i=this,a=i.el,o=i.options,l=a.ownerDocument,c;if(r&&!dragEl&&r.parentNode===a){var h=getRect(r);if(rootEl=a,dragEl=r,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=r,activeGroup=o.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-h.left,tapDistanceTop=tapEvt.clientY-h.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",c=function(){if(pluginEvent("delayEnded",i,{evt:e}),Sortable.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!FireFox&&i.nativeDraggable&&(dragEl.draggable=!0),i._triggerDragStart(e,t),_dispatchEvent({sortable:i,name:"choose",originalEvent:e}),toggleClass(dragEl,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){find(dragEl,f.trim(),_disableDraggable)}),on(l,"dragover",nearestEmptyInsertDetectEvent),on(l,"mousemove",nearestEmptyInsertDetectEvent),on(l,"touchmove",nearestEmptyInsertDetectEvent),on(l,"mouseup",i._onDrop),on(l,"touchend",i._onDrop),on(l,"touchcancel",i._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(l,"mouseup",i._disableDelayedDrag),on(l,"touchend",i._disableDelayedDrag),on(l,"touchcancel",i._disableDelayedDrag),on(l,"mousemove",i._delayedDragTouchMoveHandler),on(l,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&on(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(c,o.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var r=this.options;!e&&toggleClass(dragEl,r.dragClass,!1),toggleClass(dragEl,r.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var r=void 0;if(r=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=getParentOrHost(t));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,a=e.touches?e.touches[0]:e,o=ghostEl&&matrix(ghostEl,!0),l=ghostEl&&o&&o.a,c=ghostEl&&o&&o.d,h=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),f=(a.clientX-tapEvt.clientX+i.x)/(l||1)+(h?h[0]-ghostRelativeParentInitialScroll[0]:0)/(l||1),p=(a.clientY-tapEvt.clientY+i.y)/(c||1)+(h?h[1]-ghostRelativeParentInitialScroll[1]:0)/(c||1);if(!Sortable.active&&!awaitingDragStarted){if(r&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ghostEl){o?(o.e+=f-(lastDx||0),o.f+=p-(lastDy||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");css(ghostEl,"webkitTransform",m),css(ghostEl,"mozTransform",m),css(ghostEl,"msTransform",m),css(ghostEl,"transform",m),lastDx=f,lastDy=p,touchEvt=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),r=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,r.ghostClass,!1),toggleClass(ghostEl,r.fallbackClass,!0),toggleClass(ghostEl,r.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,a=r.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),r.cloneId=_nextTick(function(){pluginEvent("clone",r),!Sortable.eventCanceled&&(r.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),r._hideClone(),_dispatchEvent({sortable:r,name:"clone"}))}),!t&&toggleClass(dragEl,a.dragClass,!0),t?(ignoreNextClick=!0,r._loopId=setInterval(r._emulateDragOver,50)):(off(document,"mouseup",r._onDrop),off(document,"touchend",r._onDrop),off(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(r,i,dragEl)),on(document,"drop",r),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,r._dragStartId=_nextTick(r._dragStarted.bind(r,t,e)),on(document,"selectstart",r),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,a,o,l=this.options,c=l.group,h=Sortable.active,f=activeGroup===c,p=l.sort,m=putSortable||h,v,C=this,b=!1;if(_silent)return;function S(he,Ee){pluginEvent(he,C,_objectSpread2({evt:e,isOwner:f,axis:v?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:p,fromSortable:m,target:r,completed:T,onMove:function(ie,re){return _onMove(rootEl,t,dragEl,i,ie,getRect(ie),e,re)},changed:P},Ee))}function x(){S("dragOverAnimationCapture"),C.captureAnimationState(),C!==m&&m.captureAnimationState()}function T(he){return S("dragOverCompleted",{insertion:he}),he&&(f?h._hideClone():h._showClone(C),C!==m&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:h.options.ghostClass,!1),toggleClass(dragEl,l.ghostClass,!0)),putSortable!==C&&C!==Sortable.active?putSortable=C:C===Sortable.active&&putSortable&&(putSortable=null),m===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){S("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===dragEl&&!dragEl.animated||r===t&&!r.animated)&&(lastTarget=null),!l.dragoverBubble&&!e.rootEl&&r!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!he&&nearestEmptyInsertDetectEvent(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function P(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,l.draggable),_dispatchEvent({sortable:C,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=closest(r,l.draggable,t,!0),S("dragOver"),Sortable.eventCanceled)return b;if(dragEl.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return T(!1);if(ignoreNextClick=!1,h&&!l.disabled&&(f?p||(o=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,h,dragEl,e))&&c.checkPut(this,h,dragEl,e))){if(v=this._getDirection(e,r)==="vertical",i=getRect(dragEl),S("dragOverValid"),Sortable.eventCanceled)return b;if(o)return parentEl=rootEl,x(),this._hideClone(),S("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),T(!0);var L=lastChild(t,l.draggable);if(!L||_ghostIsLast(e,v,this)&&!L.animated){if(L===dragEl)return T(!1);if(L&&t===e.target&&(r=L),r&&(a=getRect(r)),_onMove(rootEl,t,dragEl,i,r,a,e,!!r)!==!1)return x(),L&&L.nextSibling?t.insertBefore(dragEl,L.nextSibling):t.appendChild(dragEl),parentEl=t,P(),T(!0)}else if(L&&_ghostIsFirst(e,v,this)){var k=getChild(t,0,l,!0);if(k===dragEl)return T(!1);if(r=k,a=getRect(r),_onMove(rootEl,t,dragEl,i,r,a,e,!1)!==!1)return x(),t.insertBefore(dragEl,k),parentEl=t,P(),T(!0)}else if(r.parentNode===t){a=getRect(r);var F=0,U,z=dragEl.parentNode!==t,N=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||i,r.animated&&r.toRect||a,v),K=v?"top":"left",q=isScrolledPast(r,"top","top")||isScrolledPast(dragEl,"top","top"),j=q?q.scrollTop:void 0;lastTarget!==r&&(U=a[K],pastFirstInvertThresh=!1,isCircumstantialInvert=!N&&l.invertSwap||z),F=_getSwapDirection(e,r,a,v,N?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,isCircumstantialInvert,lastTarget===r);var J;if(F!==0){var X=index(dragEl);do X-=F,J=parentEl.children[X];while(J&&(css(J,"display")==="none"||J===ghostEl))}if(F===0||J===r)return T(!1);lastTarget=r,lastDirection=F;var te=r.nextElementSibling,H=!1;H=F===1;var oe=_onMove(rootEl,t,dragEl,i,r,a,e,H);if(oe!==!1)return(oe===1||oe===-1)&&(H=oe===1),_silent=!0,setTimeout(_unsilent,30),x(),H&&!te?t.appendChild(dragEl):r.parentNode.insertBefore(dragEl,H?te:r),q&&scrollBy(q,0,j-q.scrollTop),parentEl=dragEl.parentNode,U!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(U-getRect(r)[K])),P(),T(!0)}if(t.contains(dragEl))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,r.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,r.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,a=r.length,o=this.options;i<a;i++)t=r[i],closest(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(a,o){var l=i.children[o];closest(l,this.options.draggable,i,!1)&&(r[a]=l)},this),t&&this.captureAnimationState(),e.forEach(function(a){r[a]&&(i.removeChild(r[a]),i.appendChild(r[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=PluginManager.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&_prepareGroup(r)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function _onMove(n,e,t,r,i,a,o,l){var c,h=n[expando],f=h.options.onMove,p;return window.CustomEvent&&!IE11OrLess&&!Edge?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=n,c.dragged=t,c.draggedRect=r,c.related=i||e,c.relatedRect=a||getRect(e),c.willInsertAfter=l,c.originalEvent=o,n.dispatchEvent(c),f&&(p=f.call(h,c,o)),p}function _disableDraggable(n){n.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(n,e,t){var r=getRect(getChild(t.el,0,t.options,!0)),i=getChildContainingRectFromElement(t.el,t.options,ghostEl),a=10;return e?n.clientX<i.left-a||n.clientY<r.top&&n.clientX<r.right:n.clientY<i.top-a||n.clientY<r.bottom&&n.clientX<r.left}function _ghostIsLast(n,e,t){var r=getRect(lastChild(t.el,t.options.draggable)),i=getChildContainingRectFromElement(t.el,t.options,ghostEl),a=10;return e?n.clientX>i.right+a||n.clientY>r.bottom&&n.clientX>r.left:n.clientY>i.bottom+a||n.clientX>r.right&&n.clientY>r.top}function _getSwapDirection(n,e,t,r,i,a,o,l){var c=r?n.clientY:n.clientX,h=r?t.height:t.width,f=r?t.top:t.left,p=r?t.bottom:t.right,m=!1;if(!o){if(l&&targetMoveDistance<h*i){if(!pastFirstInvertThresh&&(lastDirection===1?c>f+h*a/2:c<p-h*a/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)m=!0;else if(lastDirection===1?c<f+targetMoveDistance:c>p-targetMoveDistance)return-lastDirection}else if(c>f+h*(1-i)/2&&c<p-h*(1-i)/2)return _getInsertDirection(e)}return m=m||o,m&&(c<f+h*a/2||c>p-h*a/2)?c>f+h/2?1:-1:0}function _getInsertDirection(n){return index(dragEl)<index(n)?1:-1}function _generateId(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function _saveInputCheckedState(n){savedInputChecked.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&savedInputChecked.push(r)}}function _nextTick(n){return setTimeout(n,0)}function _cancelNextTick(n){return clearTimeout(n)}documentExists&&on(document,"touchmove",function(n){(Sortable.active||awaitingDragStarted)&&n.cancelable&&n.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(n){return n[expando]};Sortable.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),r.utils)),PluginManager.mount(r)})};Sortable.create=function(n,e){return new Sortable(n,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):r.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(a,o);if(touchEvt$1=t,r||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,l,r);var c=getParentAutoScrollElement(l,!0);scrolling&&(!pointerElemChangedInterval||a!==lastAutoScrollX||o!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var h=getParentAutoScrollElement(document.elementFromPoint(a,o),!0);h!==c&&(c=h,clearAutoScrolls()),autoScroll(t,i.options,h,r)},10),lastAutoScrollX=a,lastAutoScrollY=o)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(l,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(l,!1),!1)}}},_extends(n,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(n){clearInterval(n.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,c=getWindowScrollingElement(),h=!1,f;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,f=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var p=0,m=scrollEl;do{var v=m,C=getRect(v),b=C.top,S=C.bottom,x=C.left,T=C.right,P=C.width,L=C.height,k=void 0,F=void 0,U=v.scrollWidth,z=v.scrollHeight,N=css(v),K=v.scrollLeft,q=v.scrollTop;v===c?(k=P<U&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),F=L<z&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(k=P<U&&(N.overflowX==="auto"||N.overflowX==="scroll"),F=L<z&&(N.overflowY==="auto"||N.overflowY==="scroll"));var j=k&&(Math.abs(T-i)<=o&&K+P<U)-(Math.abs(x-i)<=o&&!!K),J=F&&(Math.abs(S-a)<=o&&q+L<z)-(Math.abs(b-a)<=o&&!!q);if(!autoScrolls[p])for(var X=0;X<=p;X++)autoScrolls[X]||(autoScrolls[X]={});(autoScrolls[p].vx!=j||autoScrolls[p].vy!=J||autoScrolls[p].el!==v)&&(autoScrolls[p].el=v,autoScrolls[p].vx=j,autoScrolls[p].vy=J,clearInterval(autoScrolls[p].pid),(j!=0||J!=0)&&(h=!0,autoScrolls[p].pid=setInterval((function(){r&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var te=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*l:0,H=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*l:0;typeof f=="function"&&f.call(Sortable.dragged.parentNode[expando],H,te,n,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,H,te)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&m!==c&&(m=getParentAutoScrollElement(m,!1)));scrolling=h}},30),drop=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,l=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(t){var h=r||a;l();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(f.clientX,f.clientY);c(),h&&!h.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=getChild(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(n,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(n,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(r){e._onEndDragAndDropLayerClick(r)}}):Sortable.create(n,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(r){e._onEndDragAndDropLayerClick(r)}})},_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlayerSwitcher"),n.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",n},_createMainLayersShowElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowLayersList"),n.type="checkbox",n},_createMainLayersElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPlayersList"),n.className="GPpanel gpf-panel fr-modal",n},_createMainLayersDivElement:function(){var n=document.createElement("div");return n.className="GPpanelBody gpf-panel__body_ls fr-modal__body",n},_createMainPictoElement:function(){var n=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i),document.getElementById(n._addUID("GPshowLayersList")).checked=i,document.getElementById(n._addUID("GPshowLayersList")).checked&&(document.getElementById(n._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),n.onShowLayerSwitcherClick(r)}):e.attachEvent&&e.attachEvent("onclick",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i),document.getElementById(n._addUID("GPshowLayersList")).checked&&(document.getElementById(n._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),n.onShowLayerSwitcherClick(r)}),e},_createMainCounterLayersElement:function(){var n=document.createElement("span");return n.id=this._addUID("GPlayerCounter"),n.className="GPlayerCounter",n.innerHTML="0",n},_createMainInfoElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPlayerInfoPanel"),n.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",n},_createMainInfoDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createLayersPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader gpf-panel__header_ls",n},_createLayersPanelIconElement:function(){var n=document.createElement("label");return n.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",n.title="Couches de donnes",n},_createLayersPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle gpf-panel__title_ls",n.id=this._addUID("GPlayersHeaderTitle"),n.innerHTML="Couches de donnes",n},_createLayersPanelCloseElement:function(){var n=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible fr-mx-1w",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(n._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(n){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+n.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(n)),e.appendChild(this._createAdvancedToolShowElement(n)),e.appendChild(this._createAdvancedToolElement(n)),e},_createBasicToolElement:function(n){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+n.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(n)),e.appendChild(this._createBasicToolVisibilityElement(n)),e.appendChild(this._createBasicToolDragNDropElement(n)),e},_createBasicToolDragNDropElement:function(n){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+n.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var t=this;return e.addEventListener?e.addEventListener("click",function(r){t._onStartDragAndDropLayerClick(r)}):e.attachEvent&&e.attachEvent("onclick",function(r){t._onStartDragAndDropLayerClick(r)}),e},_createBasicToolNameElement:function(n){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+n.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=n.description||n.title,e.innerHTML=n.title,e},_createBasicToolVisibilityElement:function(n){var e=typeof n.visibility<"u"?n.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+n.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var r=this;return t.addEventListener?t.addEventListener("click",function(i){var a=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!a),r._onVisibilityLayerClick(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){var a=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!a),r._onVisibilityLayerClick(i)}),t},_createAdvancedToolShowElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+n.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i);var a=document.getElementById(t._addUID("GPadvancedTools_ID_"+n.id));i?(a.classList.replace("GPelementVisible","GPelementHidden"),a.classList.replace("gpf-visible","gpf-hidden")):(a.classList.replace("GPelementHidden","GPelementVisible"),a.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(r){var i=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!i),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(n){var e=document.createElement("div");e.id=this._addUID("GPadvancedTools_ID_"+n.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(n)),checkDsfr()&&e.appendChild(this._createAdvancedToolEditionElement(n)),e.appendChild(this._createAdvancedToolInformationElement(n));for(var t=this._createAdvancedToolOpacityElement(n),r=0;r<t.length;r++)e.appendChild(t[r]);if(e.appendChild(this._createAdvancedToolExtentElement(n)),checkDsfr()){var i=document.createElement("button");i.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",i.setAttribute("aria-pressed",!1),i.addEventListener?i.addEventListener("click",function(o){var l=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!l)}):i.attachEvent&&i.attachEvent("onclick",function(o){var l=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!l)});var a=document.createElement("div");a.appendChild(this._createAdvancedToolDeleteElement(n,!0)),a.appendChild(this._createAdvancedToolInformationElement(n,!0)),a.appendChild(this._createAdvancedToolExtentElement(n,!0)),e.appendChild(i),e.appendChild(a)}return e},_createAdvancedToolDeleteElement:function(n,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPremoveContextual_ID_"+n.id):t.id=this._addUID("GPremove_ID_"+n.id),t.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Supprimer la couche",t.layerId=n.id,e&&(t.innerText="Supprimer"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var r=this;return t.addEventListener?t.addEventListener("click",function(i){r._onDropLayerClick(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){r._onDropLayerClick(i)}),t},_createAdvancedToolEditionElement:function(n){var e=document.createElement("button");e.id=this._addUID("GPedit_ID_"+n.id),e.className="GPlayerEdit gpf-btn gpf-btn-icon gpf-btn-icon-ls-edit fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Editer la couche",e.layerId=n.id,e.setAttribute("tabindex","0"),e.setAttribute("type","button"),n.type!=="feature"&&(e.style.opacity="0",e.style.visibility="hidden");var t=this;return e.addEventListener?e.addEventListener("click",function(r){t._onEditLayerClick(r)}):e.attachEvent&&e.attachEvent("onclick",function(r){t._onEditLayerClick(r)}),e},_createAdvancedToolInformationElement:function(n,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPinfoContextual_ID_"+n.id):t.id=this._addUID("GPinfo_ID_"+n.id),t.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!n.title||!n.description)&&(t.style.opacity="0",t.style.visibility="hidden",e&&(t.style.display="none")),t.title="Informations/lgende",t.layerId=n.id,e&&(t.innerText="Informations"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var r=this;return t.addEventListener?t.addEventListener("click",function(i){r._onOpenLayerInfoClick(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){r._onOpenLayerInfoClick(i)}),t},_createAdvancedToolOpacityElement:function(n){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+n.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.title="Opacit";var r=typeof n.opacity<"u"?n.opacity:1;r=Math.round(r*100),t.style.setProperty("--progress-right",r+"%");var i=document.createElement("input");i.id=this._addUID("GPopacityValueDiv_ID_"+n.id),i.type="range",i.value=r,i.ariaLabel="Opacit";var a=this;i.addEventListener?i.addEventListener("change",function(c){a._onChangeLayerOpacity(c)}):i.attachEvent&&i.attachEvent("onchange",function(c){a._onChangeLayerOpacity(c)}),i.addEventListener?i.addEventListener("input",function(c){a._onChangeLayerOpacity(c)}):i.attachEvent&&i.attachEvent("oninput",function(c){a._onChangeLayerOpacity(c)}),t.appendChild(i);var o=document.createElement("div");o.id=this._addUID("GPopacityValueDiv_ID_"+n.id),o.className="GPlayerOpacityValue";var l=document.createElement("span");return l.id=this._addUID("GPopacityValue_ID_"+n.id),l.className="gpf-range__output fr-range__output gpf-visible",l.innerHTML=r+"%",o.appendChild(l),e.push(t),e.push(o),e},_createAdvancedToolExtentElement:function(n,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPextentContextual_ID_"+n.id):t.id=this._addUID("GPextent_ID_"+n.id),t.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Zoomer dans l'tendue",t.layerId=n.id,e&&(t.innerText="Zoomer"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.setAttribute("type","button");var r=this;return t.addEventListener?t.addEventListener("click",function(i){var a=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!a),r._onZoomToExtentClick(i)}):t.attachEvent&&t.attachEvent("onclick",function(i){var a=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!a),r._onZoomToExtentClick(i)}),t},_createContainerLayerInfoElement:function(n){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var r=document.createElement("label");r.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",r.title="Informations",t.appendChild(r);var i=document.createElement("div");i.id=this._addUID("GPlayerInfoTitle"),i.innerHTML=n.title,i.className="gpf-panel__title_ls",t.appendChild(i);var a=document.createElement("button");a.id=this._addUID("GPlayerInfoClose"),a.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la fentre";var o=this,l=function(){document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(n.id).classList.add("GPlayerInfoClosed"),document.getElementById(n.id).classList.remove("GPlayerInfoOpened")};a.addEventListener?a.addEventListener("click",l):a.attachEvent&&a.attachEvent("onclick",l),this.addEventListener("layerswitcher:remove",J=>{parseInt(n.id.split("-")[0].split("GPinfo_ID_")[1])===J.layer.id&&(document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),t.appendChild(a),e.appendChild(t);var c=document.createElement("div");if(c.id=this._addUID("GPlayerInfoContent"),c.className="gpf-panel__content fr-modal__content",e.appendChild(c),n.quicklookUrl){var h=document.createElement("div");h.id=this._addUID("GPlayerInfoQuicklook"),h.title="Afficher un aperu de la couche";var f=document.createElement("a");f.href=n.quicklookUrl,f.appendChild(h),c.appendChild(f)}var p=document.createElement("div");if(p.id=this._addUID("GPlayerInfoDescription"),p.innerHTML=n.description,c.appendChild(p),n.metadata){var m=document.createElement("div");m.id=this._addUID("GPlayerInfoMetadata");var v=document.createElement("div");v.className="GPlayerInfoSubtitle",v.innerHTML="Mtadonnes",m.appendChild(v);for(var C=0;C<n.metadata.length;C++){var b=n.metadata[C].url,S=document.createElement("div");S.className="GPlayerInfoLink";var x=document.createElement("a");x.href=b,x.innerHTML=b,S.appendChild(x),m.appendChild(S)}n.metadata.length!==0&&c.appendChild(m)}if(n.legends){var T=document.createElement("div");T.id=this._addUID("GPlayerInfoLegend");var P=document.createElement("div");P.className="GPlayerInfoSubtitle",P.innerHTML="Lgende",T.appendChild(P);for(var L={},k=n.maxScaleDenominator||56e7,F=0;F<n.legends.length;F++){var U=n.legends[F].minScaleDenominator;if(U){var z=U.toString();U=Math.round(parseInt(z.substring(0,3),10)/10)*Math.pow(10,z.length-2)}else U=270;L[U]=n.legends[F]}for(var N in L)if(L.hasOwnProperty(N)){var K=L[N].url;if(typeof K=="string"&&K.toLowerCase().indexOf("nolegend.jpg")===-1){var q=document.createElement("div");q.className="GPlayerInfoLink",k=L[N].maxScaleDenominator||k;var j=document.createElement("a");j.className="fr-link",j.href=K,j.target="_blank",j.innerHTML="Du 1/"+N+" au 1/"+k,q.appendChild(j),T.appendChild(q)}else delete L[N]}Object.keys(L).length!==0&&c.appendChild(T)}return e}},logger$4=LoggerByDefault$1.getLogger("layerswitcher"),LayerSwitcher=class Pf extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},r=e.layers||[];if(super(t),!(this instanceof Pf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,r),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",r=>{var i=r.element,a;i.hasOwnProperty("gpLayerId")?a=i.gpLayerId:(a=this._layerId,i.gpLayerId=a,this._layerId++),this._layers[a]||this.addLayer(i)}),this._listeners.onRemoveListener=e.getLayers().on("remove",r=>{var i=r.element,a=i.gpLayerId;this._layers[a]&&this.removeLayer(i)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,t){var r=this.getMap();if(t=t||{},!e){logger$4.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var i=e.gpLayerId;if(typeof i>"u"){logger$4.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var a=!1;if(r.getLayers().forEach(S=>{S.gpLayerId===i&&(a=!0)}),!a){logger$4.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[i]){for(var m in t)t.hasOwnProperty(m)&&(this._layers[i][m]=t[m]);if(t.title){var v=document.getElementById(this._addUID("GPname_ID_"+i));v&&(v.innerHTML=t.title,v.title=t.description||t.title)}var C=document.getElementById(this._addUID("GPinfo_ID_"+i));if(!document.getElementById(this._addUID("GPinfo_ID_"+i))&&t.description){var b=document.getElementById(this._addUID("GPadvancedTools_ID_"+i));b&&b.appendChild(this._createAdvancedToolInformationElement({id:i}))}C&&C.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var o=this.getLayerInfo(e)||{},l=e.getOpacity(),c=e.getVisible(),h=this.isInRange(e,r),f={layer:e,id:i,name:e.name,service:e.service,type:"",opacity:l??1,visibility:c??!0,inRange:h??!0,title:t.title!=null?t.title:o._title||i,description:t.description||o._description||null,legends:t.legends||o._legends||[],metadata:t.metadata||o._metadata||[],quicklookUrl:t.quicklookUrl||o._quicklookUrl||null};this._layers[i]=f;var p=this._createLayerDiv(f);this._layers[i].div=p,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(f),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(p,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",S=>this._updateLayerOpacity(S)),this._listeners.updateLayerVisibility=e.on("change:visible",S=>this._updateLayerVisibility(S)),this._layers[i].onZIndexChangeEvent==null&&(this._layers[i].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[i]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$4.trace(e);var t=e.gpLayerId,r=document.getElementById(this._addUID("GPinfo_ID_"+t));r&&r.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));i&&this._layerListContainer.removeChild(i);var a=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(a,1),this._lastZIndex--;for(var o=this._layersOrder,l=0;l<o.length;l++)o[l].layer.setZIndex(this._lastZIndex-l);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$4.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var r=e.gpLayerId;if(r==null){logger$4.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var i=document.getElementById(this._addUID("GPremove_ID_"+r));i&&(t===!1?i.style.display="none":t===!0&&(i.style.display="block"))}}getContainer(){return this.container}_initialize(e,t){this.options={id:"",collapsed:!0,draggable:!1,counter:!1,panel:!1,gutter:!1,allowEdit:!1},Helper$1.assign(this.options,e),this.options.layers=t,this._uid=this.options.id||SelectorID.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=this.options.collapsed!==void 0?this.options.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var r=0;r<t.length;r++){var i=t[r].layer;if(i){var a;i.hasOwnProperty("gpLayerId")?a=i.gpLayerId:(a=this._layerId,i.gpLayerId=a,this._layerId++);var o=t[r].config||{},l=i.getOpacity(),c=i.getVisible(),h={layer:i,id:a,name:i.name,service:i.service,opacity:l??1,visibility:c??!0,title:o.title!=null?o.title:o.id?o.id:a,description:o.description||null,legends:o.legends||[],metadata:o.metadata||[],quicklookUrl:o.quicklookUrl||null};this._layers[a]=h}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var r=this,i=function(b){this.collapsed=!b.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(b){i.call(r,b)});var a=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(a),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var o=this._layerSwitcherCounter=this._createMainCounterLayersElement();a.appendChild(o)}var l=this._createMainLayersElement();if(e.appendChild(l),this.options.panel){var c=this._createLayersPanelHeaderElement();l.appendChild(c);var h=this._createLayersPanelIconElement();c.appendChild(h);var f=this._createLayersPanelTitleElement();c.appendChild(f);var p=this._createLayersPanelCloseElement();c.appendChild(p)}var m=this._layerListContainer=this._createMainLayersDivElement();l.appendChild(m),this._createDraggableElement(m,this);var v=this._createMainInfoElement(),C=this._createMainInfoDivElement();return v.appendChild(C),e.appendChild(v),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(c=>{var h=null;c.hasOwnProperty("gpLayerId")?h=c.gpLayerId:(h=this._layerId,c.gpLayerId=h,this._layerId++);var f=this.getLayerInfo(c)||{};if(this._layers[h])this._layers[h].opacity=c.getOpacity(),this._layers[h].visibility=c.getVisible(),this._layers[h].inRange=this.isInRange(c,e);else{var p=c.getOpacity(),m=c.getVisible(),v=this.isInRange(c,e),C={layer:c,id:h,name:c.name,service:c.service,opacity:p??1,visibility:m??!0,inRange:v??!0,title:f._title||h,description:f._description||null,legends:f._legends||[],metadata:f._metadata||[],quicklookUrl:f._quicklookUrl||null};this._layers[h]=C}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=c.on("change:opacity",S=>this._updateLayerOpacity(S)),this._listeners._updateLayerVisibility=c.on("change:visible",S=>this._updateLayerVisibility(S)),c.getZIndex!==void 0){var b=c.getZIndex()||0;(!this._layersIndex[b]||!Array.isArray(this._layersIndex[b]))&&(this._layersIndex[b]=[]),this._layersIndex[b].push(this._layers[h])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var r=this._layersIndex[t],i=0;i<r.length;i++)this._layersOrder.unshift(r[i]),this._lastZIndex++,r[i].layer.setZIndex(this._lastZIndex),this._layers[r[i].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[r[i].layer.gpLayerId].onZIndexChangeEvent=r[i].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var a=0;a<this._layersOrder.length;a++){var o=this._layersOrder[a],l=this._createLayerDiv(o);this._layerListContainer.querySelector("#"+l.id)||this._layerListContainer.appendChild(l),this._layers[o.id].div=l}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,r=e.metadata&&e.metadata.length!==0,i=e.quicklookUrl;(t||r||i)&&(e.displayInformationElement=!0),e.type="",this.options.allowEdit&&(e.layer instanceof VectorLayer||e.layer instanceof VectorTileLayer)&&(e.type="feature");var a=this._createContainerLayerElement(e);return e.inRange||a.classList.add("outOfRange"),a}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this._showLayerSwitcherButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,r=SelectorID.index(t),i=this._layers[r].layer,a=e.target.value,o=document.getElementById(this._addUID("GPopacityValue_ID_"+r));o.innerHTML=a+"%",i.setOpacity(a/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var r=e.target.gpLayerId,i=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+r));i&&(i.value=Math.round(t*100));var a=document.getElementById(this._addUID("GPopacityValue_ID_"+r));a&&(a.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[r]})}_onVisibilityLayerClick(e){var t=e.target.id,r=SelectorID.index(t),i=this._layers[r].layer;i.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),r=e.target.gpLayerId,i=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+r));i&&(i.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[r]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,r;e.getLayers().forEach(h=>{r=h.gpLayerId,unByKey(this._layers[r].onZIndexChangeEvent),this._layers[r].onZIndexChangeEvent=null,t=null,h.getZIndex!==void 0&&(t=h.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[r]))}),this._lastZIndex=0,this._layersOrder=[];for(var i in this._layersIndex)if(this._layersIndex.hasOwnProperty(i))for(var a=this._layersIndex[i],o=0;o<a.length;o++)this._layersOrder.unshift(a[o]),this._lastZIndex++,this._layers[a[o].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[a[o].layer.gpLayerId].onZIndexChangeEvent=a[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let h=0;h<this._layerListContainer.childNodes.length;h++){const f=this._layerListContainer.childNodes[h];f.id!==""&&f.remove()}for(var l=0;l<this._layersOrder.length;l++){var c=this._layersOrder[l];this._layerListContainer.appendChild(c.div)}}else logger$4.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,r=SelectorID.index(t),i=this._layers[r],a,o,l=document.getElementById(e.target.id);if(l.classList.contains("GPlayerInfoOpened")){l.classList.remove("GPlayerInfoOpened"),l.classList.add("GPlayerInfoClosed"),a=document.getElementById(this._addUID("GPlayerInfoPanel")),a.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),a.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),o=document.getElementById(this._addUID("GPlayerInfoContent")),o&&o.parentNode.remove();return}l.classList.contains("GPlayerInfoClosed")&&(l.classList.remove("GPlayerInfoClosed"),l.classList.add("GPlayerInfoOpened")),a=document.getElementById(this._addUID("GPlayerInfoPanel")),a.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),a.classList.add("GPlayerInfoPanelOpened","gpf-visible"),o=document.getElementById(this._addUID("GPlayerInfoContent")),o&&o.parentNode.remove();var c={id:t,title:i.title,description:i.description,quicklookUrl:i.quicklookUrl,metadata:i.metadata,legends:i.legends},h=i.layer.getMaxResolution();h===1/0?c._maxScaleDenominator=56e7:c._maxScaleDenominator=Math.round(h/28e-5);var f=this._createContainerLayerInfoElement(c);a.firstChild.appendChild(f)}_onDropLayerClick(e){var t=e.target.id,r=SelectorID.index(t),i=this._layers[r].layer;this.getMap().getLayers().remove(i)}_onEditLayerClick(e){var t=e.target.id,r=SelectorID.index(t),i=this._layers[r],a=this._layers[r].layer;this.dispatchEvent({type:"layerswitcher:edit",layer:a,options:i})}_onEndDragAndDropLayerClick(e){logger$4.trace(e);var t=this.getMap(),r=document.querySelectorAll("div.GPlayerSwitcher_layer"),i=r.length;this._layersOrder=[];for(var a=0;a<r.length;a++){var o=r[a].id,l=SelectorID.index(o),c=this._layers[l].layer;unByKey(this._layers[l].onZIndexChangeEvent),this._layers[l].onZIndexChangeEvent=null,c.setZIndex&&(c.setZIndex(i),this._layersOrder.push(this._layers[l]),i--),this._layers[l].onZIndexChangeEvent==null&&(this._layers[l].onZIndexChangeEvent=c.on("change:zIndex",()=>this._updateLayersOrder()))}t.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$4.debug(e)}_onZoomToExtentClick(e){logger$4.debug(e);var t=e.target.id,r=SelectorID.index(t),i=this._layers[r],a=null,o=null,l=this.getMap();if(i.layer.hasOwnProperty("gpResultLayerId")&&(i.layer.gpResultLayerId.split(":")[0]==="layerimport"||i.layer.gpResultLayerId.split(":")[0]==="drawing"||i.layer.gpResultLayerId.split(":")[0]==="compute"||i.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(l.getView()&&l.getSize()){var c=i.layer.getExtent();if(!c){var h=i.layer.getSource();h&&h.getExtent?c=h.getExtent():c=h.getTileGrid().getExtent()}c&&c[0]!==1/0&&l.getView().fit(c,l.getSize())}}else try{if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var f=i.layer.name||i.layer.getSource().name,p=i.layer.service||i.layer.getSource().service,m=Config$1.configuration.getLayerId(f,p);if(!m)throw"ERROR : Layer ID not found into the catalogue !?";var v=Config$1.configuration.getGlobalConstraints(m);if(v){if(!l||!l.getView())return;var C=l.getView(),b=C.getProjection(),S=[v.extent.left,v.extent.bottom,v.extent.right,v.extent.top],x=v.crs;x||(x="EPSG:4326"),a=transformExtent(S,x,b),a&&C.fit(a)}}catch(T){o=T}this.dispatchEvent({type:"layerswitcher:extent",extent:a,layer:i,error:o})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var r=t.gpLayerId;if(this._layers[r]){var i=this._layers[r],a;this.isInRange(t,e)&&!i.inRange?(i.inRange=!0,a=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+r)),a.classList.remove("outOfRange")):!this.isInRange(t,e)&&i.inRange&&(i.inRange=!1,a=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+r)),a.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(r=>{r===e&&(t=r.hasOwnProperty("gpLayerId")?r.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var r=t.getView().getResolution();if(r>e.getMaxResolution()||r<e.getMinResolution())return!1;var i=t.getView().calculateExtent(t.getSize()),a=e.getExtent();return!(a&&!intersects$1(i,a))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var r=e.getProperties(),i=r.source;i&&(t._title=i._title||r.title||r.id||"",t._description=i._description||r.description||"",t._quicklookUrl=i._quicklookUrl||r.quicklookUrl||"",t._metadata=i._metadata||r.metadata||[],t._legends=i._legends||r.legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);var Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(n,e){const t=[];for(let r=0;r<e.length;++r){const a=e[r].getGeometry();appendGeometryTraceTargets(n,a,t)}return t}function getSquaredDistance(n,e){return squaredDistance$1(n[0],n[1],e[0],e[1])}function getCoordinate(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function getCumulativeSquaredDistance(n,e,t){let r,i;e<t?(r=e,i=t):(r=t,i=e);const a=Math.ceil(r),o=Math.floor(i);if(a>o){const c=interpolateCoordinate(n,r),h=interpolateCoordinate(n,i);return getSquaredDistance(c,h)}let l=0;if(r<a){const c=interpolateCoordinate(n,r),h=getCoordinate(n,a);l+=getSquaredDistance(c,h)}if(o<i){const c=getCoordinate(n,o),h=interpolateCoordinate(n,i);l+=getSquaredDistance(c,h)}for(let c=a;c<o-1;++c){const h=getCoordinate(n,c),f=getCoordinate(n,c+1);l+=getSquaredDistance(h,f)}return l}function appendGeometryTraceTargets(n,e,t){if(e instanceof LineString){appendTraceTarget(n,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const r=e.getCoordinates();for(let i=0,a=r.length;i<a;++i)appendTraceTarget(n,r[i],!1,t);return}if(e instanceof Polygon){const r=e.getCoordinates();for(let i=0,a=r.length;i<a;++i)appendTraceTarget(n,r[i],!0,t);return}if(e instanceof MultiPolygon){const r=e.getCoordinates();for(let i=0,a=r.length;i<a;++i){const o=r[i];for(let l=0,c=o.length;l<c;++l)appendTraceTarget(n,o[l],!0,t)}return}if(e instanceof GeometryCollection){const r=e.getGeometries();for(let i=0;i<r.length;++i)appendGeometryTraceTargets(n,r[i],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(n,e,t,r){const i=n[0],a=n[1];let o=1/0,l=-1,c=NaN;for(let p=0;p<e.targets.length;++p){const m=e.targets[p],v=m.coordinates;let C=1/0,b;for(let S=0;S<v.length-1;++S){const x=v[S],T=v[S+1],P=getPointSegmentRelationship(i,a,x,T);P.squaredDistance<C&&(C=P.squaredDistance,b=S+P.along)}C<o&&(o=C,m.ring&&e.targetIndex===p&&(m.endIndex>m.startIndex?b<m.startIndex&&(b+=v.length):m.endIndex<m.startIndex&&b>m.startIndex&&(b-=v.length)),c=b,l=p)}const h=e.targets[l];let f=h.ring;if(e.targetIndex===l&&f){const p=interpolateCoordinate(h.coordinates,c),m=t.getPixelFromCoordinate(p);distance(m,e.startPx)>r&&(f=!1)}if(f){const p=h.coordinates,m=p.length,v=h.startIndex,C=c;if(v<C){const b=getCumulativeSquaredDistance(p,v,C);getCumulativeSquaredDistance(p,v,C-m)<b&&(c-=m)}else{const b=getCumulativeSquaredDistance(p,v,C);getCumulativeSquaredDistance(p,v,C+m)<b&&(c+=m)}}return sharedUpdateInfo.index=l,sharedUpdateInfo.endIndex=c,sharedUpdateInfo}function appendTraceTarget(n,e,t,r){const i=n[0],a=n[1];for(let o=0,l=e.length-1;o<l;++o){const c=e[o],h=e[o+1],f=getPointSegmentRelationship(i,a,c,h);if(f.squaredDistance===0){const p=o+f.along;r.push({coordinates:e,ring:t,startIndex:p,endIndex:p});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(n,e,t,r){const i=t[0],a=t[1],o=r[0],l=r[1],c=o-i,h=l-a;let f=0,p=i,m=a;return(c!==0||h!==0)&&(f=clamp$1(((n-i)*c+(e-a)*h)/(c*c+h*h),0,1),p+=c*f,m+=h*f),sharedRel.along=f,sharedRel.squaredDistance=toFixed(squaredDistance$1(n,e,p,m),10),sharedRel}function interpolateCoordinate(n,e){const t=n.length;let r=Math.floor(e);const i=e-r;r>=t?r-=t:r<0&&(r+=t);let a=r+1;a>=t&&(a-=t);const o=n[r],l=o[0],c=o[1],h=n[a],f=h[0]-l,p=h[1]-c;return[l+f*i,c+p*i]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=(a,o,l)=>{const c=o||new Circle([NaN,NaN]),h=fromUserCoordinate(a[0]),f=squaredDistance(h,fromUserCoordinate(a[a.length-1]));return c.setCenterAndRadius(h,Math.sqrt(f),this.geometryLayout_),c};else{let a;i==="Point"?a=Point$1:i==="LineString"?a=LineString:i==="Polygon"&&(a=Polygon),r=(o,l,c)=>(l?i==="Polygon"?o[0].length?l.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):l.setCoordinates([],this.geometryLayout_):l.setCoordinates(o,this.geometryLayout_):l=new a(o,this.geometryLayout_),l)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===MapBrowserEventType.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),a=boundingExtent([r,i]),o=this.traceSource_.getFeaturesInExtent(a);if(o.length===0)return;const l=getTraceTargets(e.coordinate,o);l.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:l,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const r=e.startIndex<=e.endIndex,i=e.startIndex<=t;r===i?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){const i=Math.ceil(e);let a=Math.floor(t);a===t&&(a-=1),r=a-i+1}else{const i=Math.floor(e);let a=Math.ceil(t);a===t&&(a+=1),r=i-a+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;const i=[];if(t<r){const a=Math.ceil(t);let o=Math.floor(r);o===r&&(o-=1);for(let l=a;l<=o;++l)i.push(getCoordinate(e.coordinates,l))}else{const a=Math.floor(t);let o=Math.ceil(r);o===r&&(o+=1);for(let l=a;l>=o;--l)i.push(getCoordinate(e.coordinates,l))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const r=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const l=t.targets[r.index];this.addTracedCoordinates_(l,l.startIndex,r.endIndex)}else{const l=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(l,r.endIndex)}t.targetIndex=r.index;const i=t.targets[t.targetIndex];i.endIndex=r.endIndex;const a=interpolateCoordinate(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(a);e.coordinate=a,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,r=e.pixel,i=t[0]-r[0],a=t[1]-r[1],o=i*i+a*a;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let i=!1,a=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const l=this.sketchCoords_;i=l[0].length>this.minPoints_,a=[l[0][0],l[0][l[0].length-2]],t?a=[l[0][0]]:a=[l[0][0],l[0][l[0].length-2]]}if(i){const l=this.getMap();for(let c=0,h=a.length;c<h;c++){const f=a[c],p=l.getPixelFromCoordinate(f),m=e[0]-p[0],v=e[1]-p[1],C=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(m*m+v*v)<=C,r){this.finishCoordinate_=f;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const t=this.getMap().getView().getProjection(),r=getStrideForLayout(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),r=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),a=getStrideForLayout(this.geometryLayout_);let o,l;for(;e.length<a;)e.push(0);this.mode_==="Point"?l=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],l=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,l=o[o.length-1]),l[0]=e[0],l[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,a;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(e.slice()),this.geometryFunction_(a,t,r)):o==="Polygon"&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():i=!0),a.push(e.slice()),i&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let a=0;a<e;++a){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const l=this.finishCoordinate_.slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(o,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const l=this.sketchLine_.getGeometry();if(o.length>=2){const c=o[o.length-2].slice();o[o.length-1]=c,this.createOrUpdateSketchPoint_(c)}l.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,i),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const a=e[e.length-1];this.sketchFeature_=this.addToDrawing_(a),this.modifyDrawing_(a)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Feature(new Point$1(i)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const n=createEditingStyle();return function(e,t){return n[e.getGeometry().getType()]}}function getMode(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,r){super(e),this.features=t,this.mapBrowserEvent=r}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(r){return altKeyOnly(r)&&singleClick(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const i=this.SEGMENT_WRITERS_[t.getType()];i&&i(e,t)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(r.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const r=this.featuresBeingModified_.getArray();for(let i=0,a=t.length;i<a;++i){const o=t[i].feature;o&&!r.includes(o)&&this.featuresBeingModified_.push(o)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,r=[];t.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){const a=r[i];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===a&&this.dragSegments_.splice(o,1);t.remove(a)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)}writeMultiPointGeometry_(e,t){const r=t.getCoordinates();for(let i=0,a=r.length;i<a;++i){const o=r[i],l={feature:e,geometry:t,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(t.getExtent(),l)}}writeLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,a=r.length-1;i<a;++i){const o=r.slice(i,i+2),l={feature:e,geometry:t,index:i,segment:o};this.rBush_.insert(boundingExtent(o),l)}}writeMultiLineStringGeometry_(e,t){const r=t.getCoordinates();for(let i=0,a=r.length;i<a;++i){const o=r[i];for(let l=0,c=o.length-1;l<c;++l){const h=o.slice(l,l+2),f={feature:e,geometry:t,depth:[i],index:l,segment:h};this.rBush_.insert(boundingExtent(h),f)}}}writePolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,a=r.length;i<a;++i){const o=r[i];for(let l=0,c=o.length-1;l<c;++l){const h=o.slice(l,l+2),f={feature:e,geometry:t,depth:[i],index:l,segment:h};this.rBush_.insert(boundingExtent(h),f)}}}writeMultiPolygonGeometry_(e,t){const r=t.getCoordinates();for(let i=0,a=r.length;i<a;++i){const o=r[i];for(let l=0,c=o.length;l<c;++l){const h=o[l];for(let f=0,p=h.length-1;f<p;++f){const m=h.slice(f,f+2),v={feature:e,geometry:t,depth:[l,i],index:f,segment:m};this.rBush_.insert(boundingExtent(m),v)}}}}writeCircleGeometry_(e,t){const r=t.getCenter(),i={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[r,r]},a={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[r,r]},o=[i,a];i.featureSegments=o,a.featureSegments=o,this.rBush_.insert(createOrUpdateFromCoordinate(r),i);let l=t;this.rBush_.insert(l.getExtent(),a)}writeGeometryCollectionGeometry_(e,t){const r=t.getGeometriesArray();for(let i=0;i<r.length;++i){const a=r[i],o=this.SEGMENT_WRITERS_[a.getType()];o(e,a)}}createOrUpdateVertexFeature_(e,t,r,i){let a=this.vertexFeature_;return a?a.getGeometry().setCoordinates(e):(a=new Feature(new Point$1(e)),this.vertexFeature_=a,this.overlay_.getSource().addFeature(a)),a.set("features",t),a.set("geometries",r),a.set("existing",i),a}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const r=[],i=t.getGeometry().getCoordinates(),a=boundingExtent([i]),o=this.rBush_.getInExtent(a),l={};o.sort(compareIndexes);for(let c=0,h=o.length;c<h;++c){const f=o[c],p=f.segment;let m=getUid(f.geometry);const v=f.depth;if(v&&(m+="-"+v.join("-")),l[m]||(l[m]=new Array(2)),f.geometry.getType()==="Circle"&&f.index===CIRCLE_CIRCUMFERENCE_INDEX){const C=closestOnSegmentData(e,f);equals(C,i)&&!l[m][0]&&(this.dragSegments_.push([f,0]),l[m][0]=f);continue}if(equals(p[0],i)&&!l[m][0]){this.dragSegments_.push([f,0]),l[m][0]=f;continue}if(equals(p[1],i)&&!l[m][1]){if(l[m][0]&&l[m][0].index===0){let C=f.geometry.getCoordinates();switch(f.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":C=C[v[1]];case"Polygon":if(f.index!==C[v[0]].length-2)continue;break}}this.dragSegments_.push([f,1]),l[m][1]=f;continue}getUid(p)in this.vertexSegments_&&!l[m][0]&&!l[m][1]&&r.push(f)}return r}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([a])=>a));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[];for(let a=0,o=this.dragSegments_.length;a<o;++a){const l=this.dragSegments_[a],c=l[0],h=c.feature;r.includes(h)||r.push(h);const f=c.geometry;i.includes(f)||i.push(f);const p=c.depth;let m;const v=c.segment,C=l[1];for(;t.length<f.getStride();)t.push(v[C][t.length]);switch(f.getType()){case"Point":m=t,v[0]=t,v[1]=t;break;case"MultiPoint":m=f.getCoordinates(),m[c.index]=t,v[0]=t,v[1]=t;break;case"LineString":m=f.getCoordinates(),m[c.index+C]=t,v[C]=t;break;case"MultiLineString":m=f.getCoordinates(),m[p[0]][c.index+C]=t,v[C]=t;break;case"Polygon":m=f.getCoordinates(),m[p[0]][c.index+C]=t,v[C]=t;break;case"MultiPolygon":m=f.getCoordinates(),m[p[1]][p[0]][c.index+C]=t,v[C]=t;break;case"Circle":const b=f;if(v[0]=t,v[1]=t,c.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,b.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let S=distance(fromUserCoordinate(b.getCenter()),fromUserCoordinate(t));b.setRadius(S),this.changingFeature_=!1}break}m&&this.setGeometryCoordinates_(f,m)}this.createOrUpdateVertexFeature_(t,r,i,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(t);if(r!=null&&r.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){const i=this.vertexFeature_.getGeometry().getCoordinates();for(let a=r.length-1;a>=0;--a)this.insertVertex_(r[a],i);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()==="Circle"){const a=i,o=a.getCenter(),l=r.featureSegments[0],c=r.featureSegments[1];l.segment[0]=o,l.segment[1]=o,c.segment[0]=o,c.segment[1]=o,this.rBush_.update(createOrUpdateFromCoordinate(o),l);let h=a;this.rBush_.update(h.getExtent(),c)}else this.rBush_.update(boundingExtent(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),r=t.getPixelFromCoordinate(e);t.getView().getProjection();const i=function(l,c){return projectedDistanceToSegmentDataSquared(e,l)-projectedDistanceToSegmentDataSquared(e,c)};let a,o;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(r,(c,h,f)=>{f&&f.getType()==="Point"&&(f=new Point$1(toUserCoordinate(f.getCoordinates())));const p=f||c.getGeometry();if(p&&p.getType()==="Point"&&c instanceof Feature&&this.features_.getArray().includes(c)){o=p;const m=c.getGeometry().getFlatCoordinates().slice(0,2);a=[{feature:c,geometry:o,segment:[m,m]}]}return!0},{layerFilter:l})}if(!a){const l=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),c=t.getView().getResolution()*this.pixelTolerance_,h=toUserExtent(buffer(l,c,tempExtent));a=this.rBush_.getInExtent(h)}if(a&&a.length>0){const l=a.sort(i)[0],c=l.segment;let h=closestOnSegmentData(e,l);const f=t.getPixelFromCoordinate(h);let p=distance(r,f);if(o||p<=this.pixelTolerance_){const m={};if(m[getUid(c)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-e[0],this.delta_[1]=h[1]-e[1]),l.geometry.getType()==="Circle"&&l.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);else{const v=t.getPixelFromCoordinate(c[0]),C=t.getPixelFromCoordinate(c[1]),b=squaredDistance(f,v),S=squaredDistance(f,C);if(p=Math.sqrt(Math.min(b,S)),this.snappedToVertex_=p<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(h=b>S?c[1]:c[0]),this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);const x={};x[getUid(l.geometry)]=!0;for(let T=1,P=a.length;T<P;++T){const L=a[T].segment;if(equals(c[0],L[0])&&equals(c[1],L[1])||equals(c[0],L[1])&&equals(c[1],L[0])){const k=getUid(a[T].geometry);k in x||(x[k]=!0,m[getUid(L)]=!0)}else break}}this.vertexSegments_=m;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const r=e.segment,i=e.feature,a=e.geometry,o=e.depth,l=e.index;let c;for(;t.length<a.getStride();)t.push(0);switch(a.getType()){case"MultiLineString":c=a.getCoordinates(),c[o[0]].splice(l+1,0,t);break;case"Polygon":c=a.getCoordinates(),c[o[0]].splice(l+1,0,t);break;case"MultiPolygon":c=a.getCoordinates(),c[o[1]][o[0]].splice(l+1,0,t);break;case"LineString":c=a.getCoordinates(),c.splice(l+1,0,t);break;default:return!1}this.setGeometryCoordinates_(a,c);const h=this.rBush_;h.remove(e),this.updateSegmentIndices_(a,l,o,1);const f={segment:[r[0],t],feature:i,geometry:a,depth:o,index:l};h.insert(boundingExtent(f.segment),f),this.dragSegments_.push([f,1]);const p={segment:[t,r[1]],feature:i,geometry:a,depth:o,index:l+1};return h.insert(boundingExtent(p.segment),p),this.dragSegments_.push([p,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:r})=>equals(r[0],e)||equals(r[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([i])=>i));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r=!1,i,a,o,l,c,h,f,p,m,v,C;for(c=e.length-1;c>=0;--c)o=e[c],v=o[0],C=getUid(v.feature),v.depth&&(C+="-"+v.depth.join("-")),C in t||(t[C]={}),o[1]===0?(t[C].right=v,t[C].index=v.index):o[1]==1&&(t[C].left=v,t[C].index=v.index+1);for(C in t){switch(m=t[C].right,f=t[C].left,h=t[C].index,p=h-1,f!==void 0?v=f:v=m,p<0&&(p=0),l=v.geometry,a=l.getCoordinates(),i=a,r=!1,l.getType()){case"MultiLineString":a[v.depth[0]].length>2&&(a[v.depth[0]].splice(h,1),r=!0);break;case"LineString":a.length>2&&(a.splice(h,1),r=!0);break;case"MultiPolygon":i=i[v.depth[1]];case"Polygon":i=i[v.depth[0]],i.length>4&&(h==i.length-1&&(h=0),i.splice(h,1),r=!0,h===0&&(i.pop(),i.push(i[0]),p=i.length-1));break}if(r){this.setGeometryCoordinates_(l,a);const b=[];if(f!==void 0&&(this.rBush_.remove(f),b.push(f.segment[0])),m!==void 0&&(this.rBush_.remove(m),b.push(m.segment[1])),f!==void 0&&m!==void 0){const S={depth:v.depth,feature:v.feature,geometry:v.geometry,index:p,segment:b};this.rBush_.insert(boundingExtent(S.segment),S)}this.updateSegmentIndices_(l,h,v.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:r})=>!(equals(r[0],e)||equals(r[1],e)))}insertPoint(e){var i;const t=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(i=this.vertexFeature_)==null?void 0:i.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((a,o)=>a||this.insertVertex_(o,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(a){a.geometry===e&&(r===void 0||a.depth===void 0||equals$2(a.depth,r))&&a.index>t&&(a.index+=i)})}}function compareIndexes(n,e){return n.index-e.index}function projectedDistanceToSegmentDataSquared(n,e,t){const r=e.geometry;if(r.getType()==="Circle"){let a=r;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const o=squaredDistance(a.getCenter(),fromUserCoordinate(n)),l=Math.sqrt(o)-a.getRadius();return l*l}}const i=fromUserCoordinate(n);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(i,tempSegment)}function closestOnSegmentData(n,e,t){const r=e.geometry;if(r.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(r.getClosestPoint(fromUserCoordinate(n)));const i=fromUserCoordinate(n);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(i,tempSegment))}function getDefaultStyleFunction$1(){const n=createEditingStyle();return function(e,t){return n.Point}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const r=e.layers;t=function(i){return r.includes(i)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const r=this.getMap().getAllLayers().find(function(i){if(i instanceof VectorLayer&&i.getSource()&&i.getSource().hasFeature(t))return i});r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const a=t[i];if(a!==this&&a instanceof Select&&a.getStyle()&&a.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(a.getStyle());return}}const r=getUid(e);e.setStyle(originalFeatureStyles[r]),delete originalFeatureStyles[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),a=!t&&!r&&!i,o=e.map,l=this.getFeatures(),c=[],h=[];if(a){clear$1(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(f,p)=>{if(!(!(f instanceof Feature)||!this.filter_(f,p)))return this.addFeatureLayerAssociation_(f,p),h.push(f),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=l.getLength()-1;f>=0;--f){const p=l.item(f),m=h.indexOf(p);m>-1?h.splice(m,1):(l.remove(p),c.push(p))}h.length!==0&&l.extend(h)}else{o.forEachFeatureAtPixel(e.pixel,(f,p)=>{if(!(!(f instanceof Feature)||!this.filter_(f,p)))return(t||i)&&!l.getArray().includes(f)?(this.addFeatureLayerAssociation_(f,p),h.push(f)):(r||i)&&l.getArray().includes(f)&&(c.push(f),this.removeFeatureLayerAssociation_(f)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let f=c.length-1;f>=0;--f)l.remove(c[f]);l.extend(h)}return(h.length>0||c.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,h,c,e)),!0}}function getDefaultStyleFunction(){const n=createEditingStyle();return extend$4(n.Polygon,n.LineString),extend$4(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}var logger$3=LoggerByDefault$1.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(n,e){logger$3.trace("unset()");var t={};Helper$1.mergeParams(t,this._options),Helper$1.mergeParams(t,e);for(var r=n.getInteractions().getArray(),i=0;i<r.length;i++)if(r[i].getActive()&&(r[i]instanceof Draw||r[i]instanceof Select||r[i]instanceof Modify)){var a=r[i].getProperties(),o=a.name;if(typeof o<"u"&&this._extensions.indexOf(o)>-1){if(t.current&&t.current===o)continue;r[i].setActive(!1);var l=a.source;if(typeof l<"u"&&l instanceof Control){for(var c in t)if(t.hasOwnProperty(c)){if(c==="current")continue;if(typeof l[c]=="function"){var h=Array.isArray(t[c])?t[c]:[t[c]];l[c].apply(l,h)}}}}else r[i].setActive(!1)}}},MathUtils={modulo:function(n,e){var t=n%e;return t*e<0?t+e:t},decimalToDMS:function(n,e,t){var r=this.modulo(n+180,360)-180,i=Math.abs(3600*r),a=t||0,o=Math.pow(10,a),l=Math.floor(i/3600),c=Math.floor((i-l*3600)/60),h=i-l*3600-c*60;h=Math.ceil(h*o)/o,h>=60&&(h=0,c+=1),c>=60&&(c=0,l+=1);var f=e.charAt(r<0?1:0);return{d:l,m:c,s:h,direction:f}},dmsToDecimal(n,e,t,r){var i=n+e/60+t/3600;return(r=="S"||r=="O")&&(i=i*-1),i},coordinateToDecimal(n){var e={};return e.lat=n[1].toFixed(6),e.lng=n[0].toFixed(6),e.unit="",e},coordinateToDMS(n){return{lng:MathUtils.decimalToDMS(n[0],"EO",2),lat:MathUtils.decimalToDMS(n[1],"NS",2),unit:"DMS"}},coordinateToRad(n){var e={},t=.017453292519943295;return e.lng=n[0]*t,e.lng=e.lng.toFixed(8),e.lat=n[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(n){var e={},t=1.1111111111111112;return e.lng=n[0]*t,e.lng=e.lng.toFixed(8),e.lat=n[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(n){var e={};return e.x=n[0].toFixed(2),e.y=n[1].toFixed(2),e.unit="m",e},coordinateToKMeter(n){var e={};return e.x=(n[0]/1e3).toFixed(2),e.y=(n[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(n,e){var t=e||10,r=parseInt(n,t);return!isNaN(r)&&isFinite(r)?r:null},isInteger:function(n){if(isNaN(n))return!1;var e=parseFloat(n);return(e|0)===e},toFloat:function(n){var e=parseFloat(n);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"q",title:"Chercher un lieu"},{name:"category",title:"Type",value:["cimetire","arodrome","rservoir","administratif","construction linaire","construction ponctuelle","construction surfacique","cours d'eau","dtail hydrographique","dtail orographique","quipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par cble","zone d'activit ou d'intrt","zone d'habitation","lieu-dit non habit"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"address",title:"Adresse"},{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"}],CadastralParcel:[{name:"departmentcode",title:"Code dpartement (INSEE)",description:"Code INSEE du dpartement (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbe",description:"Commune absorbe : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractres (chiffre et/ou lettre)"},{name:"number",title:"Numro",description:"Numro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numro de la feuille cadastrale"}]},zoomToResultsByDefault:function(n){var e=15,t=n.service,r=n.fields,i=n.type,a={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&i==="PositionOfInterest"&&(e=a[r.classification]),t==="GeocodedLocation"&&i==="PositionOfInterest"&&(e=a[r.importance]||14),i==="StreetAddress"&&(e=17),i==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(n){var e=n.placeAttributes;if(e.label)return e.label;if(n.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return n.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:n.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(n){if(n.fullText)return n.fullText;var e=[];return e.push(n.street||""),e.push(n.postalCode||""),e.push(n.commune||""),n.type==="PositionOfInterest"&&(e.push(n.poi||""),e.push(n.kind||"")),e.join(" - ")}};function globals(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$1={};exports$1.greenwich=0;exports$1.lisbon=-9.131906111111;exports$1.paris=2.337229166667;exports$1.bogota=-74.080916666667;exports$1.madrid=-3.687938888889;exports$1.rome=12.452333333333;exports$1.bern=7.439583333333;exports$1.jakarta=106.807719444444;exports$1.ferro=-17.666666666667;exports$1.brussels=4.367975;exports$1.stockholm=18.058277777778;exports$1.athens=23.7163375;exports$1.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(ignoredChar,""),i=-1,a,o;++i<t.length;)if(a=t[i],o=a.toLowerCase().replace(ignoredChar,""),o===r)return n[a]}function projStr(n){var e={},t=n.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var h=c.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),r,i,a,o={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*D2R$1},lat_1:function(l){e.lat1=l*D2R$1},lat_2:function(l){e.lat2=l*D2R$1},lat_ts:function(l){e.lat_ts=l*D2R$1},lon_0:function(l){e.long0=l*D2R$1},lon_1:function(l){e.long1=l*D2R$1},lon_2:function(l){e.long2=l*D2R$1},alpha:function(l){e.alpha=parseFloat(l)*D2R$1},gamma:function(l){e.rectified_grid_angle=parseFloat(l)},lonc:function(l){e.longc=l*D2R$1},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var c=match(units,l);c&&(e.to_meter=c.to_meter)},from_greenwich:function(l){e.from_greenwich=l*D2R$1},pm:function(l){var c=match(exports$1,l);e.from_greenwich=(c||parseFloat(l))*D2R$1},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0}};for(r in t)i=t[r],r in o?(a=o[r],typeof a=="function"?a(i):e[a]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(n);case KEYWORD:return this.keyword(n);case QUOTED:return this.quoted(n);case AFTERQUOTE:return this.afterquote(n);case NUMBER:return this.number(n);case ENDED:return}};Parser.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(n){if(digets.test(n)){this.word+=n;return}if(endThings.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(n){if(n==='"'){this.state=AFTERQUOTE;return}this.word+=n};Parser.prototype.keyword=function(n){if(keyword.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(n){if(latin.test(n)){this.word=n,this.state=KEYWORD;return}if(n==='"'){this.word="",this.state=QUOTED;return}if(digets.test(n)){this.word=n,this.state=NUMBER;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(n){var e=new Parser(n);return e.output()}function mapit(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(a,o){return sExpr(o,a),a},r);e&&(n[e]=i)}function sExpr(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},sExpr(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&sExpr(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&sExpr(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],mapit(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],mapit(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return sExpr(n,e[t]);return mapit(e,t,n)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function d2r(n){return n*D2R}function cleanWKT(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];knownTypes.indexOf(i)!==-1&&setPropertiesFromWkt(n[i]),typeof n[i]=="object"&&cleanWKT(n[i])}}function setPropertiesFromWkt(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var a=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?t+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?t+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?t+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var o=n.GEOGCS;n.type==="GEOGCS"&&(o=n),o&&(o.DATUM?n.datumCode=o.DATUM.name.toLowerCase():n.datumCode=o.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(n.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=o.DATUM.SPHEROID.a,n.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(n.datum_params=o.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function l(f){var p=n.to_meter||1;return f*p}var c=function(f){return rename(n,f)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];h.forEach(c),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=d2r(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=d2r(n.lat0>0?90:-90))}function wkt(n){var e=parseString(n),t=e[0],r={};return sExpr(e,r),cleanWKT(r),r[t]}function defs(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[n]=projStr(arguments[1]):defs[n]=wkt(arguments[1]):defs[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){Array.isArray(r)?defs.apply(e,r):defs(r)});if(typeof n=="string"){if(n in defs)return defs[n]}else"EPSG"in n?defs["EPSG:"+n.EPSG]=n:"ESRI"in n?defs["ESRI:"+n.ESRI]=n:"IAU2000"in n?defs["IAU2000:"+n.IAU2000]=n:console.log(n);return}}globals(defs);function testObj(n){return typeof n=="string"}function testDef(n){return n in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(n){return codeWords.some(function(e){return n.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(n){var e=match(n,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(n){var e=match(n,"extension");if(e)return match(e,"proj4")}function testProj(n){return n[0]==="+"}function parse$1(n){if(testObj(n)){if(testDef(n))return defs[n];if(testWKT(n)){var e=wkt(n);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(n))return projStr(n)}else return n}function extend(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function msfnz(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function sign(n){return n<0?-1:1}function adjust_lon(n){return Math.abs(n)<=SPI?n:n-sign(n)*TWO_PI}function tsfnz(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(HALF_PI-e))/r}function phi2z(n,e){for(var t=.5*n,r,i,a=HALF_PI-2*Math.atan(e),o=0;o<=15;o++)if(r=n*Math.sin(a),i=HALF_PI-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-a,a+=i,Math.abs(i)<=1e-10)return a;return-9999}function init$x(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(n){var e=n.x,t=n.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var r,i;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)r=this.x0+this.a*this.k0*adjust_lon(e-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var a=Math.sin(t),o=tsfnz(this.e,t,a);r=this.x0+this.a*this.k0*adjust_lon(e-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return n.x=r,n.y=i,n}function inverse$v(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(i=phi2z(this.e,a),i===-9999)return null}return r=adjust_lon(this.long0+e/(this.a*this.k0)),n.x=r,n.y=i,n}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(n){return n}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(n,e){var t=projStore.length;return n.names?(projStore[t]=n,n.names.forEach(function(r){names$v[r.toLowerCase()]=t}),this):(console.log(e),!0)}function get(n){if(!n)return!1;var e=n.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start$1(){projs.forEach(add)}const projections={start:start$1,add,get};var exports={};exports.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports.hough={a:6378270,rf:297,ellipseName:"Hough"};exports.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(n,e,t,r){var i=n*n,a=e*e,o=(i-a)/i,l=0;r?(n*=1-o*(SIXTH+o*(RA4+o*RA6)),i=n*n,o=0):l=Math.sqrt(o);var c=(i-a)/a;return{es:o,e:l,ep2:c}}function sphere(n,e,t,r,i){if(!n){var a=match(exports,r);a||(a=WGS84),n=a.a,e=a.b,t=a.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<EPSLN)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(n,e,t,r,i,a,o){var l={};return n===void 0||n==="none"?l.datum_type=PJD_NODATUM:l.datum_type=PJD_WGS84,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=PJD_3PARAM),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=PJD_7PARAM,l.datum_params[3]*=SEC_TO_RAD,l.datum_params[4]*=SEC_TO_RAD,l.datum_params[5]*=SEC_TO_RAD,l.datum_params[6]=l.datum_params[6]/1e6+1)),o&&(l.datum_type=PJD_GRIDSHIFT,l.grids=o),l.a=t,l.b=r,l.es=i,l.ep2=a,l}var loadedNadgrids={};function nadgrid(n,e){var t=new DataView(e),r=detectLittleEndian(t),i=readHeader(t,r),a=readSubgrids(t,i,r),o={header:i,subgrids:a};return loadedNadgrids[n]=o,o}function getNadgrids(n){if(n===void 0)return null;var e=n.split(",");return e.map(parseNadgridString)}function parseNadgridString(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:loadedNadgrids[n]||null,isNull:!1}}function secondsToRadians(n){return n/3600*Math.PI/180}function detectLittleEndian(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:decodeString(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function decodeString(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function readSubgrids(n,e,t){for(var r=176,i=[],a=0;a<e.nSubgrids;a++){var o=readGridHeader(n,r,t),l=readGridNodes(n,r,o,t),c=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[secondsToRadians(o.lowerLongitude),secondsToRadians(o.lowerLatitude)],del:[secondsToRadians(o.longitudeInterval),secondsToRadians(o.latitudeInterval)],lim:[c,h],count:o.gridNodeCount,cvs:mapNodes(l)}),r+=176+o.gridNodeCount*16}return i}function mapNodes(n){return n.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(n,e,t){return{name:decodeString(n,e+8,e+16).trim(),parent:decodeString(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function readGridNodes(n,e,t,r){for(var i=e+176,a=16,o=[],l=0;l<t.gridNodeCount;l++){var c={latitudeShift:n.getFloat32(i+l*a,r),longitudeShift:n.getFloat32(i+l*a+4,r),latitudeAccuracy:n.getFloat32(i+l*a+8,r),longitudeAccuracy:n.getFloat32(i+l*a+12,r)};o.push(c)}return o}function Projection(n,e){if(!(this instanceof Projection))return new Projection(n);e=e||function(h){if(h)throw h};var t=parse$1(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=Projection.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=match(datums,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),o=eccentricity(a.a,a.b,a.rf,t.R_A),l=getNadgrids(t.nadgrids),c=t.datum||datum(t.datumCode,t.datum_params,a.a,a.b,o.es,o.ep2,l);extend(this,t),extend(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=c,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===PJD_3PARAM?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===PJD_7PARAM?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(n,e,t){var r=n.x,i=n.y,a=n.z?n.z:0,o,l,c,h;if(i<-HALF_PI&&i>-1.001*HALF_PI)i=-HALF_PI;else if(i>HALF_PI&&i<1.001*HALF_PI)i=HALF_PI;else{if(i<-HALF_PI)return{x:-1/0,y:-1/0,z:n.z};if(i>HALF_PI)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),l=Math.sin(i),h=Math.cos(i),c=l*l,o=t/Math.sqrt(1-e*c),{x:(o+a)*h*Math.cos(r),y:(o+a)*h*Math.sin(r),z:(o*(1-e)+a)*l}}function geocentricToGeodetic(n,e,t,r){var i=1e-12,a=i*i,o=30,l,c,h,f,p,m,v,C,b,S,x,T,P,L=n.x,k=n.y,F=n.z?n.z:0,U,z,N;if(l=Math.sqrt(L*L+k*k),c=Math.sqrt(L*L+k*k+F*F),l/t<i){if(U=0,c/t<i)return z=HALF_PI,N=-r,{x:n.x,y:n.y,z:n.z}}else U=Math.atan2(k,L);h=F/c,f=l/c,p=1/Math.sqrt(1-e*(2-e)*f*f),C=f*(1-e)*p,b=h*p,P=0;do P++,v=t/Math.sqrt(1-e*b*b),N=l*C+F*b-v*(1-e*b*b),m=e*v/(v+N),p=1/Math.sqrt(1-m*(2-m)*f*f),S=f*(1-m)*p,x=h*p,T=x*C-S*b,C=S,b=x;while(T*T>a&&P<o);return z=Math.atan(x/Math.abs(S)),{x:U,y:z,z:N}}function geocentricToWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===PJD_7PARAM){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6];return{x:h*(n.x-c*n.y+l*n.z)+r,y:h*(c*n.x+n.y-o*n.z)+i,z:h*(-l*n.x+o*n.y+n.z)+a}}}function geocentricFromWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===PJD_7PARAM){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],c=t[5],h=t[6],f=(n.x-r)/h,p=(n.y-i)/h,m=(n.z-a)/h;return{x:f+c*p-l*m,y:-c*f+p+o*m,z:l*f-o*p+m}}}function checkParams(n){return n===PJD_3PARAM||n===PJD_7PARAM}function datum_transform(n,e,t){if(compareDatums(n,e)||n.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var r=n.a,i=n.es;if(n.datum_type===PJD_GRIDSHIFT){var a=applyGridShift(n,!1,t);if(a!==0)return;r=SRS_WGS84_SEMIMAJOR,i=SRS_WGS84_ESQUARED}var o=e.a,l=e.b,c=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(o=SRS_WGS84_SEMIMAJOR,l=SRS_WGS84_SEMIMINOR,c=SRS_WGS84_ESQUARED),i===c&&r===o&&!checkParams(n.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,i,r),checkParams(n.datum_type)&&(t=geocentricToWgs84(t,n.datum_type,n.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,c,o,l),e.datum_type===PJD_GRIDSHIFT){var h=applyGridShift(e,!0,t);if(h!==0)return}return t}function applyGridShift(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},a=[];e:for(var o=0;o<n.grids.length;o++){var l=n.grids[o];if(a.push(l.name),l.isNull){i=r;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var c=l.grid.subgrids,h=0,f=c.length;h<f;h++){var p=c[h],m=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,v=p.ll[0]-m,C=p.ll[1]-m,b=p.ll[0]+(p.lim[0]-1)*p.del[0]+m,S=p.ll[1]+(p.lim[1]-1)*p.del[1]+m;if(!(C>r.y||v>r.x||S<r.y||b<r.x)&&(i=applySubgridShift(r,e,p),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*R2D+" "+r.y*R2D+" tried: '"+a+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function applySubgridShift(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=adjust_lon(i.x-Math.PI)+Math.PI;var a=nadInterpolate(i,t);if(e){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o=9,l=1e-12,c,h;do{if(h=nadInterpolate(a,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:i.x-(h.x+a.x),y:i.y-(h.y+a.y)},a.x+=c.x,a.y+=c.y}while(o--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=adjust_lon(a.x+t.ll[0]),r.y=a.y+t.ll[1]}else isNaN(a.x)||(r.x=n.x+a.x,r.y=n.y+a.y);return r}function nadInterpolate(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},a={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return a;o=r.y*e.lim[0]+r.x;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var c={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var f={x:e.cvs[o][0],y:e.cvs[o][1]},p=i.x*i.y,m=i.x*(1-i.y),v=(1-i.x)*(1-i.y),C=(1-i.x)*i.y;return a.x=v*l.x+m*c.x+C*f.x+p*h.x,a.y=v*l.y+m*c.y+C*f.y+p*h.y,a}function adjust_axis(n,e,t){var r=t.x,i=t.y,a=t.z||0,o,l,c,h={};for(c=0;c<3;c++)if(!(e&&c===2&&t.z===void 0))switch(c===0?(o=r,"ew".indexOf(n.axis[c])!==-1?l="x":l="y"):c===1?(o=i,"ns".indexOf(n.axis[c])!==-1?l="y":l="x"):(o=a,l="z"),n.axis[c]){case"e":h[l]=o;break;case"w":h[l]=-o;break;case"n":h[l]=o;break;case"s":h[l]=-o;break;case"u":t[l]!==void 0&&(h.z=o);break;case"d":t[l]!==void 0&&(h.z=-o);break;default:return null}return h}function common(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function checkSanity(n){checkCoord(n.x),checkCoord(n.y)}function checkCoord(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(n,e){return(n.datum.datum_type===PJD_3PARAM||n.datum.datum_type===PJD_7PARAM||n.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&n.datumCode!=="WGS84"}function transform(n,e,t,r){var i;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var a=t.z!==void 0;if(checkSanity(t),n.datum&&e.datum&&checkNotWGS(n,e)&&(i=new Projection("WGS84"),t=transform(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=adjust_axis(n,!1,t)),n.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=datum_transform(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!a&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(n,e,t,r){var i,a,o;return Array.isArray(t)?(i=transform(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(a=transform(n,e,t,r),o=Object.keys(t),o.length===2||o.forEach(function(l){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;a[l]=t[l]}),a)}function checkProj(n){return n instanceof Projection?n:n.oProj?n.oProj:Projection(n)}function proj4(n,e,t){n=checkProj(n);var r=!1,i;return typeof e>"u"?(e=n,n=wgs84,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=n,n=wgs84,r=!0),e=checkProj(e),t?transformer(n,e,t):(i={forward:function(a,o){return transformer(n,e,a,o)},inverse:function(a,o){return transformer(e,n,a,o)}},r&&(i.oProj=e),i)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(n,e){return e=e||5,encode(LLtoUTM({lat:n[1],lon:n[0]}),e)}function inverse$u(n){var e=UTMtoLL(decode(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(n){var e=UTMtoLL(decode(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(n){return n*(Math.PI/180)}function radToDeg(n){return 180*(n/Math.PI)}function LLtoUTM(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,a=.9996,o,l,c,h,f,p,m,v=degToRad(e),C=degToRad(t),b,S;S=Math.floor((t+180)/6)+1,t===180&&(S=60),e>=56&&e<64&&t>=3&&t<12&&(S=32),e>=72&&e<84&&(t>=0&&t<9?S=31:t>=9&&t<21?S=33:t>=21&&t<33?S=35:t>=33&&t<42&&(S=37)),o=(S-1)*6-180+3,b=degToRad(o),l=i/(1-i),c=r/Math.sqrt(1-i*Math.sin(v)*Math.sin(v)),h=Math.tan(v)*Math.tan(v),f=l*Math.cos(v)*Math.cos(v),p=Math.cos(v)*(C-b),m=r*((1-i/4-3*i*i/64-5*i*i*i/256)*v-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*v)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*v)-35*i*i*i/3072*Math.sin(6*v));var x=a*c*(p+(1-h+f)*p*p*p/6+(5-18*h+h*h+72*f-58*l)*p*p*p*p*p/120)+5e5,T=a*(m+c*Math.tan(v)*(p*p/2+(5-h+9*f+4*f*f)*p*p*p*p/24+(61-58*h+h*h+600*f-330*l)*p*p*p*p*p*p/720));return e<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(x),zoneNumber:S,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var a=.9996,o=6378137,l=.00669438,c,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),f,p,m,v,C,b,S,x,T,P=t-5e5,L=e;r<"N"&&(L-=1e7),S=(i-1)*6-180+3,c=l/(1-l),b=L/a,x=b/(o*(1-l/4-3*l*l/64-5*l*l*l/256)),T=x+(3*h/2-27*h*h*h/32)*Math.sin(2*x)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*x)+151*h*h*h/96*Math.sin(6*x),f=o/Math.sqrt(1-l*Math.sin(T)*Math.sin(T)),p=Math.tan(T)*Math.tan(T),m=c*Math.cos(T)*Math.cos(T),v=o*(1-l)/Math.pow(1-l*Math.sin(T)*Math.sin(T),1.5),C=P/(f*a);var k=T-f*Math.tan(T)/v*(C*C/2-(5+3*p+10*m-4*m*m-9*c)*C*C*C*C/24+(61+90*p+298*m+45*p*p-252*c-3*m*m)*C*C*C*C*C*C/720);k=radToDeg(k);var F=(C-(1+2*p+m)*C*C*C/6+(5-2*m+28*p-3*m*m+8*c+24*p*p)*C*C*C*C*C/120)/Math.cos(T);F=S+radToDeg(F);var U;if(n.accuracy){var z=UTMtoLL({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});U={top:z.lat,right:z.lon,bottom:k,left:F}}else U={lat:k,lon:F};return U}function getLetterDesignator(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function encode(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+get100kID(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function get100kID(n,e,t){var r=get100kSetForZone(t),i=Math.floor(n/1e5),a=Math.floor(e/1e5)%20;return getLetter100kID(i,a,r)}function get100kSetForZone(n){var e=n%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(n,e,t){var r=t-1,i=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(r),a=SET_ORIGIN_ROW_LETTERS.charCodeAt(r),o=i+n-1,l=a+e,c=!1;o>Z&&(o=o-Z+A-1,c=!0),(o===I||i<I&&o>I||(o>I||i<I)&&c)&&o++,(o===O||i<O&&o>O||(o>O||i<O)&&c)&&(o++,o===I&&o++),o>Z&&(o=o-Z+A-1),l>V?(l=l-V+A-1,c=!0):c=!1,(l===I||a<I&&l>I||(l>I||a<I)&&c)&&l++,(l===O||a<O&&l>O||(l>O||a<O)&&c)&&(l++,l===I&&l++),l>V&&(l=l-V+A-1);var h=String.fromCharCode(o)+String.fromCharCode(l);return h}function decode(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,a=0;!/[A-Z]/.test(i=n.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,a++}var o=parseInt(r,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+n;var l=n.charAt(a++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+n;t=n.substring(a,a+=2);for(var c=get100kSetForZone(o),h=getEastingFromChar(t.charAt(0),c),f=getNorthingFromChar(t.charAt(1),c);f<getMinNorthing(l);)f+=2e6;var p=e-a;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var m=p/2,v=0,C=0,b,S,x,T,P;return m>0&&(b=1e5/Math.pow(10,m),S=n.substring(a,a+m),v=parseFloat(S)*b,x=n.substring(a+m),C=parseFloat(x)*b),T=v+h,P=C+f,{easting:T,northing:P,zoneLetter:l,zoneNumber:o,accuracy:b}}function getEastingFromChar(n,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===I&&t++,t===O&&t++,t>Z){if(i)throw"Bad character: "+n;t=A,i=!0}r+=1e5}return r}function getNorthingFromChar(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===I&&t++,t===O&&t++,t>V){if(i)throw"Bad character: "+n;t=A,i=!0}r+=1e5}return r}function getMinNorthing(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Point(n,e,t){if(!(this instanceof Point))return new Point(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(n){return new Point(toPoint(n))};Point.prototype.toMGRS=function(n){return forward$u([this.x,this.y],n)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(n){var e=[];e[0]=C00-n*(C02+n*(C04+n*(C06+n*C08))),e[1]=n*(C22-n*(C04+n*(C06+n*C08)));var t=n*n;return e[2]=t*(C44-n*(C46+n*C48)),t*=n,e[3]=t*(C66-n*C68),e[4]=t*n*C88,e}function pj_mlfn(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(n,e,t){for(var r=1/(1-e),i=n,a=MAX_ITER$3;a;--a){var o=Math.sin(i),l=1-e*o*o;if(l=(pj_mlfn(i,o,Math.cos(i),t)-n)*(l*Math.sqrt(l))*r,i-=l,Math.abs(l)<EPSLN)return i}return i}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(n){var e=n.x,t=n.y,r=adjust_lon(e-this.long0),i,a,o,l=Math.sin(t),c=Math.cos(t);if(this.es){var f=c*r,p=Math.pow(f,2),m=this.ep2*Math.pow(c,2),v=Math.pow(m,2),C=Math.abs(c)>EPSLN?Math.tan(t):0,b=Math.pow(C,2),S=Math.pow(b,2);i=1-this.es*Math.pow(l,2),f=f/Math.sqrt(i);var x=pj_mlfn(t,l,c,this.en);a=this.a*(this.k0*f*(1+p/6*(1-b+m+p/20*(5-18*b+S+14*m-58*b*m+p/42*(61+179*S-S*b-479*b)))))+this.x0,o=this.a*(this.k0*(x-this.ml0+l*r*f/2*(1+p/12*(5-b+9*m+4*v+p/30*(61+S-58*b+270*m-330*b*m+p/56*(1385+543*S-S*b-3111*b))))))+this.y0}else{var h=c*Math.sin(r);if(Math.abs(Math.abs(h)-1)<EPSLN)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=c*Math.cos(r)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>EPSLN)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=a,n.y=o,n}function inverse$t(n){var e,t,r,i,a=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var p=Math.sin(t),m=Math.cos(t),v=Math.abs(m)>EPSLN?Math.tan(t):0,C=this.ep2*Math.pow(m,2),b=Math.pow(C,2),S=Math.pow(v,2),x=Math.pow(S,2);e=1-this.es*Math.pow(p,2);var T=a*Math.sqrt(e)/this.k0,P=Math.pow(T,2);e=e*v,r=t-e*P/(1-this.es)*.5*(1-P/12*(5+3*S-9*C*S+C-4*b-P/30*(61+90*S-252*C*S+45*x+46*C-P/56*(1385+3633*S+4095*x+1574*x*S)))),i=adjust_lon(this.long0+T*(1-P/6*(1+2*S+C-P/20*(5+28*S+24*x+8*C*S+6*C-P/42*(61+662*S+1320*x+720*x*S))))/m)}else r=HALF_PI*sign(o),i=0;else{var l=Math.exp(a/this.k0),c=.5*(l-1/l),h=this.lat0+o/this.k0,f=Math.cos(h);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(c,2))),r=Math.asin(e),o<0&&(r=-r),c===0&&f===0?i=0:i=adjust_lon(Math.atan2(c,f)+this.long0)}return n.x=i,n.y=r,n}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function hypot(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function log1py(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function asinhy(n){var e=Math.abs(n);return e=log1py(e*(1+e/(hypot(1,e)+1))),n<0?-e:e}function gatg(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],a=0,o;--r>=0;)o=-a+t*i+n[r],a=i,i=o;return e+o*Math.sin(2*e)}function clens(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],a=0,o;--r>=0;)o=-a+t*i+n[r],a=i,i=o;return Math.sin(e)*o}function cosh(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function clens_cmplx(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),a=sinh(t),o=cosh(t),l=2*i*o,c=-2*r*a,h=n.length-1,f=n[h],p=0,m=0,v=0,C,b;--h>=0;)C=m,b=p,m=f,p=v,f=-C+l*m-c*p+n[h],v=-b+c*m+l*p;return l=r*o,c=i*a,[l*f-c*v,l*v+c*f]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(r+clens(this.gtu,2*r))}function forward$s(n){var e=adjust_lon(n.x-this.long0),t=n.y;t=gatg(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),a=Math.sin(e),o=Math.cos(e);t=Math.atan2(r,o*i),e=Math.atan2(a*i,hypot(r,i*o)),e=asinhy(Math.tan(e));var l=clens_cmplx(this.gtu,2*t,2*e);t=t+l[0],e=e+l[1];var c,h;return Math.abs(e)<=2.623395162778?(c=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(c=1/0,h=1/0),n.x=c,n.y=h,n}function inverse$s(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var a=clens_cmplx(this.utg,2*t,2*e);t=t+a[0],e=e+a[1],e=Math.atan(sinh(e));var o=Math.sin(t),l=Math.cos(t),c=Math.sin(e),h=Math.cos(e);t=Math.atan2(o*h,hypot(c,h*l)),e=Math.atan2(c,h*l),r=adjust_lon(e+this.long0),i=gatg(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(n,e){if(n===void 0){if(n=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var dependsOn="etmerc";function init$t(){var n=adjust_zone(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(n,e){return Math.pow((1-n)/(1+n),e)}var MAX_ITER$2=20;function init$s(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*n,this.ratexp))}function forward$r(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,n.x=this.C*e,n}function inverse$r(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+FORTPI)/this.K,1/this.C),a=MAX_ITER$2;a>0&&(r=2*Math.atan(i*srat(this.e*Math.sin(n.y),-.5*this.e))-HALF_PI,!(Math.abs(r-n.y)<e));--a)n.y=r;return a?(n.x=t,n.y=r,n):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(n){var e,t,r,i;return n.x=adjust_lon(n.x-this.long0),gauss.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse$q(n){var e,t,r,i,a;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,a=hypot(n.x,n.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),t=Math.cos(o),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/a),r=Math.atan2(n.x*e,a*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,gauss.inverse.apply(this,[n]),n.x=adjust_lon(n.x+this.long0),n}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(n,e,t){return e*=t,Math.tan(.5*(HALF_PI+n))*Math.pow((1-e)/(1+e),.5*t)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),a,o,l,c,h,f,p=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(n.x=NaN,n.y=NaN,n):this.sphere?(a=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(p)),n.x=this.a*a*i*Math.sin(p)+this.x0,n.y=this.a*a*(this.coslat0*r-this.sinlat0*i*Math.cos(p))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,r,this.e))-HALF_PI,c=Math.cos(o),l=Math.sin(o),Math.abs(this.coslat0)<=EPSLN?(h=tsfnz(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*h/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<EPSLN?(a=2*this.a*this.k0/(1+c*Math.cos(p)),n.y=a*l):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(p))),n.y=a*(this.cosX0*l-this.sinX0*c*Math.cos(p))+this.y0),n.x=a*c*Math.sin(p)+this.x0,n))}function inverse$p(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,a,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var l=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=EPSLN?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(l)*this.sinlat0+n.y*Math.sin(l)*this.coslat0/o),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(n.x,-1*n.y)):e=adjust_lon(this.long0+Math.atan2(n.x,n.y)):e=adjust_lon(this.long0+Math.atan2(n.x*Math.sin(l),o*this.coslat0*Math.cos(l)-n.y*this.sinlat0*Math.sin(l))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=EPSLN){if(o<=EPSLN)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=o*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,r),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=EPSLN?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/o),e=adjust_lon(this.long0+Math.atan2(n.x*Math.sin(i),o*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+a)));return n.x=e,n.y=t,n}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,a=2*i-Math.pow(i,2),o=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+o*e)/(1-o*e));this.K=l-this.alpha*c+this.alpha*o/2*h}function forward$o(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),a=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),l=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return n.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,n.x=this.R*o+this.x0,n}function inverse$o(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),l=this.lambda0+o/this.alpha,c=0,h=a,f=-1e3,p=0;Math.abs(h-f)>1e-7;){if(++p>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),f=h,h=2*Math.atan(Math.exp(c))-Math.PI/2}return n.x=l,n.y=h,n}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function init$o(){var n,e,t,r,i,a,o,l,c,h,f=0,p,m=0,v=0,C=0,b=0,S=0,x=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var P=!1;if("rectified_grid_angle"in this&&(P=!0),T&&(x=this.alpha),P&&(f=this.rectified_grid_angle*D2R$1),T||P)m=this.longc;else if(v=this.long1,b=this.lat1,C=this.long2,S=this.lat2,Math.abs(b-S)<=TOL||(n=Math.abs(b))<=TOL||Math.abs(n-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(S)-HALF_PI)<=TOL)throw new Error;var L=1-this.es;e=Math.sqrt(L),Math.abs(this.lat0)>EPSLN?(l=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*l*l,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/L),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(tsfnz(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),T||P?(T?(p=Math.asin(Math.sin(x)/r),P||(f=x)):(p=f,x=Math.asin(r*Math.sin(p))),this.lam0=m-Math.asin(.5*(i-1/i)*Math.tan(p))/this.B):(a=Math.pow(tsfnz(this.e,b,Math.sin(b)),this.B),o=Math.pow(tsfnz(this.e,S,Math.sin(S)),this.B),i=this.E/a,c=(o-a)/(o+a),h=this.E*this.E,h=(h-o*a)/(h+o*a),n=v-C,n<-Math.pi?C-=TWO_PI:n>Math.pi&&(C+=TWO_PI),this.lam0=adjust_lon(.5*(v+C)-Math.atan(h*Math.tan(.5*this.B*(v-C))/c)/this.B),p=Math.atan(2*Math.sin(this.B*adjust_lon(v-this.lam0))/(i-1/i)),f=x=Math.asin(r*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(x))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+i))}function forward$n(n){var e={},t,r,i,a,o,l,c,h;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-HALF_PI)>EPSLN){if(o=this.E/Math.pow(tsfnz(this.e,n.y,Math.sin(n.y)),this.B),l=1/o,t=.5*(o-l),r=.5*(o+l),a=Math.sin(this.B*n.x),i=(t*this.singam-a*this.cosgam)/r,Math.abs(Math.abs(i)-1)<EPSLN)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*n.x),Math.abs(l)<TOL?c=this.A*n.x:c=this.ArB*Math.atan2(t*this.cosgam+a*this.singam,l)}else h=n.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*n.y;return this.no_rot?(e.x=c,e.y=h):(c-=this.u_0,e.x=h*this.cosrot+c*this.sinrot,e.y=c*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(n){var e,t,r,i,a,o,l,c={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),a=.5*(r+1/r),o=Math.sin(this.BrA*e),l=(o*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(l)-1)<EPSLN)c.x=0,c.y=l<0?-HALF_PI:HALF_PI;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=phi2z(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return c.x+=this.lam0,c}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=msfnz(this.e,e,t),i=tsfnz(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),l=msfnz(this.e,a,o),c=tsfnz(this.e,this.lat2,a),h=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(r/l)/Math.log(i/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var r=Math.abs(Math.abs(t)-HALF_PI),i,a;if(r>EPSLN)i=tsfnz(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;a=0}var o=this.ns*adjust_lon(e-this.long0);return n.x=this.k0*(a*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,n}function inverse$m(n){var e,t,r,i,a,o=(n.x-this.x0)/this.k0,l=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+l*l),t=1):(e=-Math.sqrt(o*o+l*l),t=-1);var c=0;if(e!==0&&(c=Math.atan2(t*o,t*l)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=phi2z(this.e,r),i===-9999)return null}else i=-HALF_PI;return a=adjust_lon(c/this.ns+this.long0),n.x=a,n.y=i,n}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(n){var e,t,r,i,a,o,l,c=n.x,h=n.y,f=adjust_lon(c-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),a=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),o=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=l*Math.cos(o)/1,n.x=l*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function inverse$l(n){var e,t,r,i,a,o,l,c,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),a=Math.atan2(n.y,n.x),i=a/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,l=e,c=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-n.y)<1e-10&&(c=1),l=n.y,f+=1;while(c===0&&f<15);return f>=15?null:n}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function e0fn(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function e1fn(n){return .375*n*(1+.25*n*(1+.46875*n))}function e2fn(n){return .05859375*n*n*(1+.75*n)}function e3fn(n){return n*n*n*(35/3072)}function gN(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function adjust_lat(n){return Math.abs(n)<HALF_PI?n:n-sign(n)*Math.PI}function imlfn(n,e,t,r,i){var a,o;a=n/e;for(var l=0;l<15;l++)if(o=(n-(e*a-t*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*t*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(n){var e,t,r=n.x,i=n.y;if(r=adjust_lon(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),l=gN(this.a,this.e,a),c=Math.tan(i)*Math.tan(i),h=r*Math.cos(i),f=h*h,p=this.es*o*o/(1-this.es),m=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,i);e=l*h*(1-f*c*(1/6-(8-c+8*p)*f/120)),t=m-this.ml0+l*a/o*f*(.5+(5-c+6*p)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function inverse$k(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var a=t+this.lat0;r=Math.asin(Math.sin(a)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+t,l=imlfn(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-HALF_PI)<=EPSLN)return n.x=this.long0,n.y=HALF_PI,t<0&&(n.y*=-1),n;var c=gN(this.a,this.e,Math.sin(l)),h=c*c*c/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(l),2),p=e*this.a/c,m=p*p;r=l-c*Math.tan(l)/h*p*p*(.5-(1+3*f)*p*p/24),i=p*(1-m*(f/3+(1+3*f)*f*m/15))/Math.cos(l)}return n.x=adjust_lon(i+this.long0),n.y=adjust_lat(r),n}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var n=Math.abs(this.lat0);if(Math.abs(n-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(n){var e,t,r,i,a,o,l,c,h,f,p=n.x,m=n.y;if(p=adjust_lon(p-this.long0),this.sphere){if(a=Math.sin(m),f=Math.cos(m),r=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*a+this.cosph0*f*r,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(p),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(m+this.lat0)<EPSLN)return null;t=FORTPI-m*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(p),t*=r}}else{switch(l=0,c=0,h=0,r=Math.cos(p),i=Math.sin(p),a=Math.sin(m),o=qsfnz(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=o/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*c*r;break;case this.EQUIT:h=1+c*r;break;case this.N_POLE:h=HALF_PI+m,o=this.qp-o;break;case this.S_POLE:h=m-HALF_PI,o=this.qp+o;break}if(Math.abs(h)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?t=this.ymf*h*(this.cosb1*l-this.sinb1*c*r):t=(h=Math.sqrt(2/(1+c*r)))*l*this.ymf,e=this.xmf*h*c*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*i,t=r*(this.mode===this.S_POLE?h:-h)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function inverse$j(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,a,o,l,c,h;if(this.sphere){var f=0,p,m=0;if(p=Math.sqrt(e*e+t*t),i=p*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(p)<=EPSLN?0:Math.asin(t*m/p),e*=m,t=f*p;break;case this.OBLIQ:i=Math.abs(p)<=EPSLN?this.lat0:Math.asin(f*this.sinph0+t*m*this.cosph0/p),e*=m*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*p;break;case this.N_POLE:t=-t,i=HALF_PI-i;break;case this.S_POLE:i-=HALF_PI;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,c=Math.sqrt(e*e+t*t),c<EPSLN)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*c/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=a*this.sinb1+t*o*this.cosb1/c,l=this.qp*h,t=c*this.cosb1*a-t*this.sinb1*o):(h=t*o/c,l=this.qp*h,t=c*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),l=e*e+t*t,!l)return n.x=this.long0,n.y=this.lat0,n;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}r=Math.atan2(e,t),i=authlat(Math.asin(h),this.apa)}return n.x=adjust_lon(this.long0+r),n.y=i,n}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(n){var e,t=[];return t[0]=n*P00,e=n*n,t[0]+=e*P01,t[1]=e*P10,e*=n,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=qsfnz(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*adjust_lon(e-this.long0),o=i*Math.sin(a)+this.x0,l=this.rh-i*Math.cos(a)+this.y0;return n.x=o,n.y=l,n}function inverse$i(n){var e,t,r,i,a,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,t)),a=adjust_lon(i/this.ns0+this.long0),n.x=a,n.y=o,n}function phi1z(n,e){var t,r,i,a,o,l=asinz(.5*e);if(n<EPSLN)return l;for(var c=n*n,h=1;h<=25;h++)if(t=Math.sin(l),r=Math.cos(l),i=n*t,a=1-i*i,o=.5*a*a/r*(e/(1-c)-t/a+.5/n*Math.log((1-i)/(1+i))),l=l+o,Math.abs(o)<=1e-7)return l;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(n){var e,t,r,i,a,o,l,c,h=n.x,f=n.y;return r=adjust_lon(h-this.long0),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*i,a=1,o>0||Math.abs(o)<=EPSLN?(l=this.x0+this.a*a*t*Math.sin(r)/o,c=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*i)/o):(l=this.x0+this.infinity_dist*t*Math.sin(r),c=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=l,n.y=c,n}function inverse$h(n){var e,t,r,i,a,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),o=asinz(r*this.sin_p14+n.y*t*this.cos_p14/e),a=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),a=adjust_lon(this.long0+a)):(o=this.phic0,a=0),n.x=a,n.y=o,n}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var r=Math.asin(.5*e),i,a,o,l,c=0;c<30;c++)if(a=Math.sin(r),o=Math.cos(r),l=n*a,i=Math.pow(1-l*l,2)/(2*o)*(e/(1-n*n)-a/(1-l*l)+.5/n*Math.log((1-l)/(1+l))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(n){var e=n.x,t=n.y,r,i,a=adjust_lon(e-this.long0);if(this.sphere)r=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=qsfnz(this.e,Math.sin(t));r=this.x0+this.a*this.k0*a,i=this.y0+this.a*o*.5/this.k0}return n.x=r,n.y=i,n}function inverse$g(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*n.y*this.k0/this.a),e=adjust_lon(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(n){var e=n.x,t=n.y,r=adjust_lon(e-this.long0),i=adjust_lat(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function inverse$f(n){var e=n.x,t=n.y;return n.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=adjust_lat(this.lat0+(t-this.y0)/this.a),n}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(n){var e=n.x,t=n.y,r,i,a,o=adjust_lon(e-this.long0);if(a=o*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(a)/Math.tan(t),i=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)r=this.a*o,i=-1*this.ml0;else{var l=gN(this.a,this.e,Math.sin(t))/Math.tan(t);r=l*Math.sin(a),i=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+l*(1-Math.cos(a))}return n.x=r+this.x0,n.y=i+this.y0,n}function inverse$e(n){var e,t,r,i,a,o,l,c,h;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=EPSLN)e=adjust_lon(r/this.a+this.long0),t=0;else{o=this.lat0+i/this.a,l=r*r/this.a/this.a+o*o,c=o;var f;for(a=MAX_ITER$1;a;--a)if(f=Math.tan(c),h=-1*(o*(c*f+1)-c-.5*(c*c+l)*f)/((c-o)/f-1),c+=h,Math.abs(h)<=EPSLN){t=c;break}e=adjust_lon(this.long0+Math.asin(r*Math.tan(c)/this.a)/Math.sin(t))}else if(Math.abs(i+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+r/this.a);else{o=(this.ml0+i)/this.a,l=r*r/this.a/this.a+o*o,c=o;var p,m,v,C,b;for(a=MAX_ITER$1;a;--a)if(b=this.e*Math.sin(c),p=Math.sqrt(1-b*b)*Math.tan(c),m=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,c),v=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),C=m/this.a,h=(o*(p*C+1)-C-.5*p*(C*C+l))/(this.es*Math.sin(2*c)*(C*C+l-2*o*C)/(4*p)+(o-C)*(p*v-2/Math.sin(2*c))-v),c-=h,Math.abs(h)<=EPSLN){t=c;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(r*p/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(n){var e,t=n.x,r=n.y,i=r-this.lat0,a=t-this.long0,o=i/SEC_TO_RAD*1e-5,l=a,c=1,h=0;for(e=1;e<=10;e++)c=c*o,h=h+this.A[e]*c;var f=h,p=l,m=1,v=0,C,b,S=0,x=0;for(e=1;e<=6;e++)C=m*f-v*p,b=v*f+m*p,m=C,v=b,S=S+this.B_re[e]*m-this.B_im[e]*v,x=x+this.B_im[e]*m+this.B_re[e]*v;return n.x=x*this.a+this.x0,n.y=S*this.a+this.y0,n}function inverse$d(n){var e,t=n.x,r=n.y,i=t-this.x0,a=r-this.y0,o=a/this.a,l=i/this.a,c=1,h=0,f,p,m=0,v=0;for(e=1;e<=6;e++)f=c*o-h*l,p=h*o+c*l,c=f,h=p,m=m+this.C_re[e]*c-this.C_im[e]*h,v=v+this.C_im[e]*c+this.C_re[e]*h;for(var C=0;C<this.iterations;C++){var b=m,S=v,x,T,P=o,L=l;for(e=2;e<=6;e++)x=b*m-S*v,T=S*m+b*v,b=x,S=T,P=P+(e-1)*(this.B_re[e]*b-this.B_im[e]*S),L=L+(e-1)*(this.B_im[e]*b+this.B_re[e]*S);b=1,S=0;var k=this.B_re[1],F=this.B_im[1];for(e=2;e<=6;e++)x=b*m-S*v,T=S*m+b*v,b=x,S=T,k=k+e*(this.B_re[e]*b-this.B_im[e]*S),F=F+e*(this.B_im[e]*b+this.B_re[e]*S);var U=k*k+F*F;m=(P*k+L*F)/U,v=(L*k-P*F)/U}var z=m,N=v,K=1,q=0;for(e=1;e<=9;e++)K=K*z,q=q+this.D[e]*K;var j=this.lat0+q*SEC_TO_RAD*1e5,J=this.long0+N;return n.x=J,n.y=j,n}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(n){var e=n.x,t=n.y,r=adjust_lon(e-this.long0),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=a,n}function inverse$c(n){n.x-=this.x0,n.y-=this.y0;var e=adjust_lon(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(n){var e,t,r=n.x,i=n.y;if(r=adjust_lon(r-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var a=this.n*Math.sin(i),o=MAX_ITER;o;--o){var l=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=l,Math.abs(l)<EPSLN)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var c=Math.sin(i),h=Math.cos(i);t=this.a*pj_mlfn(i,c,h,this.en),e=this.a*r*h/Math.sqrt(1-this.es*c*c)}return n.x=e,n.y=t,n}function inverse$b(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),r=adjust_lon(r+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(n.y/this.a,this.es,this.en),i=Math.abs(e),i<HALF_PI?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=adjust_lon(t)):i-EPSLN<HALF_PI&&(r=this.long0)),n.x=r,n.y=e,n}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(n){for(var e=n.x,t=n.y,r=adjust_lon(e-this.long0),i=t,a=Math.PI*Math.sin(t);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<EPSLN)break}i/=2,Math.PI/2-Math.abs(t)<EPSLN&&(r=0);var l=.900316316158*this.a*r*Math.cos(i)+this.x0,c=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=l,n.y=c,n}function inverse$a(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=adjust_lon(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=mlfn(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var a=this.ns*adjust_lon(e-this.long0),o=this.x0+r*Math.sin(a),l=this.y0+this.rh-r*Math.cos(a);return n.x=o,n.y=l,n}function inverse$9(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var a=0;if(t!==0&&(a=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=adjust_lon(this.long0+a/this.ns),r=adjust_lat(this.g-t/this.a),n.x=i,n.y=r,n;var o=this.g-t/this.a;return r=imlfn(o,this.e0,this.e1,this.e2,this.e3),i=adjust_lon(this.long0+a/this.ns),n.x=i,n.y=r,n}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(n){var e=n.x,t=n.y,r=adjust_lon(e-this.long0),i,a;Math.abs(t)<=EPSLN&&(i=this.x0+this.R*r,a=this.y0);var o=asinz(2*Math.abs(t/Math.PI));(Math.abs(r)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(i=this.x0,t>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var l=.5*Math.abs(Math.PI/r-r/Math.PI),c=l*l,h=Math.sin(o),f=Math.cos(o),p=f/(h+f-1),m=p*p,v=p*(2/h-1),C=v*v,b=Math.PI*this.R*(l*(p-C)+Math.sqrt(c*(p-C)*(p-C)-(C+c)*(m-C)))/(C+c);r<0&&(b=-b),i=this.x0+b;var S=c+p;return b=Math.PI*this.R*(v*S-l*Math.sqrt((C+c)*(c+1)-S*S))/(C+c),t>=0?a=this.y0+b:a=this.y0-b,n.x=i,n.y=a,n}function inverse$8(n){var e,t,r,i,a,o,l,c,h,f,p,m,v;return n.x-=this.x0,n.y-=this.y0,p=Math.PI*this.R,r=n.x/p,i=n.y/p,a=r*r+i*i,o=-Math.abs(i)*(1+a),l=o-2*i*i+r*r,c=-2*o+1+2*i*i+a*a,v=i*i/c+(2*l*l*l/c/c/c-9*o*l/c/c)/27,h=(o-l*l/3/c)/c,f=2*Math.sqrt(-h/3),p=3*v/h/f,Math.abs(p)>1&&(p>=0?p=1:p=-1),m=Math.acos(p)/3,n.y>=0?t=(-f*Math.cos(m+Math.PI/3)-l/3/c)*Math.PI:t=-(-f*Math.cos(m+Math.PI/3)-l/3/c)*Math.PI,Math.abs(r)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),n.x=e,n.y=t,n}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),a=adjust_lon(e-this.long0),o,l,c,h,f,p,m,v,C,b,S,x,T,P,L,k,F,U,z,N,K,q,j;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI-t)*Math.sin(a),n.y=this.y0-this.a*(HALF_PI-t)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI+t)*Math.sin(a),n.y=this.y0+this.a*(HALF_PI+t)*Math.cos(a),n):(U=this.sin_p12*r+this.cos_p12*i*Math.cos(a),k=Math.acos(U),F=k?k/Math.sin(k):1,n.x=this.x0+this.a*F*i*Math.sin(a),n.y=this.y0+this.a*F*(this.cos_p12*r-this.sin_p12*i*Math.cos(a)),n):(o=e0fn(this.es),l=e1fn(this.es),c=e2fn(this.es),h=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(f=this.a*mlfn(o,l,c,h,HALF_PI),p=this.a*mlfn(o,l,c,h,t),n.x=this.x0+(f-p)*Math.sin(a),n.y=this.y0-(f-p)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=EPSLN?(f=this.a*mlfn(o,l,c,h,HALF_PI),p=this.a*mlfn(o,l,c,h,t),n.x=this.x0+(f+p)*Math.sin(a),n.y=this.y0+(f+p)*Math.cos(a),n):(m=r/i,v=gN(this.a,this.e,this.sin_p12),C=gN(this.a,this.e,r),b=Math.atan((1-this.es)*m+this.es*v*this.sin_p12/(C*i)),S=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(a)),S===0?z=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(S)-Math.PI)<=EPSLN?z=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):z=Math.asin(Math.sin(a)*Math.cos(b)/Math.sin(S)),x=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(S)/Math.sqrt(1-this.es),P=x*T,L=T*T,N=z*z,K=N*z,q=K*z,j=q*z,k=v*z*(1-N*L*(1-L)/6+K/8*P*(1-2*L)+q/120*(L*(4-7*L)-3*x*x*(1-7*L))-j/48*P),n.x=this.x0+k*Math.sin(S),n.y=this.y0+k*Math.cos(S),n))}function inverse$7(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,a,o,l,c,h,f,p,m,v,C,b,S,x,T,P,L,k,F,U,z;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=EPSLN?o=this.lat0:(o=asinz(i*this.sin_p12+n.y*r*this.cos_p12/e),l=Math.abs(this.lat0)-HALF_PI,Math.abs(l)<=EPSLN?this.lat0>=0?a=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):a=adjust_lon(this.long0-Math.atan2(-n.x,n.y)):a=adjust_lon(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r))),n.x=a,n.y=o,n)):(c=e0fn(this.es),h=e1fn(this.es),f=e2fn(this.es),p=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(m=this.a*mlfn(c,h,f,p,HALF_PI),e=Math.sqrt(n.x*n.x+n.y*n.y),v=m-e,o=imlfn(v/this.a,c,h,f,p),a=adjust_lon(this.long0+Math.atan2(n.x,-1*n.y)),n.x=a,n.y=o,n):Math.abs(this.sin_p12+1)<=EPSLN?(m=this.a*mlfn(c,h,f,p,HALF_PI),e=Math.sqrt(n.x*n.x+n.y*n.y),v=e-m,o=imlfn(v/this.a,c,h,f,p),a=adjust_lon(this.long0+Math.atan2(n.x,n.y)),n.x=a,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),S=Math.atan2(n.x,n.y),C=gN(this.a,this.e,this.sin_p12),x=Math.cos(S),T=this.e*this.cos_p12*x,P=-T*T/(1-this.es),L=3*this.es*(1-P)*this.sin_p12*this.cos_p12*x/(1-this.es),k=e/C,F=k-P*(1+P)*Math.pow(k,3)/6-L*(1+3*P)*Math.pow(k,4)/24,U=1-P*F*F/2-k*F*F*F/6,b=Math.asin(this.sin_p12*Math.cos(F)+this.cos_p12*Math.sin(F)*x),a=adjust_lon(this.long0+Math.asin(Math.sin(S)*Math.sin(F)/Math.cos(b))),z=Math.sin(b),o=Math.atan2((z-this.es*U*this.sin_p12)*Math.tan(b),z*(1-this.es)),n.x=a,n.y=o,n))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(n){var e,t,r,i,a,o,l,c,h=n.x,f=n.y;return r=adjust_lon(h-this.long0),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*t*i,a=1,(o>0||Math.abs(o)<=EPSLN)&&(l=this.a*a*t*Math.sin(r),c=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*i)),n.x=l,n.y=c,n}function inverse$6(n){var e,t,r,i,a,o,l;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=asinz(e/this.a),r=Math.sin(t),i=Math.cos(t),o=this.long0,Math.abs(e)<=EPSLN?(l=this.lat0,n.x=o,n.y=l,n):(l=asinz(i*this.sin_p14+n.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-HALF_PI,Math.abs(a)<=EPSLN?(this.lat0>=0?o=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):o=adjust_lon(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=l,n):(o=adjust_lon(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r)),n.x=o,n.y=l,n))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(n){var e={x:0,y:0},t,r,i,a,o,l,c={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===FACE_ENUM.TOP)a=HALF_PI-t,r>=FORTPI&&r<=HALF_PI+FORTPI?(c.value=AREA_ENUM.AREA_0,i=r-HALF_PI):r>HALF_PI+FORTPI||r<=-(HALF_PI+FORTPI)?(c.value=AREA_ENUM.AREA_1,i=r>0?r-SPI:r+SPI):r>-(HALF_PI+FORTPI)&&r<=-FORTPI?(c.value=AREA_ENUM.AREA_2,i=r+HALF_PI):(c.value=AREA_ENUM.AREA_3,i=r);else if(this.face===FACE_ENUM.BOTTOM)a=HALF_PI+t,r>=FORTPI&&r<=HALF_PI+FORTPI?(c.value=AREA_ENUM.AREA_0,i=-r+HALF_PI):r<FORTPI&&r>=-FORTPI?(c.value=AREA_ENUM.AREA_1,i=-r):r<-FORTPI&&r>=-(HALF_PI+FORTPI)?(c.value=AREA_ENUM.AREA_2,i=-r-HALF_PI):(c.value=AREA_ENUM.AREA_3,i=r>0?-r+SPI:-r-SPI);else{var h,f,p,m,v,C,b;this.face===FACE_ENUM.RIGHT?r=qsc_shift_lon_origin(r,+HALF_PI):this.face===FACE_ENUM.BACK?r=qsc_shift_lon_origin(r,3.14159265359):this.face===FACE_ENUM.LEFT&&(r=qsc_shift_lon_origin(r,-HALF_PI)),m=Math.sin(t),v=Math.cos(t),C=Math.sin(r),b=Math.cos(r),h=v*b,f=v*C,p=m,this.face===FACE_ENUM.FRONT?(a=Math.acos(h),i=qsc_fwd_equat_face_theta(a,p,f,c)):this.face===FACE_ENUM.RIGHT?(a=Math.acos(f),i=qsc_fwd_equat_face_theta(a,p,-h,c)):this.face===FACE_ENUM.BACK?(a=Math.acos(-h),i=qsc_fwd_equat_face_theta(a,p,-f,c)):this.face===FACE_ENUM.LEFT?(a=Math.acos(-f),i=qsc_fwd_equat_face_theta(a,p,h,c)):(a=i=0,c.value=AREA_ENUM.AREA_0)}return l=Math.atan(12/SPI*(i+Math.acos(Math.sin(i)*Math.cos(FORTPI))-HALF_PI)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),c.value===AREA_ENUM.AREA_1?l+=HALF_PI:c.value===AREA_ENUM.AREA_2?l+=SPI:c.value===AREA_ENUM.AREA_3&&(l+=1.5*SPI),e.x=o*Math.cos(l),e.y=o*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function inverse$5(n){var e={lam:0,phi:0},t,r,i,a,o,l,c,h,f,p={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?p.value=AREA_ENUM.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(p.value=AREA_ENUM.AREA_1,t-=HALF_PI):n.x<0&&-n.x>=Math.abs(n.y)?(p.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(p.value=AREA_ENUM.AREA_3,t+=HALF_PI),f=SPI/12*Math.tan(t),o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),l=Math.atan(o),i=Math.cos(t),a=Math.tan(r),c=1-i*i*a*a*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===FACE_ENUM.TOP)h=Math.acos(c),e.phi=HALF_PI-h,p.value===AREA_ENUM.AREA_0?e.lam=l+HALF_PI:p.value===AREA_ENUM.AREA_1?e.lam=l<0?l+SPI:l-SPI:p.value===AREA_ENUM.AREA_2?e.lam=l-HALF_PI:e.lam=l;else if(this.face===FACE_ENUM.BOTTOM)h=Math.acos(c),e.phi=h-HALF_PI,p.value===AREA_ENUM.AREA_0?e.lam=-l+HALF_PI:p.value===AREA_ENUM.AREA_1?e.lam=-l:p.value===AREA_ENUM.AREA_2?e.lam=-l-HALF_PI:e.lam=l<0?-l-SPI:-l+SPI;else{var m,v,C;m=c,f=m*m,f>=1?C=0:C=Math.sqrt(1-f)*Math.sin(l),f+=C*C,f>=1?v=0:v=Math.sqrt(1-f),p.value===AREA_ENUM.AREA_1?(f=v,v=-C,C=f):p.value===AREA_ENUM.AREA_2?(v=-v,C=-C):p.value===AREA_ENUM.AREA_3&&(f=v,v=C,C=-f),this.face===FACE_ENUM.RIGHT?(f=m,m=-v,v=f):this.face===FACE_ENUM.BACK?(m=-m,v=-v):this.face===FACE_ENUM.LEFT&&(f=m,m=v,v=-f),e.phi=Math.acos(-C)-HALF_PI,e.lam=Math.atan2(v,m),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var b,S,x;b=e.phi<0?1:0,S=Math.tan(e.phi),x=this.b/Math.sqrt(S*S+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-x*x)/(this.one_minus_f*x)),b&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function qsc_fwd_equat_face_theta(n,e,t,r){var i;return n<EPSLN?(r.value=AREA_ENUM.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=FORTPI?r.value=AREA_ENUM.AREA_0:i>FORTPI&&i<=HALF_PI+FORTPI?(r.value=AREA_ENUM.AREA_1,i-=HALF_PI):i>HALF_PI+FORTPI||i<=-(HALF_PI+FORTPI)?(r.value=AREA_ENUM.AREA_2,i=i>=0?i-SPI:i+SPI):(r.value=AREA_ENUM.AREA_3,i+=HALF_PI)),i}function qsc_shift_lon_origin(n,e){var t=n+e;return t<-3.14159265359?t+=TWO_PI:t>3.14159265359&&(t-=TWO_PI),t}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},poly3_der=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function newton_rapshon(n,e,t,r){for(var i=e;r;--r){var a=n(i);if(i-=a,Math.abs(a)<t)break}return i}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(n){var e=adjust_lon(n.x-this.long0),t=Math.abs(n.y),r=Math.floor(t*C1);r<0?r=0:r>=NODES&&(r=NODES-1),t=R2D*(t-RC1*r);var i={x:poly3_val(COEFS_X[r],t)*e,y:poly3_val(COEFS_Y[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*FXC+this.x0,i.y=i.y*this.a*FYC+this.y0,i}function inverse$4(n){var e={x:(n.x-this.x0)/(this.a*FXC),y:Math.abs(n.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=n.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var r=COEFS_Y[t],i=5*(e.y-r[0])/(COEFS_Y[t+1][0]-r[0]);i=newton_rapshon(function(a){return(poly3_val(r,a)-e.y)/poly3_der(r,a)},i,EPSLN,100),e.x/=poly3_val(COEFS_X[t],i),e.y=(5*t+i)*D2R$1,n.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(n){var e=geodeticToGeocentric(n,this.es,this.a);return e}function inverse$3(n){var e=geocentricToGeodetic(n,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function forward$2(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,a;switch(this.mode){case mode.OBLIQ:a=this.sinph0*e+this.cosph0*t*r;break;case mode.EQUIT:a=t*r;break;case mode.S_POLE:a=-e;break;case mode.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),i=a*t*Math.sin(n.x),this.mode){case mode.OBLIQ:a*=this.cosph0*e-this.sinph0*t*r;break;case mode.EQUIT:a*=e;break;case mode.N_POLE:a*=-(t*r);break;case mode.S_POLE:a*=t*r;break}var o,l;return o=a*this.cg+i*this.sg,l=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-a*this.sg)*this.cw*l,a=o*l,n.x=i*this.a,n.y=a*this.a,n}function inverse$2(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var a=hypot(n.x,n.y);if(Math.abs(a)<EPSLN)e.x=0,e.y=n.y;else{var o,l;switch(l=1-a*a*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-l*l),this.mode){case mode.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*l*this.cosph0/a),n.y=(o-this.sinph0*Math.sin(e.y))*a,n.x*=l*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(n.y*l/a),n.y=o*a,n.x*=l;break;case mode.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case mode.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(n){var e=n.x,t=n.y,r,i,a,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var l=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(i=l*Math.cos(e)*Math.cos(t),a=l*Math.sin(e)*Math.cos(t),o=l*Math.sin(t),(this.radius_g-i)*i-a*a-o*o*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(a/hypot(o,r)),n.y=this.radius_g_1*Math.atan(o/r)):(n.x=this.radius_g_1*Math.atan(a/r),n.y=this.radius_g_1*Math.atan(o/hypot(a,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,a=Math.sin(e)*r,o=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(a/hypot(o,r)),n.y=this.radius_g_1*Math.atan(o/r)):(n.x=this.radius_g_1*Math.atan(a/r),n.y=this.radius_g_1*Math.atan(o/hypot(a,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function inverse$1(n){var e=-1,t=0,r=0,i,a,o,l;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*hypot(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*hypot(1,t));var c=r/this.radius_p;if(i=t*t+c*c+e*e,a=2*this.radius_g*e,o=a*a-4*i*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;l=(-a-Math.sqrt(o))/(2*i),e=this.radius_g+l*e,t*=l,r*=l,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,a=2*this.radius_g*e,o=a*a-4*i*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;l=(-a-Math.sqrt(o))/(2*i),e=this.radius_g+l*e,t*=l,r*=l,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(n){var e=adjust_lon(n.x-this.long0),t=n.y,r=Math.asin(M*Math.sin(t)),i=r*r,a=i*i*i;return n.x=e*Math.cos(r)/(M*(A1+3*A2*i+a*(7*A3+9*A4*i))),n.y=r*(A1+A2*i+a*(A3+A4*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,a,o,l,c,h;for(h=0;h<t&&(i=r*r,a=i*i*i,o=r*(A1+A2*i+a*(A3+A4*i))-n.y,l=A1+3*A2*i+a*(7*A3+9*A4*i),r-=c=o/l,!(Math.abs(c)<e));++h);return i=r*r,a=i*i*i,n.x=M*n.x*(A1+3*A2*i+a*(7*A3+9*A4*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/M),n.x=adjust_lon(n.x+this.long0),n}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(n){var e=adjust_lon(n.x-(this.long0||0)),t=n.y,r,i,a;return r=this.am1+this.m1-pj_mlfn(t,i=Math.sin(t),a=Math.cos(t),this.en),i=a*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function e_inv(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=hypot(n.x,n.y=this.am1-n.y),i=pj_inv_mlfn(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<HALF_PI)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-HALF_PI)<=EPS10)r=0;else throw new Error;return n.x=adjust_lon(r+(this.long0||0)),n.y=adjust_lat(i),n}function s_fwd(n){var e=adjust_lon(n.x-(this.long0||0)),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>EPS10?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function s_inv(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=hypot(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>HALF_PI)throw new Error;return Math.abs(Math.abs(t)-HALF_PI)<=EPS10?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=adjust_lon(e+(this.long0||0)),n.y=adjust_lat(t),n}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(n){n.Proj.projections.add(tmerc),n.Proj.projections.add(etmerc),n.Proj.projections.add(utm),n.Proj.projections.add(sterea),n.Proj.projections.add(stere),n.Proj.projections.add(somerc),n.Proj.projections.add(omerc),n.Proj.projections.add(lcc),n.Proj.projections.add(krovak),n.Proj.projections.add(cass),n.Proj.projections.add(laea),n.Proj.projections.add(aea),n.Proj.projections.add(gnom),n.Proj.projections.add(cea),n.Proj.projections.add(eqc),n.Proj.projections.add(poly),n.Proj.projections.add(nzmg),n.Proj.projections.add(mill),n.Proj.projections.add(sinu),n.Proj.projections.add(moll),n.Proj.projections.add(eqdc),n.Proj.projections.add(vandg),n.Proj.projections.add(aeqd),n.Proj.projections.add(ortho),n.Proj.projections.add(qsc),n.Proj.projections.add(robin),n.Proj.projections.add(geocent),n.Proj.projections.add(tpers),n.Proj.projections.add(geos),n.Proj.projections.add(eqearth),n.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$2=LoggerByDefault$1.getLogger("CRS");function register(n){const e=Object.keys(n.defs);logger$2.trace("proj. codes :",e);const t=e.length;let r,i;for(r=0;r<t;++r){const a=e[r];if(!get$3(a)){const o=n.defs(a);addProjection(new Projection$1({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:o.units}))}}for(r=0;r<t;++r){const a=e[r],o=get$3(a);for(i=0;i<t;++i){const l=e[i],c=get$3(l);if(!get$4(a,l))if(n.defs[a]===n.defs[l])addEquivalentProjections([o,c]);else{const h=n(a,l);addCoordinateTransforms(o,c,h.forward,h.inverse)}}}}var Register={isLoaded:!1,get:function(n){if(!(n===""||n===null||typeof n>"u")){var e=n.split(":");if(e.length===2){var t=e[0],r=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(r))return this[t][r]}}},exist:function(n){if(n===""||n===null||typeof n>"u")return!1;var e=n.split(":");if(e.length!==2)return!1;var t=e[0],r=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(r))},load:function(n){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var r=e[t],i=this[r];for(var a in i)if(i.hasOwnProperty(a)){var o=r+":"+a;n.defs(o,this.get(o))}}this.isLoaded=!0}},loadByDefault:function(n){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];for(var i in r)if(r.hasOwnProperty(i)){var a=t+":"+i;n.defs(a,r[i])}}},loadByName:function(n,e){if(!this.exist(e))return!1;try{n.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$1=LoggerByDefault$1.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$1.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(n){logger$1.error(n)}}},loadByDefault:function(){if(logger$1.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(n){logger$1.error(n)}}},loadByName:function(n){if(logger$1.trace("Loading a custom definition projection : ",n),!Register.isLoaded){Register.loadByName(proj4,n);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$1.error(e)}}},overload:function(){logger$1.trace("Loading projections aera (extent)");for(var n in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(n)){var e=this.projectionsExtent[n],t=get$3(n),r=getTransform("EPSG:4326",t),i=applyTransform([e.bottom,e.right,e.top,e.left],r);t.setExtent(i),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterTMS=!0,m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async n=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:n,fields:m_fields,size:m_size};Object.keys(t).forEach(c=>e.searchParams.append(c,t[c]));var r=await fetch(e,{}),i=await r.json();if(r.status!==200)throw new Error(r.message);if(!(!i||i.length===0)){for(let c=0;c<i.length;c++){const h=i[c];m_filterByLayerPriority.findIndex(p=>p.includes(h.source.layer_name))>=0&&(i[c].score+=100)}i.sort((c,h)=>h.score-c.score);var a=null;m_filterWMTSPriority&&(a=inventory(i));for(let c=0;c<i.length;c++){const h=i[c];var o=m_filterByService.length===0||m_filterByService.includes(h.source.type);if(o){if(unique().length>=m_maximumResponses)break;var l={attribution:h.source.attribution||{},srs:h.source.srs||[],keywords:h.source.keywords||[],extent:h.source.extent||{},metadata:h.source.metadata_urls||[],name:h.source.layer_name||"",title:h.source.title||"",description:h.source.description,service:h.source.type||"",url:h.source.url||"",tech:h.source.tech||{},tags:h.source.tags||{},theme:h.source.theme||"",producer:h.source.producer||""};if(m_filterByProjection.length&&m_filterByProjection.includes(l.srs[0])||a&&a[l.name]&&l.service==="WMS"||l.service==="TMS"&&(l.styles=!1,l.metadata.length!==0&&/(\.json)$/i.test(l.metadata[0])&&(l.styles=!0),!l.styles&&m_filterTMS)||l.service==="WMTS"&&l.metadata.length!==0&&/(.json)$/i.test(l.metadata[0])&&m_filterTMS===!0)continue;m_suggestions.push(l)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((n,e,t)=>e===t.findIndex(r=>r.service===n.service&&r.name===n.name&&r.title===n.title&&r.description===n.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=n=>{var e={};for(let t=0;t<n.length;t++){const r=n[t].source.type,i=n[t].source.layer_name;(r==="WMTS"||r==="WMS")&&(e[i]===void 0&&(e[i]=r==="WMTS"),e[i]||(e[i]=r==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(n=>n.name),getTitles=()=>unique().map(n=>n.title),setIndex=n=>{m_index=n},setFields=n=>{m_fields=n},setSuggestions=n=>{m_suggestions=n},setSize=n=>{m_size=parseInt(n)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=n=>{m_maximumResponses=parseInt(n)},setFiltersByService=n=>{m_filterByService=n===""?[]:n.split(",")},setFiltersByProjection=n=>{m_filterByProjection=n===""?[]:n.split(",")},setFiltersByLayerPriority=n=>{m_filterByLayerPriority=n===""?[]:n.split(",")},setFilterWMTSPriority=n=>{m_filterWMTSPriority=n},setFilterTMS=n=>{m_filterTMS=n},Search={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSuggestions,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority,setFilterTMS};var SearchEngineDOM={_addUID:function(n){var e=this._uid?n+"-"+this._uid:n;return e},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPsearchEngine"),n.className="GPwidget gpf-widget",n},_createSearchDivElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPshowSearchDiv"),n},_createShowSearchEnginePictoElement:function(n){var e=this;checkDsfr()&&(n=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!n),t.disabled=!n,t.setAttribute("type","button"),t.addEventListener("click",function(r){if(checkDsfr()){var i=document.getElementById(e._addUID("GPautocompleteResults")),a=i.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),o=i.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),l=o.length;if(!l)return;var c=null;a.length?c=a[0]:(c=o[0],c.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",c.style.color="#000000",c.style["background-color"]="#CEDBEF"),c.click();return}var h=r.target.ariaPressed==="true";r.target.setAttribute("aria-pressed",!h),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var f=document.getElementById(e._addUID("GPshowAdvancedSearch"));f&&(f.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var p=document.getElementById(e._addUID("GPshowGeolocate"));p&&(p.style.display=null);var m=document.getElementById(e._addUID("GPshowSearchByCoordinate"));m&&(m.style.display=null);var v="#GPsearchInput-"+e._uid;document.querySelector(v+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(r)}),t},_createSearchInputElement:function(n){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(i){return i.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(i)),!1});var r=document.createElement("input");return r.id=this._addUID("GPsearchInputText"),r.className="GPsearchInputText gpf-input fr-input",r.type="text",r.placeholder=n,r.autocomplete="off",r.addEventListener("keyup",function(i){var a=i.which||i.keyCode;a===13||a===10||a===38||a===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),r.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(i))}),r.addEventListener("keydown",function(i){var a=i.which||i.keyCode;a===13&&i.preventDefault();var o=document.getElementById(e._addUID("GPautocompleteResults"));if(o){var l=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),c=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),h=c.length;if(h){var f=null;if(l.length)f=l[0];else if(f=c[0],f.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",f.style.color="#000000",f.style["background-color"]="#CEDBEF",a!==13)return;var p=parseInt(SelectorID.index(f.id),10),m=p===h-1?c[0]:c[p+1],v=p===0?c[h-1]:c[p-1];switch(f.style["background-color"]="",f.style.color="",v.style["background-color"]="",v.style.color="",m.style["background-color"]="",m.style.color="",a){case 38:f.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",v.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",v.style.color="#000000",v.style["background-color"]="#CEDBEF",f.scrollIntoView();break;case 40:f.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",m.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",m.style.color="#000000",m.style["background-color"]="#CEDBEF",f.scrollIntoView();break;case 13:i.preventDefault(),f.click(i);break}f.focus()}}}),t.appendChild(r),t},_createSearchResetElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(n._addUID("GPsearchInputText")).value="",document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),n.onSearchResetClick()}),e},_createButtonsElement:function(){var n=document.createElement("div");return n.className="GPbuttonsContainer",n},_createFirstLineWrapper:function(){var n=document.createElement("div");return n.className="GPsearchFirstLineWrapper",n},_createRadioContainer:function(){var n=document.createElement("div");return n.className="GPsearchRadioContainer",n},_createRadioElements:function(){var n=document.createElement("div");n.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var r=document.createElement("label");r.className="gpf-label fr-label",r.htmlFor=this._addUID("GPsearchSplitLocations"),r.title="Adresses",r.innerHTML="Adresses",e.appendChild(r),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var i=document.createElement("div");i.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var a=document.createElement("input");a.id=this._addUID("GPsearchSplitData"),a.type="radio",a.name="GPsearchSplit",a.value="data",i.appendChild(a);var o=document.createElement("label");return o.className="gpf-label fr-label",o.htmlFor=this._addUID("GPsearchSplitData"),o.title="Cartes et donnes",o.innerHTML="Cartes et donnes",i.appendChild(o),a.addEventListener?a.addEventListener("change",function(){a.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):a.attachEvent&&a.attachEvent("onchange",function(){a.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),n.appendChild(e),n.appendChild(i),[n,t,a]},_createShowAdvancedSearchElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowAdvancedSearch GPshowOpen gpf-btn gpf-btn-icon-search-advanced fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var r=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!r);var i="#GPsearchInput-"+n._uid;r?(document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(i+" input").disabled=!1,document.querySelector(i+" .GPsearchInputReset")&&(document.querySelector(i+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1)):(document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(i+" input").disabled=!0,document.querySelector(i+" .GPsearchInputReset")&&(document.querySelector(i+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!0)),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la golocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var r=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!r),n.onShowSearchGeolocateClick(t)}),e},_createShowSearchByCoordinateElement:function(){var n=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnes",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var r=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!r);var i="#GPsearchInput-"+n._uid;r?(document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(i+" input").disabled=!1,document.querySelector(i+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1)):(document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(i+" input").disabled=!0,document.querySelector(i+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!0)),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPadvancedSearchPanel"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n},_createAdvancedSearchPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createGeocodeResultsElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPgeocodeResultsList"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n},_createGeocodeResultsDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n.appendChild(this._createGeocodeResultsHeaderElement()),n},_createAutoCompleteElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPautoCompleteList"),n.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",n},_createCoordinateSearchPanelElement:function(){var n=document.createElement("dialog");return n.id=this._addUID("GPcoordinateSearchPanel"),n.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",n},_createCoordinateSearchPanelDivElement:function(){var n=document.createElement("div");return n.className="gpf-panel__body fr-modal__body",n},_createAutoCompleteListElement:function(){var n=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var n=document.createElement("div");return n.id=this._addUID("GPautocompleteResultsLocation"),n.className="GPelementHidden gpf-hidden gpf-select",n.size=20,n.autofocus=!0,n},_createAutoCompletedLocationTitleElement(){var n=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-loc",e.innerHTML="Lieux et adresses",n.appendChild(e)},_createAutoCompletedLocationElement:function(n,e){var t=this,r=document.getElementById(this._addUID("GPautocompleteResultsLocation")),i=document.createElement("p");i.id=this._addUID("AutoCompletedLocation_"+e),i.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var a=GeocodeUtils.getSuggestedLocationFreeform(n);i.innerHTML=a,i.title=a,i.addEventListener?i.addEventListener("click",function(o){t.onAutoCompletedResultsItemClick(o)},!1):i.attachEvent&&i.attachEvent("onclick",function(o){t.onAutoCompletedResultsItemClick(o)}),r.appendChild(i)},_createSearchedSuggestContainer(){var n=document.createElement("div");return n.id=this._addUID("GPautocompleteResultsSuggest"),n.className="GPelementHidden gpf-hidden gpf-select",n.size=6,n.autofocus=!0,n},_createSearchedSuggestTitleElement(){var n=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-data",e.innerHTML="Cartes et donnes",n.appendChild(e)},_createSearchedSuggestElement:function(n,e){var t=this,r=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),i=document.createElement("p");i.id=this._addUID("AutoCompletedSuggest_"+e),i.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",i.innerHTML=n.title+" ("+n.service+")",i.dataset.layer=n.name,i.title=`${n.description} (nom technique : ${n.name})`,i.addEventListener?i.addEventListener("click",function(a){t.onSearchedResultsItemClick(a)},!1):i.attachEvent&&i.attachEvent("onclick",function(a){t.onSearchedResultsItemClick(a)}),r.appendChild(i)},_createAdvancedSearchPanelHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avance",e.appendChild(t);var r=document.createElement("button");r.id=this._addUID("GPadvancedSearchClose"),r.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",r.title="Fermer la recherche avance",r.addEventListener?r.addEventListener("click",function(){var a="#GPsearchInput-"+n._uid;document.querySelector(a+" input").disabled=!1,document.querySelector(a+" .GPsearchInputReset")&&(document.querySelector(a+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):r.attachEvent&&r.attachEvent("onclick",function(){var a="#GPsearchInput-"+n._uid;document.querySelector(a+" input").disabled=!1,document.querySelector(a+" .GPsearchInputReset")&&(document.querySelector(a+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(n._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var i=document.createElement("span");return i.className="GPelementHidden gpf-visible",i.innerText="Fermer",r.appendChild(i),e.appendChild(r),e},_createAdvancedSearchPanelFormElement:function(n){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(o){o.preventDefault();for(var l=[],c="#GPadvancedSearchFilters-"+e._uid,h=document.querySelectorAll(c+" > div > div > input,select#category"),f=0;f<h.length;f++){var p=h[f];l.push({key:p.name,value:p.value})}return e.onGeocodingAdvancedSearchSubmit(o,l),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var r=document.createElement("div");r.className="GPflexInput gpf-flex-column ";var i=document.createElement("label");i.className="GPadvancedSearchCodeLabel gpf-label fr-label",i.innerHTML="Recherche par",r.appendChild(i);var a=this._createAdvancedSearchFormCodeElement(n);return r.appendChild(a),t.appendChild(r),t},_createAdvancedSearchFormCodeElement:function(n){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(a){e.onGeocodingAdvancedSearchCodeChange(a)},!1),n||(n=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var r=0;r<n.length;r++){var i=document.createElement("option");i.value=n[r].id,i.text=n[r].title,t.appendChild(i)}return t},_createAdvancedSearchFormInputElement:function(){var n=document.createElement("input");return n.type="submit",n.id=this._addUID("GPadvancedSearchSubmit"),n.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",n.value="Chercher",n},_createAdvancedSearchFormFiltersElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchFilters"),n},_createAdvancedSearchFiltersTableElement:function(n,e){var t=document.createElement("div");return t.id=this._addUID(n),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(n){var e=null,t=n.name,r=n.title,i=n.description,a=n.code,o=n.value,l=document.createElement("div");l.className="GPflexInput gpf-flex-column ";var c=document.createElement("label");if(c.className="GPadvancedSearchFilterLabel gpf-label fr-label",c.htmlFor=t,c.title=i||r,c.innerHTML=r,l.appendChild(c),t==="category"){var h=document.createElement("select");if(h.id=t,h.name=t,h.title=r,h.className="GPadvancedSearchFilterInput gpf-select fr-select",o&&Array.isArray(o))for(var f=0;f<o.length;f++){var p=document.createElement("option");p.value=o[f],p.text=o[f],h.appendChild(p)}l.appendChild(h)}else{var m=document.createElement("input");if(m.id=t,m.className="GPadvancedSearchFilterInput gpf-input fr-input",m.type="text",m.name=t,o)if(Array.isArray(o)){var v=t+"_list";m.setAttribute("list",v);var C=document.createElement("datalist");C.id=v;for(var f=0;f<o.length;++f){var p=document.createElement("option");p.value=o[f],C.appendChild(p)}l.appendChild(C)}else m.value=o;l.appendChild(m)}return e=document.getElementById(this._addUID(a)),e?e.appendChild(l):e=l,e},_createGeocodeResultsHeaderElement:function(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Rsultats de la recherche",e.appendChild(t);var r=document.createElement("button");r.id=this._addUID("GPgeocodeResultsClose"),r.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",r.title="Fermer la fentre de rsultats",r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var i=document.createElement("span");return i.className="GPelementHidden gpf-visible",i.innerText="Fermer",r.appendChild(i),e.appendChild(r),e},_createGeocodeResultsListElement:function(){var n=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),n.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),n.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(n,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),r=document.createElement("div");r.id=this._addUID("GeocodedLocation_"+e),r.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof n=="string"?r.innerHTML=n:r.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(n),t.appendChild(r)},_createCoordinateSearchPanelHeaderElement(){var n=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnes",e.appendChild(t);var r=document.createElement("button");r.id=this._addUID("GPcoordinateSearchClose"),r.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",r.title="Fermer la recherche par coordonnes",r.addEventListener?r.addEventListener("click",function(){var a="#GPsearchInput-"+n._uid;document.querySelector(a+" input").disabled=!1,document.querySelector(a+" .GPsearchInputReset")&&(document.querySelector(a+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),n.onCoordinateSearchClose()},!1):r.attachEvent&&r.attachEvent("onclick",function(){var a="#GPsearchInput-"+n._uid;document.querySelector(a+" input").disabled=!1,document.querySelector(a+" .GPsearchInputReset")&&(document.querySelector(a+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+n._uid).disabled=!1),document.getElementById(n._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(n._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),n.onCoordinateSearchClose()});var i=document.createElement("span");return i.className="GPelementHidden gpf-visible",i.innerText="Fermer",r.appendChild(i),e.appendChild(r),e},_createCoordinateSearchPanelFormElement(){var n=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),n.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var n=document.createElement("div");return n.className="GPflexInput gpf-flex-column ",n},_createCoordinateSearchSystemsLabelElement(){var n=document.createElement("label");return n.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",n.innerHTML="Systme de rfrence",n},_setCoordinateSearchSystemsSelectElement(n){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un systme de rference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onCoordinateSearchSystemChange(o)});for(var r=0;r<n.length;r++){var i=n[r],a=document.createElement("option");a.value=i.code,a.text=i.label||r,t.appendChild(a)}return t},_createCoordinateSearchUnitsLabelElement(){var n=document.createElement("label");return n.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",n.innerHTML="Units",n},_setCoordinateSearchUnitsSelectElement(n){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unit",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onCoordinateSearchUnitsChange(o)});for(var r=0;r<n.length;r++){var i=n[r],a=document.createElement("option");a.value=i.code?i.code:r,a.text=i.label||r,t.appendChild(a)}return t},_setCoordinateSearchLngLabelElement(n){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=n==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(n){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",n){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLngDMSElement(){var n=document.createElement("div");return n.id=this._addUID("GPcoordinateSearchLngDMS"),n.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degr entre 0 et 180"
                type="number"
                required=""
                min="0"
                max="180">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,n},_setCoordinateSearchLatLabelElement(n){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=n==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(n){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",n){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLatDMSElement(){var n=document.createElement("div");return n.id=this._addUID("GPcoordinateSearchLatDMS"),n.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degr entre 0 et 85"
                type="number"
                required=""
                min="0"
                max="85">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,n},_createCoordinateSearchSubmitElement(){var n=document.createElement("input");return n.type="submit",n.id=this._addUID("GPcoordinateSearchSubmit"),n.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",n.value="Chercher",n}},logger=LoggerByDefault$1.getLogger("searchengine"),SearchEngine=class Lf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Lf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,maximumEntries:5,serviceOptions:{maximumResponses:10},filterLayers:!0},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!1},Helper$1.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterTMS===!1&&Search.setFilterTMS(this.options.searchOptions.filterTMS),this.options.searchOptions.filterProjections&&Search.setFiltersByProjection(this.options.searchOptions.filterProjections)),Search.target.addEventListener("suggest",i=>{logger.debug(i);let a=i.detail;a=this._filterResultsFromConfigLayers(a),this._fillSearchedSuggestListContainer(a)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle,r=this.options.markerUrl;r?this._markerUrl=r:this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var r=e.resources.geocode;if(r)if(Array.isArray(r)){var i=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<r.length;t++)i.indexOf(r[t])===-1&&logger.log("[SearchEngine] options.resources.geocode : "+r[t]+" is not a resource for geocode")}else logger.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),r=null;var a=e.resources.autocomplete;if(a)if(Array.isArray(a)){var o=["StreetAddress","PositionOfInterest"];for(t=0;t<a.length;t++)o.indexOf(a[t])===-1&&logger.log("[SearchEngine] options.resources.autocomplete : "+a[t]+" is not a resource for autocomplete")}else logger.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),a=null}else logger.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper$1.assign(this._advancedSearchFilters,e),logger.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Gographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var r=0;r<t.length;r++){var i=t[r];this._setSystem(i)}if(this._coordinateSearchSystems.length===0)for(var a=0;a<e.length;a++)this._setSystem(e[a])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrs dcimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrs sexagsimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mtres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomtres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var r in e)if(e.hasOwnProperty(r)){for(var i=!1,a=0;a<e[r].length;a++)for(var o=e[r][a],l=0;l<t.length;l++){var c=t[l];o.code===c&&(i=!0,this._coordinateSearchUnits[r]||(this._coordinateSearchUnits[r]=[]),this._coordinateSearchUnits[r].push(o))}i||(this._coordinateSearchUnits[r]=e[r])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div gpf-widget-color";var r=document.createElement("button");return r.title="Fermer la pop-up",r.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",r.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(r),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),r=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(r),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var i=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&i.appendChild(this._createSearchResetElement());var a=this;i.addEventListener?i.addEventListener("click",function(){a.onAutoCompleteInputClick()}):i.attachEvent&&i.attachEvent("onclick",function(){a.onAutoCompleteInputClick()}),t.appendChild(i);var o=this._createButtonsElement(),l=this._createFirstLineWrapper();if(l.appendChild(t),l.appendChild(o),e.appendChild(l),checkDsfr()&&this.options.splitResults){var c=this._createRadioContainer();e.appendChild(c)}if(checkDsfr()&&this.options.splitResults){var h;[h,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),c.appendChild(h)}if(this.options.displayButtonGeolocate){var f=this._createShowGeolocateElement();o.appendChild(f)}if(this.options.displayButtonCoordinateSearch){var p=this._createShowSearchByCoordinateElement();o.appendChild(p);var m=this._createCoordinateSearchPanelElement(),v=this._createCoordinateSearchPanelDivElement(),C=this._createCoordinateSearchPanelHeaderElement(),b=this._createCoordinateSearchPanelFormElement(),S=null;S=this._containerSystems=this.__createCoordinateSearchDivElement(),b.appendChild(S);var x=this._createCoordinateSearchSystemsLabelElement(),T=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);S.appendChild(x),S.appendChild(T),S=this._containerUnits=this.__createCoordinateSearchDivElement(),b.appendChild(S);var P=this._createCoordinateSearchUnitsLabelElement(),L=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);S.appendChild(P),S.appendChild(L),S=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),b.appendChild(S);var k=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),F=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);S.appendChild(k),S.appendChild(F),S=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),b.appendChild(S);var U=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),z=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);S.appendChild(U),S.appendChild(z);var N=this._createCoordinateSearchSubmitElement();b.appendChild(N),v.appendChild(C),v.appendChild(b),m.appendChild(v),e.appendChild(m)}if(this.options.displayButtonAdvancedSearch){var K=this._createShowAdvancedSearchElement();o.appendChild(K);var q=this._createAdvancedSearchPanelElement(),j=this._createAdvancedSearchPanelDivElement(),J=this._createAdvancedSearchPanelHeaderElement(),X=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),te=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var H=this._createAdvancedSearchFormInputElement();X.appendChild(te),X.appendChild(H),j.appendChild(J),j.appendChild(X),q.appendChild(j),e.appendChild(q)}var oe=this._autocompleteContainer=this._createAutoCompleteElement(),he=this._createAutoCompleteListElement(),Ee=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),G=this._containerResultsSuggest=this._createSearchedSuggestContainer();he.appendChild(Ee),he.appendChild(G),oe.appendChild(he),e.appendChild(oe);var ie=this._createGeocodeResultsElement(),re=this._createGeocodeResultsDivElement();ie.appendChild(re);var ye=this._geocodedContainer=this._createGeocodeResultsListElement();return re.appendChild(ye),e.appendChild(ie),e}_setFilter(e){for(var t=this._filterContainer,r=!1,i=0;i<this._advancedSearchCodes.length;i++)if(this._advancedSearchCodes[i].id===e){r=!0;break}if(!r){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var a=this._advancedSearchFilters[e];if(!(!a||a.length===0)){for(var o=this._createAdvancedSearchFiltersTableElement(e,!0),l=0;l<a.length;l++){var c=this._createAdvancedSearchFiltersAttributElement(a[l]);o.appendChild(c)}return t.appendChild(o),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger.log(e);var t={};Helper$1.assign(t,this.options.autocompleteOptions.serviceOptions),Helper$1.assign(t,e);var r=this.options.resources.autocomplete;r&&Array.isArray(r)&&(t.type||(t.type=r)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var r=0;r<e.length;r++)this._createAutoCompletedLocationElement(e[r],r)}}}_fillSearchedSuggestListContainer(e){this.options.searchOptions.maximumEntries&&(e=e.slice(0,this.options.searchOptions.maximumEntries));var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let r=0;r<e.length;r++){const i=e[r];this._createSearchedSuggestElement(i,r)}}}_filterResultsFromConfigLayers(e){if(this.options.searchOptions.filterLayers){var t={};if(this.options.searchOptions.filterLayersList)t=this.options.searchOptions.filterLayersList;else{var r=window.Gp.Config.layers;for(let a in r)r.hasOwnProperty(a)&&(t[r[a].name]=r[a].serviceParams.id.split(":")[1])}let i=e.length;for(;i--;)(!t[e[i].name]||e[i].service.toUpperCase()!==t[e[i].name].toUpperCase())&&e.splice(i,1)}return Search.setSuggestions(e),e}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger.log(e);var t={};Helper$1.assign(t,this.options.geocodeOptions.serviceOptions),Helper$1.assign(t,e);var r=this,i=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",a=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(a){var o=function(h){e.onSuccess.call(r,h),r.options.geocodeOptions.serviceOptions.onSuccess.call(r,h)};t.onSuccess=o}if(i){var l=function(h){e.onFailure.call(r,h),r.options.geocodeOptions.serviceOptions.onFailure.call(r,h)};t.onFailure=l}var c=this.options.resources.geocode;c&&(t.index||(t.index=c)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger.log(t),Gp.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var r=0;r<e.length;r++)logger.log(e[r]),this._createGeocodedLocationElement(e[r],r);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var r=this.getMap().getView();r.setCenter(e),r.setZoom(t)}_setMarker(e,t){var r=this.getMap(),i=this;if(this._marker!=null&&(r.removeOverlay(this._marker),this._marker=null),e){var a=document.createElement("img");a.src=this._markerUrl,a.addEventListener?a.addEventListener("click",function(){i._onResultMarkerSelect(t)}):a.attachEvent&&a.attachEvent("onclick",function(){i._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,positioning:"center-center",element:a,stopEvent:!1}),r.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),r=this.options.zoomTo,i=null;if(typeof r=="function"&&(logger.trace("zoom function"),i=r.call(this,e)),typeof r=="number"&&(logger.trace("zoom level"),i=r),typeof r=="string")if(r==="auto")logger.trace("zoom auto"),i=SearchEngineUtils.zoomToResultsByDefault(e);else{logger.trace("zoom level parsing");var a=parseInt(r,10);isNaN(a)||(logger.trace("zoom parsing"),i=a)}Number.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},(!i||i===""||!Number.isInteger(i))&&(logger.trace("zoom not found, current zoom..."),i=t.getView().getZoom());var o=t.minZoom,l=t.maxZoom;return i<o&&(logger.trace("zoom level min..."),i=o),i>l&&(logger.trace("zoom level max..."),i=l),logger.trace("zoom",i),i}_onResultMarkerSelect(e){var t=this.getMap(),r="";if(typeof e!="string")if(e.service==="GeocodedLocation"){r="<ul>";var i=e.location.placeAttributes;for(var a in i)i.hasOwnProperty(a)&&a!=="trueGeometry"&&a!=="extraFields"&&a!=="houseNumberInfos"&&a!=="_count"&&(r+="<li>",r+='<span class="gp-attname-others-span">'+a.toUpperCase()+" : </span>",r+=i[a],r+=" </li>");r+=" </ul>"}else e.service==="SuggestedLocation"?r=GeocodeUtils.getSuggestedLocationFreeform(e.location):r="sans informations.";else r=e;this._popupContent.innerHTML=r,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger.error("crs not defined !");return}if(e.label||(logger.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var r=this._coordinateSearchSystems[t];e.crs===r.crs&&logger.info("crs '{}' already configured",r.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var r=this._showSearchEngineButton.ariaPressed;this.collapsed=r!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),r=t.getProjection().getCode(),i=[e.coords.longitude,e.coords.latitude],a;if(r!=="EPSG:4326"?a=transform$1(i,"EPSG:4326",r):a=i,isNaN(a[0])||isNaN(a[1])){this._setMarker();return}if(this._setPosition(a,15),this._displayMarker){var o="<h6> Ma position </h6> longitude : "+i[0]+"<br/> latitude : "+i[1];this._setMarker(a,o)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:a})})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var r=[e,t],i=this.getMap().getView(),a=i.getProjection().getCode();if(a!=="EPSG:4326"&&(r=transform$1(r,"EPSG:4326",a)),isNaN(r[0])||isNaN(r[1])){this._setMarker();return}this._setPosition(r,10),this._displayMarker&&this._setMarker(r,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:r})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var r=MathUtils.toInteger(t[0].value),i=MathUtils.toInteger(t[1].value),a=MathUtils.toInteger(t[2].value),o=t[3].options[t[3].selectedIndex].text;return!r||!i||!a||!o?void 0:MathUtils.dmsToDecimal(r,i,a,o)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var r=this.options.autocompleteOptions.triggerGeocode,i=this.options.autocompleteOptions.triggerDelay,a=this.options.autocompleteOptions.maximumEntries,o=this.options.autocompleteOptions.prettifyResults,l=this;this._requestAutoComplete({text:t,onSuccess:function(h){if(logger.log("request from AutoComplete",h),h){l._suggestedLocations=h.suggestedLocations,l._locationsToBeDisplayed=[];for(var f=0;f<l._suggestedLocations.length;f++){var p=l._suggestedLocations[f];p.position&&p.position.x===0&&p.position.y===0&&p.fullText?l._getGeocodeCoordinatesFromFullText(p,f):l._locationsToBeDisplayed.push(p)}o===!0&&l._prettifyAutocompleteResults(l._locationsToBeDisplayed),a&&(l._locationsToBeDisplayed=l._locationsToBeDisplayed.slice(0,a)),l._fillAutoCompletedLocationListContainer(l._locationsToBeDisplayed),l._triggerHandler&&(clearTimeout(l._triggerHandler),l._triggerHandler=null,logger.warn("Cancel a geocode request !"))}},onFailure:function(h){l._clearSuggestedLocation(),logger.log(h.message),h.message==="No suggestion matching the search"&&r&&(l._triggerHandler&&(clearTimeout(l._triggerHandler),logger.warn("Cancel the last geocode request !")),l._triggerHandler=setTimeout(function(){logger.warn("Launch a geocode request !"),l._requestGeocoding({location:t,onSuccess:function(f){if(logger.log("request from Geocoding",f),f){l._locationsToBeDisplayed=[];for(var p=f.locations,m=0;m<p.length;m++){var v=p[m];v.fullText=GeocodeUtils.getGeocodedLocationFreeform(v),v.position={x:v.position.lon,y:v.position.lat},l._locationsToBeDisplayed.push(v)}l._fillAutoCompletedLocationListContainer(p)}},onFailure:function(f){logger.log(f.message)}})},i))}}),this.options.resources.search&&Search.suggest(t);var c=this.getMap();c.on("click",this._hideSuggestedLocation,this),c.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var r=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(i){logger.log("request from Geocoding (coordinates null)",i),i.locations&&i.locations.length!==0&&i.locations[0].position&&r._suggestedLocations&&r._suggestedLocations[t]&&(r._suggestedLocations[t].position={lon:i.locations[0].position.y,lat:i.locations[0].position.x},r._locationsToBeDisplayed.unshift(r._suggestedLocations[t]),r._fillAutoCompletedLocationListContainer(r._locationsToBeDisplayed))},onFailure:function(){r._suggestedLocations&&r._suggestedLocations[t]&&r._createAutoCompletedLocationElement(r._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger.log(t),logger.log(this._locationsToBeDisplayed[t]),!!t){var r=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],i={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},a=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(a),this._currentGeocodingLocation=a;var o=this.getMap().getView(),l=o.getProjection().getCode();l!=="EPSG:4326"&&(r=transform$1(r,"EPSG:4326",l));var c=this._getZoom(i);this._setPosition(r,c),this._displayMarker&&this._setMarker(r,i),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),r=null;try{var i=Search.getSuggestions()[t];if(!i)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var a=i.service,o=i.name,l=null;switch(a){case"WMS":l=new LayerWMS({layer:o});break;case"WMTS":l=new LayerWMTS({layer:o});break;case"WFS":l=new LayerWFS({layer:o});break;case"TMS":l=new LayerMapBox({layer:o},{declutter:!0});default:break}if(l){var c=this.getMap();c.addLayer(l)}}}catch(h){r=h}this.dispatchEvent({type:"searchengine:search:click",suggest:i,error:r})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var r=this;this._requestGeocoding({query:t,onSuccess:function(i){if(logger.log("request from Geocoding",i),i){var a=i.locations;r._fillGeocodedLocationListContainer(a)}},onFailure:function(i){r._clearGeocodedLocation(),logger.log(i.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var r=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],i={service:"GeocodedLocation",location:this._geocodedLocations[t]},a=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(a);var o=this.getMap().getView(),l=o.getProjection().getCode();l!=="EPSG:4326"&&(r=transform$1(r,"EPSG:4326",l));var c=this._getZoom(this.options.zoomTo);this._setPosition(r,c),this._displayMarker&&this._setMarker(r,i),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger.log(e);var t=e.target.selectedIndex,r=e.target.options[t].value;r&&this._setFilter(r)}onGeocodingAdvancedSearchSubmit(e,t){if(logger.log(t),!(!t||t.length===0)){for(var r,i={},a=0;a<t.length;a++){var o=t[a];o.value&&(o.key==="section"&&(o.value=o.value.toUpperCase()),i[o.key]=o.value)}var l=document.getElementById("GPsearchInputText-"+this._uid);r=l.value,this._currentGeocodingCode==="CadastralParcel"&&(r=""),this._currentGeocodingCode==="StreetAddress"&&(r=`${i.address} ${i.postcode} ${i.city}`,i={}),this._currentGeocodingCode==="PositionOfInterest"&&(r=i.q,delete i.q);var c=this;this._requestGeocoding({query:r,index:this._currentGeocodingCode,filters:i,onSuccess:function(h){if(logger.log(h),h){var f=h.locations;c._fillGeocodedLocationListContainer(f)}},onFailure:function(h){c._clearGeocodedLocation(),logger.log(h.message)}})}}_getCadastralParcelRequestParams(e){var t="",r,i=e.department;i?(r=i.length,r===2?t=i:r===1?t="0"+i:t=i.substring(0,2)):t="__";var a=e.commune;a?(r=a.length,r===3?t+=a:r===2?t+="_"+a:r===1?t+="__"+a:t+=a.substring(0,3)):t+="___";var o=e.insee;o&&o.length===5&&(t=o);var l=e.absorbedCity;l?(r=l.length,r===3?t+=l:r<3?r===2?t+="_"+l:r===1&&(t+="__"+l):t+=l.substring(0,3)):t+="___";var c=e.section;c?(r=c.length,r===2?t+=c:r===1?t+="_"+c:t+=c.substring(0,2)):t+="__";var h=e.number;return h?(r=h.length,r===4?t+=h:r===3?t+="_"+h:r===2?t+="__"+h:r===1?t+="___"+h:t+=h.substring(0,4)):t+="___",logger.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,r=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var i=null,a=0;a<this._coordinateSearchSystems.length;++a)if(this._coordinateSearchSystems[a].code===Number(r)){i=this._coordinateSearchSystems[a].type;break}if(!i){logger.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(r)],i!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=i,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[i][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[i])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,r=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=r,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var t=e.length-1;t>=0;t--){var r=e[t];(r.type==="StreetAddress"&&r.kind==="municipality"||r.type==="PositionOfInterest"&&r.poiType[0]==="lieu-dit habit"&&r.poiType[1]==="zone d'habitation")&&e.splice(t,1),r.type==="PositionOfInterest"&&r.poiType[0]==="administratif"&&(r.poiType[1]==="dpartement"||r.poiType[1]==="rgion")&&(r.fullText=r.fullText+", "+r.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);LoggerByDefault$1.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var r=document.createElement("div");r.id=t,r.classList.add("position"),r.classList.add(t),this.container.appendChild(r)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let i=0;i<t.length;i++){const a=t[i];if(a.classList.contains(this.options.className+"-in")){a.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),a.id="GPzoomIn",a.innerHTML="",a.removeAttribute("title"),a.setAttribute("aria-label","Zoomer");var r=document.createElement("span");a.appendChild(r),a.addEventListener?a.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):a.attachEvent&&a.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(a.classList.contains(this.options.className+"-out")){a.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),a.id="GPzoomOut",a.innerHTML="",a.removeAttribute("title"),a.setAttribute("aria-label","Dzoomer");var r=document.createElement("span");a.appendChild(r),a.addEventListener?a.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):a.attachEvent&&a.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(r=>{r.element.classList.contains("ol-zoom")&&(r.element.classList.add("ol-hidden"),r.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),a=i=="degrees"?"degrees":"m";let o=getPointResolution(r,e.resolution,t,a);const l=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,c=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let h=l*o,f="";if(i=="degrees"){const P=METERS_PER_UNIT$1.degrees;h*=P,h<P/60?(f="",o*=3600):h<P?(f="",o*=60):f=""}else if(i=="imperial")h<.9144?(f="in",o/=.0254):h<1609.344?(f="ft",o/=.3048):(f="mi",o/=1609.344);else if(i=="nautical")o/=1852,f="NM";else if(i=="metric")h<1e-6?(f="nm",o*=1e9):h<.001?(f="m",o*=1e6):h<1?(f="mm",o*=1e3):h<1e3?f="m":(f="km",o/=1e3);else if(i=="us")h<.9144?(f="in",o*=39.37):h<1609.344?(f="ft",o/=.30480061):(f="mi",o/=1609.3472);else throw new Error("Invalid units");let p=3*Math.floor(Math.log(l*o)/Math.log(10)),m,v,C,b=0,S,x;for(;;){C=Math.floor(p/3);const P=Math.pow(10,C);if(m=LEADING_DIGITS[(p%3+3)%3]*P,v=Math.round(m/o),isNaN(v)){this.element.style.display="none",this.renderedVisible_=!1;return}if(c!==void 0&&v>=c){m=b,v=S,C=x;break}else if(v>=l)break;b=m,S=v,x=C,++p}const T=this.scaleBar_?this.createScaleBar(v,m,f):m.toFixed(C<0?-C:0)+" "+f;this.renderedHTML_!=T&&(this.innerElement_.innerHTML=T,this.renderedHTML_=T),this.renderedWidth_!=v&&(this.innerElement_.style.width=v+"px",this.renderedWidth_=v),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),a=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,l=e/o,c=[this.createMarker("absolute")];for(let f=0;f<o;++f){const p=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";c.push(`<div><div class="ol-scale-singlebar ${p}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(f%2===0||o===2?this.createStepText(f,e,!1,t,r):"")+"</div>")}return c.push(this.createStepText(o,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+a+"</div>":"")+c.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,a){const l=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+a),c=e===0?-3:t/this.scaleBarSteps_*-1,h=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${c}px;text-align: ${e===0?"left":"center"};min-width: ${h}px;left: ${r?t+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const geometry=JSON.parse('{"type":"MultiPolygon","coordinates":[[[[5.5571875,47.94089844],[5.5571875,47.9815625],[5.478125,47.9815625],[5.478125,48.02222656],[5.478125,48.06289063],[5.478125,48.10355469],[5.478125,48.14421875],[5.5571875,48.14421875],[5.5571875,48.18488281],[5.5571875,48.22554687],[5.5571875,48.26621094],[5.63625,48.26621094],[5.63625,48.306875],[5.63625,48.34753906],[5.63625,48.38820312],[5.63625,48.42886719],[5.63625,48.46953125],[5.63625,48.51019531],[5.63625,48.55085938],[5.63625,48.59152344],[5.63625,48.6321875],[5.63625,48.67285156],[5.5571875,48.67285156],[5.5571875,48.71351562],[5.5571875,48.75417969],[5.478125,48.75417969],[5.478125,48.71351562],[5.478125,48.67285156],[5.3990625,48.67285156],[5.3990625,48.71351562],[5.3990625,48.75417969],[5.3990625,48.79484375],[5.32,48.79484375],[5.32,48.83550781],[5.32,48.87617187],[5.2409375,48.87617187],[5.2409375,48.91683594],[5.161875,48.91683594],[5.161875,48.87617187],[5.0828125,48.87617187],[5.00375,48.87617187],[5.00375,48.91683594],[5.00375,48.9575],[4.9246875,48.9575],[4.9246875,48.99816406],[4.9246875,49.03882813],[4.845625,49.03882813],[4.845625,49.07949219],[4.845625,49.12015625],[4.7665625,49.12015625],[4.6875,49.12015625],[4.6875,49.07949219],[4.6084375,49.07949219],[4.529375,49.07949219],[4.529375,49.12015625],[4.4503125,49.12015625],[4.4503125,49.16082031],[4.37125,49.16082031],[4.37125,49.20148437],[4.37125,49.24214844],[4.37125,49.2828125],[4.2921875,49.2828125],[4.2921875,49.24214844],[4.213125,49.24214844],[4.213125,49.2828125],[4.213125,49.32347656],[4.1340625,49.32347656],[4.1340625,49.36414062],[4.055,49.36414062],[3.9759375,49.36414062],[3.896875,49.36414062],[3.8178125,49.36414062],[3.73875,49.36414062],[3.6596875,49.36414062],[3.580625,49.36414062],[3.5015625,49.36414062],[3.4225,49.36414062],[3.3434375,49.36414062],[3.264375,49.36414062],[3.1853125,49.36414062],[3.10625,49.36414062],[3.0271875,49.36414062],[3.0271875,49.40480469],[2.948125,49.40480469],[2.8690625,49.40480469],[2.8690625,49.36414062],[2.79,49.36414062],[2.79,49.32347656],[2.79,49.2828125],[2.7109375,49.2828125],[2.631875,49.2828125],[2.5528125,49.2828125],[2.5528125,49.24214844],[2.47375,49.24214844],[2.47375,49.20148437],[2.3946875,49.20148437],[2.3946875,49.16082031],[2.3946875,49.12015625],[2.315625,49.12015625],[2.2365625,49.12015625],[2.2365625,49.07949219],[2.2365625,49.03882813],[2.1575,49.03882813],[2.1575,48.99816406],[2.0784375,48.99816406],[2.0784375,48.9575],[1.999375,48.9575],[1.999375,48.99816406],[1.999375,49.03882813],[1.999375,49.07949219],[2.0784375,49.07949219],[2.1575,49.07949219],[2.1575,49.12015625],[2.1575,49.16082031],[2.2365625,49.16082031],[2.315625,49.16082031],[2.315625,49.20148437],[2.315625,49.24214844],[2.3946875,49.24214844],[2.3946875,49.2828125],[2.47375,49.2828125],[2.47375,49.32347656],[2.5528125,49.32347656],[2.5528125,49.36414062],[2.631875,49.36414062],[2.7109375,49.36414062],[2.7109375,49.40480469],[2.79,49.40480469],[2.79,49.44546875],[2.79,49.48613281],[2.8690625,49.48613281],[2.8690625,49.52679688],[2.948125,49.52679688],[2.948125,49.56746094],[3.0271875,49.56746094],[3.0271875,49.608125],[3.10625,49.608125],[3.1853125,49.608125],[3.1853125,49.64878906],[3.264375,49.64878906],[3.3434375,49.64878906],[3.3434375,49.68945313],[3.3434375,49.73011719],[3.3434375,49.77078125],[3.3434375,49.81144531],[3.4225,49.81144531],[3.4225,49.85210937],[3.4225,49.89277344],[3.5015625,49.89277344],[3.5015625,49.9334375],[3.580625,49.9334375],[3.6596875,49.9334375],[3.73875,49.9334375],[3.8178125,49.9334375],[3.896875,49.9334375],[3.9759375,49.9334375],[3.9759375,49.97410156],[4.055,49.97410156],[4.055,50.01476563],[4.1340625,50.01476563],[4.1340625,50.05542969],[4.213125,50.05542969],[4.2921875,50.05542969],[4.37125,50.05542969],[4.37125,50.01476563],[4.4503125,50.01476563],[4.4503125,50.05542969],[4.529375,50.05542969],[4.529375,50.09609375],[4.6084375,50.09609375],[4.6084375,50.13675781],[4.6084375,50.17742188],[4.6875,50.17742188],[4.6875,50.21808594],[4.7665625,50.21808594],[4.845625,50.21808594],[4.845625,50.25875],[4.9246875,50.25875],[4.9246875,50.21808594],[5.00375,50.21808594],[5.00375,50.17742188],[5.00375,50.13675781],[5.00375,50.09609375],[5.00375,50.05542969],[4.9246875,50.05542969],[4.9246875,50.01476563],[5.00375,50.01476563],[5.00375,49.97410156],[5.00375,49.9334375],[5.00375,49.89277344],[5.0828125,49.89277344],[5.0828125,49.85210937],[5.161875,49.85210937],[5.161875,49.81144531],[5.161875,49.77078125],[5.2409375,49.77078125],[5.32,49.77078125],[5.3990625,49.77078125],[5.3990625,49.73011719],[5.3990625,49.68945313],[5.3990625,49.64878906],[5.478125,49.64878906],[5.5571875,49.64878906],[5.5571875,49.608125],[5.478125,49.608125],[5.478125,49.56746094],[5.478125,49.52679688],[5.5571875,49.52679688],[5.5571875,49.48613281],[5.63625,49.48613281],[5.63625,49.52679688],[5.7153125,49.52679688],[5.7153125,49.56746094],[5.794375,49.56746094],[5.8734375,49.56746094],[5.8734375,49.52679688],[5.794375,49.52679688],[5.794375,49.48613281],[5.7153125,49.48613281],[5.7153125,49.44546875],[5.63625,49.44546875],[5.63625,49.40480469],[5.5571875,49.40480469],[5.5571875,49.36414062],[5.63625,49.36414062],[5.63625,49.32347656],[5.63625,49.2828125],[5.5571875,49.2828125],[5.5571875,49.32347656],[5.478125,49.32347656],[5.478125,49.36414062],[5.3990625,49.36414062],[5.32,49.36414062],[5.32,49.32347656],[5.32,49.2828125],[5.3990625,49.2828125],[5.3990625,49.24214844],[5.3990625,49.20148437],[5.3990625,49.16082031],[5.478125,49.16082031],[5.478125,49.12015625],[5.478125,49.07949219],[5.478125,49.03882813],[5.478125,48.99816406],[5.5571875,48.99816406],[5.5571875,48.9575],[5.5571875,48.91683594],[5.5571875,48.87617187],[5.5571875,48.83550781],[5.63625,48.83550781],[5.63625,48.79484375],[5.63625,48.75417969],[5.7153125,48.75417969],[5.7153125,48.71351562],[5.794375,48.71351562],[5.794375,48.67285156],[5.794375,48.6321875],[5.7153125,48.6321875],[5.7153125,48.59152344],[5.7153125,48.55085938],[5.794375,48.55085938],[5.794375,48.51019531],[5.794375,48.46953125],[5.7153125,48.46953125],[5.7153125,48.42886719],[5.7153125,48.38820312],[5.7153125,48.34753906],[5.7153125,48.306875],[5.7153125,48.26621094],[5.7153125,48.22554687],[5.63625,48.22554687],[5.63625,48.18488281],[5.63625,48.14421875],[5.63625,48.10355469],[5.5571875,48.10355469],[5.5571875,48.06289063],[5.5571875,48.02222656],[5.63625,48.02222656],[5.63625,47.9815625],[5.63625,47.94089844],[5.5571875,47.94089844]],[[5.5571875,49.40480469],[5.5571875,49.44546875],[5.478125,49.44546875],[5.478125,49.48613281],[5.3990625,49.48613281],[5.3990625,49.44546875],[5.3990625,49.40480469],[5.478125,49.40480469],[5.5571875,49.40480469]],[[5.32,49.36414062],[5.32,49.40480469],[5.32,49.44546875],[5.32,49.48613281],[5.2409375,49.48613281],[5.2409375,49.44546875],[5.2409375,49.40480469],[5.2409375,49.36414062],[5.32,49.36414062]],[[4.37125,49.36414062],[4.37125,49.32347656],[4.4503125,49.32347656],[4.529375,49.32347656],[4.529375,49.36414062],[4.4503125,49.36414062],[4.37125,49.36414062]],[[4.529375,49.32347656],[4.529375,49.2828125],[4.6084375,49.2828125],[4.6084375,49.32347656],[4.529375,49.32347656]],[[2.948125,49.48613281],[2.948125,49.44546875],[3.0271875,49.44546875],[3.10625,49.44546875],[3.1853125,49.44546875],[3.1853125,49.40480469],[3.264375,49.40480469],[3.3434375,49.40480469],[3.4225,49.40480469],[3.4225,49.44546875],[3.5015625,49.44546875],[3.580625,49.44546875],[3.580625,49.40480469],[3.6596875,49.40480469],[3.73875,49.40480469],[3.8178125,49.40480469],[3.8178125,49.44546875],[3.896875,49.44546875],[3.9759375,49.44546875],[3.9759375,49.48613281],[4.055,49.48613281],[4.055,49.52679688],[3.9759375,49.52679688],[3.9759375,49.56746094],[3.9759375,49.608125],[3.896875,49.608125],[3.896875,49.56746094],[3.8178125,49.56746094],[3.8178125,49.608125],[3.8178125,49.64878906],[3.896875,49.64878906],[3.9759375,49.64878906],[3.9759375,49.68945313],[3.896875,49.68945313],[3.8178125,49.68945313],[3.73875,49.68945313],[3.73875,49.64878906],[3.6596875,49.64878906],[3.580625,49.64878906],[3.5015625,49.64878906],[3.4225,49.64878906],[3.4225,49.608125],[3.3434375,49.608125],[3.3434375,49.56746094],[3.264375,49.56746094],[3.1853125,49.56746094],[3.10625,49.56746094],[3.10625,49.52679688],[3.0271875,49.52679688],[3.0271875,49.48613281],[2.948125,49.48613281]],[[4.2921875,49.48613281],[4.2921875,49.44546875],[4.37125,49.44546875],[4.37125,49.48613281],[4.2921875,49.48613281]],[[5.161875,49.2828125],[5.161875,49.24214844],[5.161875,49.20148437],[5.161875,49.16082031],[5.161875,49.12015625],[5.161875,49.07949219],[5.161875,49.03882813],[5.2409375,49.03882813],[5.2409375,48.99816406],[5.2409375,48.9575],[5.32,48.9575],[5.32,48.91683594],[5.3990625,48.91683594],[5.3990625,48.87617187],[5.3990625,48.83550781],[5.478125,48.83550781],[5.478125,48.87617187],[5.478125,48.91683594],[5.478125,48.9575],[5.3990625,48.9575],[5.3990625,48.99816406],[5.3990625,49.03882813],[5.3990625,49.07949219],[5.3990625,49.12015625],[5.32,49.12015625],[5.32,49.16082031],[5.32,49.20148437],[5.2409375,49.20148437],[5.2409375,49.24214844],[5.2409375,49.2828125],[5.2409375,49.32347656],[5.161875,49.32347656],[5.161875,49.2828125]],[[5.0828125,48.9575],[5.161875,48.9575],[5.161875,48.99816406],[5.0828125,48.99816406],[5.0828125,48.9575]],[[4.529375,49.16082031],[4.6084375,49.16082031],[4.6084375,49.20148437],[4.529375,49.20148437],[4.529375,49.16082031]],[[4.213125,49.40480469],[4.213125,49.36414062],[4.2921875,49.36414062],[4.2921875,49.40480469],[4.213125,49.40480469]],[[3.4225,49.77078125],[3.4225,49.73011719],[3.5015625,49.73011719],[3.580625,49.73011719],[3.6596875,49.73011719],[3.73875,49.73011719],[3.73875,49.77078125],[3.73875,49.81144531],[3.8178125,49.81144531],[3.896875,49.81144531],[3.9759375,49.81144531],[4.055,49.81144531],[4.055,49.85210937],[3.9759375,49.85210937],[3.896875,49.85210937],[3.896875,49.89277344],[3.8178125,49.89277344],[3.73875,49.89277344],[3.73875,49.85210937],[3.6596875,49.85210937],[3.580625,49.85210937],[3.5015625,49.85210937],[3.5015625,49.81144531],[3.5015625,49.77078125],[3.4225,49.77078125]],[[3.9759375,49.77078125],[3.896875,49.77078125],[3.896875,49.73011719],[3.9759375,49.73011719],[3.9759375,49.77078125]]]]}'),type="Feature",extent$1={geometry,type},default_background_layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",center=[2.35,48.85],projection="EPSG:3857",zoom=10,olDefaults={default_background_layer,center,projection,zoom};function getAllTextContent(n,e){return getAllTextContent_(n,e,[]).join("")}function getAllTextContent_(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)getAllTextContent_(r,e,t)}return t}function isDocument(n){return"documentElement"in n}function parse(n){return new DOMParser().parseFromString(n,"application/xml")}function makeArrayPusher(n,e){return function(t,r){const i=n.call(this,t,r);i!==void 0&&r[r.length-1].push(i)}}function makeObjectPropertyPusher(n,e,t){return function(r,i){const a=n.call(this,r,i);if(a!==void 0){const o=i[i.length-1],l=r.localName;let c;l in o?c=o[l]:(c=[],o[l]=c),c.push(a)}}}function makeObjectPropertySetter(n,e,t){return function(r,i){const a=n.call(this,r,i);if(a!==void 0){const o=i[i.length-1],l=r.localName;o[l]=a}}}function makeStructureNS(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function parseNode(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const a=n[i.namespaceURI];if(a!==void 0){const o=a[i.localName];o!==void 0&&o.call(r,i,t)}}}function pushParseAndPop(n,e,t,r,i){return r.push(n),parseNode(e,t,r,i),r.pop()}class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(n){return n.getAttributeNS(NAMESPACE_URI,"href")}function readDecimal(n){const e=getAllTextContent(n,!1);return readDecimalString(e)}function readDecimalString(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function readPositiveInteger(n){const e=getAllTextContent(n,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function readString(n){return getAllTextContent(n,!1).trim()}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(n,e){return pushParseAndPop({},ADDRESS_PARSERS,n,e)}function readAllowedValues(n,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,n,e)}function readConstraint(n,e){const t=n.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,n,e)}function readContactInfo(n,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,n,e)}function readDcp(n,e){return pushParseAndPop({},DCP_PARSERS,n,e)}function readGet(n,e){const t=readHref(n);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,n,e)}function readHttp(n,e){return pushParseAndPop({},HTTP_PARSERS,n,e)}function readOperation(n,e){const t=n.getAttribute("name"),r=pushParseAndPop({},OPERATION_PARSERS,n,e);if(!r)return;const i=e[e.length-1];i[t]=r}function readOperationsMetadata(n,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,n,e)}function readPhone(n,e){return pushParseAndPop({},PHONE_PARSERS,n,e)}function readServiceIdentification(n,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,n,e)}function readServiceContact(n,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,n,e)}function readServiceProvider(n,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,n,e)}function readValue(n,e){return readString(n)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=pushParseAndPop(r,PARSERS,e,[]),r||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(n,e){return pushParseAndPop({},CONTENTS_PARSERS,n,e)}function readLayer(n,e){return pushParseAndPop({},LAYER_PARSERS,n,e)}function readTileMatrixSet(n,e){return pushParseAndPop({},TMS_PARSERS,n,e)}function readStyle(n,e){const t=pushParseAndPop({},STYLE_PARSERS,n,e);if(!t)return;const r=n.getAttribute("isDefault")==="true";return t.isDefault=r,t}function readTileMatrixSetLink(n,e){return pushParseAndPop({},TMS_LINKS_PARSERS,n,e)}function readDimensions(n,e){return pushParseAndPop({},DIMENSION_PARSERS,n,e)}function readResourceUrl(n,e){const t=n.getAttribute("format"),r=n.getAttribute("template"),i=n.getAttribute("resourceType"),a={};return t&&(a.format=t),r&&(a.template=r),i&&(a.resourceType=i),a}function readBoundingBox(n,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,n,e);if(t.length==2)return boundingExtent(t)}function readBoundingBoxWithCrs(n,e){const t=n.getAttribute("crs"),r=pushParseAndPop([],WGS84_BBOX_READERS,n,e);if(r.length==2)return{extent:boundingExtent(r),crs:t}}function readLegendUrl(n,e){const t={};return t.format=n.getAttribute("format"),t.href=readHref(n),t}function readCoordinates(n,e){const t=readString(n).split(/\s+/);if(!t||t.length!=2)return;const r=+t[0],i=+t[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function readTileMatrix(n,e){return pushParseAndPop({},TM_PARSERS,n,e)}function readTileMatrixLimitsList(n,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,n,e)}function readTileMatrixLimits(n,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,n,e)}function useGpWmtsCapabilities(){return useQuery({queryKey:["gp_wmts_getcap"],queryFn:async()=>{const n=await fetch("https://data.geopf.fr/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities");if(!n.ok)throw new Error(`Bad response from server : ${n.status}`);const e=await n.text(),r=new WMTSCapabilities().read(e);if(!r)throw new Error("Reading capabilities failed");return r},staleTime:1/0})}function ExtentMap(){const n=reactExports.useRef(null),e=reactExports.useRef(null),{data:t}=useGpWmtsCapabilities();reactExports.useEffect(()=>{new Gp.Services.Config({customConfigFile:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/fullConfig.json",onSuccess:()=>{console.log("gp config loaded!")},onFailure:o=>{console.error(o)}}).call()},[]);const r=reactExports.useMemo(()=>{const a=new GeoJSON({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(extent$1),o=new VectorSource({features:a});return new VectorLayer({source:o})},[]),i=reactExports.useMemo(()=>{if(!t)return;const a=optionsFromCapabilities(t,{layer:olDefaults.default_background_layer});if(!a)return;const o=new TileLayer;return o.setSource(new WMTS$1(a)),o},[t]);return reactExports.useEffect(()=>{if(!i||!r)return;const a=new LayerSwitcher({layers:[{layer:i,config:{title:"Plan IGN v2"}},{layer:r,config:{title:"Emprise"}}],options:{position:"top-right",collapsed:!0,panel:!0,counter:!0}}),o=new Catalog({collapsed:!0,draggable:!1,titlePrimary:"",titleSecondary:"Grer vos couches de donnes",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]},position:"top-left"}),l=[a,new SearchEngine({collapsed:!0,displayAdvancedSearch:!1,apiKey:"essentiels",zoomTo:"auto"}),new ScaleLine,new GeoportalZoom({position:"top-left"}),new GeoportalFullScreen({position:"bottom-right"}),o];e.current=new Map$1({target:n.current,layers:[i,r],interactions:defaults$1(),controls:l,view:new View({projection:olDefaults.projection,center:fromLonLat(olDefaults.center),zoom:olDefaults.zoom})});const c=r.getSource();return c&&e.current.getView().fit(c.getExtent()),()=>{var h;return(h=e.current)==null?void 0:h.setTarget(void 0)}},[i,r]),jsxRuntimeExports.jsx("div",{className:fr.cx("fr-grid-row"),children:jsxRuntimeExports.jsx("div",{className:cx$1(fr.cx("fr-col"),"map-view"),ref:n})})}function symToStr(n){return Object.keys(n)[0]}function getLanguageBestApprox(n){const{languages:e,languageLike:t}=n;e:{const r=e.find(i=>i.toLowerCase()===t.toLowerCase());if(r===void 0)break e;return r}e:{const r=t.split("-")[0].toLowerCase(),i=e.find(a=>a.toLowerCase().includes(r));if(i===void 0)break e;return i}}let useLang_glob=()=>"fr";function setUseLang(n){useLang_glob=n.useLang}function useLang(){return useLang_glob()}function createComponentI18nApi(n){const{componentName:e,frMessages:t}=n,r={fr:t};function i(){const o=useLang(),l=reactExports.useMemo(()=>{const h=getLanguageBestApprox({languages:Object.keys(r),languageLike:o});return h??"fr"},[o]);function c(h,f){var p;const m=(p=r[l][h])!==null&&p!==void 0?p:r.fr[h];return f===void 0?m:m(f)}return{t:c}}function a(o){const{lang:l,messages:c}=o;Object.entries(c).filter(([,h])=>h!==void 0).forEach(([h,f])=>{var p,m;return((p=(m=r)[l])!==null&&p!==void 0?p:m[l]={})[h]=f})}return{useTranslation:i,[`add${capitalize(e)}Translations`]:a}}const ArtworkLightSvg="/cartes.gouv.fr-guichet-collaboratif/assets/light-BcMY7tSa.svg",ArtworkDarkSvg="/cartes.gouv.fr-guichet-collaboratif/assets/dark-BjziKb-S.svg",ArtworkSystemSvg="/cartes.gouv.fr-guichet-collaboratif/assets/system-BJKRkqTi.svg";function getAssetUrl(n){return typeof n=="string"?n:n.src}var __rest$a=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let Link=n=>{const e=n,{href:t}=e,r=__rest$a(e,["href"]);e:{if(t!=="#"||!("onClick"in r))break e;return assert$1(is()),React.createElement("button",Object.assign({},r,{className:cx$1(fr.cx("fr-link"),r.className)}))}return React.createElement("a",Object.assign({href:t},r))};function setLink(n){Link=e=>{var t;{const r=e,{to:i,href:a}=r,o=__rest$a(r,["to","href"]),l=(t=typeof i=="string"?i:void 0)!==null&&t!==void 0?t:typeof a=="string"?a:void 0;e:{if(l!=="#"||!("onClick"in o))break e;return assert$1(is()),React.createElement("button",Object.assign({},o,{className:cx$1(fr.cx("fr-link"),o.className)}))}e:{if(l===void 0||!l.startsWith("//")&&!/^https?:\/\//.test(l))break e;return React.createElement("a",Object.assign({href:l,target:"_blank",rel:"noreferrer"},o))}e:{if(l===void 0||!l.startsWith("#"))break e;return React.createElement("a",Object.assign({href:l},o))}e:{if(l===void 0||!/^[a-z]+:/.test(l))break e;return React.createElement("a",Object.assign({href:l},o))}}return React.createElement(n.Link,Object.assign({},e))}}function getLink(){return{Link}}function useAnalyticsId(n){const{explicitlyProvidedId:e,defaultIdPrefix:t}=n,r=reactExports.useId();return e??`${t}-${r}`}var __rest$9=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Button=reactExports.memo(reactExports.forwardRef((n,e)=>{var t,r;const{id:i,className:a,children:o,title:l,iconId:c,iconPosition:h="left",priority:f="primary",size:p="medium",linkProps:m,onClick:v,nativeButtonProps:C,disabled:b,type:S,style:x,value:T}=n,P=__rest$9(n,["id","className","children","title","iconId","iconPosition","priority","size","linkProps","onClick","nativeButtonProps","disabled","type","style","value"]);assert$1();const L=useAnalyticsId({defaultIdPrefix:"fr-button",explicitlyProvidedId:i}),{Link:k}=getLink(),F=cx$1(fr.cx("fr-btn",f!=="primary"&&`fr-btn--${f==="tertiary no outline"?"tertiary-no-outline":f}`,p!=="medium"&&`fr-btn--${(()=>{switch(p){case"small":return"sm";case"large":return"lg"}})()}`,...c===void 0?[]:[c,o!==void 0&&`fr-btn--icon-${h}`]),m!==void 0&&m.className,a);return m!==void 0?React.createElement(k,Object.assign({},m,{id:(t=i??m.id)!==null&&t!==void 0?t:L,title:l??m.title,className:cx$1(m==null?void 0:m.className,F),style:Object.assign(Object.assign({},m==null?void 0:m.style),x),ref:e},P),o):React.createElement("button",Object.assign({},C,{id:(r=i??(C==null?void 0:C.id))!==null&&r!==void 0?r:L,className:cx$1(C==null?void 0:C.className,F),style:Object.assign(Object.assign({},C==null?void 0:C.style),x),type:S??(C==null?void 0:C.type),title:l??(C==null?void 0:C.title),onClick:v??(C==null?void 0:C.onClick),disabled:b??(C==null?void 0:C.disabled),ref:e,value:T},P),o)}));Button.displayName=symToStr({Button});var __rest$8=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Modal=reactExports.memo(reactExports.forwardRef((n,e)=>{const{className:t,id:r,title:i,children:a,concealingBackdrop:o=!0,topAnchor:l=!1,iconId:c,buttons:h,size:f="medium",style:p}=n;__rest$8(n,["className","id","title","children","concealingBackdrop","topAnchor","iconId","buttons","size","style"]),assert$1();const m=h===void 0?void 0:h instanceof Array?h:[h],{t:v}=useTranslation$7(),C=`fr-modal-title-${r}`;return React.createElement("dialog",{"aria-labelledby":C,id:r,className:cx$1(fr.cx("fr-modal",l&&"fr-modal--top"),t),style:p,ref:e,"data-fr-concealing-backdrop":o},React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-md")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--center")},React.createElement("div",{className:(()=>{switch(f){case"large":return fr.cx("fr-col-12","fr-col-md-10","fr-col-lg-8");case"small":return fr.cx("fr-col-12","fr-col-md-6","fr-col-lg-4");case"medium":return fr.cx("fr-col-12","fr-col-md-8","fr-col-lg-6")}})()},React.createElement("div",{className:fr.cx("fr-modal__body")},React.createElement("div",{className:fr.cx("fr-modal__header")},React.createElement("button",{className:fr.cx("fr-btn--close","fr-btn"),title:v("close"),"aria-controls":r,type:"button"},v("close"))),React.createElement("div",{className:fr.cx("fr-modal__content")},React.createElement("h1",{id:C,className:fr.cx("fr-modal__title")},c!==void 0&&React.createElement("span",{className:fr.cx(c,"fr-fi--lg"),"aria-hidden":!0}),i),a),m!==void 0&&React.createElement("div",{className:"fr-modal__footer"},React.createElement("ul",{className:fr.cx("fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-lg","fr-btns-group--icon-left")},[...m].reverse().map((b,S)=>{var x,{doClosesModal:T=!0}=b,P=__rest$8(b,["doClosesModal"]);return React.createElement("li",{key:S},React.createElement(Button,Object.assign({},P,{priority:(x=P.priority)!==null&&x!==void 0?x:S===0?"primary":"secondary"},T?"linkProps"in P?{linkProps:Object.assign(Object.assign({},P.linkProps),{"aria-controls":r})}:{nativeButtonProps:Object.assign(Object.assign({},P.nativeButtonProps),{"aria-controls":r})}:{})))}))))))))}));Modal.displayName=symToStr({Modal});const{useTranslation:useTranslation$7,addModalTranslations}=createComponentI18nApi({componentName:symToStr({Modal}),frMessages:{close:"Fermer"}});addModalTranslations({lang:"en",messages:{close:"Close"}});addModalTranslations({lang:"es",messages:{close:"Cerrar"}});function createModal(n){const{isOpenedByDefault:e,id:t}=n,r={id:`${t}-control-button`,"aria-controls":t,"data-fr-opened":e},i=`${t}-hidden-control-button`;function a(c){return React.createElement(React.Fragment,null,React.createElement(Button,{nativeButtonProps:Object.assign(Object.assign({},r),{id:i,type:"button",tabIndex:-1,"aria-hidden":!0}),className:fr.cx("fr-hidden")}," "),React.createElement(Modal,Object.assign({},c,{id:t})))}a.displayName=`${t}-modal`,overwriteReadonlyProp(a,"name",a.displayName);function o(){const c=document.getElementById(t);window.dsfr(c).modal.disclose()}function l(){const c=document.getElementById(t);window.dsfr(c).modal.conceal()}return{Component:a,buttonProps:r,open:o,close:l,isOpenedByDefault:e,id:t}}const modal=createModal({isOpenedByDefault:!1,id:"fr-theme-modal"}),headerFooterDisplayItem={buttonProps:modal.buttonProps,iconId:"fr-icon-theme-fill",text:(()=>{function n(){const{t:e}=useTranslation$6();return React.createElement(React.Fragment,null,e("display settings"))}return React.createElement(n,null)})()};function Display(){const{t:n}=useTranslation$6(),{getInputId:e}=function(){const r=reactExports.useId();function i(a){return`${r}-${a}`}return{getInputId:i}}();return React.createElement(modal.Component,{title:n("display settings"),size:"small"},React.createElement("div",{className:"fr-display"},React.createElement("div",{className:fr.cx("fr-form-group")},React.createElement("fieldset",{className:fr.cx("fr-fieldset")},React.createElement("legend",{className:fr.cx("fr-fieldset__legend","fr-text--regular")},n("pick a theme")),React.createElement("div",{className:fr.cx("fr-fieldset__content")},["light","dark","system"].map(t=>React.createElement("div",{key:t,className:fr.cx("fr-radio-group","fr-radio-rich")},React.createElement("input",{value:t,type:"radio",id:e(t),name:"fr-radios-theme"}),React.createElement("label",{className:"fr-label",htmlFor:e(t)},n(`${t} theme`),t==="system"&&React.createElement("span",{className:fr.cx("fr-hint-text")},n("system theme hint"))),React.createElement("div",{className:fr.cx("fr-radio-rich__img")},React.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"80px",height:"80px",viewBox:"0 0 80 80"},["artwork-decorative","artwork-minor","artwork-major"].map(r=>React.createElement("use",{key:r,className:fr.cx(`fr-${r}`),xlinkHref:`${getAssetUrl((()=>{switch(t){case"dark":return ArtworkDarkSvg;case"light":return ArtworkLightSvg;case"system":return ArtworkSystemSvg}})())}#${r}`})))))))))))}Display.displayName=symToStr({Display});const{useTranslation:useTranslation$6,addDisplayTranslations}=createComponentI18nApi({componentName:symToStr({Display}),frMessages:{"display settings":"Paramtres d'affichage",close:"Fermer","pick a theme":"Choisissez un thme pour personnaliser l'apparence du site.","light theme":"Thme clair","dark theme":"Thme sombre","system theme":"Systme","system theme hint":"Utilise les paramtres systme."}});addDisplayTranslations({lang:"en",messages:{"display settings":"Display settings",close:"Close","pick a theme":"Pick a theme to customize the website's look.","light theme":"Light theme","dark theme":"Dark theme","system theme":"System","system theme hint":"Use system preference"}});addDisplayTranslations({lang:"es",messages:{"display settings":"Parmetro de visualizacin",close:"Cerrar","pick a theme":"Elija un tema para personalizar el aspecto del sitio."}});let wrap;function setBrandTopAndHomeLinkProps(n){wrap=n}function getBrandTopAndHomeLinkProps(){return wrap}const id=n=>n;var __rest$7=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Footer=reactExports.memo(reactExports.forwardRef((n,e)=>{const{id:t,className:r,classes:i={},contentDescription:a,websiteMapLinkProps:o,accessibilityLinkProps:l,accessibility:c,termsLinkProps:h,bottomItems:f=[],partnersLogos:p,operatorLogo:m,license:v,brandTop:C,homeLinkProps:b,style:S,linkList:x,domains:T=["info.gouv.fr","service-public.fr","legifrance.gouv.fr","data.gouv.fr"]}=n,P=__rest$7(n,["id","className","classes","contentDescription","websiteMapLinkProps","accessibilityLinkProps","accessibility","termsLinkProps","bottomItems","partnersLogos","operatorLogo","license","brandTop","homeLinkProps","style","linkList","domains"]);assert$1();const L=t??"fr-footer",{brandTop:k,homeLinkProps:F}=(()=>{const q=getBrandTopAndHomeLinkProps(),j=C??(q==null?void 0:q.brandTop),J=b??(q==null?void 0:q.homeLinkProps),X=" hasn't been provided to the Footer and we cannot retrieve it from the Header (it's probably client side)";if(j===void 0)throw new Error(symToStr({brandTop:j})+X);if(J===void 0)throw new Error(symToStr({homeLinkProps:J})+X);return{brandTop:j,homeLinkProps:J}})(),{Link:U}=getLink(),{t:z}=useTranslation$5(),{main:N,sub:K=[]}=p??{};return React.createElement("footer",Object.assign({id:L,className:cx$1(fr.cx("fr-footer"),i.root,r),role:"contentinfo",ref:e,style:S},P),x!==void 0&&React.createElement("div",{className:fr.cx("fr-footer__top")},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--gutters")},x.map((q,j)=>q!==void 0&&React.createElement("div",{key:`fr-footer__top-cat-${j}`,className:fr.cx("fr-col-12","fr-col-sm-3","fr-col-md-2")},(q==null?void 0:q.categoryName)&&React.createElement("h3",{className:fr.cx("fr-footer__top-cat")},q==null?void 0:q.categoryName),React.createElement("ul",{className:fr.cx("fr-footer__top-list")},q==null?void 0:q.links.map((J,X)=>React.createElement("li",{key:`fr-footer__top-link-${X}`},React.createElement(U,Object.assign({},J==null?void 0:J.linkProps,{className:fr.cx("fr-footer__top-link")}),J==null?void 0:J.text))))))))),React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:cx$1(fr.cx("fr-footer__body"),i.body)},React.createElement("div",{className:cx$1(fr.cx("fr-footer__brand","fr-enlarge-link"),i.brand)},(()=>{const q=React.createElement("p",{className:cx$1(fr.cx("fr-logo"),i.logo)},k);return m!==void 0?q:React.createElement(U,Object.assign({},F),q)})(),m!==void 0&&React.createElement(U,Object.assign({},F,{className:cx$1(fr.cx("fr-footer__brand-link"),i.brandLink,F.className)}),React.createElement("img",{className:cx$1(fr.cx("fr-footer__logo"),i.operatorLogo),style:(()=>{switch(m.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:m.imgUrl,alt:m.alt}))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__content"),i.content)},a!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-footer__content-desc"),i.contentDesc)},a),React.createElement("ul",{className:cx$1(fr.cx("fr-footer__content-list"),i.contentList)},T.map((q,j)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__content-item"),i.contentItem),key:j},React.createElement("a",{className:cx$1(fr.cx("fr-footer__content-link"),i.contentLink),target:"_blank",href:`https://${q}`,title:`${q} - ${z("open new window")}`,id:`footer-${q.replace(/\./g,"-")}-link`},q)))))),p!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners"),i.partners)},React.createElement("h2",{className:cx$1(fr.cx("fr-footer__partners-title"),i.partnersTitle)},z("our partners")),React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-logos"),i.partnersLogos)},N!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-main"),i.partnersMain)},(()=>{var q,j;const J=React.createElement("img",{alt:N.alt,style:{height:"5.625rem"},src:N.imgUrl,className:cx$1(fr.cx("fr-footer__logo"),i.logo)});return N.linkProps!==void 0||N.href!==void 0?React.createElement(U,Object.assign({},N.linkProps,{href:(q=N.href)!==null&&q!==void 0?q:(j=N.linkProps)===null||j===void 0?void 0:j.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),i.partnersLink)}),J):J})()),K.length!==0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-sub"),i.partnersSub)},React.createElement("ul",null,K.map((q,j)=>{var J,X;const te=React.createElement("img",{alt:q.alt,src:q.imgUrl,style:{height:"5.625rem"},className:cx$1(fr.cx("fr-footer__logo"),i.logo)}),H=q.linkProps!==void 0||q.href!==void 0;return React.createElement("li",{key:j},H?React.createElement(U,Object.assign({},q.linkProps,{href:(J=q.href)!==null&&J!==void 0?J:(X=q.linkProps)===null||X===void 0?void 0:X.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),i.partnersLink)}),te):te)}))))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom"),i.bottom)},React.createElement("ul",{className:cx$1(fr.cx("fr-footer__bottom-list"),i.bottomList)},[...o===void 0?[]:[id({text:z("website map"),linkProps:o})],id({text:`${z("accessibility")} : ${z(c)}`,linkProps:l??{}}),...h===void 0?[]:[id({text:z("terms"),linkProps:h})],...f].map((q,j)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__bottom-item"),i.bottomItem,r),key:j},typeGuard(q,q instanceof Object&&"text"in q)?React.createElement(FooterBottomItem,{classes:{bottomLink:i.bottomLink},bottomItem:q}):q))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom-copy"),i.bottomCopy)},React.createElement("p",null,v===void 0?z("license mention",{licenseUrl:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"}):v)))))}));Footer.displayName=symToStr({Footer});const{useTranslation:useTranslation$5,addFooterTranslations}=createComponentI18nApi({componentName:symToStr({Footer}),frMessages:{"hide message":"Masquer le message","website map":"Plan du site",accessibility:"Accessibilit","non compliant":"non conforme","partially compliant":"partiellement conforme","fully compliant":"totalement conforme",terms:"Mentions lgales","cookies management":"Gestion des cookies","license mention":n=>React.createElement(React.Fragment,null,"Sauf mention explicite de proprit intellectuelle dtenue par des tiers, les contenus de ce site sont proposs sous"," ",React.createElement("a",{href:n.licenseUrl,target:"_blank",title:"licence etalab-2.0 - ouvre une nouvelle fentre",id:"footer-etalab-licence-link"},"licence etalab-2.0")),"our partners":"Nos partenaires","open new window":"ouvre une nouvelle fentre"}});addFooterTranslations({lang:"en",messages:{"hide message":"Hide the message","website map":"Website map",accessibility:"Accessibility","non compliant":"non compliant","partially compliant":"partially compliant","fully compliant":"fully compliant","license mention":n=>React.createElement(React.Fragment,null,"Unless stated otherwise, all content of this website is under the"," ",React.createElement("a",{href:n.licenseUrl,target:"_blank",title:"etalab-2.0 license - open a new window"},"etalab-2.0 license")),"open new window":"open new window"}});addFooterTranslations({lang:"es",messages:{"hide message":"Occultar el mesage"}});function FooterBottomItem(n){const{className:e,bottomItem:t,classes:r={}}=n,{Link:i}=getLink(),a=cx$1(fr.cx("fr-footer__bottom-link",...t.iconId!==void 0?[t.iconId,"fr-link--icon-left"]:[]),r.bottomLink,r.root,e);return t.linkProps!==void 0?Object.keys(t.linkProps).length===0?React.createElement("span",{className:a},t.text):React.createElement(i,Object.assign({},t.linkProps,{className:cx$1(a,t.linkProps.className)}),t.text):React.createElement("button",Object.assign({},t.buttonProps,{className:cx$1(a,t.buttonProps.className)}),t.text)}function useConstCallback(n){const e=reactExports.useRef(null);return e.current=n,reactExports.useState(()=>(...t)=>e.current(...t))[0]}function createUseConsent(n){const{useFinalityConsent:e,processConsentChanges:t,useConsentCallback:r}=n;return{useConsent:isBrowser?l=>{const{consentCallback:c}=l??{};r({consentCallback:c});const h=e();return{assumeConsent:useConstCallback(p=>t({type:"atomic change",finality:p,isConsentGiven:!0})),finalityConsent:h}}:()=>({finalityConsent:void 0,assumeConsent:()=>{throw new Error("Cannot assume consent on the server side")}})}}function deepCopy(n){return JSON.parse(JSON.stringify(n))}var __rest$6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function finalityConsentToChanges(n){return Object.entries(n.finalityConsent).filter(([e])=>e!=="isFullConsent").map(([e,t])=>typeof t=="boolean"?[{finality:e,isConsentGiven:t}]:Object.entries(t).filter(([r])=>r!=="isFullConsent").map(([r,i])=>({finality:`${e}.${r}`,isConsentGiven:(assert$1(typeof i=="boolean"),i)}))).reduce((e,t)=>[...e,...t],[])}function createProcessConsentChanges(n){const{finalities:e,getFinalityConsent:t,setFinalityConsent:r,consentCallback:i}=n,a=[];i!==void 0&&a.push(i);function o(c){const{consentCallback:h}=c,f=useConstCallback(p=>h==null?void 0:h(p));a.includes(f)||a.push(f),reactExports.useEffect(()=>()=>{a.splice(a.indexOf(f),1)},[])}return{processConsentChanges:async c=>{if(c.type==="no changes but trigger consent callbacks"){const m=t();if(m===void 0)return;await Promise.all(a.map(v=>v({finalityConsent:m,finalityConsent_prev:m})));return}const h=(()=>{switch(c.type){case"grantAll":return e.map(m=>({finality:m,isConsentGiven:!0}));case"denyAll":return e.map(m=>({finality:m,isConsentGiven:!1}));case"atomic change":return[{finality:c.finality,isConsentGiven:c.isConsentGiven}];case"new finalityConsent explicitly provided":return finalityConsentToChanges({finalityConsent:c.finalityConsent})}})(),f=t();let p=f===void 0?createFullDenyFinalityConsent(e):deepCopy(f);for(const{finality:m,isConsentGiven:v}of h)p=updateFinalityConsent({finalityConsent:p,finality:m,isConsentGiven:v});r({finalityConsent:p,prAllConsentCallbacksRun:Promise.all(a.map(m=>m({finalityConsent:p,finalityConsent_prev:f}))).then(()=>{})})},useConsentCallback:o}}function createFullDenyFinalityConsent(n){var e;const t={isFullConsent:!1};for(const r of n){const[i,a]=r.split(".");if(a===void 0){t[i]=!1;continue}((e=t[i])!==null&&e!==void 0?e:t[i]={isFullConsent:!1})[a]=!1}return t}function updateFinalityConsent(n){const{finality:e,finalityConsent:t,isConsentGiven:r}=n,[i,a]=e.split(".");assert$1(is());const o=deepCopy(t),{isFullConsent:l}=o,c=i;o[c];const h=__rest$6(o,["isFullConsent",typeof c=="symbol"?c:c+""]);if(a===void 0)return Object.assign(Object.assign({},h),{[i]:r,isFullConsent:r&&!Object.values(h).map(b=>typeof b=="boolean"?b:b.isFullConsent).includes(!1)});const f=deepCopy(t[i]),{isFullConsent:p}=f,m=a;f[m];const v=__rest$6(f,["isFullConsent",typeof m=="symbol"?m:m+""]),C=r&&!Object.keys(v).map(b=>v[b]).includes(!1);return Object.assign(Object.assign({},h),{[i]:Object.assign(Object.assign({},v),{[a]:r,isFullConsent:C}),isFullConsent:C&&!Object.values(h).map(b=>typeof b=="boolean"?b:b.isFullConsent).includes(!1)})}function createStatefulObservable(n){const e=[],{get:t,set:r}=(()=>{let i;function a(o){i=[o],e.forEach(l=>l(o))}return{get:()=>(i===void 0&&(a(n()),assert$1(!is())),i[0]),set:a}})();return Object.defineProperty({current:null,subscribe:i=>(e.push(i),{unsubscribe:()=>e.splice(e.indexOf(i),1)})},"current",{enumerable:!0,get:t,set:r})}function useObservable(n,e){reactExports.useEffect(()=>{const t=[];return n({registerSubscription:r=>t.push(r)}),()=>{t.forEach(r=>r.unsubscribe()),t.length=0}},e)}function useRerenderOnChange(n){const[,e]=reactExports.useState(()=>n.current);useObservable(({registerSubscription:t})=>{const r=n.subscribe(i=>e(()=>i));t(r)},[n])}const{useTranslation:useTranslation$4,addConsentManagementTranslations}=createComponentI18nApi({componentName:"ConsentManagement",frMessages:{"all services pref":"Prfrences pour tous les services.","personal data cookies":"Donnes personnelles et cookies","accept all":"Tout accepter","accept all - title":"Autoriser tous les cookies","refuse all":"Tout refuser","refuse all - title":"Refuser tous les cookies",accept:"Accepter",refuse:"Refuser","confirm choices":"Confirmer mes choix","about cookies":n=>` propos des cookies sur ${n.hostname}`,"welcome message":n=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Bienvenue ! Nous utilisons des cookies pour amliorer votre exprience et les services disponibles sur ce site.",n.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null," ","Pour en savoir plus, visitez la page"," ",React.createElement(e,Object.assign({},n.personalDataPolicyLinkProps),"Donnes personnelles et cookies"),".")," Vous pouvez,  tout moment, avoir le contrle sur les cookies que vous souhaitez activer.")},customize:"Personnaliser","customize cookies - title":"Personnaliser les cookies","consent modal title":"Panneau de gestion des cookies","cookies management":"Gestion des cookies","personal data":"Donnes personnelles","preferences for all services":n=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Prfrences pour tous les services.",React.createElement("br",null),n.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},n.personalDataPolicyLinkProps),"Donnes personnelles et cookies"))},"see more details":"Voir plus de dtails","hide details":"Cacher les dtails","mandatory cookies":"Cookies obligatoires","mandatory cookies - description":"Ce site utilise des cookies ncessaires  son bon fonctionnement qui ne peuvent pas tre dsactivs.","confirm my choices":"Confirmer mes choix"}});addConsentManagementTranslations({lang:"en",messages:{"all services pref":"Preferences for all services.","personal data cookies":"Personal data and cookies","accept all":"Accept all","accept all - title":"Accept all cookies","refuse all":"Refuse all","refuse all - title":"Refuse all cookies",accept:"Accept",refuse:"Refuse","confirm choices":"Confirm my choices","about cookies":n=>`About cookies on ${n.hostname}`,"welcome message":n=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Welcome to our website! We use cookies to improve your experience and the services available services available on this site.",n.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null,"To learn more, visit the"," ",React.createElement(e,Object.assign({},n.personalDataPolicyLinkProps),'"Personal Data and Cookies"')," ","page.")," You can, at any time, have control over which cookies you wish to enable at any time.")},customize:"Customize","customize cookies - title":"Customize cookies","consent modal title":"Cookie management panel","cookies management":"Cookies management","preferences for all services":n=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Preferences for all services ",React.createElement("br",null),n.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},n.personalDataPolicyLinkProps),"Personal data and cookies"))},"see more details":"See more details","hide details":"Hide details","mandatory cookies":"Mandatory cookies","mandatory cookies - description":"This site uses cookies necessary for its proper functioning which cannot be deactivated.","confirm my choices":"Confirm my choices"}});function createConsentBanner(n){const{personalDataPolicyLinkProps:e,processConsentChanges:t,consentModalButtonProps:r}=n;function i(){const{t:a}=useTranslation$4(),[o,l]=reactExports.useState(""),[c,h]=reactExports.useState(!1);reactExports.useEffect(()=>{isBrowser&&l(location.host)},[]);const f="fr-consent-banner";return React.createElement(React.Fragment,null,React.createElement("div",{id:f,className:fr.cx("fr-consent-banner")},React.createElement("h2",{className:fr.cx("fr-h6")},a("about cookies",{hostname:o})),React.createElement("div",null,React.createElement("p",{className:fr.cx("fr-text--sm")},a("welcome message",{personalDataPolicyLinkProps:e}))),React.createElement("ul",{className:fr.cx("fr-consent-banner__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${f}-button-accept-all`,className:fr.cx("fr-btn"),title:a("accept all - title"),onClick:async()=>{h(!0),await t({type:"grantAll"}),h(!1)},disabled:c},a("accept all"))),React.createElement("li",null,React.createElement("button",{id:`${f}-button-refuse-app`,className:fr.cx("fr-btn"),title:a("refuse all - title"),onClick:()=>{h(!0),t({type:"denyAll"}),h(!1)},disabled:c},a("refuse all"))),React.createElement("li",null,React.createElement("button",Object.assign({id:`${f}-button-customize`,className:fr.cx("fr-btn","fr-btn--secondary"),title:a("customize cookies - title"),disabled:c},r),a("customize"))))))}return{ConsentBanner:i}}function useIsModalOpen(n,e){const{id:t,isOpenedByDefault:r}=n,[i,a]=reactExports.useState(r),o=useConstCallback(()=>e);return reactExports.useEffect(()=>{const l=[],c=p=>{const m=()=>{a(!1),setTimeout(()=>{var x,T;(T=(x=o())===null||x===void 0?void 0:x.onConceal)===null||T===void 0||T.call(x)},0)},v=()=>{var x,T;a(!0),(T=(x=o())===null||x===void 0?void 0:x.onDisclose)===null||T===void 0||T.call(x)};p.addEventListener("dsfr.conceal",m),p.addEventListener("dsfr.disclose",v);const C=()=>{p.removeEventListener("dsfr.conceal",m),p.removeEventListener("dsfr.disclose",v)};l.push(C);const b=new MutationObserver(x=>{x.find(P=>Array.from(P.removedNodes).indexOf(p)!==-1)!==void 0&&(l.splice(l.indexOf(C),1),b.disconnect(),l.splice(l.indexOf(S),1),a(!1),h({isInitialCall:!1}))});b.observe(document,{childList:!0,subtree:!0});const S=()=>b.disconnect();l.push(S)},h=p=>{const{isInitialCall:m}=p;m&&assert$1(!r,[`The ${t} modal isn't initially mounted,`,`it's ok but in this case ${symToStr({isOpenedByDefault:r})} must be set to false.`,"This limitation is to prevent inconsistent state in SSR setups."].join(" "));const v=new MutationObserver((b,S)=>{const x=b.map(T=>Array.from(T.addedNodes)).reduce((T,P)=>T.concat(P),[]).find(T=>T.nodeType===Node.ELEMENT_NODE&&T.nodeName==="DIALOG"&&T.id===t);x!==void 0&&(S.disconnect(),l.splice(l.indexOf(C),1),c(x),r&&a(!0))});v.observe(document,{childList:!0,subtree:!0});const C=()=>v.disconnect();l.push(C)},f=document.getElementById(t);return f!==null?c(f):h({isInitialCall:!0}),()=>{l.forEach(p=>p())}},[t]),i}function objectKeys(n){return Object.keys(n)}function exclude(n){const e=n instanceof Object?t=>n.indexOf(t)<0:t=>t!==n;return function(t){return e(t)}}function useConst(n){const[e]=reactExports.useState(n);return e}function createConsentManagement$1(n){const{finalityDescription:e,personalDataPolicyLinkProps:t,useFinalityConsent:r,processConsentChanges:i,finalities:a}=n,o=createModal({isOpenedByDefault:!1,id:"fr-consent-modal"});function l(){const m=useLang(),{t:v}=useTranslation$4(),C=reactExports.useMemo(()=>typeof e=="function"?e({lang:m}):e,[m]),{processLocalConsentChange:b,localFinalityConsent:S}=function(){const k=r(),F=useConst(()=>createStatefulObservable(()=>k??createFullDenyFinalityConsent(a)));useRerenderOnChange(F),reactExports.useEffect(()=>{k!==void 0&&(F.current=k)},[k]);const{processConsentChanges:U}=createProcessConsentChanges({consentCallback:void 0,finalities:a,getFinalityConsent:()=>F.current,setFinalityConsent:({finalityConsent:N})=>F.current=N});return{processLocalConsentChange:U,localFinalityConsent:F.current}}(),[x,T]=reactExports.useState(!1),P=L=>async()=>{switch(T(!0),L){case"apply local changes":await i({type:"new finalityConsent explicitly provided",finalityConsent:S});break;case"denyAll":case"grantAll":b({type:L}),await i({type:L});break}T(!1),o.close()};return React.createElement(o.Component,{title:v("consent modal title"),size:"large"},React.createElement("div",null,React.createElement("div",{className:fr.cx("fr-consent-service","fr-consent-manager__header")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},v("preferences for all services",{personalDataPolicyLinkProps:t})),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-btns-group","fr-btns-group--inline","fr-btns-group--right")},React.createElement("button",{id:`${o.id}-button-accept-all`,title:v("accept all - title"),className:fr.cx("fr-btn"),onClick:P("grantAll"),disabled:x},v("accept all"))," ",React.createElement("button",{id:`${o.id}-button-refuse-all`,title:v("refuse all - title"),className:fr.cx("fr-btn","fr-btn--secondary"),disabled:x,onClick:P("denyAll")},v("refuse all")))))),React.createElement(c,{title:v("mandatory cookies"),description:v("mandatory cookies - description"),finalityConsent:!0,onChange:void 0,subFinalities:void 0}),objectKeys(C).map(L=>({finality:(assert$1(typeof L=="string"),L),wrap:C[L]})).map(({finality:L,wrap:k})=>React.createElement(c,{key:L,title:k.title,description:k.description,subFinalities:k.subFinalities,onChange:({subFinality:F,isConsentGiven:U})=>(F!==void 0?[`${L}.${F}`]:k.subFinalities===void 0?[L]:Object.keys(k.subFinalities).map(z=>`${L}.${z}`)).forEach(z=>b({type:"atomic change",finality:z,isConsentGiven:U})),finalityConsent:S[L]})),React.createElement("ul",{className:fr.cx("fr-consent-manager__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${o.id}-button-confirm`,className:fr.cx("fr-btn"),disabled:x,onClick:P("apply local changes")},v("confirm choices"))))))}function c(m){const{title:v,description:C,subFinalities:b,finalityConsent:S,onChange:x}=m,{t:T}=useTranslation$4(),{legendId:P,descriptionId:L,acceptInputId:k,refuseInputId:F,subFinalityDivId:U}=function(){const j=reactExports.useId(),J=`finality-${j}-legend`,X=`finality-${j}-desc`,te=`consent-finality-${j}-accept`,H=`consent-finality-${j}-refuse`,oe=`finality-${j}-collapse`;return{legendId:J,descriptionId:X,acceptInputId:te,refuseInputId:H,subFinalityDivId:oe}}(),z=reactExports.useMemo(()=>typeof S=="boolean"?S?"full consent":"full refusal":S.isFullConsent?"full consent":Object.keys(S).filter(exclude("isFullConsent")).map(q=>S[q]).includes(!0)?"partial consent":"full refusal",[S]),[N,K]=reactExports.useState(!0);return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{"aria-labelledby":`${P} ${L}`,role:"group",className:fr.cx("fr-fieldset")},React.createElement("legend",{id:P,className:fr.cx("fr-consent-service__title")},v),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:k,checked:z==="full consent"},x===void 0?{disabled:!0}:{onChange:()=>x({subFinality:void 0,isConsentGiven:!0})})),React.createElement("label",{className:"fr-label",htmlFor:k},T("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:F,checked:z==="full refusal"},x===void 0?{disabled:!0}:{onChange:()=>x({subFinality:void 0,isConsentGiven:!1})})),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:F},T("refuse")))),C!==void 0&&React.createElement("p",{className:fr.cx("fr-consent-service__desc")},C),b!==void 0&&(assert$1(typeof S!="boolean"),assert$1(x!==void 0),React.createElement(React.Fragment,null,React.createElement("div",{className:fr.cx("fr-consent-service__collapse")},React.createElement("button",{className:fr.cx("fr-consent-service__collapse-btn"),"aria-expanded":"false","aria-describedby":P,"aria-controls":U,onClick:()=>K(!N)},T(N?"see more details":"hide details"))),React.createElement("div",{className:fr.cx("fr-consent-services","fr-collapse"),id:U},Object.entries(b).map(([q,j])=>React.createElement(h,{key:q,title:j,isConsentGiven:S[q],onChange:({isConsentGiven:J})=>x({subFinality:q,isConsentGiven:J})})))))))}function h(m){const{title:v,onChange:C,isConsentGiven:b}=m,{t:S}=useTranslation$4(),{acceptInputId:x,refuseInputId:T}=function(){const L=reactExports.useId(),k=`consent-finality-${L}-service-accept`,F=`consent-finality-${L}-service-refuse`;return{acceptInputId:k,refuseInputId:F}}();return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},v),React.createElement("div",{className:"fr-consent-service__radios fr-fieldset--inline"},React.createElement("div",{className:"fr-radio-group"},React.createElement("input",{type:"radio",id:x,checked:b,onChange:()=>C({isConsentGiven:!0})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:x},S("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",{type:"radio",id:T,checked:!b,onChange:()=>C({isConsentGiven:!1})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:T},S("refuse"))))))}const f=o.buttonProps;function p(){return useIsModalOpen(o)}return{ConsentManagement:l,consentModalButtonProps:f,useIsConsentManagementOpen:p}}function createConsentBannerAndConsentManagement(n){const{finalityDescription:e,useFinalityConsent:t,processConsentChanges:r,personalDataPolicyLinkProps:i,finalities:a}=n,{ConsentManagement:o,consentModalButtonProps:l,useIsConsentManagementOpen:c}=createConsentManagement$1({finalityDescription:e,personalDataPolicyLinkProps:i,useFinalityConsent:t,processConsentChanges:r,finalities:a}),{ConsentBanner:h}=createConsentBanner({personalDataPolicyLinkProps:i,processConsentChanges:r,consentModalButtonProps:l}),{FooterConsentManagementItem:f}=createFooterConsentManagementItem({consentModalButtonProps:l});let p=()=>{r({type:"no changes but trigger consent callbacks"}),p=void 0};function m(){const[C,b]=reactExports.useReducer(()=>!0,!1);reactExports.useEffect(()=>{p==null||p(),b()},[]);const S=t(),x=c();return C?React.createElement(React.Fragment,null,S===void 0&&!x&&React.createElement(h,null),React.createElement(o,null)):null}const{FooterPersonalDataPolicyItem:v}=createFooterPersonalDataPolicyItem({personalDataPolicyLinkProps:i});return{ConsentBannerAndConsentManagement:m,FooterConsentManagementItem:f,FooterPersonalDataPolicyItem:v}}function createFooterConsentManagementItem(n){const{consentModalButtonProps:e}=n;function t(){const{t:r}=useTranslation$4();return React.createElement(FooterBottomItem,{bottomItem:{buttonProps:e,text:r("cookies management")}})}return{FooterConsentManagementItem:t}}function createFooterPersonalDataPolicyItem(n){const{personalDataPolicyLinkProps:e}=n;function t(){const{t:r}=useTranslation$4();if(e===void 0)throw new Error(["You should provide a personalDataPolicyLinkProps to createConsentManagement if","you want to add a link to the personal data policy in the footer"].join(" "));return React.createElement(FooterBottomItem,{bottomItem:{text:r("personal data"),linkProps:e}})}return{FooterPersonalDataPolicyItem:t}}const defaultLocalStorageKeyPrefix="@codegouvfr/react-dsfr finalityConsent";function createConsentManagement(n){const{finalityDescription:e,personalDataPolicyLinkProps:t,consentCallback:r,localStorageKeyPrefix:i=defaultLocalStorageKeyPrefix}=n,a=getFinalitiesFromFinalityDescription({finalityDescription:typeof e=="function"?e({lang:"fr"}):e}),o=`${i} ${a.join("-")}`,l=createStatefulObservable(()=>{if(!isBrowser)return;const b=localStorage.getItem(o);if(b!==null)return JSON.parse(b)}),{processConsentChanges:c,useConsentCallback:h}=createProcessConsentChanges({consentCallback:r,finalities:a,getFinalityConsent:()=>l.current,setFinalityConsent:({finalityConsent:b,prAllConsentCallbacksRun:S})=>{localStorage.setItem(o,JSON.stringify(b)),S.then(()=>l.current=b)}});function f(){useRerenderOnChange(l);const[b,S]=reactExports.useReducer(()=>!0,!0);if(reactExports.useEffect(()=>{S()},[]),!!b)return l.current}const{useConsent:p}=createUseConsent({useFinalityConsent:f,processConsentChanges:c,useConsentCallback:h}),{ConsentBannerAndConsentManagement:m,FooterConsentManagementItem:v,FooterPersonalDataPolicyItem:C}=createConsentBannerAndConsentManagement({finalityDescription:e,personalDataPolicyLinkProps:t,processConsentChanges:c,useFinalityConsent:f,finalities:a});return{useConsent:p,ConsentBannerAndConsentManagement:m,FooterConsentManagementItem:v,FooterPersonalDataPolicyItem:C}}function getFinalitiesFromFinalityDescription(n){const{finalityDescription:e}=n,t=[];for(const r in e){const i=e[r],{subFinalities:a}=i;if(a===void 0){t.push(r);continue}for(const o in a)t.push(`${r}.${o}`)}return t}function isAmong(n,e){for(const t of n)if(t===e)return!0;return!1}const data_fr_theme="data-fr-theme",data_fr_scheme="data-fr-scheme",rootColorSchemeStyleTagId="dsfr-root-color-scheme";var define_process_env_default={};const $clientSideIsDark=createStatefulObservable(()=>{if(typeof process=="object"&&define_process_env_default.JEST_WORKER_ID!==void 0)return!1;throw new Error(["react-dsfr not initialized.","Refer to the documentation for setup instructions","If it used to work but after an update you're getting this error","it usually means that you have multiple copies of @codegouvfr/react-dsfr in your node_modules","@codegouvfr/react-dsfr is a singleton, try removing your lock file and node_module."].join(" "))}),$isAfterFirstEffect=createStatefulObservable(()=>!1);function getSystemColorScheme(){return typeof window.matchMedia=="function"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function getCurrentIsDarkFromHtmlAttribute(){const n=document.documentElement.getAttribute(data_fr_theme);switch(n){case null:return;case"light":return!1;case"dark":return!0}assert$1(!1,`Unrecognized ${data_fr_theme} attribute value: ${n}`)}function startClientSideIsDarkLogic(n){const{registerEffectAction:e,colorSchemeExplicitlyProvidedAsParameter:t,doCheckNonce:r=!1,trustedTypesPolicyName:i}=n;e:{const h="scheme-website-config-default";if(localStorage.getItem(h)===t)break e;localStorage.removeItem("scheme"),localStorage.setItem(h,t)}const{clientSideIsDark:a,ssrWasPerformedWithIsDark:o}=(()=>{var h,f;const p=getCurrentIsDarkFromHtmlAttribute();if(p!==void 0)return{clientSideIsDark:p,ssrWasPerformedWithIsDark:(h=window.ssrWasPerformedWithIsDark)!==null&&h!==void 0?h:p};const m=(()=>{if(t!=="system")switch(t){case"dark":return!0;case"light":return!1}})(),v=(()=>{const b=localStorage.getItem("scheme");if(b!==null&&(assert$1(isAmong(["dark","light","system"],b)),b!=="system"))switch(b){case"dark":return!0;case"light":return!1}})(),C=getSystemColorScheme()==="dark";return{ssrWasPerformedWithIsDark:m??!1,clientSideIsDark:(f=v??m)!==null&&f!==void 0?f:C}})(),l=window.trustedTypes,c=typeof l<"u"?l.createPolicy(i,{createHTML:h=>h}):{createHTML:h=>h};$clientSideIsDark.current=a,document.documentElement.setAttribute(data_fr_scheme,(()=>{const h=localStorage.getItem("scheme");return h===null?t:(assert$1(isAmong(["dark","light","system"],h)),h)})()),document.documentElement.setAttribute(data_fr_theme,a?"dark":"light"),new MutationObserver(()=>{const h=getCurrentIsDarkFromHtmlAttribute();assert$1(h!==void 0),$clientSideIsDark.current=h}).observe(document.documentElement,{attributes:!0,attributeFilter:[data_fr_theme]});{const h=f=>{};h($clientSideIsDark.current),$clientSideIsDark.subscribe(h)}{const h=f=>{var p;const m=window.ssrNonce;if(r&&!m)return;(p=document.getElementById(rootColorSchemeStyleTagId))===null||p===void 0||p.remove();const v=document.createElement("style");v.id=rootColorSchemeStyleTagId,m&&v.setAttribute("nonce",m),v.innerHTML=c.createHTML(`:root { color-scheme: ${f?"dark":"light"}; }`),document.head.appendChild(v)};h($clientSideIsDark.current),$clientSideIsDark.subscribe(h)}{const h=f=>{var p;const m="theme-color";(p=document.querySelector(`meta[name=${m}]`))===null||p===void 0||p.remove();const v=document.createElement("meta");v.name=m,v.content=fr.colors.getHex({isDark:f}).decisions.background.default.grey.default,document.head.appendChild(v)};h($clientSideIsDark.current),$clientSideIsDark.subscribe(h)}e(()=>$isAfterFirstEffect.current=!0)}class Deferred{constructor(){this.isPending=!0;let e,t;this.pr=new Promise((r,i)=>{e=a=>{overwriteReadonlyProp(this,"isPending",!1),r(a)},t=a=>{overwriteReadonlyProp(this,"isPending",!1),i(a)}}),this.resolve=e,this.reject=t}}let isStarted=!1;async function start(n){const{defaultColorScheme:e,verbose:t,doCheckNonce:r,trustedTypesPolicyName:i}=n;if(assert$1(isBrowser),isStarted)return;isStarted=!0;const a=o=>o();startClientSideIsDarkLogic({colorSchemeExplicitlyProvidedAsParameter:e,registerEffectAction:a,doCheckNonce:r,trustedTypesPolicyName:i}),window.dsfr={verbose:t,mode:"react"},await __vitePreload(()=>import("./dsfr.module-tIFZDML3.js").then(o=>o.d),[]),dDsfrLoaded.resolve(),a(()=>{window.dsfr.start()})}const dDsfrLoaded=new Deferred,prDsfrLoaded=dDsfrLoaded.pr;async function startEulerianAnalytics(n){return await prDsfrLoaded,window.dsfr.analytics=n,await __vitePreload(()=>import("./analytics.module.min-DWMcLmvP.js").then(e=>e.a),[]),await dsfr.analytics.readiness,{enable:()=>{window.dsfr.analytics.opt.enable()},disable:()=>{window.dsfr.analytics.opt.disable()}}}const prEulerianApi=startEulerianAnalytics({domain:"acwg.cartes.gouv.fr",site:{environment:"development",entity:"IGN"}}),{FooterConsentManagementItem,FooterPersonalDataPolicyItem}=createConsentManagement({finalityDescription:()=>({eulerianAnalytics:{title:"Eulerian Analytics",description:["En cliquant sur 'Accepter', vous consentez  l'utilisation des cookies pour nous","aider  amliorer notre site web en collectant et en rapportant des informations","sur votre utilisation grce  Eulerian Analytics. Si vous n'tes pas d'accord, veuillez","cliquer sur 'Refuser'. Votre exprience de navigation ne sera pas affecte."].join(" ")}}),personalDataPolicyLinkProps:{href:"/donnees-personnelles"},consentCallback:async({finalityConsent:n})=>{const e=await prEulerianApi;n.eulerianAnalytics?(console.log("Enabling eulerian analytics"),e.enable()):(console.log("Disabling eulerian analytics"),e.disable())}}),logoIgn="/cartes.gouv.fr-guichet-collaboratif/assets/logo-ign-kaPCchhZ.png",logoMinistereTransformation="/cartes.gouv.fr-guichet-collaboratif/assets/logo-ministere-transformation-xGizOUIw.jpg",logoMinistereEcologie="/cartes.gouv.fr-guichet-collaboratif/assets/logo-ministere-ecologie-Wi8Q3WGk.jpg",logoCnig="/cartes.gouv.fr-guichet-collaboratif/assets/logo-rf-cnig-DbQVlK70.jpg",AppFooter=()=>jsxRuntimeExports.jsx(Footer,{accessibility:"partially compliant",accessibilityLinkProps:{href:"/accessibilite"},brandTop:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Rpublique",jsxRuntimeExports.jsx("br",{}),"Franaise"]}),contentDescription:`
                Cartes.gouv.fr est dvelopp par lInstitut national de linformation gographique et forestire (IGN) et ses partenaires. Le site sappuie sur la Goplateforme, la nouvelle infrastructure publique, ouverte et collaborative des donnes gographiques.
            `,bottomItems:[{linkProps:{href:"/conditions-generales-d-utilisation"},text:"Conditions gnrales dutilisation"},jsxRuntimeExports.jsx(FooterPersonalDataPolicyItem,{},"footer-personal-data-policy-item"),jsxRuntimeExports.jsx(FooterConsentManagementItem,{},"footer-consent-management-item"),headerFooterDisplayItem],homeLinkProps:{href:"/",title:"Accueil - cartes.gouv.fr-guichet-collaboratif"},partnersLogos:{sub:[{alt:"IGN",href:"https://www.ign.fr",imgUrl:logoIgn},{alt:"MINISTRE DE LA TRANSFORMATION ET DE LA FONCTION PUBLIQUES",href:"https://www.transformation.gouv.fr/",imgUrl:logoMinistereTransformation},{alt:"MINISTRE DE LA TRANSITION COLOGIQUE ET DE LA COHSION DES TERRITOIRES",href:"https://www.ecologie.gouv.fr/",imgUrl:logoMinistereEcologie},{alt:"Conseil National de lInformation Golocalise",href:"https://cnig.gouv.fr/",imgUrl:logoCnig}]}}),AppFooter$1=reactExports.memo(AppFooter);var __rest$5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Badge=reactExports.memo(reactExports.forwardRef((n,e)=>{const{id:t,className:r,as:i="p",style:a,severity:o,small:l=!1,noIcon:c=!1,children:h}=n,f=__rest$5(n,["id","className","as","style","severity","small","noIcon","children"]);assert$1();const p=useAnalyticsId({defaultIdPrefix:"fr-badge",explicitlyProvidedId:t});return React.createElement(i,Object.assign({className:cx$1(fr.cx("fr-badge",o!==void 0&&`fr-badge--${o}`,{"fr-badge--sm":l},{"fr-badge--no-icon":c||o===void 0}),r),id:p,style:a,ref:e},f),React.createElement(React.Fragment,null,h))}));Badge.displayName=symToStr({Badge});function generateValidHtmlId(n){const{text:e,fallback:t}=n;if(typeof e!="string"||e==="")return t!==void 0?`-${t}`:"";let r=e.replace(/\s+/g,"");return r=r.replace(/[^a-zA-Z0-9]/g,"_"),`-${r}`}var __rest$4=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Menu=reactExports.memo(reactExports.forwardRef((n,e)=>{const{id:t,classes:r={},style:i,links:a}=n,o=__rest$4(n,["id","classes","style","links"]);assert$1();const{Link:l}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-menu"),r.root),style:i,id:t,ref:e},o),React.createElement("ul",{className:cx$1(fr.cx("fr-menu__list"),r.list)},a.map(({text:c,linkProps:h,isActive:f=!1},p)=>{var m;return React.createElement("li",{key:p},React.createElement(l,Object.assign({},h,{id:(m=h.id)!==null&&m!==void 0?m:`${t}-link${generateValidHtmlId({text:c})}-${p}`,className:cx$1(fr.cx("fr-nav__link"),h.className)},f&&{"aria-current":"page"}),c))})))}));Menu.displayName=symToStr({Menu});var __rest$3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const MegaMenu=reactExports.memo(reactExports.forwardRef((n,e)=>{var t;const{id:r,classes:i={},style:a,leader:o,categories:l}=n,c=__rest$3(n,["id","classes","style","leader","categories"]);assert$1();const{t:h}=useTranslation$3(),{Link:f}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-mega-menu"),i.root),style:a,tabIndex:-1,id:r,ref:e},c),React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-lg")},React.createElement("button",{className:fr.cx("fr-link--close","fr-link"),"aria-controls":r},h("close")),React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row-lg--gutters")},o!==void 0&&React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-8","fr-col-offset-lg-4--right","fr-mb-4v")},React.createElement("div",{className:cx$1(fr.cx("fr-mega-menu__leader"),i.leader)},React.createElement("h4",{className:fr.cx("fr-h4","fr-mb-2v")},o.title),React.createElement("p",{className:fr.cx("fr-hidden","fr-displayed-lg")},o.paragraph),o.link!==void 0&&React.createElement(f,Object.assign({},o.link.linkProps,{id:(t=o.link.linkProps.id)!==null&&t!==void 0?t:`${r}-leader-link${generateValidHtmlId({text:o.link.text})}`,className:cx$1(fr.cx("fr-link","fr-icon-arrow-right-line","fr-link--icon-right","fr-link--align-on-content"),o.link.linkProps.className)}),o.link.text))),l.map(({categoryMainLink:p,categoryMainText:m,links:v},C)=>{var b;return React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-3"),key:C},p!==void 0&&React.createElement("h5",{className:cx$1(fr.cx("fr-mega-menu__category"),i.category)},React.createElement(f,Object.assign({},p.linkProps,{id:(b=p.linkProps.id)!==null&&b!==void 0?b:`${r}-category-link${generateValidHtmlId({text:p.text})}-${C}`,className:cx$1(fr.cx("fr-nav__link"),p.linkProps.className)}),p.text)),m!==void 0&&React.createElement("h5",{className:cx$1(fr.cx("fr-mega-menu__category","fr-nav__link"),i.category)},m),React.createElement("ul",{className:cx$1(fr.cx("fr-mega-menu__list"),i.list)},v.map(({linkProps:S,text:x,isActive:T},P)=>{var L;return React.createElement("li",{key:P},React.createElement(f,Object.assign({},S,{id:(L=S.id)!==null&&L!==void 0?L:`${r}-link${generateValidHtmlId({text:x})}-${C}-${P}`,className:cx$1(fr.cx("fr-nav__link"),S.className)},T?{"aria-current":"page"}:{}),x))})))}))))}));MegaMenu.displayName=symToStr({MegaMenu});const{useTranslation:useTranslation$3,addMegaMenuTranslations}=createComponentI18nApi({componentName:symToStr({MegaMenu}),frMessages:{close:"Fermer"}});addMegaMenuTranslations({lang:"en",messages:{close:"Close"}});var __rest$2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const MainNavigation=reactExports.memo(reactExports.forwardRef((n,e)=>{const{className:t,items:r,classes:i={},style:a,id:o}=n,l=__rest$2(n,["className","items","classes","style","id"]);assert$1();const{t:c}=useTranslation$2(),{Link:h}=getLink(),f=useAnalyticsId({explicitlyProvidedId:o,defaultIdPrefix:"main-navigation"}),p=m=>`${f}-menu-${m}`;return React.createElement("nav",Object.assign({id:f,className:cx$1(fr.cx("fr-nav"),i.root,t),style:a,role:"navigation","aria-label":c("main menu"),ref:e},l),React.createElement("ul",{className:cx$1(fr.cx("fr-nav__list"),i.list)},r.map(({className:m,text:v,isActive:C=!1,linkProps:b,menuLinks:S=[],megaMenu:x,buttonProps:T={}},P)=>{var L,k;return React.createElement("li",{key:P,className:cx$1(fr.cx("fr-nav__item"),i.item,m)},b!==void 0?React.createElement(h,Object.assign({},b,{id:(L=b.id)!==null&&L!==void 0?L:`${f}-link-${P}`,className:cx$1(fr.cx("fr-nav__link"),i.link,b.className)},C&&{"aria-current":"page"}),v):React.createElement(React.Fragment,null,React.createElement("button",Object.assign({},T,{id:(k=T.id)!==null&&k!==void 0?k:`${f}-button-${P}`,className:cx$1(fr.cx("fr-nav__btn"),T.className,i.btn),"aria-expanded":!1,"aria-controls":p(P)},C&&{"aria-current":!0}),v),S.length!==0&&React.createElement(Menu,{classes:{root:cx$1(fr.cx("fr-collapse"),i.root),list:i.menuList},links:S,id:p(P)}),x!==void 0&&React.createElement(MegaMenu,{classes:{root:cx$1(fr.cx("fr-collapse"),i.megaMenu),leader:i.megaMenuLeader,category:i.megaMenuCategory,list:i.menuList},id:p(P),leader:x.leader,categories:x.categories})))})))}));MainNavigation.displayName=symToStr({MainNavigation});const{useTranslation:useTranslation$2,addMainNavigationTranslations}=createComponentI18nApi({componentName:symToStr({MainNavigation}),frMessages:{"main menu":"Menu principal"}});addMainNavigationTranslations({lang:"en",messages:{"main menu":"Main menu"}});var __rest$1=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const SearchBar=reactExports.memo(reactExports.forwardRef((n,e)=>{const{className:t,defaultValue:r,id:i,label:a,big:o=!1,classes:l={},style:c,renderInput:h=({className:T,defaultValue:P,id:L,placeholder:k,type:F})=>React.createElement("input",{className:T,defaultValue:P,id:L,placeholder:k,type:F}),clearInputOnSearch:f=!1,allowEmptySearch:p=!1,onButtonClick:m}=n,v=__rest$1(n,["className","defaultValue","id","label","big","classes","style","renderInput","clearInputOnSearch","allowEmptySearch","onButtonClick"]);assert$1();const{t:C}=useTranslation$1(),b=a??C("label"),S=useAnalyticsId({defaultIdPrefix:"fr-search-bar",explicitlyProvidedId:i}),x=`search-${S}-input`;return React.createElement("div",Object.assign({id:S,className:cx$1(fr.cx("fr-search-bar",o&&"fr-search-bar--lg"),l.root,t),role:"search",ref:e,style:c},v),React.createElement("label",{className:cx$1(fr.cx("fr-label"),l.label),htmlFor:x},b),h({className:fr.cx("fr-input"),defaultValue:r,placeholder:b,type:"search",id:x}),React.createElement(SearchButton,{clearInputOnSearch:f,id:`${S}-button`,searchInputId:x,allowEmptySearch:p,onClick:m}))}));SearchBar.displayName=symToStr({SearchBar});const{useTranslation:useTranslation$1,addSearchBarTranslations}=createComponentI18nApi({componentName:symToStr({SearchBar}),frMessages:{label:"Rechercher"}});addSearchBarTranslations({lang:"en",messages:{label:"Search"}});function observeInputValue(n){const{inputElement:e,callback:t}=n,r=[];{const a=Object.getOwnPropertyDescriptor(e,"value");r.push(()=>{assert$1(a!==void 0),Object.defineProperty(e,"value",a)});const o=Object.getPrototypeOf(e),l=Object.getOwnPropertyDescriptor(o,"value");Object.defineProperty(e,"value",{get:function(...c){return l.get.apply(this,c)},set:function(...c){l.set.apply(this,c);const h=this.value;return t(),h}})}e.addEventListener("input",(()=>{const a=()=>{t()};return r.push(()=>e.removeEventListener("input",a)),a})()),e.addEventListener("keydown",(()=>{const a=o=>{if(o.key==="Escape"){const l=setTimeout(()=>{r.splice(r.indexOf(c),1),t()},50),c=()=>{clearTimeout(l)};r.push(c)}};return r.push(()=>e.removeEventListener("keyup",a)),a})());function i(){r.forEach(a=>a())}return{cleanup:i}}function SearchButton(n){const{searchInputId:e,clearInputOnSearch:t,allowEmptySearch:r,onClick:i,id:a}=n,{t:o}=useTranslation$1(),[,l]=reactExports.useReducer(b=>b+1,0),[{focusInputElement:c,getInputValue:h,resetInputValue:f,getIsInputFocused:p},m]=reactExports.useState(()=>({getInputValue:id(()=>""),resetInputValue:id(()=>{}),focusInputElement:id(()=>{}),getIsInputFocused:id(()=>!1)})),v=useConstCallback(()=>{const b=h();if(!r&&b===""){c();return}i==null||i(b),t&&f()}),C=i===void 0;return reactExports.useEffect(()=>{const b=document.getElementById(e);assert$1(b!==null,`${e} should be mounted`),assert$1("value"in b&&typeof b.value=="string",`${e} is not an HTML input`),assert$1(is()),m({focusInputElement:()=>b.focus(),getInputValue:()=>b.value,resetInputValue:()=>b.value="",getIsInputFocused:()=>document.activeElement===b});const S=[];{const{cleanup:x}=observeInputValue({inputElement:b,callback:()=>l()});S.push(x)}return C&&(b.addEventListener("focus",(()=>{const x=()=>l();return S.push(()=>b.removeEventListener("focus",x)),x})()),b.addEventListener("blur",(()=>{const x=()=>l();return S.push(()=>b.removeEventListener("blur",x)),x})())),C||(b.addEventListener("keydown",(()=>{const x=T=>{T.key==="Enter"&&(v(),b.blur())};return S.push(()=>b.removeEventListener("keydown",x)),x})()),b.addEventListener("keydown",(()=>{const x=T=>{T.key==="Escape"&&b.blur()};return S.push(()=>b.removeEventListener("keydown",x)),x})())),()=>{S.forEach(x=>x())}},[e,C]),i===void 0&&(p()||h()!=="")?null:React.createElement("button",{id:a,className:fr.cx("fr-btn"),title:o("label"),onClick:v,style:i!==void 0?void 0:{position:"absolute",right:0}},o("label"))}var __rest=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const headerMenuModalIdPrefix="header-menu-modal",Header=reactExports.memo(reactExports.forwardRef((n,e)=>{const{className:t,id:r,brandTop:i,serviceTitle:a,serviceTagline:o,homeLinkProps:l,navigation:c=void 0,quickAccessItems:h=[],operatorLogo:f,renderSearchInput:p,clearSearchInputOnSearch:m=!1,allowEmptySearch:v=!1,onSearchButtonClick:C,classes:b={},style:S,disableDisplay:x=!1}=n,T=__rest(n,["className","id","brandTop","serviceTitle","serviceTagline","homeLinkProps","navigation","quickAccessItems","operatorLogo","renderSearchInput","clearSearchInputOnSearch","allowEmptySearch","onSearchButtonClick","classes","style","disableDisplay"]);assert$1();const P=r??"fr-header",L=`${headerMenuModalIdPrefix}-${P}`,k=`${P}-menu-button`,F=`${P}-search-modal`,U=`${P}-search-input`,z=`${P}-search-label`,N=p!==void 0||C!==void 0;setBrandTopAndHomeLinkProps({brandTop:i,homeLinkProps:l});const{t:K}=useTranslation(),{t:q}=useTranslation$1(),{Link:j}=getLink(),J=te=>React.createElement("ul",{className:fr.cx("fr-btns-group")},h.map((H,oe)=>React.createElement("li",{key:oe},(()=>{const he=typeGuard(H,H instanceof Object&&"text"in H)?React.createElement(HeaderQuickAccessItem,{quickAccessItem:H}):H;return he===null?null:reactExports.cloneElement(he,{id:`${P}-quick-access-item-${oe}${(()=>{switch(te){case"mobile":return"-mobile";case"desktop":return""}assert$1()})()}`})})()))),X=(f==null?void 0:f.linkProps)!==void 0;return React.createElement(React.Fragment,null,!x&&React.createElement(Display,null),React.createElement("header",Object.assign({role:"banner",id:P,className:cx$1(fr.cx("fr-header"),b.root,t),ref:e,style:S},T),React.createElement("div",{className:cx$1(fr.cx("fr-header__body"),b.body)},React.createElement("div",{className:cx$1(fr.cx("fr-container"),b.container)},React.createElement("div",{className:cx$1(fr.cx("fr-header__body-row"),b.bodyRow)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand",!X&&"fr-enlarge-link"),b.brand)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand-top"),b.brandTop)},React.createElement("div",{className:cx$1(fr.cx("fr-header__logo"),b.logo)},(()=>{const te=React.createElement("p",{className:fr.cx("fr-logo")},i);return a!==void 0?te:React.createElement(j,Object.assign({},l),te)})()),f!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__operator",X&&"fr-enlarge-link"),b.operator)},(()=>{const te=React.createElement("img",{className:cx$1(fr.cx("fr-responsive-img"),b.operator),style:(()=>{switch(f.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:f.imgUrl,alt:f.alt});return X?React.createElement(j,Object.assign({},f.linkProps),te):te})()),(h.length>0||c!==void 0||N)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__navbar"),b.navbar)},N&&React.createElement("button",{id:`${P}-search-button`,className:fr.cx("fr-btn--search","fr-btn"),"data-fr-opened":!1,"aria-controls":F,title:q("label")},q("label")),React.createElement("button",{className:fr.cx("fr-btn--menu","fr-btn"),"data-fr-opened":"false","aria-controls":L,"aria-haspopup":"menu",id:k,title:K("menu")},K("menu")))),a!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__service",X&&"fr-enlarge-link"),b.service)},React.createElement(j,Object.assign({},l),React.createElement("p",{className:cx$1(fr.cx("fr-header__service-title"),b.serviceTitle)},a)),o!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-header__service-tagline"),b.serviceTagline)},o))),(h.length>0||N)&&React.createElement("div",{className:fr.cx("fr-header__tools")},h.length>0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__tools-links"),b.toolsLinks)},J("desktop")),N&&React.createElement("div",{className:fr.cx("fr-header__search","fr-modal"),id:F,"aria-labelledby":`${P}-search-bar-button`},React.createElement("div",{className:fr.cx("fr-container","fr-container-lg--fluid")},React.createElement("button",{id:`${P}-search-close-button`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":F,title:K("close")},K("close")),React.createElement("div",{className:fr.cx("fr-search-bar"),role:"search"},React.createElement("label",{className:fr.cx("fr-label"),htmlFor:U,id:z},q("label")),(p??(({className:te,id:H,placeholder:oe,type:he})=>React.createElement("input",{className:te,id:H,placeholder:oe,type:he})))({className:fr.cx("fr-input"),id:U,placeholder:q("label"),type:"search"}),React.createElement(SearchButton,{id:`${P}-search-bar-button`,searchInputId:U,onClick:C,clearInputOnSearch:m,allowEmptySearch:v})))))))),(c!==void 0||h.length!==0)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__menu","fr-modal"),b.menu),id:L,"aria-labelledby":k},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("button",{id:`${P}-mobile-overlay-button-close`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":L,title:K("close")},K("close")),React.createElement("div",{className:cx$1(fr.cx("fr-header__menu-links"),b.menuLinks)},J("mobile")),c!==void 0&&(c instanceof Array?React.createElement(MainNavigation,{id:`${P}-main-navigation`,items:c}):c)))))}));Header.displayName=symToStr({Header});const{useTranslation,addHeaderTranslations}=createComponentI18nApi({componentName:symToStr({Header}),frMessages:{menu:"Menu",close:"Fermer"}});addHeaderTranslations({lang:"en",messages:{close:"Close"}});function HeaderQuickAccessItem(n){const{className:e,quickAccessItem:t,id:r}=n,{Link:i}=getLink();return t.linkProps!==void 0?React.createElement(i,Object.assign({},t.linkProps,{className:cx$1(fr.cx("fr-btn",t.iconId),t.linkProps.className,e),id:r}),t.text):React.createElement("button",Object.assign({},t.buttonProps,{className:cx$1(fr.cx("fr-btn",t.iconId),t.buttonProps.className,e),id:r}),t.text)}function AppHeader(){return jsxRuntimeExports.jsx(Header,{brandTop:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Rpublique",jsxRuntimeExports.jsx("br",{}),"Franaise"]}),homeLinkProps:{href:"#",title:"Accueil - cartes.gouv.fr-guichet-collaboratif"},serviceTitle:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["cartes.gouv.fr-guichet-collaboratif"," ",jsxRuntimeExports.jsx(Badge,{severity:"success",noIcon:!0,as:"span",children:"Bta"})]}),serviceTagline:"Le guichet collaboratif de cartes.gouv.fr",quickAccessItems:[{iconId:"fr-icon-arrow-right-line",linkProps:{href:"https://www.geoportail.gouv.fr/carte",className:"fr-btn--icon-right",target:"_blank",rel:"noreferrer",title:"Accder au Goportail - ouvre une nouvelle fentre"},text:"Accder au Goportail"},{iconId:"fr-icon-arrow-right-line",linkProps:{href:"/catalogue",className:"fr-btn--icon-right",target:"_blank",rel:"noreferrer",title:"Catalogue - ouvre une nouvelle fentre"},text:"Catalogue"},{iconId:"fr-icon-account-fill",linkProps:{href:"/login"},text:"Se connecter"}]})}function AppLayout({children:n}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AppHeader,{}),jsxRuntimeExports.jsx("main",{id:"main",role:"main",children:jsxRuntimeExports.jsx("div",{className:fr.cx("fr-container--fluid"),children:n})}),jsxRuntimeExports.jsx(AppFooter$1,{})]})}function GuichetCollaboratifApp(){return jsxRuntimeExports.jsx(AppLayout,{children:jsxRuntimeExports.jsx(ExtentMap,{})})}const queryClient=new QueryClient,persister=createSyncStoragePersister({storage:window.localStorage});function App(){return jsxRuntimeExports.jsxs(PersistQueryClientProvider,{client:queryClient,persistOptions:{persister},children:[jsxRuntimeExports.jsx(ReactQueryDevtools2,{initialIsOpen:!1}),jsxRuntimeExports.jsx(GuichetCollaboratifApp,{})]})}function startReactDsfr(n){const{defaultColorScheme:e,verbose:t=!1,Link:r,useLang:i,nonce:a,trustedTypesPolicyName:o="react-dsfr"}=n;r!==void 0&&setLink({Link:r}),i!==void 0&&setUseLang({useLang:i}),assert$1(a!=="","nonce cannot be an empty string");const l=a!==void 0;l&&(window.ssrNonce=a),start({defaultColorScheme:e,verbose:t,doCheckNonce:l,trustedTypesPolicyName:o})}startReactDsfr({defaultColorScheme:"system"});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{getDefaultExportFromCjs$1 as g};
